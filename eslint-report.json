(node:24028) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///C:/Users/maito/SpeakSyncMobile/eslint.config.js?mtime=1751802753897 is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to C:\Users\maito\SpeakSyncMobile\package.json.
(Use `node --trace-warnings ...` to show where the warning was created)
[{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\app.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":32,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":33,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":34,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":35,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":37,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":38,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":39,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":40,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":35}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import 'dotenv/config';\r\n\r\nexport default {\r\n  expo: {\r\n    name: \"SpeakSyncMobile\",\r\n    slug: \"SpeakSyncMobile\",\r\n    version: \"1.0.0\",\r\n    orientation: \"portrait\",\r\n    icon: \"./assets/icon.png\",\r\n    userInterfaceStyle: \"light\",\r\n    newArchEnabled: true,\r\n    splash: {\r\n      image: \"./assets/splash-icon.png\",\r\n      resizeMode: \"contain\",\r\n      backgroundColor: \"#ffffff\"\r\n    },\r\n    ios: {\r\n      supportsTablet: true\r\n    },\r\n    android: {\r\n      adaptiveIcon: {\r\n        foregroundImage: \"./assets/adaptive-icon.png\",\r\n        backgroundColor: \"#ffffff\"\r\n      },\r\n      edgeToEdgeEnabled: true\r\n    },\r\n    web: {\r\n      favicon: \"./assets/favicon.png\"\r\n    },\r\n    extra: {\r\n      // Environment variables for the app\r\n      deepgramApiKey: process.env.DEEPGRAM_API_KEY,\r\n      firebaseApiKey: process.env.FIREBASE_API_KEY,\r\n      firebaseAuthDomain: process.env.FIREBASE_AUTH_DOMAIN,\r\n      firebaseProjectId: process.env.FIREBASE_PROJECT_ID,\r\n      firebaseStorageBucket: process.env.FIREBASE_STORAGE_BUCKET,\r\n      firebaseMessagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\r\n      firebaseAppId: process.env.FIREBASE_APP_ID,\r\n      debugMode: process.env.DEBUG_MODE === 'true',\r\n      enableSpeechLogging: process.env.ENABLE_SPEECH_LOGGING === 'true',\r\n    }\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\browser-extension\\src\\background\\background.js","messages":[{"ruleId":"prefer-const","severity":2,"message":"'connectedTabs' is never reassigned. Use 'const' instead.","line":27,"column":5,"nodeType":"Identifier","messageId":"useConst","endLine":27,"endColumn":18,"fix":{"range":[612,642],"text":"const connectedTabs = new Set();"}},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":30,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":31,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":14,"suggestions":[{"fix":{"range":[731,784],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":34,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":40,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":41,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":14,"suggestions":[{"fix":{"range":[988,1039],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":48,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":48,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":68,"suggestions":[{"messageId":"removeVar","data":{"varName":"sendResponse"},"fix":{"range":[1232,1246],"text":""},"desc":"Remove unused variable 'sendResponse'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":48,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":68},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":49,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":14,"suggestions":[{"fix":{"range":[1256,1309],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":18,"suggestions":[{"fix":{"range":[1971,2022],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":85,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":86,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":14,"suggestions":[{"fix":{"range":[2226,2285],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":96,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":96,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":18,"suggestions":[{"fix":{"range":[2521,2563],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":103,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":107,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":138,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":138,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":144,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":144,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":150,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":150,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":158,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":158,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":158,"endColumn":16,"suggestions":[{"fix":{"range":[4100,4148],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":161,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":161,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":161,"endColumn":18,"suggestions":[{"fix":{"range":[4181,4247],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":167,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":172,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":172,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":172,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":172,"endColumn":16,"suggestions":[{"fix":{"range":[4438,4488],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":175,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":175,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":175,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":175,"endColumn":18,"suggestions":[{"fix":{"range":[4521,4589],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":185,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":190,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":190,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":190,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":190,"endColumn":20,"suggestions":[{"fix":{"range":[4965,5033],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":200,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":200,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":206,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":206,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":210,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":210,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":20,"suggestions":[{"fix":{"range":[5530,5600],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":221,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":221,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":225,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":225,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":225,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":225,"endColumn":20,"suggestions":[{"fix":{"range":[5951,6021],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":233,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":233,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":247,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":247,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":257,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":257,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":257,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":257,"endColumn":14,"suggestions":[{"fix":{"range":[6827,6888],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":275,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":275,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":288,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":288,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":288,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":288,"endColumn":18,"suggestions":[{"fix":{"range":[7758,7819],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":294,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":294,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":304,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":304,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":304,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":304,"endColumn":16,"suggestions":[{"fix":{"range":[8196,8251],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":306,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":306,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":18,"suggestions":[{"fix":{"range":[8278,8337],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":311,"column":13,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":311,"endColumn":26,"fix":{"range":[8401,8414],"text":"{return false;}"}},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":325,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":325,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":328,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":328,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'tab' is defined but never used.","line":328,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":328,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"tab"},"fix":{"range":[8762,8765],"text":""},"desc":"Remove unused variable 'tab'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tab' is defined but never used.","line":328,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":328,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":329,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":329,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":337,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":337,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":338,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":338,"endColumn":9}],"suppressedMessages":[],"errorCount":47,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":2,"fixableWarningCount":0,"source":"/**\r\n * SpeakSync Browser Extension - Background Service Worker\r\n * Handles communication between extension components and main SpeakSync app\r\n */\r\n\r\n// Extension state management\r\nlet overlayState = {\r\n  isActive: false,\r\n  scriptContent: '',\r\n  currentPosition: 0,\r\n  settings: {\r\n    opacity: 0.8,\r\n    fontSize: 24,\r\n    fontFamily: 'Arial, sans-serif',\r\n    color: '#ffffff',\r\n    backgroundColor: '#000000',\r\n    position: { x: 100, y: 100 },\r\n    width: 400,\r\n    height: 200,\r\n    scrollSpeed: 50,\r\n    isScrolling: false\r\n  }\r\n};\r\n\r\n// Connection to main SpeakSync app\r\nlet speakSyncConnection = null;\r\nlet connectedTabs = new Set();\r\n\r\n// Service worker event listeners\r\nchrome.runtime.onInstalled.addListener(() => {\r\n  console.log('SpeakSync Overlay extension installed');\r\n  \r\n  // Initialize extension storage\r\n  chrome.storage.local.set({\r\n    overlaySettings: overlayState.settings,\r\n    isFirstInstall: true\r\n  });\r\n});\r\n\r\nchrome.runtime.onStartup.addListener(() => {\r\n  console.log('SpeakSync Overlay extension started');\r\n  \r\n  // Restore previous state\r\n  restoreExtensionState();\r\n});\r\n\r\n// Handle messages from content scripts, popup, and external sources\r\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n  console.log('Background received message:', message);\r\n  \r\n  switch (message.type) {\r\n    case 'OVERLAY_TOGGLE':\r\n      handleOverlayToggle(message.enabled, sender.tab.id);\r\n      break;\r\n      \r\n    case 'SCRIPT_UPDATE':\r\n      handleScriptUpdate(message.script, message.position);\r\n      break;\r\n      \r\n    case 'SETTINGS_UPDATE':\r\n      handleSettingsUpdate(message.settings);\r\n      break;\r\n      \r\n    case 'SYNC_REQUEST':\r\n      handleSyncRequest(sender.tab.id);\r\n      break;\r\n      \r\n    case 'POSITION_UPDATE':\r\n      handlePositionUpdate(message.position);\r\n      break;\r\n      \r\n    case 'CONTENT_SCRIPT_READY':\r\n      handleContentScriptReady(sender.tab.id);\r\n      break;\r\n      \r\n    default:\r\n      console.log('Unknown message type:', message.type);\r\n  }\r\n  \r\n  // Keep message channel open for async responses\r\n  return true;\r\n});\r\n\r\n// Handle external connections (from main SpeakSync app)\r\nchrome.runtime.onConnectExternal.addListener((port) => {\r\n  console.log('External connection established:', port.name);\r\n  \r\n  if (port.name === 'speaksync-app') {\r\n    speakSyncConnection = port;\r\n    \r\n    port.onMessage.addListener((message) => {\r\n      handleSpeakSyncMessage(message);\r\n    });\r\n    \r\n    port.onDisconnect.addListener(() => {\r\n      console.log('SpeakSync app disconnected');\r\n      speakSyncConnection = null;\r\n    });\r\n  }\r\n});\r\n\r\n// Tab management\r\nchrome.tabs.onRemoved.addListener((tabId) => {\r\n  connectedTabs.delete(tabId);\r\n});\r\n\r\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\r\n  if (changeInfo.status === 'complete' && isVideoConferencingTab(tab.url)) {\r\n    // Check if overlay should be activated on this tab\r\n    if (overlayState.isActive) {\r\n      activateOverlayOnTab(tabId);\r\n    }\r\n  }\r\n});\r\n\r\n// Core functionality\r\nasync function handleOverlayToggle(enabled, tabId) {\r\n  overlayState.isActive = enabled;\r\n  \r\n  if (enabled) {\r\n    await activateOverlayOnTab(tabId);\r\n  } else {\r\n    await deactivateOverlayOnTab(tabId);\r\n  }\r\n  \r\n  // Notify SpeakSync app\r\n  if (speakSyncConnection) {\r\n    speakSyncConnection.postMessage({\r\n      type: 'OVERLAY_STATE_CHANGED',\r\n      enabled: enabled\r\n    });\r\n  }\r\n}\r\n\r\nasync function activateOverlayOnTab(tabId) {\r\n  try {\r\n    // Inject overlay into tab\r\n    await chrome.scripting.executeScript({\r\n      target: { tabId: tabId },\r\n      files: ['src/overlay/overlay.js']\r\n    });\r\n    \r\n    // Apply overlay styles\r\n    await chrome.scripting.insertCSS({\r\n      target: { tabId: tabId },\r\n      files: ['src/overlay/overlay.css']\r\n    });\r\n    \r\n    // Send current state to overlay\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'OVERLAY_INITIALIZE',\r\n      script: overlayState.scriptContent,\r\n      position: overlayState.currentPosition,\r\n      settings: overlayState.settings\r\n    });\r\n    \r\n    connectedTabs.add(tabId);\r\n    console.log('Overlay activated on tab:', tabId);\r\n    \r\n  } catch (error) {\r\n    console.error('Failed to activate overlay on tab:', tabId, error);\r\n  }\r\n}\r\n\r\nasync function deactivateOverlayOnTab(tabId) {\r\n  try {\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'OVERLAY_DESTROY'\r\n    });\r\n    \r\n    connectedTabs.delete(tabId);\r\n    console.log('Overlay deactivated on tab:', tabId);\r\n    \r\n  } catch (error) {\r\n    console.error('Failed to deactivate overlay on tab:', tabId, error);\r\n  }\r\n}\r\n\r\nfunction handleScriptUpdate(script, position) {\r\n  overlayState.scriptContent = script;\r\n  overlayState.currentPosition = position || 0;\r\n  \r\n  // Broadcast to all connected tabs\r\n  connectedTabs.forEach(tabId => {\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'SCRIPT_UPDATE',\r\n      script: script,\r\n      position: position\r\n    }).catch(error => {\r\n      console.error('Failed to send script update to tab:', tabId, error);\r\n      connectedTabs.delete(tabId);\r\n    });\r\n  });\r\n}\r\n\r\nfunction handleSettingsUpdate(settings) {\r\n  overlayState.settings = { ...overlayState.settings, ...settings };\r\n  \r\n  // Save to storage\r\n  chrome.storage.local.set({\r\n    overlaySettings: overlayState.settings\r\n  });\r\n  \r\n  // Broadcast to all connected tabs\r\n  connectedTabs.forEach(tabId => {\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'SETTINGS_UPDATE',\r\n      settings: overlayState.settings\r\n    }).catch(error => {\r\n      console.error('Failed to send settings update to tab:', tabId, error);\r\n      connectedTabs.delete(tabId);\r\n    });\r\n  });\r\n}\r\n\r\nfunction handlePositionUpdate(position) {\r\n  overlayState.currentPosition = position;\r\n  \r\n  // Broadcast to all connected tabs\r\n  connectedTabs.forEach(tabId => {\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'POSITION_UPDATE',\r\n      position: position\r\n    }).catch(error => {\r\n      console.error('Failed to send position update to tab:', tabId, error);\r\n      connectedTabs.delete(tabId);\r\n    });\r\n  });\r\n}\r\n\r\nfunction handleSyncRequest(tabId) {\r\n  // Send current state to requesting tab\r\n  chrome.tabs.sendMessage(tabId, {\r\n    type: 'SYNC_RESPONSE',\r\n    script: overlayState.scriptContent,\r\n    position: overlayState.currentPosition,\r\n    settings: overlayState.settings,\r\n    isActive: overlayState.isActive\r\n  });\r\n}\r\n\r\nfunction handleContentScriptReady(tabId) {\r\n  connectedTabs.add(tabId);\r\n  \r\n  // If overlay is active, initialize it on this tab\r\n  if (overlayState.isActive) {\r\n    chrome.tabs.sendMessage(tabId, {\r\n      type: 'OVERLAY_INITIALIZE',\r\n      script: overlayState.scriptContent,\r\n      position: overlayState.currentPosition,\r\n      settings: overlayState.settings\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleSpeakSyncMessage(message) {\r\n  console.log('Received message from SpeakSync app:', message);\r\n  \r\n  switch (message.type) {\r\n    case 'SCRIPT_SYNC':\r\n      handleScriptUpdate(message.script, message.position);\r\n      break;\r\n      \r\n    case 'SETTINGS_SYNC':\r\n      handleSettingsUpdate(message.settings);\r\n      break;\r\n      \r\n    case 'POSITION_SYNC':\r\n      handlePositionUpdate(message.position);\r\n      break;\r\n      \r\n    case 'OVERLAY_CONTROL':\r\n      // Handle overlay control from main app\r\n      if (message.action === 'start') {\r\n        chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n          if (tabs[0] && isVideoConferencingTab(tabs[0].url)) {\r\n            handleOverlayToggle(true, tabs[0].id);\r\n          }\r\n        });\r\n      } else if (message.action === 'stop') {\r\n        connectedTabs.forEach(tabId => {\r\n          handleOverlayToggle(false, tabId);\r\n        });\r\n      }\r\n      break;\r\n      \r\n    default:\r\n      console.log('Unknown SpeakSync message type:', message.type);\r\n  }\r\n}\r\n\r\nasync function restoreExtensionState() {\r\n  try {\r\n    const result = await chrome.storage.local.get(['overlaySettings', 'overlayState']);\r\n    \r\n    if (result.overlaySettings) {\r\n      overlayState.settings = result.overlaySettings;\r\n    }\r\n    \r\n    if (result.overlayState) {\r\n      overlayState = { ...overlayState, ...result.overlayState };\r\n    }\r\n    \r\n    console.log('Extension state restored:', overlayState);\r\n  } catch (error) {\r\n    console.error('Failed to restore extension state:', error);\r\n  }\r\n}\r\n\r\nfunction isVideoConferencingTab(url) {\r\n  if (!url) return false;\r\n  \r\n  const videoConferencingDomains = [\r\n    'meet.google.com',\r\n    'zoom.us',\r\n    'teams.microsoft.com'\r\n  ];\r\n  \r\n  return videoConferencingDomains.some(domain => \r\n    url.includes(domain)\r\n  );\r\n}\r\n\r\n// Periodic cleanup\r\nsetInterval(() => {\r\n  // Clean up disconnected tabs\r\n  connectedTabs.forEach(tabId => {\r\n    chrome.tabs.get(tabId, (tab) => {\r\n      if (chrome.runtime.lastError) {\r\n        connectedTabs.delete(tabId);\r\n      }\r\n    });\r\n  });\r\n}, 60000); // Check every minute\r\n\r\n// Export for testing\r\nif (typeof module !== 'undefined' && module.exports) {\r\n  module.exports = {\r\n    overlayState,\r\n    handleOverlayToggle,\r\n    handleScriptUpdate,\r\n    handleSettingsUpdate,\r\n    isVideoConferencingTab\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\browser-extension\\src\\content\\content.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":10,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":13,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":15,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":14,"suggestions":[{"fix":{"range":[307,384],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":15,"column":54,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":24,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'sender' is defined but never used.","line":24,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"sender"},"fix":{"range":[643,651],"text":""},"desc":"Remove unused variable 'sender'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sender' is defined but never used.","line":24,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":56},{"ruleId":"no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":24,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"sendResponse"},"fix":{"range":[651,665],"text":""},"desc":"Remove unused variable 'sendResponse'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":24,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":70},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":25,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":16,"suggestions":[{"fix":{"range":[677,734],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":53,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":53,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":53,"endColumn":20,"suggestions":[{"fix":{"range":[1424,1485],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":63,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":16,"suggestions":[{"fix":{"range":[1675,1719],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":72,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":80,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":108,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":20,"suggestions":[{"fix":{"range":[2849,2914],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":114,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":114,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":16,"suggestions":[{"fix":{"range":[3024,3076],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'MutationObserver' is not defined.","line":117,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":117,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":127,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":127,"column":69,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":77},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":136,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":136,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":136,"endColumn":16,"suggestions":[{"fix":{"range":[3730,3775],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'MutationObserver' is not defined.","line":139,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":139,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":143,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":143,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":143,"column":63,"nodeType":"Identifier","messageId":"undef","endLine":143,"endColumn":71},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":154,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":16,"suggestions":[{"fix":{"range":[4273,4329],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'MutationObserver' is not defined.","line":157,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":157,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":161,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":171,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":171,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":18,"suggestions":[{"fix":{"range":[4750,4808],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":183,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":183,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":189,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":189,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":16,"suggestions":[{"fix":{"range":[5271,5316],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":193,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":193,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":227,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":227,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":240,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":240,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":246,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":246,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":251,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":251,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":258,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":258,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":268,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":268,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":307,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":307,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":308,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":308,"endColumn":13},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":311,"column":42,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":311,"endColumn":49,"fix":{"range":[9208,9215],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":333,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":333,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":334,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":334,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":355,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":355,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":376,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":376,"endColumn":13},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":377,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":377,"endColumn":31,"fix":{"range":[11123,11130],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":390,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":390,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":401,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":401,"endColumn":29},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":402,"column":19,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":402,"endColumn":26,"fix":{"range":[11866,11873],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":434,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":434,"endColumn":31},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":435,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":435,"endColumn":28,"fix":{"range":[13063,13070],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":471,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":471,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":475,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":475,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":475,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":475,"endColumn":18,"suggestions":[{"fix":{"range":[14339,14382],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":479,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":479,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":487,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":487,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":487,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":487,"endColumn":16,"suggestions":[{"fix":{"range":[14622,14665],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":491,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":491,"endColumn":31},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":492,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":492,"endColumn":28,"fix":{"range":[14817,14824],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":497,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":498,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":532,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":532,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":544,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":544,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":551,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":551,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":558,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":558,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":563,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":563,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":564,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":564,"endColumn":13}],"suppressedMessages":[],"errorCount":64,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":5,"fixableWarningCount":0,"source":"/**\r\n * SpeakSync Browser Extension - Content Script\r\n * Manages overlay injection and communication with background script\r\n */\r\n\r\n(function() {\r\n  'use strict';\r\n  \r\n  // Prevent multiple injections\r\n  if (window.speakSyncContentScript) {\r\n    return;\r\n  }\r\n  window.speakSyncContentScript = true;\r\n  \r\n  console.log('SpeakSync content script loaded on:', window.location.hostname);\r\n  \r\n  // Content script state\r\n  let overlayInjected = false;\r\n  let currentScript = '';\r\n  let currentPosition = 0;\r\n  let overlaySettings = {};\r\n  \r\n  // Message listener for background script communication\r\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n    console.log('Content script received message:', message);\r\n    \r\n    switch (message.type) {\r\n      case 'OVERLAY_INITIALIZE':\r\n        initializeOverlay(message.script, message.position, message.settings);\r\n        break;\r\n        \r\n      case 'OVERLAY_DESTROY':\r\n        destroyOverlay();\r\n        break;\r\n        \r\n      case 'SCRIPT_UPDATE':\r\n        updateScript(message.script, message.position);\r\n        break;\r\n        \r\n      case 'SETTINGS_UPDATE':\r\n        updateSettings(message.settings);\r\n        break;\r\n        \r\n      case 'POSITION_UPDATE':\r\n        updatePosition(message.position);\r\n        break;\r\n        \r\n      case 'SYNC_RESPONSE':\r\n        handleSyncResponse(message);\r\n        break;\r\n        \r\n      default:\r\n        console.log('Unknown content script message:', message.type);\r\n    }\r\n    \r\n    return true;\r\n  });\r\n  \r\n  // Initialize content script\r\n  function initialize() {\r\n    // Detect video conferencing platform\r\n    const platform = detectPlatform();\r\n    console.log('Detected platform:', platform);\r\n    \r\n    // Set up platform-specific optimizations\r\n    setupPlatformOptimizations(platform);\r\n    \r\n    // Notify background script that content script is ready\r\n    chrome.runtime.sendMessage({\r\n      type: 'CONTENT_SCRIPT_READY',\r\n      platform: platform,\r\n      url: window.location.href\r\n    });\r\n    \r\n    // Request sync with current state\r\n    requestSync();\r\n  }\r\n  \r\n  function detectPlatform() {\r\n    const hostname = window.location.hostname;\r\n    \r\n    if (hostname.includes('meet.google.com')) {\r\n      return 'google-meet';\r\n    } else if (hostname.includes('zoom.us')) {\r\n      return 'zoom';\r\n    } else if (hostname.includes('teams.microsoft.com')) {\r\n      return 'microsoft-teams';\r\n    } else {\r\n      return 'unknown';\r\n    }\r\n  }\r\n  \r\n  function setupPlatformOptimizations(platform) {\r\n    switch (platform) {\r\n      case 'google-meet':\r\n        setupGoogleMeetOptimizations();\r\n        break;\r\n        \r\n      case 'zoom':\r\n        setupZoomOptimizations();\r\n        break;\r\n        \r\n      case 'microsoft-teams':\r\n        setupTeamsOptimizations();\r\n        break;\r\n        \r\n      default:\r\n        console.log('No specific optimizations for platform:', platform);\r\n    }\r\n  }\r\n  \r\n  function setupGoogleMeetOptimizations() {\r\n    // Google Meet specific optimizations\r\n    console.log('Setting up Google Meet optimizations');\r\n    \r\n    // Monitor for camera/screen share changes\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'childList') {\r\n          // Check for layout changes that might affect overlay positioning\r\n          repositionOverlayIfNeeded();\r\n        }\r\n      });\r\n    });\r\n    \r\n    // Observe main content area\r\n    const contentArea = document.querySelector('[data-call-id]') || document.body;\r\n    observer.observe(contentArea, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n  \r\n  function setupZoomOptimizations() {\r\n    // Zoom specific optimizations\r\n    console.log('Setting up Zoom optimizations');\r\n    \r\n    // Monitor for Zoom's dynamic layout changes\r\n    const observer = new MutationObserver(() => {\r\n      repositionOverlayIfNeeded();\r\n    });\r\n    \r\n    const zoomContent = document.querySelector('#zoom-ui') || document.body;\r\n    observer.observe(zoomContent, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      attributeFilter: ['class', 'style']\r\n    });\r\n  }\r\n  \r\n  function setupTeamsOptimizations() {\r\n    // Microsoft Teams specific optimizations\r\n    console.log('Setting up Microsoft Teams optimizations');\r\n    \r\n    // Teams has complex iframe structure\r\n    const observer = new MutationObserver(() => {\r\n      repositionOverlayIfNeeded();\r\n    });\r\n    \r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      attributeFilter: ['class', 'data-tid']\r\n    });\r\n  }\r\n  \r\n  function initializeOverlay(script, position, settings) {\r\n    if (overlayInjected) {\r\n      console.log('Overlay already injected, updating instead');\r\n      updateScript(script, position);\r\n      updateSettings(settings);\r\n      return;\r\n    }\r\n    \r\n    currentScript = script;\r\n    currentPosition = position;\r\n    overlaySettings = settings;\r\n    \r\n    // Create overlay container\r\n    const overlayContainer = createOverlayContainer();\r\n    document.body.appendChild(overlayContainer);\r\n    \r\n    // Create overlay content\r\n    createOverlayContent(overlayContainer);\r\n    \r\n    overlayInjected = true;\r\n    console.log('SpeakSync overlay initialized');\r\n  }\r\n  \r\n  function createOverlayContainer() {\r\n    const container = document.createElement('div');\r\n    container.id = 'speaksync-overlay-container';\r\n    container.className = 'speaksync-overlay-container';\r\n    \r\n    // Apply initial styles\r\n    Object.assign(container.style, {\r\n      position: 'fixed',\r\n      top: `${overlaySettings.position?.y || 100}px`,\r\n      left: `${overlaySettings.position?.x || 100}px`,\r\n      width: `${overlaySettings.width || 400}px`,\r\n      height: `${overlaySettings.height || 200}px`,\r\n      backgroundColor: overlaySettings.backgroundColor || '#000000',\r\n      color: overlaySettings.color || '#ffffff',\r\n      fontSize: `${overlaySettings.fontSize || 24}px`,\r\n      fontFamily: overlaySettings.fontFamily || 'Arial, sans-serif',\r\n      opacity: overlaySettings.opacity || 0.8,\r\n      zIndex: '999999',\r\n      borderRadius: '8px',\r\n      border: '2px solid #333',\r\n      overflow: 'hidden',\r\n      cursor: 'move',\r\n      userSelect: 'none',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.3)',\r\n      backdropFilter: 'blur(10px)'\r\n    });\r\n    \r\n    // Make draggable\r\n    makeDraggable(container);\r\n    \r\n    return container;\r\n  }\r\n  \r\n  function createOverlayContent(container) {\r\n    // Header with controls\r\n    const header = document.createElement('div');\r\n    header.className = 'speaksync-overlay-header';\r\n    Object.assign(header.style, {\r\n      padding: '8px 12px',\r\n      backgroundColor: 'rgba(0,0,0,0.3)',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      borderBottom: '1px solid #444',\r\n      fontSize: '14px'\r\n    });\r\n    \r\n    // Title\r\n    const title = document.createElement('span');\r\n    title.textContent = 'SpeakSync';\r\n    title.style.fontWeight = 'bold';\r\n    header.appendChild(title);\r\n    \r\n    // Controls\r\n    const controls = document.createElement('div');\r\n    controls.style.display = 'flex';\r\n    controls.style.gap = '8px';\r\n    \r\n    // Settings button\r\n    const settingsBtn = document.createElement('button');\r\n    settingsBtn.textContent = '';\r\n    settingsBtn.style.cssText = 'background:none;border:none;color:inherit;cursor:pointer;padding:4px;';\r\n    settingsBtn.onclick = () => openOverlaySettings();\r\n    controls.appendChild(settingsBtn);\r\n    \r\n    // Close button\r\n    const closeBtn = document.createElement('button');\r\n    closeBtn.textContent = '';\r\n    closeBtn.style.cssText = 'background:none;border:none;color:inherit;cursor:pointer;padding:4px;';\r\n    closeBtn.onclick = () => destroyOverlay();\r\n    controls.appendChild(closeBtn);\r\n    \r\n    header.appendChild(controls);\r\n    container.appendChild(header);\r\n    \r\n    // Script content area\r\n    const content = document.createElement('div');\r\n    content.id = 'speaksync-overlay-content';\r\n    content.className = 'speaksync-overlay-content';\r\n    Object.assign(content.style, {\r\n      padding: '16px',\r\n      height: 'calc(100% - 40px)',\r\n      overflow: 'auto',\r\n      lineHeight: '1.5',\r\n      whiteSpace: 'pre-wrap',\r\n      wordWrap: 'break-word'\r\n    });\r\n    \r\n    // Add scroll bar styling\r\n    content.style.cssText += `\r\n      scrollbar-width: thin;\r\n      scrollbar-color: #666 transparent;\r\n    `;\r\n    \r\n    container.appendChild(content);\r\n    \r\n    // Update content\r\n    updateOverlayContent();\r\n    \r\n    // Add resize handles\r\n    addResizeHandles(container);\r\n  }\r\n  \r\n  function makeDraggable(element) {\r\n    let isDragging = false;\r\n    let currentX;\r\n    let currentY;\r\n    let initialX;\r\n    let initialY;\r\n    let xOffset = 0;\r\n    let yOffset = 0;\r\n    \r\n    const header = element.querySelector('.speaksync-overlay-header');\r\n    \r\n    header.addEventListener('mousedown', dragStart);\r\n    document.addEventListener('mousemove', drag);\r\n    document.addEventListener('mouseup', dragEnd);\r\n    \r\n    function dragStart(e) {\r\n      if (e.target.tagName === 'BUTTON') return; // Don't drag on buttons\r\n      \r\n      initialX = e.clientX - xOffset;\r\n      initialY = e.clientY - yOffset;\r\n      \r\n      if (e.target === header || header.contains(e.target)) {\r\n        isDragging = true;\r\n        element.style.cursor = 'grabbing';\r\n      }\r\n    }\r\n    \r\n    function drag(e) {\r\n      if (isDragging) {\r\n        e.preventDefault();\r\n        currentX = e.clientX - initialX;\r\n        currentY = e.clientY - initialY;\r\n        \r\n        xOffset = currentX;\r\n        yOffset = currentY;\r\n        \r\n        // Constrain to viewport\r\n        const rect = element.getBoundingClientRect();\r\n        const maxX = window.innerWidth - rect.width;\r\n        const maxY = window.innerHeight - rect.height;\r\n        \r\n        currentX = Math.max(0, Math.min(currentX, maxX));\r\n        currentY = Math.max(0, Math.min(currentY, maxY));\r\n        \r\n        element.style.left = currentX + 'px';\r\n        element.style.top = currentY + 'px';\r\n        \r\n        // Save position\r\n        overlaySettings.position = { x: currentX, y: currentY };\r\n        saveSettings();\r\n      }\r\n    }\r\n    \r\n    function dragEnd() {\r\n      isDragging = false;\r\n      element.style.cursor = 'move';\r\n    }\r\n  }\r\n  \r\n  function addResizeHandles(container) {\r\n    const resizeHandle = document.createElement('div');\r\n    resizeHandle.className = 'speaksync-resize-handle';\r\n    Object.assign(resizeHandle.style, {\r\n      position: 'absolute',\r\n      bottom: '0',\r\n      right: '0',\r\n      width: '20px',\r\n      height: '20px',\r\n      backgroundColor: 'rgba(255,255,255,0.3)',\r\n      cursor: 'se-resize',\r\n      borderRadius: '0 0 8px 0'\r\n    });\r\n    \r\n    // Add resize functionality\r\n    let isResizing = false;\r\n    \r\n    resizeHandle.addEventListener('mousedown', (e) => {\r\n      isResizing = true;\r\n      e.preventDefault();\r\n    });\r\n    \r\n    document.addEventListener('mousemove', (e) => {\r\n      if (!isResizing) return;\r\n      \r\n      const rect = container.getBoundingClientRect();\r\n      const newWidth = Math.max(300, e.clientX - rect.left);\r\n      const newHeight = Math.max(150, e.clientY - rect.top);\r\n      \r\n      container.style.width = newWidth + 'px';\r\n      container.style.height = newHeight + 'px';\r\n      \r\n      overlaySettings.width = newWidth;\r\n      overlaySettings.height = newHeight;\r\n    });\r\n    \r\n    document.addEventListener('mouseup', () => {\r\n      if (isResizing) {\r\n        isResizing = false;\r\n        saveSettings();\r\n      }\r\n    });\r\n    \r\n    container.appendChild(resizeHandle);\r\n  }\r\n  \r\n  function updateOverlayContent() {\r\n    const content = document.getElementById('speaksync-overlay-content');\r\n    if (!content) return;\r\n    \r\n    // Format script content with current position highlighting\r\n    const paragraphs = currentScript.split(/\\n\\s*\\n/);\r\n    let html = '';\r\n    \r\n    paragraphs.forEach((paragraph, index) => {\r\n      const isActive = index === currentPosition;\r\n      const className = isActive ? 'active-paragraph' : '';\r\n      const style = isActive ? 'background-color: rgba(255,255,255,0.1); padding: 8px; border-radius: 4px; margin: 4px 0;' : 'margin: 4px 0;';\r\n      \r\n      html += `<div class=\"${className}\" style=\"${style}\">${paragraph}</div>`;\r\n    });\r\n    \r\n    content.innerHTML = html;\r\n    \r\n    // Auto-scroll to active paragraph\r\n    const activeParagraph = content.querySelector('.active-paragraph');\r\n    if (activeParagraph) {\r\n      activeParagraph.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    }\r\n  }\r\n  \r\n  function updateScript(script, position) {\r\n    currentScript = script;\r\n    currentPosition = position || 0;\r\n    updateOverlayContent();\r\n  }\r\n  \r\n  function updateSettings(settings) {\r\n    overlaySettings = { ...overlaySettings, ...settings };\r\n    \r\n    const container = document.getElementById('speaksync-overlay-container');\r\n    if (!container) return;\r\n    \r\n    // Apply visual settings\r\n    if (settings.opacity !== undefined) {\r\n      container.style.opacity = settings.opacity;\r\n    }\r\n    if (settings.fontSize !== undefined) {\r\n      container.style.fontSize = `${settings.fontSize}px`;\r\n    }\r\n    if (settings.fontFamily !== undefined) {\r\n      container.style.fontFamily = settings.fontFamily;\r\n    }\r\n    if (settings.color !== undefined) {\r\n      container.style.color = settings.color;\r\n    }\r\n    if (settings.backgroundColor !== undefined) {\r\n      container.style.backgroundColor = settings.backgroundColor;\r\n    }\r\n    if (settings.position !== undefined) {\r\n      container.style.left = `${settings.position.x}px`;\r\n      container.style.top = `${settings.position.y}px`;\r\n    }\r\n    if (settings.width !== undefined) {\r\n      container.style.width = `${settings.width}px`;\r\n    }\r\n    if (settings.height !== undefined) {\r\n      container.style.height = `${settings.height}px`;\r\n    }\r\n  }\r\n  \r\n  function updatePosition(position) {\r\n    currentPosition = position;\r\n    updateOverlayContent();\r\n  }\r\n  \r\n  function destroyOverlay() {\r\n    const container = document.getElementById('speaksync-overlay-container');\r\n    if (container) {\r\n      container.remove();\r\n      overlayInjected = false;\r\n      console.log('SpeakSync overlay destroyed');\r\n    }\r\n    \r\n    // Notify background script\r\n    chrome.runtime.sendMessage({\r\n      type: 'OVERLAY_TOGGLE',\r\n      enabled: false\r\n    });\r\n  }\r\n  \r\n  function openOverlaySettings() {\r\n    // TODO: Implement overlay settings panel\r\n    console.log('Opening overlay settings...');\r\n  }\r\n  \r\n  function repositionOverlayIfNeeded() {\r\n    const container = document.getElementById('speaksync-overlay-container');\r\n    if (!container) return;\r\n    \r\n    // Check if overlay is still within viewport\r\n    const rect = container.getBoundingClientRect();\r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight\r\n    };\r\n    \r\n    let needsRepositioning = false;\r\n    let newX = parseFloat(container.style.left);\r\n    let newY = parseFloat(container.style.top);\r\n    \r\n    if (rect.right > viewport.width) {\r\n      newX = viewport.width - rect.width;\r\n      needsRepositioning = true;\r\n    }\r\n    if (rect.bottom > viewport.height) {\r\n      newY = viewport.height - rect.height;\r\n      needsRepositioning = true;\r\n    }\r\n    if (rect.left < 0) {\r\n      newX = 0;\r\n      needsRepositioning = true;\r\n    }\r\n    if (rect.top < 0) {\r\n      newY = 0;\r\n      needsRepositioning = true;\r\n    }\r\n    \r\n    if (needsRepositioning) {\r\n      container.style.left = `${newX}px`;\r\n      container.style.top = `${newY}px`;\r\n      \r\n      overlaySettings.position = { x: newX, y: newY };\r\n      saveSettings();\r\n    }\r\n  }\r\n  \r\n  function requestSync() {\r\n    chrome.runtime.sendMessage({\r\n      type: 'SYNC_REQUEST'\r\n    });\r\n  }\r\n  \r\n  function handleSyncResponse(message) {\r\n    if (message.isActive && message.script) {\r\n      initializeOverlay(message.script, message.position, message.settings);\r\n    }\r\n  }\r\n  \r\n  function saveSettings() {\r\n    chrome.runtime.sendMessage({\r\n      type: 'SETTINGS_UPDATE',\r\n      settings: overlaySettings\r\n    });\r\n  }\r\n  \r\n  // Handle page navigation\r\n  window.addEventListener('beforeunload', () => {\r\n    if (overlayInjected) {\r\n      destroyOverlay();\r\n    }\r\n  });\r\n  \r\n  // Handle window resize\r\n  window.addEventListener('resize', () => {\r\n    repositionOverlayIfNeeded();\r\n  });\r\n  \r\n  // Initialize when DOM is ready\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initialize);\r\n  } else {\r\n    initialize();\r\n  }\r\n  \r\n})();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\browser-extension\\src\\popup\\popup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":48,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":60,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":60,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":61},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":62,"column":7,"nodeType":"MemberExpression","endLine":62,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":64,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":19,"suggestions":[{"fix":{"range":[1478,1520],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":69,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":70,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":114,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":114,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":134,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":134,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":140,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":151,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":158,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":164,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":200,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":200,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":214,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":214,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'document' is not defined.","line":329,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":329,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":336,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":341,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":341,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":348,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":348,"endColumn":9},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":357,"column":44,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":357,"endColumn":51,"fix":{"range":[9561,9568],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":389,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":389,"endColumn":9},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":428,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":428,"endColumn":53,"fix":{"range":[11718,11748],"text":"{buttonIcon.textContent = '';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":429,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":429,"endColumn":63,"fix":{"range":[11772,11812],"text":"{buttonText.textContent = 'Stop Overlay';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":432,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":432,"endColumn":53,"fix":{"range":[11908,11938],"text":"{buttonIcon.textContent = '';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":433,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":433,"endColumn":64,"fix":{"range":[11962,12003],"text":"{buttonText.textContent = 'Start Overlay';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":443,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":443,"endColumn":62,"fix":{"range":[12269,12306],"text":"{buttonText.textContent = 'Connected';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":447,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":447,"endColumn":66,"fix":{"range":[12420,12461],"text":"{buttonText.textContent = 'Connecting...';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":451,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":451,"endColumn":77,"fix":{"range":[12565,12617],"text":"{buttonText.textContent = 'Connect to SpeakSync App';}"}},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":458,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":458,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'sender' is defined but never used.","line":458,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":458,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"sender"},"fix":{"range":[12775,12783],"text":""},"desc":"Remove unused variable 'sender'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sender' is defined but never used.","line":458,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":458,"endColumn":54},{"ruleId":"no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":458,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":458,"endColumn":68,"suggestions":[{"messageId":"removeVar","data":{"varName":"sendResponse"},"fix":{"range":[12783,12797],"text":""},"desc":"Remove unused variable 'sendResponse'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sendResponse' is defined but never used.","line":458,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":458,"endColumn":68},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":471,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":471,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":471,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":471,"endColumn":18,"suggestions":[{"fix":{"range":[13090,13142],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":476,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":476,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":484,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":484,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":485,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":485,"endColumn":9}],"suppressedMessages":[],"errorCount":36,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":8,"fixableWarningCount":0,"source":"/**\r\n * SpeakSync Browser Extension - Popup Script\r\n * Handles the extension popup interface and user interactions\r\n */\r\n\r\n// Popup state\r\nlet currentSettings = {\r\n  opacity: 0.8,\r\n  fontSize: 24,\r\n  fontFamily: 'Arial, sans-serif',\r\n  color: '#ffffff',\r\n  backgroundColor: '#000000',\r\n  position: { x: 100, y: 100 },\r\n  width: 400,\r\n  height: 200\r\n};\r\n\r\nlet connectionStatus = 'disconnected'; // disconnected, connecting, connected\r\nlet overlayActive = false;\r\nlet currentTab = null;\r\n\r\n// DOM Elements\r\nconst elements = {\r\n  connectionStatus: null,\r\n  currentTab: null,\r\n  toggleOverlay: null,\r\n  connectApp: null,\r\n  expandSettings: null,\r\n  settingsContent: null,\r\n  settingsHeader: null,\r\n  \r\n  // Settings controls\r\n  opacitySlider: null,\r\n  opacityValue: null,\r\n  fontSizeSlider: null,\r\n  fontSizeValue: null,\r\n  fontFamilySelect: null,\r\n  textColorPicker: null,\r\n  backgroundColorPicker: null,\r\n  resetSettings: null,\r\n  \r\n  // Support links\r\n  helpLink: null,\r\n  feedbackLink: null\r\n};\r\n\r\n// Initialize popup\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  initializeElements();\r\n  setupEventListeners();\r\n  loadSettings();\r\n  updateUI();\r\n  checkCurrentTab();\r\n  checkConnectionStatus();\r\n});\r\n\r\nfunction initializeElements() {\r\n  // Get all DOM elements\r\n  Object.keys(elements).forEach(key => {\r\n    const element = document.getElementById(key) || document.querySelector(`.${key}`);\r\n    if (element) {\r\n      elements[key] = element;\r\n    } else {\r\n      console.warn(`Element not found: ${key}`);\r\n    }\r\n  });\r\n  \r\n  // Special case for elements that might not have IDs\r\n  elements.settingsHeader = document.querySelector('.settings-header');\r\n  elements.settingsContent = document.querySelector('.settings-content');\r\n}\r\n\r\nfunction setupEventListeners() {\r\n  // Main controls\r\n  if (elements.toggleOverlay) {\r\n    elements.toggleOverlay.addEventListener('click', toggleOverlay);\r\n  }\r\n  \r\n  if (elements.connectApp) {\r\n    elements.connectApp.addEventListener('click', connectToApp);\r\n  }\r\n  \r\n  // Settings panel toggle\r\n  if (elements.settingsHeader) {\r\n    elements.settingsHeader.addEventListener('click', toggleSettings);\r\n  }\r\n  \r\n  // Settings controls\r\n  if (elements.opacitySlider) {\r\n    elements.opacitySlider.addEventListener('input', updateOpacity);\r\n  }\r\n  \r\n  if (elements.fontSizeSlider) {\r\n    elements.fontSizeSlider.addEventListener('input', updateFontSize);\r\n  }\r\n  \r\n  if (elements.fontFamilySelect) {\r\n    elements.fontFamilySelect.addEventListener('change', updateFontFamily);\r\n  }\r\n  \r\n  if (elements.textColorPicker) {\r\n    elements.textColorPicker.addEventListener('change', updateTextColor);\r\n  }\r\n  \r\n  if (elements.backgroundColorPicker) {\r\n    elements.backgroundColorPicker.addEventListener('change', updateBackgroundColor);\r\n  }\r\n  \r\n  if (elements.resetSettings) {\r\n    elements.resetSettings.addEventListener('click', resetSettings);\r\n  }\r\n  \r\n  // Color preset buttons\r\n  document.querySelectorAll('.preset-button').forEach(button => {\r\n    button.addEventListener('click', (e) => {\r\n      const color = e.target.dataset.color;\r\n      const bgColor = e.target.dataset.bg;\r\n      \r\n      if (color) {\r\n        currentSettings.color = color;\r\n        elements.textColorPicker.value = color;\r\n        updateSettings();\r\n      }\r\n      \r\n      if (bgColor) {\r\n        currentSettings.backgroundColor = bgColor;\r\n        elements.backgroundColorPicker.value = bgColor;\r\n        updateSettings();\r\n      }\r\n    });\r\n  });\r\n  \r\n  // Position preset buttons\r\n  document.querySelectorAll('.position-button').forEach(button => {\r\n    button.addEventListener('click', (e) => {\r\n      const position = e.target.dataset.position;\r\n      setPositionPreset(position);\r\n      \r\n      // Update active state\r\n      document.querySelectorAll('.position-button').forEach(btn => {\r\n        btn.classList.remove('active');\r\n      });\r\n      e.target.classList.add('active');\r\n    });\r\n  });\r\n  \r\n  // Support links\r\n  if (elements.helpLink) {\r\n    elements.helpLink.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      chrome.tabs.create({ url: 'https://speaksync.app/help' });\r\n    });\r\n  }\r\n  \r\n  if (elements.feedbackLink) {\r\n    elements.feedbackLink.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      chrome.tabs.create({ url: 'https://speaksync.app/feedback' });\r\n    });\r\n  }\r\n}\r\n\r\nfunction loadSettings() {\r\n  chrome.storage.local.get(['overlaySettings'], (result) => {\r\n    if (result.overlaySettings) {\r\n      currentSettings = { ...currentSettings, ...result.overlaySettings };\r\n      updateSettingsUI();\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateSettingsUI() {\r\n  if (elements.opacitySlider) {\r\n    elements.opacitySlider.value = currentSettings.opacity;\r\n    elements.opacityValue.textContent = Math.round(currentSettings.opacity * 100) + '%';\r\n  }\r\n  \r\n  if (elements.fontSizeSlider) {\r\n    elements.fontSizeSlider.value = currentSettings.fontSize;\r\n    elements.fontSizeValue.textContent = currentSettings.fontSize + 'px';\r\n  }\r\n  \r\n  if (elements.fontFamilySelect) {\r\n    elements.fontFamilySelect.value = currentSettings.fontFamily;\r\n  }\r\n  \r\n  if (elements.textColorPicker) {\r\n    elements.textColorPicker.value = currentSettings.color;\r\n  }\r\n  \r\n  if (elements.backgroundColorPicker) {\r\n    elements.backgroundColorPicker.value = currentSettings.backgroundColor;\r\n  }\r\n}\r\n\r\nfunction toggleOverlay() {\r\n  overlayActive = !overlayActive;\r\n  \r\n  // Send message to background script\r\n  chrome.runtime.sendMessage({\r\n    type: 'OVERLAY_TOGGLE',\r\n    enabled: overlayActive\r\n  });\r\n  \r\n  updateUI();\r\n}\r\n\r\nfunction connectToApp() {\r\n  connectionStatus = 'connecting';\r\n  updateUI();\r\n  \r\n  // Attempt to connect to SpeakSync app\r\n  // This would involve checking if the app is running and establishing connection\r\n  setTimeout(() => {\r\n    // Simulate connection attempt\r\n    connectionStatus = 'connected'; // or 'disconnected' if failed\r\n    updateUI();\r\n  }, 2000);\r\n}\r\n\r\nfunction toggleSettings() {\r\n  const isExpanded = elements.settingsContent.classList.contains('expanded');\r\n  \r\n  if (isExpanded) {\r\n    elements.settingsContent.classList.remove('expanded');\r\n    elements.settingsHeader.classList.remove('expanded');\r\n  } else {\r\n    elements.settingsContent.classList.add('expanded');\r\n    elements.settingsHeader.classList.add('expanded');\r\n  }\r\n}\r\n\r\nfunction updateOpacity() {\r\n  const value = parseFloat(elements.opacitySlider.value);\r\n  currentSettings.opacity = value;\r\n  elements.opacityValue.textContent = Math.round(value * 100) + '%';\r\n  updateSettings();\r\n}\r\n\r\nfunction updateFontSize() {\r\n  const value = parseInt(elements.fontSizeSlider.value);\r\n  currentSettings.fontSize = value;\r\n  elements.fontSizeValue.textContent = value + 'px';\r\n  updateSettings();\r\n}\r\n\r\nfunction updateFontFamily() {\r\n  currentSettings.fontFamily = elements.fontFamilySelect.value;\r\n  updateSettings();\r\n}\r\n\r\nfunction updateTextColor() {\r\n  currentSettings.color = elements.textColorPicker.value;\r\n  updateSettings();\r\n}\r\n\r\nfunction updateBackgroundColor() {\r\n  currentSettings.backgroundColor = elements.backgroundColorPicker.value;\r\n  updateSettings();\r\n}\r\n\r\nfunction setPositionPreset(position) {\r\n  const viewport = { width: 1920, height: 1080 }; // Default viewport size\r\n  const overlaySize = { width: currentSettings.width, height: currentSettings.height };\r\n  \r\n  let x, y;\r\n  \r\n  switch (position) {\r\n    case 'top-left':\r\n      x = 20;\r\n      y = 20;\r\n      break;\r\n    case 'top-center':\r\n      x = (viewport.width - overlaySize.width) / 2;\r\n      y = 20;\r\n      break;\r\n    case 'top-right':\r\n      x = viewport.width - overlaySize.width - 20;\r\n      y = 20;\r\n      break;\r\n    case 'center-left':\r\n      x = 20;\r\n      y = (viewport.height - overlaySize.height) / 2;\r\n      break;\r\n    case 'center':\r\n      x = (viewport.width - overlaySize.width) / 2;\r\n      y = (viewport.height - overlaySize.height) / 2;\r\n      break;\r\n    case 'center-right':\r\n      x = viewport.width - overlaySize.width - 20;\r\n      y = (viewport.height - overlaySize.height) / 2;\r\n      break;\r\n    case 'bottom-left':\r\n      x = 20;\r\n      y = viewport.height - overlaySize.height - 20;\r\n      break;\r\n    case 'bottom-center':\r\n      x = (viewport.width - overlaySize.width) / 2;\r\n      y = viewport.height - overlaySize.height - 20;\r\n      break;\r\n    case 'bottom-right':\r\n      x = viewport.width - overlaySize.width - 20;\r\n      y = viewport.height - overlaySize.height - 20;\r\n      break;\r\n    default:\r\n      return;\r\n  }\r\n  \r\n  currentSettings.position = { x, y };\r\n  updateSettings();\r\n}\r\n\r\nfunction resetSettings() {\r\n  currentSettings = {\r\n    opacity: 0.8,\r\n    fontSize: 24,\r\n    fontFamily: 'Arial, sans-serif',\r\n    color: '#ffffff',\r\n    backgroundColor: '#000000',\r\n    position: { x: 100, y: 100 },\r\n    width: 400,\r\n    height: 200\r\n  };\r\n  \r\n  updateSettingsUI();\r\n  updateSettings();\r\n  \r\n  // Reset position button states\r\n  document.querySelectorAll('.position-button').forEach(btn => {\r\n    btn.classList.remove('active');\r\n  });\r\n}\r\n\r\nfunction updateSettings() {\r\n  // Save to storage\r\n  chrome.storage.local.set({\r\n    overlaySettings: currentSettings\r\n  });\r\n  \r\n  // Send to background script\r\n  chrome.runtime.sendMessage({\r\n    type: 'SETTINGS_UPDATE',\r\n    settings: currentSettings\r\n  });\r\n}\r\n\r\nfunction checkCurrentTab() {\r\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n    if (tabs[0]) {\r\n      currentTab = tabs[0];\r\n      updateTabInfo();\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateTabInfo() {\r\n  if (!currentTab || !elements.currentTab) return;\r\n  \r\n  const url = currentTab.url;\r\n  let platform = 'Unknown';\r\n  let supported = false;\r\n  \r\n  if (url.includes('meet.google.com')) {\r\n    platform = 'Google Meet';\r\n    supported = true;\r\n  } else if (url.includes('zoom.us')) {\r\n    platform = 'Zoom';\r\n    supported = true;\r\n  } else if (url.includes('teams.microsoft.com')) {\r\n    platform = 'Microsoft Teams';\r\n    supported = true;\r\n  } else {\r\n    platform = 'Not supported';\r\n  }\r\n  \r\n  elements.currentTab.textContent = supported ? \r\n    `Ready on ${platform}` : \r\n    'No supported platform detected';\r\n  \r\n  // Enable/disable overlay button based on platform support\r\n  if (elements.toggleOverlay) {\r\n    elements.toggleOverlay.disabled = !supported;\r\n  }\r\n}\r\n\r\nfunction checkConnectionStatus() {\r\n  // Check if SpeakSync app is connected\r\n  // This would involve checking the connection to the main app\r\n  chrome.runtime.sendMessage({ type: 'CHECK_CONNECTION' }, (response) => {\r\n    if (response && response.connected) {\r\n      connectionStatus = 'connected';\r\n    } else {\r\n      connectionStatus = 'disconnected';\r\n    }\r\n    updateUI();\r\n  });\r\n}\r\n\r\nfunction updateUI() {\r\n  // Update connection status\r\n  if (elements.connectionStatus) {\r\n    const statusDot = elements.connectionStatus.querySelector('.status-dot');\r\n    const statusText = elements.connectionStatus.querySelector('.status-text');\r\n    \r\n    if (statusDot && statusText) {\r\n      statusDot.className = `status-dot ${connectionStatus}`;\r\n      \r\n      switch (connectionStatus) {\r\n        case 'connected':\r\n          statusText.textContent = 'Connected to SpeakSync';\r\n          break;\r\n        case 'connecting':\r\n          statusText.textContent = 'Connecting...';\r\n          break;\r\n        default:\r\n          statusText.textContent = 'Disconnected';\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Update overlay toggle button\r\n  if (elements.toggleOverlay) {\r\n    const buttonIcon = elements.toggleOverlay.querySelector('.button-icon');\r\n    const buttonText = elements.toggleOverlay.querySelector('.button-text');\r\n    \r\n    if (overlayActive) {\r\n      elements.toggleOverlay.classList.add('active');\r\n      if (buttonIcon) buttonIcon.textContent = '';\r\n      if (buttonText) buttonText.textContent = 'Stop Overlay';\r\n    } else {\r\n      elements.toggleOverlay.classList.remove('active');\r\n      if (buttonIcon) buttonIcon.textContent = '';\r\n      if (buttonText) buttonText.textContent = 'Start Overlay';\r\n    }\r\n  }\r\n  \r\n  // Update connect button based on connection status\r\n  if (elements.connectApp) {\r\n    const buttonText = elements.connectApp.querySelector('.button-text');\r\n    \r\n    switch (connectionStatus) {\r\n      case 'connected':\r\n        if (buttonText) buttonText.textContent = 'Connected';\r\n        elements.connectApp.disabled = true;\r\n        break;\r\n      case 'connecting':\r\n        if (buttonText) buttonText.textContent = 'Connecting...';\r\n        elements.connectApp.disabled = true;\r\n        break;\r\n      default:\r\n        if (buttonText) buttonText.textContent = 'Connect to SpeakSync App';\r\n        elements.connectApp.disabled = false;\r\n    }\r\n  }\r\n}\r\n\r\n// Listen for messages from background script\r\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n  switch (message.type) {\r\n    case 'OVERLAY_STATE_CHANGED':\r\n      overlayActive = message.enabled;\r\n      updateUI();\r\n      break;\r\n      \r\n    case 'CONNECTION_STATUS_CHANGED':\r\n      connectionStatus = message.status;\r\n      updateUI();\r\n      break;\r\n      \r\n    default:\r\n      console.log('Unknown popup message:', message.type);\r\n  }\r\n});\r\n\r\n// Handle tab updates\r\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\r\n  if (tab.active && changeInfo.status === 'complete') {\r\n    currentTab = tab;\r\n    updateTabInfo();\r\n  }\r\n});\r\n\r\n// Handle tab activation\r\nchrome.tabs.onActivated.addListener((activeInfo) => {\r\n  chrome.tabs.get(activeInfo.tabId, (tab) => {\r\n    currentTab = tab;\r\n    updateTabInfo();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\e2e\\init.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { DetoxBootstrap } = require('detox/runners/jest');\r\n\r\n// Setup Detox environment\r\nDetoxBootstrap.setup();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\e2e\\jest.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":72,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":79},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":31,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { DetoxCircusEnvironment, SpecReporter, WorkerAssignReporter } = require('detox/runners/jest');\r\n\r\nconst config = {\r\n  rootDir: '..',\r\n  testMatch: ['<rootDir>/e2e/**/*.e2e.ts'],\r\n  testTimeout: 120000,\r\n  maxWorkers: 1,\r\n  globalSetup: 'detox/runners/jest/globalSetup',\r\n  globalTeardown: 'detox/runners/jest/globalTeardown',\r\n  reporters: [\r\n    'default',\r\n    ['jest-junit', { outputDirectory: 'e2e/reports', outputName: 'junit.xml' }],\r\n    new SpecReporter({ stacktrace: true }),\r\n    new WorkerAssignReporter(),\r\n  ],\r\n  testEnvironment: DetoxCircusEnvironment.default,\r\n  testEnvironmentOptions: {\r\n    eventListeners: [\r\n      new WorkerAssignReporter(),\r\n    ],\r\n  },\r\n  verbose: true,\r\n  preset: 'ts-jest',\r\n  transform: {\r\n    '^.+\\\\.(ts|tsx)$': 'ts-jest',\r\n  },\r\n  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json'],\r\n  setupFilesAfterEnv: ['<rootDir>/e2e/init.js'],\r\n};\r\n\r\nmodule.exports = config;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\e2e\\performance.e2e.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeAll' is not defined.","line":5,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":9,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":13,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":14,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":30,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":50,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":51,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":67,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":87,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":106,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":106,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":107,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":135,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":135,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":155,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":155,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":156,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":184,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":184,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":185,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":7}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// E2E test for performance optimizations\r\nimport { device, element, by, expect } from 'detox';\r\n\r\ndescribe('Performance Optimizations', () => {\r\n  beforeAll(async () => {\r\n    await device.launchApp();\r\n  });\r\n\r\n  beforeEach(async () => {\r\n    await device.reloadReactNative();\r\n  });\r\n\r\n  describe('Teleprompter Performance', () => {\r\n    it('should initialize performance monitoring when entering teleprompter', async () => {\r\n      // Navigate to teleprompter\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('practice-button')).tap();\r\n      \r\n      // Verify teleprompter loads without performance issues\r\n      await expect(element(by.id('teleprompter-screen'))).toBeVisible();\r\n      \r\n      // Test scrolling performance\r\n      await element(by.id('teleprompter-scroll')).scroll(200, 'down');\r\n      await element(by.id('teleprompter-scroll')).scroll(200, 'up');\r\n      \r\n      // Verify no memory leaks by checking app doesn't crash\r\n      await expect(element(by.id('teleprompter-screen'))).toBeVisible();\r\n    });\r\n\r\n    it('should handle speech recognition performance optimization', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('practice-button')).tap();\r\n      \r\n      // Enable speech recognition\r\n      await element(by.id('speech-recognition-toggle')).tap();\r\n      \r\n      // Verify speech recognition is active\r\n      await expect(element(by.id('speech-recognition-panel'))).toBeVisible();\r\n      \r\n      // Test performance under load\r\n      await element(by.id('play-button')).tap();\r\n      await device.sleep(3000); // Let it run for 3 seconds\r\n      \r\n      // Verify UI remains responsive\r\n      await element(by.id('pause-button')).tap();\r\n      await expect(element(by.id('play-button'))).toBeVisible();\r\n    });\r\n  });\r\n\r\n  describe('Analytics Performance', () => {\r\n    it('should load analytics with virtual scrolling', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('analytics-button')).tap();\r\n      \r\n      // Verify analytics screen loads\r\n      await expect(element(by.id('analytics-screen'))).toBeVisible();\r\n      \r\n      // Test virtual scrolling performance with large session list\r\n      await element(by.id('sessions-tab')).tap();\r\n      await element(by.id('session-list')).scroll(500, 'down');\r\n      await element(by.id('session-list')).scroll(500, 'up');\r\n      \r\n      // Verify list remains responsive\r\n      await expect(element(by.id('session-list'))).toBeVisible();\r\n    });\r\n\r\n    it('should handle data fetching with debouncing', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('analytics-button')).tap();\r\n      \r\n      // Open filters\r\n      await element(by.id('filter-button')).tap();\r\n      \r\n      // Rapidly change filters to test debouncing\r\n      await element(by.id('date-range-picker')).tap();\r\n      await element(by.id('last-week-option')).tap();\r\n      await element(by.id('last-month-option')).tap();\r\n      await element(by.id('last-year-option')).tap();\r\n      \r\n      // Close filters\r\n      await element(by.id('apply-filters-button')).tap();\r\n      \r\n      // Verify data loads without excessive API calls\r\n      await expect(element(by.id('analytics-summary'))).toBeVisible();\r\n    });\r\n\r\n    it('should export data efficiently', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('analytics-button')).tap();\r\n      \r\n      // Open export options\r\n      await element(by.id('export-button')).tap();\r\n      await expect(element(by.id('export-modal'))).toBeVisible();\r\n      \r\n      // Test CSV export\r\n      await element(by.id('export-csv-button')).tap();\r\n      \r\n      // Verify export completes without blocking UI\r\n      await expect(element(by.id('export-success-message'))).toBeVisible();\r\n      \r\n      // Close export modal\r\n      await element(by.id('close-export-modal')).tap();\r\n    });\r\n  });\r\n\r\n  describe('Memory Management', () => {\r\n    it('should handle navigation without memory leaks', async () => {\r\n      // Navigate through multiple screens to test memory management\r\n      await element(by.id('home-screen')).tap();\r\n      \r\n      // Go to teleprompter\r\n      await element(by.id('practice-button')).tap();\r\n      await expect(element(by.id('teleprompter-screen'))).toBeVisible();\r\n      \r\n      // Go back to home\r\n      await element(by.id('back-button')).tap();\r\n      await expect(element(by.id('home-screen'))).toBeVisible();\r\n      \r\n      // Go to analytics\r\n      await element(by.id('analytics-button')).tap();\r\n      await expect(element(by.id('analytics-screen'))).toBeVisible();\r\n      \r\n      // Go back to home\r\n      await element(by.id('back-button')).tap();\r\n      await expect(element(by.id('home-screen'))).toBeVisible();\r\n      \r\n      // Go to scripts\r\n      await element(by.id('scripts-tab')).tap();\r\n      await expect(element(by.id('scripts-screen'))).toBeVisible();\r\n      \r\n      // Verify app remains stable\r\n      await expect(element(by.id('scripts-screen'))).toBeVisible();\r\n    });\r\n\r\n    it('should clean up resources on app background', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('practice-button')).tap();\r\n      \r\n      // Enable speech recognition\r\n      await element(by.id('speech-recognition-toggle')).tap();\r\n      await element(by.id('play-button')).tap();\r\n      \r\n      // Background the app\r\n      await device.sendToHome();\r\n      await device.sleep(2000);\r\n      \r\n      // Bring app back to foreground\r\n      await device.launchApp({ newInstance: false });\r\n      \r\n      // Verify app recovers gracefully\r\n      await expect(element(by.id('teleprompter-screen'))).toBeVisible();\r\n    });\r\n  });\r\n\r\n  describe('Network Optimization', () => {\r\n    it('should handle offline mode gracefully', async () => {\r\n      // Simulate offline mode\r\n      await device.setStatusBarOverride({\r\n        time: '12:00',\r\n        dataNetwork: 'none',\r\n        wifiNetwork: 'none',\r\n        cellularService: 'none',\r\n      });\r\n      \r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('analytics-button')).tap();\r\n      \r\n      // Verify offline message appears\r\n      await expect(element(by.id('offline-message'))).toBeVisible();\r\n      \r\n      // Restore network\r\n      await device.setStatusBarOverride({\r\n        time: '12:00',\r\n        dataNetwork: 'wifi',\r\n        wifiNetwork: 'wifi',\r\n        cellularService: 'full',\r\n      });\r\n      \r\n      // Verify data loads when back online\r\n      await expect(element(by.id('analytics-summary'))).toBeVisible();\r\n    });\r\n  });\r\n\r\n  describe('Performance Monitoring', () => {\r\n    it('should track performance metrics', async () => {\r\n      await element(by.id('home-screen')).tap();\r\n      await element(by.id('practice-button')).tap();\r\n      \r\n      // Enable performance monitoring\r\n      await element(by.id('settings-button')).tap();\r\n      await element(by.id('performance-monitoring-toggle')).tap();\r\n      await element(by.id('close-settings')).tap();\r\n      \r\n      // Perform various actions to generate metrics\r\n      await element(by.id('play-button')).tap();\r\n      await device.sleep(3000);\r\n      await element(by.id('pause-button')).tap();\r\n      \r\n      // Navigate to analytics\r\n      await element(by.id('back-button')).tap();\r\n      await element(by.id('analytics-button')).tap();\r\n      \r\n      // Verify performance data is available\r\n      await expect(element(by.id('performance-metrics'))).toBeVisible();\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\jest-setup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":4,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":5,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":44,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":10}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { jest } from '@jest/globals';\r\n\r\n// Setup globals first\r\nglobal.window = global.window || {};\r\nglobal.document = global.document || {};\r\n\r\n// Mock Expo modules\r\njest.mock('expo-constants', () => ({\r\n  default: {\r\n    expoConfig: {\r\n      extra: {\r\n        deepgramApiKey: 'test-api-key',\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\njest.mock('expo-av', () => ({\r\n  Audio: {\r\n    Recording: jest.fn(() => ({\r\n      prepareToRecordAsync: jest.fn(),\r\n      startAsync: jest.fn(),\r\n      stopAndUnloadAsync: jest.fn(),\r\n      getURI: jest.fn(() => 'mock-uri'),\r\n    })),\r\n    RecordingOptions: {},\r\n    AndroidOutputFormat: { MPEG_4: 'mpeg4' },\r\n    AndroidAudioEncoder: { AAC: 'aac' },\r\n    IOSAudioQuality: { HIGH: 'high', MEDIUM: 'medium' },\r\n    setAudioModeAsync: jest.fn(),\r\n    requestPermissionsAsync: jest.fn(() => Promise.resolve({ status: 'granted' })),\r\n  },\r\n}));\r\n\r\njest.mock('expo-speech', () => ({\r\n  speak: jest.fn(),\r\n  stop: jest.fn(),\r\n  pause: jest.fn(),\r\n  resume: jest.fn(),\r\n}));\r\n\r\n// Mock @react-native-async-storage/async-storage\r\njest.mock('@react-native-async-storage/async-storage', () =>\r\n  require('@react-native-async-storage/async-storage/jest/async-storage-mock')\r\n);\r\n\r\n// Mock Firebase\r\njest.mock('firebase/firestore', () => ({\r\n  getFirestore: jest.fn(),\r\n  collection: jest.fn(),\r\n  doc: jest.fn(),\r\n  addDoc: jest.fn(),\r\n  updateDoc: jest.fn(),\r\n  deleteDoc: jest.fn(),\r\n  getDoc: jest.fn(),\r\n  getDocs: jest.fn(),\r\n  query: jest.fn(),\r\n  where: jest.fn(),\r\n  orderBy: jest.fn(),\r\n  limit: jest.fn(),\r\n  startAfter: jest.fn(),\r\n  onSnapshot: jest.fn(),\r\n  serverTimestamp: jest.fn(() => new Date()),\r\n  Timestamp: {\r\n    fromDate: jest.fn(date => ({ toDate: () => date })),\r\n    now: jest.fn(() => ({ toDate: () => new Date() })),\r\n  },\r\n}));\r\n\r\njest.mock('firebase/auth', () => ({\r\n  getAuth: jest.fn(),\r\n  signInWithEmailAndPassword: jest.fn(),\r\n  createUserWithEmailAndPassword: jest.fn(),\r\n  signOut: jest.fn(),\r\n  onAuthStateChanged: jest.fn(),\r\n}));\r\n\r\n// Mock React Navigation\r\njest.mock('@react-navigation/native', () => ({\r\n  useNavigation: () => ({\r\n    navigate: jest.fn(),\r\n    goBack: jest.fn(),\r\n    canGoBack: jest.fn(),\r\n  }),\r\n  useRoute: () => ({\r\n    params: {},\r\n  }),\r\n  useFocusEffect: jest.fn(),\r\n}));\r\n\r\n// Mock React Native Paper\r\njest.mock('react-native-paper', () => ({\r\n  Text: 'Text',\r\n  Button: 'Button',\r\n  Surface: 'Surface',\r\n  Card: 'Card',\r\n  ProgressBar: 'ProgressBar',\r\n  Provider: ({ children }) => children,\r\n}));\r\n\r\n// Mock audio and speech\r\njest.mock('expo-av', () => ({\r\n  Audio: {\r\n    Recording: jest.fn(),\r\n    setAudioModeAsync: jest.fn(),\r\n    requestPermissionsAsync: jest.fn(() => Promise.resolve({ granted: true })),\r\n  },\r\n}));\r\n\r\njest.mock('expo-speech', () => ({\r\n  speak: jest.fn(),\r\n  stop: jest.fn(),\r\n  isSpeakingAsync: jest.fn(() => Promise.resolve(false)),\r\n}));\r\n\r\n// Mock NetInfo\r\njest.mock('@react-native-community/netinfo', () => ({\r\n  addEventListener: jest.fn(() => jest.fn()),\r\n  fetch: jest.fn(() => Promise.resolve({ isConnected: true })),\r\n}));\r\n\r\n// Mock chart kit\r\njest.mock('react-native-chart-kit', () => ({\r\n  LineChart: 'LineChart',\r\n  BarChart: 'BarChart',\r\n  PieChart: 'PieChart',\r\n}));\r\n\r\n// Mock date picker\r\njest.mock('react-native-date-picker', () => 'DatePicker');\r\n\r\n// Mock Deepgram SDK\r\njest.mock('@deepgram/sdk', () => ({\r\n  createClient: jest.fn(() => ({\r\n    listen: {\r\n      live: jest.fn(() => ({\r\n        start: jest.fn(),\r\n        finish: jest.fn(),\r\n        on: jest.fn(),\r\n        off: jest.fn(),\r\n      })),\r\n    },\r\n  })),\r\n}));\r\n\r\n// Increase timeout for async operations\r\njest.setTimeout(10000);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\server\\interception-route-rewrite-manifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":5}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST=\"[]\";","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\server\\middleware-build-manifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":13,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":21},{"ruleId":"no-sparse-arrays","severity":2,"message":"Unexpected comma in middle of array.","line":14,"column":1,"nodeType":"ArrayExpression","messageId":"unexpectedSparseArray","endLine":14,"endColumn":2},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":14,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"globalThis.__BUILD_MANIFEST = {\n  \"pages\": {\n    \"/_app\": []\n  },\n  \"devFiles\": [],\n  \"ampDevFiles\": [],\n  \"polyfillFiles\": [],\n  \"lowPriorityFiles\": [],\n  \"rootMainFiles\": [],\n  \"ampFirstPages\": []\n};\nglobalThis.__BUILD_MANIFEST.lowPriorityFiles = [\n\"/static/\" + process.env.__NEXT_BUILD_ID + \"/_buildManifest.js\",\n,\"/static/\" + process.env.__NEXT_BUILD_ID + \"/_ssgManifest.js\",\n\n];","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\server\\next-font-manifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":5}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"self.__NEXT_FONT_MANIFEST=\"{\\n  \\\"app\\\": {},\\n  \\\"appUsingSizeAdjust\\\": false,\\n  \\\"pages\\\": {},\\n  \\\"pagesUsingSizeAdjust\\\": false\\n}\"","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\server\\server-reference-manifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":5}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"self.__RSC_SERVER_MANIFEST=\"{\\n  \\\"node\\\": {},\\n  \\\"edge\\\": {},\\n  \\\"encryptionKey\\\": \\\"O1dRqK+TqSKB4gPqqmJK+02y6QIjJ51T3BhcaxOwJ14=\\\"\\n}\"","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\static\\development\\_buildManifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":207,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":211},{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":235,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":239}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"self.__BUILD_MANIFEST = {\"__rewrites\":{\"afterFiles\":[],\"beforeFiles\":[],\"fallback\":[]},\"/_app\":[\"static/chunks/pages/_app.js\"],\"/_error\":[\"static/chunks/pages/_error.js\"],\"sortedPages\":[\"/_app\",\"/_error\"]};self.__BUILD_MANIFEST_CB && self.__BUILD_MANIFEST_CB()","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\.next\\static\\development\\_ssgManifest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'self' is not defined.","line":1,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":57}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"self.__SSG_MANIFEST=new Set;self.__SSG_MANIFEST_CB&&self.__SSG_MANIFEST_CB()","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\app\\dashboard\\scripts\\[id]\\page.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":73,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2300,2345],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'HTMLInputElement' is not defined.","line":80,"column":51,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useScripts } from '@/contexts/ScriptContext';\r\nimport RichTextEditor from '@/components/RichTextEditor';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport {\r\n  ArrowLeftIcon,\r\n  PlayIcon,\r\n  ShareIcon,\r\n  Cog6ToothIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport toast from 'react-hot-toast';\r\n\r\nimport { Script } from '@/types';\r\n\r\nexport default function ScriptEditorPage() {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { scripts, getScript, updateScript, createScript } = useScripts();\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const scriptId = params.id as string;\r\n  \r\n  const [script, setScript] = useState<Script | null>(null);\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [isNewScript, setIsNewScript] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/');\r\n      return;\r\n    }\r\n\r\n    if (scriptId === 'new') {\r\n      setIsNewScript(true);\r\n      setTitle('Untitled Script');\r\n      setContent('');\r\n    } else if (scriptId && scripts.length > 0) {\r\n      const foundScript = getScript(scriptId);\r\n      if (foundScript) {\r\n        setScript(foundScript);\r\n        setTitle(foundScript.title);\r\n        setContent(foundScript.content);\r\n      } else {\r\n        toast.error('Script not found');\r\n        router.push('/dashboard');\r\n      }\r\n    }\r\n  }, [scriptId, scripts, user, authLoading, getScript, router]);\r\n\r\n  const handleSave = async () => {\r\n    if (!title.trim()) {\r\n      toast.error('Please enter a title');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (isNewScript) {\r\n        const newScript = await createScript(title, content);\r\n        toast.success('Script created successfully');\r\n        router.push(`/dashboard/scripts/${newScript.id}`);\r\n      } else if (script) {\r\n        await updateScript(script.id, { title, content });\r\n        toast.success('Script saved successfully');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving script:', error);\r\n      toast.error('Failed to save script');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setTitle(e.target.value);\r\n  };\r\n\r\n  const handleContentChange = (newContent: string) => {\r\n    setContent(newContent);\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"max-w-5xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.push('/dashboard')}\r\n                className=\"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100\"\r\n              >\r\n                <ArrowLeftIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <div className=\"flex-1\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={title}\r\n                  onChange={handleTitleChange}\r\n                  className=\"text-2xl font-bold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-0 p-0\"\r\n                  placeholder=\"Script title\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-2\">\r\n              <button className=\"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100\">\r\n                <Cog6ToothIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button className=\"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100\">\r\n                <ShareIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2\">\r\n                <PlayIcon className=\"h-4 w-4\" />\r\n                <span>Present</span>\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                disabled={loading}\r\n                className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-lg\"\r\n              >\r\n                {loading ? 'Saving...' : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Editor */}\r\n        <div className=\"mb-6\">\r\n          <RichTextEditor\r\n            content={content}\r\n            onContentChange={handleContentChange}\r\n            placeholder=\"Start writing your script...\"\r\n            autoFocus={true}\r\n            className=\"min-h-[600px]\"\r\n          />\r\n        </div>\r\n\r\n        {/* Auto-save indicator */}\r\n        <div className=\"text-center text-sm text-gray-500\">\r\n          <div className=\"flex items-center justify-center space-x-2\">\r\n            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n            <span>Auto-save enabled  Last saved 2 minutes ago</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\app\\dashboard\\scripts\\page.tsx","messages":[{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":62,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":62,"endColumn":76},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":62,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":67,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":22,"suggestions":[{"fix":{"range":[2091,2138],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useScripts } from '@/contexts/ScriptContext';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  PlusIcon,\r\n  DocumentTextIcon,\r\n  MagnifyingGlassIcon,\r\n  FunnelIcon,\r\n  EyeIcon,\r\n  PencilIcon,\r\n  TrashIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function ScriptsPage() {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { scripts, loading: scriptsLoading, deleteScript } = useScripts();\r\n  const router = useRouter();\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortBy, setSortBy] = useState<'title' | 'updatedAt' | 'wordCount'>('updatedAt');\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/');\r\n    }\r\n  }, [user, authLoading, router]);\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const filteredScripts = scripts\r\n    .filter(script =>\r\n      script.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      script.content.toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n    .sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'title':\r\n          return a.title.localeCompare(b.title);\r\n        case 'wordCount':\r\n          return (b.wordCount || 0) - (a.wordCount || 0);\r\n        case 'updatedAt':\r\n        default:\r\n          return new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime();\r\n      }\r\n    });\r\n\r\n  const handleDeleteScript = async (scriptId: string, scriptTitle: string) => {\r\n    if (window.confirm(`Are you sure you want to delete \"${scriptTitle}\"?`)) {\r\n      try {\r\n        await deleteScript(scriptId);\r\n        toast.success('Script deleted successfully');\r\n      } catch (error) {\r\n        console.error('Error deleting script:', error);\r\n        toast.error('Failed to delete script');\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const formatDuration = (seconds: number) => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    return `${minutes} min`;\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">Scripts</h1>\r\n              <p className=\"text-gray-600 mt-2\">\r\n                Manage your teleprompter scripts and create new content.\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => router.push('/dashboard/scripts/new')}\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2\"\r\n            >\r\n              <PlusIcon className=\"h-5 w-5\" />\r\n              <span>New Script</span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <MagnifyingGlassIcon className=\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search scripts...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value as typeof sortBy)}\r\n                className=\"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"updatedAt\">Recently Updated</option>\r\n                <option value=\"title\">Title A-Z</option>\r\n                <option value=\"wordCount\">Word Count</option>\r\n              </select>\r\n              <FunnelIcon className=\"h-4 w-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scripts Grid */}\r\n        {scriptsLoading ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n            <p className=\"text-gray-500 mt-2\">Loading scripts...</p>\r\n          </div>\r\n        ) : filteredScripts.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <DocumentTextIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              {searchTerm ? 'No scripts found' : 'No scripts yet'}\r\n            </h3>\r\n            <p className=\"text-gray-500 mb-4\">\r\n              {searchTerm\r\n                ? 'Try adjusting your search terms'\r\n                : 'Get started by creating your first teleprompter script.'}\r\n            </p>\r\n            {!searchTerm && (\r\n              <button\r\n                onClick={() => router.push('/dashboard/scripts/new')}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\"\r\n              >\r\n                Create Your First Script\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredScripts.map((script) => (\r\n              <div\r\n                key={script.id}\r\n                className=\"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow\"\r\n              >\r\n                <div className=\"p-6\">\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 truncate flex-1 mr-2\">\r\n                      {script.title}\r\n                    </h3>\r\n                    <span className={`px-2 py-1 rounded-full text-xs flex-shrink-0 ${\r\n                      script.syncStatus === 'synced' \r\n                        ? 'bg-green-100 text-green-800'\r\n                        : script.syncStatus === 'pending'\r\n                        ? 'bg-yellow-100 text-yellow-800'\r\n                        : script.syncStatus === 'conflict'\r\n                        ? 'bg-red-100 text-red-800'\r\n                        : 'bg-gray-100 text-gray-800'\r\n                    }`}>\r\n                      {script.syncStatus}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"text-sm text-gray-500 space-y-1 mb-4\">\r\n                    <div>Updated {formatDate(script.updatedAt)}</div>\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <span>{script.wordCount || 0} words</span>\r\n                      <span>{formatDuration(script.estimatedDuration || 0)}</span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button\r\n                        onClick={() => router.push(`/dashboard/scripts/${script.id}`)}\r\n                        className=\"p-2 text-gray-400 hover:text-blue-600 rounded-md hover:bg-blue-50\"\r\n                        title=\"View\"\r\n                      >\r\n                        <EyeIcon className=\"h-4 w-4\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => router.push(`/dashboard/scripts/${script.id}`)}\r\n                        className=\"p-2 text-gray-400 hover:text-blue-600 rounded-md hover:bg-blue-50\"\r\n                        title=\"Edit\"\r\n                      >\r\n                        <PencilIcon className=\"h-4 w-4\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeleteScript(script.id, script.title)}\r\n                        className=\"p-2 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50\"\r\n                        title=\"Delete\"\r\n                      >\r\n                        <TrashIcon className=\"h-4 w-4\" />\r\n                      </button>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => router.push(`/dashboard/scripts/${script.id}`)}\r\n                      className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n                    >\r\n                      Open \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\AuthModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\DashboardLayout.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":35,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":20,"suggestions":[{"fix":{"range":[989,1032],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useScripts } from '@/contexts/ScriptContext';\r\nimport {\r\n  DocumentTextIcon,\r\n  HomeIcon,\r\n  Cog6ToothIcon,\r\n  UserCircleIcon,\r\n  ArrowRightOnRectangleIcon,\r\n  CloudArrowUpIcon,\r\n  ExclamationTriangleIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { NavItem } from '@/types';\r\n\r\nconst navigation: NavItem[] = [\r\n  { name: 'Dashboard', href: '/dashboard', icon: HomeIcon, current: true },\r\n  { name: 'Scripts', href: '/dashboard/scripts', icon: DocumentTextIcon },\r\n  { name: 'Settings', href: '/dashboard/settings', icon: Cog6ToothIcon },\r\n];\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\r\n  const { user, signOut } = useAuth();\r\n  const { syncStatus } = useScripts();\r\n\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await signOut();\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Sidebar */}\r\n      <div className=\"fixed inset-y-0 left-0 w-64 bg-white shadow-lg\">\r\n        <div className=\"flex flex-col h-full\">\r\n          {/* Logo */}\r\n          <div className=\"flex items-center px-6 py-4 border-b\">\r\n            <h1 className=\"text-xl font-bold text-blue-600\">SpeakSync</h1>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"flex-1 px-4 py-6 space-y-2\">\r\n            {navigation.map((item) => (\r\n              <a\r\n                key={item.name}\r\n                href={item.href}\r\n                className={`flex items-center px-3 py-2 text-sm font-medium rounded-md ${\r\n                  item.current\r\n                    ? 'bg-blue-100 text-blue-700'\r\n                    : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n              >\r\n                <item.icon className=\"mr-3 h-5 w-5\" />\r\n                {item.name}\r\n              </a>\r\n            ))}\r\n          </nav>\r\n\r\n          {/* Sync Status */}\r\n          <div className=\"px-4 py-4 border-t\">\r\n            <div className=\"flex items-center text-xs text-gray-500\">\r\n              {syncStatus.isOnline ? (\r\n                <>\r\n                  <CloudArrowUpIcon className=\"h-4 w-4 mr-2 text-green-500\" />\r\n                  <span>Synced</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <ExclamationTriangleIcon className=\"h-4 w-4 mr-2 text-yellow-500\" />\r\n                  <span>Offline</span>\r\n                </>\r\n              )}\r\n              {syncStatus.pendingChanges > 0 && (\r\n                <span className=\"ml-2 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs\">\r\n                  {syncStatus.pendingChanges} pending\r\n                </span>\r\n              )}\r\n            </div>\r\n            {syncStatus.lastSyncAt && (\r\n              <div className=\"text-xs text-gray-400 mt-1\">\r\n                Last sync: {new Date(syncStatus.lastSyncAt).toLocaleTimeString()}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* User Menu */}\r\n          <div className=\"px-4 py-4 border-t\">\r\n            <div className=\"flex items-center mb-3\">\r\n              <UserCircleIcon className=\"h-8 w-8 text-gray-400 mr-3\" />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n                  {user?.displayName || user?.email}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 truncate\">{user?.email}</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleSignOut}\r\n              className=\"flex items-center w-full px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md\"\r\n            >\r\n              <ArrowRightOnRectangleIcon className=\"mr-3 h-4 w-4\" />\r\n              Sign Out\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"ml-64\">\r\n        {/* Top Bar */}\r\n        <header className=\"bg-white shadow-sm border-b\">\r\n          <div className=\"px-6 py-4\">\r\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Page Content */}\r\n        <main className=\"p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\RichTextEditor.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'content' is defined but never used.","line":21,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"content"},"fix":{"range":[631,646],"text":""},"desc":"Remove unused variable 'content'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Typography from '@tiptap/extension-typography';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport CharacterCount from '@tiptap/extension-character-count';\r\nimport {\r\n  BoldIcon,\r\n  ItalicIcon,\r\n  UnderlineIcon,\r\n  ListBulletIcon,\r\n  NumberedListIcon,\r\n  ChatBubbleLeftRightIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { WordCount } from '@/types';\r\n\r\ninterface RichTextEditorProps {\r\n  content: string;\r\n  onContentChange: (content: string) => void;\r\n  placeholder?: string;\r\n  autoFocus?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport default function RichTextEditor({\r\n  content,\r\n  onContentChange,\r\n  placeholder = 'Start writing your script...',\r\n  autoFocus = false,\r\n  className = '',\r\n}: RichTextEditorProps) {\r\n  const [wordCount, setWordCount] = useState<WordCount>({\r\n    characters: 0,\r\n    charactersWithoutSpaces: 0,\r\n    words: 0,\r\n    paragraphs: 0,\r\n  });\r\n\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit,\r\n      Typography,\r\n      Placeholder.configure({\r\n        placeholder,\r\n      }),\r\n      CharacterCount.configure({\r\n        limit: 100000,\r\n      }),\r\n    ],\r\n    content,\r\n    onUpdate: ({ editor }) => {\r\n      const html = editor.getHTML();\r\n      onContentChange(html);\r\n      \r\n      // Calculate word count\r\n      const text = editor.getText();\r\n      const words = text.trim().split(/\\s+/).filter(word => word.length > 0);\r\n      const paragraphs = text.split(/\\n\\s*\\n/).filter(p => p.trim().length > 0);\r\n      \r\n      setWordCount({\r\n        characters: text.length,\r\n        charactersWithoutSpaces: text.replace(/\\s/g, '').length,\r\n        words: words.length,\r\n        paragraphs: paragraphs.length,\r\n      });\r\n    },\r\n    editorProps: {\r\n      attributes: {\r\n        class: 'prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4',\r\n      },\r\n    },\r\n    autofocus: autoFocus,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editor && content !== editor.getHTML()) {\r\n      editor.commands.setContent(content);\r\n    }\r\n  }, [content, editor]);\r\n\r\n  if (!editor) {\r\n    return null;\r\n  }\r\n\r\n  const formatTime = (minutes: number) => {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = Math.round(minutes % 60);\r\n    return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;\r\n  };\r\n\r\n  const estimatedReadingTime = Math.ceil(wordCount.words / 150); // Assuming 150 WPM\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow-sm border ${className}`}>\r\n      {/* Toolbar */}\r\n      <div className=\"flex items-center justify-between p-4 border-b\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleBold().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('bold') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Bold\"\r\n          >\r\n            <BoldIcon className=\"h-4 w-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleItalic().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('italic') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Italic\"\r\n          >\r\n            <ItalicIcon className=\"h-4 w-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleStrike().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('strike') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Strikethrough\"\r\n          >\r\n            <UnderlineIcon className=\"h-4 w-4\" />\r\n          </button>\r\n          <div className=\"w-px h-6 bg-gray-300\" />\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('bulletList') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Bullet List\"\r\n          >\r\n            <ListBulletIcon className=\"h-4 w-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('orderedList') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Numbered List\"\r\n          >\r\n            <NumberedListIcon className=\"h-4 w-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => editor.chain().focus().toggleBlockquote().run()}\r\n            className={`p-2 rounded-md ${\r\n              editor.isActive('blockquote') ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:bg-gray-100'\r\n            }`}\r\n            title=\"Quote\"\r\n          >\r\n            <ChatBubbleLeftRightIcon className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n          <span>Words: {wordCount.words}</span>\r\n          <span>Reading: {formatTime(estimatedReadingTime)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Editor */}\r\n      <div className=\"min-h-[400px]\">\r\n        <EditorContent editor={editor} />\r\n      </div>\r\n\r\n      {/* Status Bar */}\r\n      <div className=\"flex items-center justify-between p-4 border-t bg-gray-50 text-sm text-gray-500\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <span>{wordCount.characters} characters</span>\r\n          <span>{wordCount.paragraphs} paragraphs</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n          <span>Saved</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\SubscriptionManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":25,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier"},"fix":{"range":[498,510],"text":""},"desc":"Remove unused variable 'tier'."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":111,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":111,"endColumn":59,"fix":{"range":[2753,2785],"text":"{return 'text-red-600 bg-red-50';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":112,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":112,"endColumn":65,"fix":{"range":[2813,2851],"text":"{return 'text-yellow-600 bg-yellow-50';}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":131,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":131,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":131,"endColumn":18,"suggestions":[{"fix":{"range":[3514,3554],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":132,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":132,"endColumn":69},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":132,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":132,"endColumn":12}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":2,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n  CheckIcon,\r\n  StarIcon,\r\n  BoltIcon,\r\n  GlobeAltIcon,\r\n  ShieldCheckIcon,\r\n} from '@heroicons/react/24/outline';\r\n\r\nexport interface SubscriptionTier {\r\n  name: string;\r\n  price: number;\r\n  yearlyPrice: number;\r\n  description: string;\r\n  features: string[];\r\n  popular?: boolean;\r\n  current?: boolean;\r\n}\r\n\r\ninterface SubscriptionManagerProps {\r\n  currentTier?: string;\r\n  onUpgrade?: (tier: string) => void;\r\n}\r\n\r\nconst tiers: SubscriptionTier[] = [\r\n  {\r\n    name: 'Free',\r\n    price: 0,\r\n    yearlyPrice: 0,\r\n    description: 'Perfect for individuals getting started',\r\n    features: [\r\n      '5 scripts',\r\n      '1 team (3 members)',\r\n      'Basic editor',\r\n      'Local storage',\r\n      'Community support',\r\n    ],\r\n  },\r\n  {\r\n    name: 'Personal',\r\n    price: 9.99,\r\n    yearlyPrice: 99.99,\r\n    description: 'For professionals who need more power',\r\n    features: [\r\n      '50 scripts',\r\n      '3 teams (5 members each)',\r\n      'Cloud sync',\r\n      'Advanced editor',\r\n      'Analytics dashboard',\r\n      'Priority support',\r\n      'Export options',\r\n    ],\r\n    popular: true,\r\n  },\r\n  {\r\n    name: 'Business',\r\n    price: 29.99,\r\n    yearlyPrice: 299.99,\r\n    description: 'For teams and growing businesses',\r\n    features: [\r\n      '500 scripts',\r\n      '10 teams (50 members each)',\r\n      'Team collaboration',\r\n      'Advanced analytics',\r\n      'Custom branding',\r\n      'API access',\r\n      'SSO integration',\r\n      'Priority support',\r\n      'Bulk export',\r\n    ],\r\n  },\r\n  {\r\n    name: 'Enterprise',\r\n    price: 99.99,\r\n    yearlyPrice: 999.99,\r\n    description: 'For large organizations with custom needs',\r\n    features: [\r\n      'Unlimited scripts',\r\n      'Unlimited teams',\r\n      'Advanced team management',\r\n      'Custom integrations',\r\n      'Dedicated support',\r\n      'On-premise deployment',\r\n      'Advanced security',\r\n      'Custom contracts',\r\n      'Training & onboarding',\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function SubscriptionManager({ currentTier = 'Free', onUpgrade }: SubscriptionManagerProps) {\r\n  const [billingCycle, setBillingCycle] = useState<'monthly' | 'yearly'>('monthly');\r\n  const [showUsage, setShowUsage] = useState(false);\r\n  \r\n  // Mock usage data - would come from real subscription service\r\n  const usageData = {\r\n    scripts: { used: 12, limit: 50 },\r\n    teams: { used: 2, limit: 3 },\r\n    storage: { used: 1.2, limit: 5.0 }, // GB\r\n    members: { used: 8, limit: 15 },\r\n  };\r\n\r\n  const getUsagePercentage = (used: number, limit: number) => {\r\n    return Math.min((used / limit) * 100, 100);\r\n  };\r\n\r\n  const getUsageColor = (percentage: number) => {\r\n    if (percentage >= 90) return 'text-red-600 bg-red-50';\r\n    if (percentage >= 75) return 'text-yellow-600 bg-yellow-50';\r\n    return 'text-green-600 bg-green-50';\r\n  };\r\n\r\n  const getTierIcon = (tierName: string) => {\r\n    switch (tierName.toLowerCase()) {\r\n      case 'free': return <GlobeAltIcon className=\"w-6 h-6\" />;\r\n      case 'personal': return <StarIcon className=\"w-6 h-6\" />;\r\n      case 'business': return <BoltIcon className=\"w-6 h-6\" />;\r\n      case 'enterprise': return <ShieldCheckIcon className=\"w-6 h-6\" />;\r\n      default: return <GlobeAltIcon className=\"w-6 h-6\" />;\r\n    }\r\n  };\r\n\r\n  const handleUpgrade = (tierName: string) => {\r\n    if (onUpgrade) {\r\n      onUpgrade(tierName);\r\n    } else {\r\n      // Default behavior - open Stripe checkout or similar\r\n      console.log(`Upgrading to ${tierName}`);\r\n      alert(`This would open the payment flow for ${tierName} tier`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n      {/* Header */}\r\n      <div className=\"text-center mb-12\">\r\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\r\n          Choose Your Plan\r\n        </h1>\r\n        <p className=\"text-xl text-gray-600 mb-8\">\r\n          Unlock the full potential of SpeakSync with the right plan for you\r\n        </p>\r\n        \r\n        {/* Billing Toggle */}\r\n        <div className=\"flex items-center justify-center mb-8\">\r\n          <span className={`mr-3 ${billingCycle === 'monthly' ? 'text-gray-900 font-medium' : 'text-gray-500'}`}>\r\n            Monthly\r\n          </span>\r\n          <button\r\n            onClick={() => setBillingCycle(billingCycle === 'monthly' ? 'yearly' : 'monthly')}\r\n            className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${\r\n              billingCycle === 'yearly' ? 'bg-blue-600' : 'bg-gray-200'\r\n            }`}\r\n          >\r\n            <span\r\n              className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\r\n                billingCycle === 'yearly' ? 'translate-x-6' : 'translate-x-1'\r\n              }`}\r\n            />\r\n          </button>\r\n          <span className={`ml-3 ${billingCycle === 'yearly' ? 'text-gray-900 font-medium' : 'text-gray-500'}`}>\r\n            Yearly\r\n            <span className=\"ml-1 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n              Save 17%\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Usage (if user has a subscription) */}\r\n      {currentTier !== 'Free' && (\r\n        <div className=\"mb-12\">\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Current Usage</h2>\r\n              <button\r\n                onClick={() => setShowUsage(!showUsage)}\r\n                className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n              >\r\n                {showUsage ? 'Hide Details' : 'Show Details'}\r\n              </button>\r\n            </div>\r\n            \r\n            {showUsage && (\r\n              <motion.div\r\n                initial={{ opacity: 0, height: 0 }}\r\n                animate={{ opacity: 1, height: 'auto' }}\r\n                exit={{ opacity: 0, height: 0 }}\r\n                className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\"\r\n              >\r\n                {Object.entries(usageData).map(([key, value]) => {\r\n                  const percentage = getUsagePercentage(value.used, value.limit);\r\n                  const colorClass = getUsageColor(percentage);\r\n                  \r\n                  return (\r\n                    <div key={key} className=\"text-center\">\r\n                      <div className=\"mb-2\">\r\n                        <span className=\"text-2xl font-bold text-gray-900\">\r\n                          {key === 'storage' ? `${value.used.toFixed(1)}GB` : value.used}\r\n                        </span>\r\n                        <span className=\"text-gray-500\">\r\n                          {' / '}{key === 'storage' ? `${value.limit}GB` : value.limit}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\r\n                        <div\r\n                          className={`h-2 rounded-full transition-all duration-300 ${\r\n                            percentage >= 90 ? 'bg-red-500' :\r\n                            percentage >= 75 ? 'bg-yellow-500' :\r\n                            'bg-green-500'\r\n                          }`}\r\n                          style={{ width: `${percentage}%` }}\r\n                        />\r\n                      </div>\r\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${colorClass}`}>\r\n                        {key.charAt(0).toUpperCase() + key.slice(1)}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pricing Tiers */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\r\n        {tiers.map((tier, index) => {\r\n          const monthlyPrice = billingCycle === 'yearly' ? tier.yearlyPrice / 12 : tier.price;\r\n          const isCurrentTier = tier.name === currentTier;\r\n          \r\n          return (\r\n            <motion.div\r\n              key={tier.name}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className={`relative bg-white rounded-2xl shadow-lg border-2 overflow-hidden ${\r\n                tier.popular \r\n                  ? 'border-blue-500 ring-2 ring-blue-200' \r\n                  : isCurrentTier\r\n                  ? 'border-green-500 ring-2 ring-green-200'\r\n                  : 'border-gray-200'\r\n              }`}\r\n            >\r\n              {tier.popular && (\r\n                <div className=\"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-sm font-medium\">\r\n                  Most Popular\r\n                </div>\r\n              )}\r\n              \r\n              {isCurrentTier && (\r\n                <div className=\"absolute top-0 right-0 bg-green-500 text-white px-3 py-1 text-sm font-medium\">\r\n                  Current Plan\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"p-8\">\r\n                <div className=\"flex items-center mb-4\">\r\n                  <div className={`p-2 rounded-lg ${\r\n                    tier.popular ? 'bg-blue-100 text-blue-600' :\r\n                    isCurrentTier ? 'bg-green-100 text-green-600' :\r\n                    'bg-gray-100 text-gray-600'\r\n                  }`}>\r\n                    {getTierIcon(tier.name)}\r\n                  </div>\r\n                  <h3 className=\"ml-3 text-xl font-bold text-gray-900\">{tier.name}</h3>\r\n                </div>\r\n\r\n                <p className=\"text-gray-600 mb-6\">{tier.description}</p>\r\n\r\n                <div className=\"mb-8\">\r\n                  <div className=\"flex items-baseline\">\r\n                    <span className=\"text-4xl font-bold text-gray-900\">\r\n                      ${monthlyPrice.toFixed(2)}\r\n                    </span>\r\n                    <span className=\"text-gray-500 ml-1\">/month</span>\r\n                  </div>\r\n                  {billingCycle === 'yearly' && tier.price > 0 && (\r\n                    <p className=\"text-sm text-green-600 mt-1\">\r\n                      Billed annually (${tier.yearlyPrice}/year)\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                <ul className=\"space-y-4 mb-8\">\r\n                  {tier.features.map((feature, featureIndex) => (\r\n                    <li key={featureIndex} className=\"flex items-start\">\r\n                      <CheckIcon className=\"w-5 h-5 text-green-500 mr-3 mt-0.5 flex-shrink-0\" />\r\n                      <span className=\"text-gray-700\">{feature}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                <button\r\n                  onClick={() => handleUpgrade(tier.name)}\r\n                  disabled={isCurrentTier}\r\n                  className={`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${\r\n                    isCurrentTier\r\n                      ? 'bg-gray-100 text-gray-500 cursor-not-allowed'\r\n                      : tier.popular\r\n                      ? 'bg-blue-600 text-white hover:bg-blue-700'\r\n                      : 'bg-gray-900 text-white hover:bg-gray-800'\r\n                  }`}\r\n                >\r\n                  {isCurrentTier \r\n                    ? 'Current Plan' \r\n                    : tier.name === 'Free' \r\n                    ? 'Downgrade' \r\n                    : `Upgrade to ${tier.name}`\r\n                  }\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* FAQ Section */}\r\n      <div className=\"mt-16\">\r\n        <h2 className=\"text-3xl font-bold text-gray-900 text-center mb-12\">\r\n          Frequently Asked Questions\r\n        </h2>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\r\n          {[\r\n            {\r\n              question: \"Can I change my plan anytime?\",\r\n              answer: \"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately for upgrades, and at the end of your billing cycle for downgrades.\"\r\n            },\r\n            {\r\n              question: \"What happens to my data if I downgrade?\",\r\n              answer: \"Your data is never deleted. If you exceed the limits of your new plan, you'll have read-only access until you upgrade again or remove some content.\"\r\n            },\r\n            {\r\n              question: \"Do you offer refunds?\",\r\n              answer: \"We offer a 30-day money-back guarantee for annual plans. Monthly plans are billed in advance and are non-refundable.\"\r\n            },\r\n            {\r\n              question: \"Is there a discount for nonprofits?\",\r\n              answer: \"Yes! We offer a 50% discount on all paid plans for qualified nonprofit organizations. Contact our support team to apply.\"\r\n            }\r\n          ].map((faq, index) => (\r\n            <div key={index} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\r\n                {faq.question}\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                {faq.answer}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contact Section */}\r\n      <div className=\"mt-16 text-center\">\r\n        <div className=\"bg-gray-50 rounded-2xl p-8\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n            Need a Custom Solution?\r\n          </h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Looking for something specific? We offer custom enterprise solutions \r\n            tailored to your organization&apos;s needs.\r\n          </p>\r\n          <button className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold\">\r\n            Contact Sales\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\TeamManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":22,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[540,554],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":22,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":26,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[661,675],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":26,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":30,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[784,793],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":30,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[790,793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[790,793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":34,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[900,914],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":34,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":38,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[1026,1040],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":38,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":41,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[1127,1141],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":41,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1136,1139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1136,1139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":44,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[1232,1246],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":44,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1241,1244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1241,1244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":51,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[1389,1406],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showTeamSettings' is assigned a value but never used.","line":65,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"showTeamSettings"},"fix":{"range":[2078,2094],"text":""},"desc":"Remove unused variable 'showTeamSettings'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showTeamSettings' is assigned a value but never used.","line":65,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":26},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTeams'. Either include it or remove the dependency array.","line":77,"column":6,"nodeType":"ArrayExpression","endLine":77,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUserId, loadTeams]","fix":{"range":[2568,2583],"text":"[currentUserId, loadTeams]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadInvitations' and 'loadTeamMembers'. Either include them or remove the dependency array.","line":84,"column":6,"nodeType":"ArrayExpression","endLine":84,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [loadInvitations, loadTeamMembers, selectedTeam]","fix":{"range":[2699,2713],"text":"[loadInvitations, loadTeamMembers, selectedTeam]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":95,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":20,"suggestions":[{"fix":{"range":[3020,3065],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":102,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":102,"endColumn":31,"fix":{"range":[3189,3196],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":108,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":20,"suggestions":[{"fix":{"range":[3350,3402],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":113,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":113,"endColumn":31,"fix":{"range":[3483,3490],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":119,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":119,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":119,"endColumn":20,"suggestions":[{"fix":{"range":[3624,3675],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":125,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":125,"endColumn":37,"fix":{"range":[3806,3813],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":147,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":147,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":147,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":147,"endColumn":20,"suggestions":[{"fix":{"range":[4457,4502],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":148,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":148,"endColumn":56},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":148,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":148,"endColumn":12},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":156,"column":47,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":156,"endColumn":54,"fix":{"range":[4756,4763],"text":"{return;}"}},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":169,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":169,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":169,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":169,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":176,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":176,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":20,"suggestions":[{"fix":{"range":[5285,5332],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":177,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":177,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":177,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":12},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":184,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":184,"endColumn":31,"fix":{"range":[5542,5549],"text":"{return;}"}},{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":192,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":192,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'confirm' is not defined.","line":192,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":192,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":203,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":203,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":203,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":203,"endColumn":22,"suggestions":[{"fix":{"range":[6244,6292],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":204,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":204,"endColumn":63},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":204,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":14},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":210,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":210,"endColumn":31,"fix":{"range":[6485,6492],"text":"{return;}"}},{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":212,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":212,"endColumn":86},{"ruleId":"no-undef","severity":2,"message":"'confirm' is not defined.","line":212,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":212,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":217,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":217,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":217,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":217,"endColumn":22,"suggestions":[{"fix":{"range":[6761,6806],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":218,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":218,"endColumn":65},{"ruleId":"no-undef","severity":2,"message":"'alert' is not defined.","line":218,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":218,"endColumn":14}],"suppressedMessages":[],"errorCount":37,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":6,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  UserGroupIcon,\r\n  PlusIcon,\r\n  CogIcon,\r\n  UserIcon,\r\n  EnvelopeIcon,\r\n  TrashIcon,\r\n  ClockIcon,\r\n  ShieldCheckIcon,\r\n  PencilIcon,\r\n  EyeIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { Team, TeamMember, TeamInvitation, TeamRole } from '../types';\r\n// import { teamService } from '../services/teamService';\r\n\r\n// Placeholder teamService for now\r\nconst teamService = {\r\n  getUserTeams: async (userId: string): Promise<Team[]> => {\r\n    // Placeholder implementation\r\n    return [];\r\n  },\r\n  getTeamMembers: async (teamId: string): Promise<TeamMember[]> => {\r\n    // Placeholder implementation\r\n    return [];\r\n  },\r\n  createTeam: async (data: any): Promise<string> => {\r\n    // Placeholder implementation\r\n    return 'team-id';\r\n  },\r\n  getTeam: async (teamId: string): Promise<Team | null> => {\r\n    // Placeholder implementation\r\n    return null;\r\n  },\r\n  inviteMember: async (...args: any[]): Promise<void> => {\r\n    // Placeholder implementation\r\n  },\r\n  removeMember: async (...args: any[]): Promise<void> => {\r\n    // Placeholder implementation\r\n  },\r\n  updateMemberRole: async (...args: any[]): Promise<void> => {\r\n    // Placeholder implementation\r\n  },\r\n};\r\n\r\ninterface TeamManagerProps {\r\n  currentUserId: string;\r\n  onTeamSelect: (team: Team | null) => void;\r\n}\r\n\r\nexport default function TeamManager({ currentUserId, onTeamSelect }: TeamManagerProps) {\r\n  const [teams, setTeams] = useState<Team[]>([]);\r\n  const [selectedTeam, setSelectedTeam] = useState<Team | null>(null);\r\n  const [teamMembers, setTeamMembers] = useState<TeamMember[]>([]);\r\n  const [invitations, setInvitations] = useState<TeamInvitation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'teams' | 'members' | 'invitations'>('teams');\r\n  \r\n  // Modals\r\n  const [showCreateTeam, setShowCreateTeam] = useState(false);\r\n  const [showInviteMember, setShowInviteMember] = useState(false);\r\n  const [showTeamSettings, setShowTeamSettings] = useState(false);\r\n  \r\n  // Form states\r\n  const [newTeamName, setNewTeamName] = useState('');\r\n  const [newTeamDescription, setNewTeamDescription] = useState('');\r\n  const [inviteEmail, setInviteEmail] = useState('');\r\n  const [inviteRole, setInviteRole] = useState<TeamRole>('viewer');\r\n  const [inviteMessage, setInviteMessage] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadTeams();\r\n  }, [currentUserId]);\r\n\r\n  useEffect(() => {\r\n    if (selectedTeam) {\r\n      loadTeamMembers();\r\n      loadInvitations();\r\n    }\r\n  }, [selectedTeam]);\r\n\r\n  const loadTeams = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const userTeams = await teamService.getUserTeams(currentUserId);\r\n      setTeams(userTeams);\r\n      if (userTeams.length > 0 && !selectedTeam) {\r\n        setSelectedTeam(userTeams[0]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading teams:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadTeamMembers = async () => {\r\n    if (!selectedTeam) return;\r\n    \r\n    try {\r\n      const members = await teamService.getTeamMembers(selectedTeam.id);\r\n      setTeamMembers(members);\r\n    } catch (error) {\r\n      console.error('Error loading team members:', error);\r\n    }\r\n  };\r\n\r\n  const loadInvitations = async () => {\r\n    if (!selectedTeam) return;\r\n    \r\n    try {\r\n      // This would need to be implemented in teamService\r\n      setInvitations([]);\r\n    } catch (error) {\r\n      console.error('Error loading invitations:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreateTeam = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newTeamName.trim()) return;\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      const teamId = await teamService.createTeam({\r\n        name: newTeamName.trim(),\r\n        description: newTeamDescription.trim() || undefined,\r\n        ownerId: currentUserId,\r\n        subscriptionTier: 'business', // This should come from user's subscription\r\n      });\r\n\r\n      const newTeam = await teamService.getTeam(teamId);\r\n      if (newTeam) {\r\n        setTeams([...teams, newTeam]);\r\n        setSelectedTeam(newTeam);\r\n        onTeamSelect(newTeam);\r\n      }\r\n\r\n      setShowCreateTeam(false);\r\n      setNewTeamName('');\r\n      setNewTeamDescription('');\r\n    } catch (error) {\r\n      console.error('Error creating team:', error);\r\n      alert('Failed to create team. Please try again.');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleInviteMember = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedTeam || !inviteEmail.trim()) return;\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      await teamService.inviteMember(\r\n        selectedTeam.id,\r\n        inviteEmail.trim(),\r\n        inviteRole,\r\n        currentUserId,\r\n        'Current User', // This should come from user data\r\n        inviteMessage.trim() || undefined\r\n      );\r\n\r\n      alert('Invitation sent successfully!');\r\n      setShowInviteMember(false);\r\n      setInviteEmail('');\r\n      setInviteMessage('');\r\n      setInviteRole('viewer');\r\n      loadInvitations();\r\n    } catch (error) {\r\n      console.error('Error inviting member:', error);\r\n      alert('Failed to send invitation. Please try again.');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveMember = async (member: TeamMember) => {\r\n    if (!selectedTeam) return;\r\n    \r\n    const isCurrentUser = member.userId === currentUserId;\r\n    const action = isCurrentUser ? 'leave' : 'remove';\r\n    const confirmMessage = isCurrentUser \r\n      ? 'Are you sure you want to leave this team?'\r\n      : `Are you sure you want to remove ${member.displayName || member.email} from the team?`;\r\n\r\n    if (confirm(confirmMessage)) {\r\n      try {\r\n        await teamService.removeMember(selectedTeam.id, member.userId, currentUserId);\r\n        loadTeamMembers();\r\n        \r\n        if (isCurrentUser) {\r\n          // If user left the team, reload teams and select another\r\n          loadTeams();\r\n          setSelectedTeam(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error ${action} member:`, error);\r\n        alert(`Failed to ${action} member. Please try again.`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChangeRole = async (member: TeamMember, newRole: TeamRole) => {\r\n    if (!selectedTeam) return;\r\n\r\n    if (confirm(`Change ${member.displayName || member.email}'s role to ${newRole}?`)) {\r\n      try {\r\n        await teamService.updateMemberRole(selectedTeam.id, member.userId, newRole, currentUserId);\r\n        loadTeamMembers();\r\n      } catch (error) {\r\n        console.error('Error changing role:', error);\r\n        alert('Failed to change member role. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return <UserIcon className=\"w-4 h-4\" />; // Crown icon not available, using User icon\r\n      case 'admin': return <ShieldCheckIcon className=\"w-4 h-4\" />;\r\n      case 'editor': return <PencilIcon className=\"w-4 h-4\" />;\r\n      case 'viewer': return <EyeIcon className=\"w-4 h-4\" />;\r\n      default: return <UserIcon className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getRoleColor = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return 'text-red-600 bg-red-50';\r\n      case 'admin': return 'text-blue-600 bg-blue-50';\r\n      case 'editor': return 'text-green-600 bg-green-50';\r\n      case 'viewer': return 'text-gray-600 bg-gray-50';\r\n      default: return 'text-gray-600 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const canManageMembers = (userRole: TeamRole) => {\r\n    return userRole === 'owner' || userRole === 'admin';\r\n  };\r\n\r\n  const getCurrentUserRole = (): TeamRole | null => {\r\n    const currentMember = teamMembers.find(m => m.userId === currentUserId);\r\n    return currentMember?.role || null;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2 text-gray-600\">Loading teams...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Team Management</h1>\r\n        <button\r\n          onClick={() => setShowCreateTeam(true)}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n        >\r\n          <PlusIcon className=\"w-4 h-4\" />\r\n          Create Team\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Team List Sidebar */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n            <div className=\"p-4 border-b border-gray-200\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Your Teams</h2>\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <div className=\"space-y-3\">\r\n                {teams.map((team) => (\r\n                  <motion.div\r\n                    key={team.id}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    onClick={() => {\r\n                      setSelectedTeam(team);\r\n                      onTeamSelect(team);\r\n                    }}\r\n                    className={`p-3 rounded-lg cursor-pointer transition-colors ${\r\n                      selectedTeam?.id === team.id\r\n                        ? 'bg-blue-50 border-blue-200 border'\r\n                        : 'bg-gray-50 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\r\n                          <span className=\"text-white font-semibold text-sm\">\r\n                            {team.name.charAt(0).toUpperCase()}\r\n                          </span>\r\n                        </div>\r\n                        <div>\r\n                          <h3 className=\"font-medium text-gray-900\">{team.name}</h3>\r\n                          <p className=\"text-sm text-gray-500\">\r\n                            {team.stats.memberCount} members\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <span className={`px-2 py-1 text-xs rounded-full ${'bg-gray-100 text-gray-700'}`}>\r\n                          BASIC\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Team Details */}\r\n        <div className=\"lg:col-span-2\">\r\n          {selectedTeam ? (\r\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n              <div className=\"p-6 border-b border-gray-200\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <h2 className=\"text-xl font-semibold text-gray-900\">{selectedTeam.name}</h2>\r\n                    {selectedTeam.description && (\r\n                      <p className=\"text-gray-600 mt-1\">{selectedTeam.description}</p>\r\n                    )}\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setShowTeamSettings(true)}\r\n                    className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    <CogIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Tab Navigation */}\r\n                <div className=\"flex space-x-4 mt-6\">\r\n                  {(['teams', 'members', 'invitations'] as const).map((tab) => (\r\n                    <button\r\n                      key={tab}\r\n                      onClick={() => setActiveTab(tab)}\r\n                      className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                        activeTab === tab\r\n                          ? 'bg-blue-100 text-blue-700'\r\n                          : 'text-gray-600 hover:text-gray-900'\r\n                      }`}\r\n                    >\r\n                      {tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tab Content */}\r\n              <div className=\"p-6\">\r\n                <AnimatePresence mode=\"wait\">\r\n                  {activeTab === 'members' && (\r\n                    <motion.div\r\n                      key=\"members\"\r\n                      initial={{ opacity: 0, y: 20 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -20 }}\r\n                      transition={{ duration: 0.2 }}\r\n                    >\r\n                      <div className=\"flex justify-between items-center mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                          Team Members ({teamMembers.length})\r\n                        </h3>\r\n                        {canManageMembers(getCurrentUserRole() || 'viewer') && (\r\n                          <button\r\n                            onClick={() => setShowInviteMember(true)}\r\n                            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n                          >\r\n                            <PlusIcon className=\"w-4 h-4\" />\r\n                            Invite Member\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"space-y-4\">\r\n                        {teamMembers.map((member) => (\r\n                          <div\r\n                            key={member.id}\r\n                            className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"\r\n                          >\r\n                            <div className=\"flex items-center gap-4\">\r\n                              <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\r\n                                <span className=\"text-white font-semibold\">\r\n                                  {(member.displayName || member.email).charAt(0).toUpperCase()}\r\n                                </span>\r\n                              </div>\r\n                              <div>\r\n                                <h4 className=\"font-medium text-gray-900\">\r\n                                  {member.displayName || member.email}\r\n                                  {member.userId === currentUserId && (\r\n                                    <span className=\"text-sm text-gray-500 ml-2\">(You)</span>\r\n                                  )}\r\n                                </h4>\r\n                                <p className=\"text-sm text-gray-500\">{member.email}</p>\r\n                                <p className=\"text-xs text-gray-400\">\r\n                                  Joined {new Date(member.joinedAt).toLocaleDateString()}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${getRoleColor(member.role)}`}>\r\n                                {getRoleIcon(member.role)}\r\n                                {member.role.toUpperCase()}\r\n                              </div>\r\n                              {canManageMembers(getCurrentUserRole() || 'viewer') && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <select\r\n                                    value={member.role}\r\n                                    onChange={(e) => handleChangeRole(member, e.target.value as TeamRole)}\r\n                                    className=\"text-sm border border-gray-300 rounded px-2 py-1\"\r\n                                    disabled={member.role === 'owner' || member.userId === currentUserId}\r\n                                  >\r\n                                    <option value=\"viewer\">Viewer</option>\r\n                                    <option value=\"editor\">Editor</option>\r\n                                    <option value=\"admin\">Admin</option>\r\n                                  </select>\r\n                                  <button\r\n                                    onClick={() => handleRemoveMember(member)}\r\n                                    className=\"text-red-600 hover:text-red-700 p-1\"\r\n                                  >\r\n                                    <TrashIcon className=\"w-4 h-4\" />\r\n                                  </button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n\r\n                  {activeTab === 'invitations' && (\r\n                    <motion.div\r\n                      key=\"invitations\"\r\n                      initial={{ opacity: 0, y: 20 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -20 }}\r\n                      transition={{ duration: 0.2 }}\r\n                    >\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">\r\n                        Pending Invitations ({invitations.length})\r\n                      </h3>\r\n\r\n                      {invitations.length === 0 ? (\r\n                        <div className=\"text-center py-8 text-gray-500\">\r\n                          <EnvelopeIcon className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\r\n                          <p>No pending invitations</p>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"space-y-4\">\r\n                          {invitations.map((invitation) => (\r\n                            <div\r\n                              key={invitation.id}\r\n                              className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"\r\n                            >\r\n                              <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center\">\r\n                                  <EnvelopeIcon className=\"w-6 h-6 text-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                  <h4 className=\"font-medium text-gray-900\">{invitation.email}</h4>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    Invited as {invitation.role} by {invitation.invitedBy}\r\n                                  </p>\r\n                                  <p className=\"text-xs text-gray-400\">\r\n                                    {new Date(invitation.invitedAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700 flex items-center gap-1\">\r\n                                  <ClockIcon className=\"w-3 h-3\" />\r\n                                  PENDING\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\">\r\n              <UserGroupIcon className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">No Team Selected</h2>\r\n              <p className=\"text-gray-600 mb-4\">Select a team from the sidebar to manage members and settings</p>\r\n              <button\r\n                onClick={() => setShowCreateTeam(true)}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                Create Your First Team\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Team Modal */}\r\n      {showCreateTeam && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.95 }}\r\n            className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\"\r\n          >\r\n            <form onSubmit={handleCreateTeam}>\r\n              <div className=\"p-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Create New Team</h2>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Team Name\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newTeamName}\r\n                      onChange={(e) => setNewTeamName(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"Enter team name\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Description (Optional)\r\n                    </label>\r\n                    <textarea\r\n                      value={newTeamDescription}\r\n                      onChange={(e) => setNewTeamDescription(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      rows={3}\r\n                      placeholder=\"Describe your team's purpose\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-lg\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCreateTeam(false)}\r\n                  className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting || !newTeamName.trim()}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  {submitting ? 'Creating...' : 'Create Team'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Invite Member Modal */}\r\n      {showInviteMember && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.95 }}\r\n            className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\"\r\n          >\r\n            <form onSubmit={handleInviteMember}>\r\n              <div className=\"p-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Invite Team Member</h2>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Email Address\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={inviteEmail}\r\n                      onChange={(e) => setInviteEmail(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"Enter email address\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Role\r\n                    </label>\r\n                    <select\r\n                      value={inviteRole}\r\n                      onChange={(e) => setInviteRole(e.target.value as TeamRole)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      <option value=\"viewer\">Viewer</option>\r\n                      <option value=\"editor\">Editor</option>\r\n                      <option value=\"admin\">Admin</option>\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Personal Message (Optional)\r\n                    </label>\r\n                    <textarea\r\n                      value={inviteMessage}\r\n                      onChange={(e) => setInviteMessage(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      rows={3}\r\n                      placeholder=\"Welcome to our team!\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-lg\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowInviteMember(false)}\r\n                  className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting || !inviteEmail.trim()}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  {submitting ? 'Sending...' : 'Send Invitation'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\components\\analytics\\AnalyticsDashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":58,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[1093,1123],"text":""},"desc":"Remove unused variable 'filters'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  ChartBarIcon,\r\n  ClockIcon,\r\n  SpeakerWaveIcon,\r\n  DocumentTextIcon,\r\n  ArrowTrendingUpIcon,\r\n  ArrowTrendingDownIcon,\r\n  ShareIcon,\r\n  EyeIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from 'recharts';\r\n\r\ninterface AnalyticsData {\r\n  totalSessions: number;\r\n  totalPracticeTime: number;\r\n  averageWPM: number;\r\n  improvementTrend: number;\r\n  fillerWordTrend: number;\r\n  recentSessions: Array<{\r\n    date: string;\r\n    wpm: number;\r\n    fillerWords: number;\r\n    adherence: number;\r\n    duration: number;\r\n  }>;\r\n  weeklyStats: Array<{\r\n    week: string;\r\n    sessions: number;\r\n    practiceTime: number;\r\n  }>;\r\n  performanceMetrics: {\r\n    consistency: number;\r\n    accuracy: number;\r\n    fluency: number;\r\n  };\r\n}\r\n\r\ninterface AnalyticsDashboardProps {\r\n  data: AnalyticsData;\r\n  onFilterChange?: (filters: { timeRange: string }) => void;\r\n  onExport?: () => void;\r\n}\r\n\r\nexport default function AnalyticsDashboard({ \r\n  data, \r\n  onFilterChange, \r\n  onExport \r\n}: AnalyticsDashboardProps) {\r\n  const [selectedTimeRange, setSelectedTimeRange] = useState('30d');\r\n  const [selectedMetric, setSelectedMetric] = useState('wpm');\r\n\r\n  const timeRangeOptions = [\r\n    { value: '7d', label: '7 days' },\r\n    { value: '30d', label: '30 days' },\r\n    { value: '90d', label: '90 days' },\r\n    { value: '1y', label: '1 year' },\r\n  ];\r\n\r\n  const metricOptions = [\r\n    { value: 'wpm', label: 'Words Per Minute', color: '#6366f1' },\r\n    { value: 'fillerWords', label: 'Filler Words', color: '#ef4444' },\r\n    { value: 'adherence', label: 'Script Adherence', color: '#10b981' },\r\n    { value: 'duration', label: 'Session Duration', color: '#f59e0b' },\r\n  ];\r\n\r\n  const formatTime = (milliseconds: number) => {\r\n    const hours = Math.floor(milliseconds / 3600000);\r\n    const minutes = Math.floor((milliseconds % 3600000) / 60000);\r\n    return hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;\r\n  };\r\n\r\n  const formatTrend = (value: number) => {\r\n    const isPositive = value > 0;\r\n    const Icon = isPositive ? ArrowTrendingUpIcon : ArrowTrendingDownIcon;\r\n    const color = isPositive ? 'text-green-600' : 'text-red-600';\r\n    \r\n    return (\r\n      <div className={`flex items-center ${color}`}>\r\n        <Icon className=\"h-4 w-4 mr-1\" />\r\n        <span>{Math.abs(value).toFixed(1)}%</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const chartData = useMemo(() => {\r\n    return data.recentSessions.map((session, index) => ({\r\n      session: `S${index + 1}`,\r\n      date: session.date,\r\n      wpm: session.wpm,\r\n      fillerWords: session.fillerWords,\r\n      adherence: session.adherence,\r\n      duration: session.duration / 60000, // Convert to minutes\r\n    }));\r\n  }, [data.recentSessions]);\r\n\r\n  const pieData = [\r\n    { name: 'Consistency', value: data.performanceMetrics.consistency, color: '#6366f1' },\r\n    { name: 'Accuracy', value: data.performanceMetrics.accuracy, color: '#10b981' },\r\n    { name: 'Fluency', value: data.performanceMetrics.fluency, color: '#f59e0b' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Analytics Dashboard</h1>\r\n          <p className=\"text-gray-600 mt-2\">Track your speaking performance and improvement</p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Time Range Filter */}\r\n          <select\r\n            value={selectedTimeRange}\r\n            onChange={(e) => {\r\n              setSelectedTimeRange(e.target.value);\r\n              onFilterChange?.({ timeRange: e.target.value });\r\n            }}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n          >\r\n            {timeRangeOptions.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <button\r\n            onClick={onExport}\r\n            className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            <ShareIcon className=\"h-4 w-4 mr-2\" />\r\n            Export\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Key Metrics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium\">Total Sessions</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">{data.totalSessions}</p>\r\n            </div>\r\n            <div className=\"p-3 bg-blue-100 rounded-full\">\r\n              <ChartBarIcon className=\"h-6 w-6 text-blue-600\" />\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium\">Practice Time</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">\r\n                {formatTime(data.totalPracticeTime)}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 bg-green-100 rounded-full\">\r\n              <ClockIcon className=\"h-6 w-6 text-green-600\" />\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium\">Average WPM</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">{data.averageWPM.toFixed(0)}</p>\r\n              {formatTrend(data.improvementTrend)}\r\n            </div>\r\n            <div className=\"p-3 bg-purple-100 rounded-full\">\r\n              <SpeakerWaveIcon className=\"h-6 w-6 text-purple-600\" />\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.3 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium\">Filler Words</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">Improving</p>\r\n              {formatTrend(-data.fillerWordTrend)}\r\n            </div>\r\n            <div className=\"p-3 bg-orange-100 rounded-full\">\r\n              <DocumentTextIcon className=\"h-6 w-6 text-orange-600\" />\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        {/* Performance Trend Chart */}\r\n        <motion.div\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900\">Performance Trend</h3>\r\n            <select\r\n              value={selectedMetric}\r\n              onChange={(e) => setSelectedMetric(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              {metricOptions.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n              <XAxis \r\n                dataKey=\"session\" \r\n                stroke=\"#6b7280\"\r\n                fontSize={12}\r\n              />\r\n              <YAxis \r\n                stroke=\"#6b7280\"\r\n                fontSize={12}\r\n              />\r\n              <Tooltip \r\n                contentStyle={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e5e7eb',\r\n                  borderRadius: '8px',\r\n                  boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\r\n                }}\r\n              />\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey={selectedMetric}\r\n                stroke={metricOptions.find(m => m.value === selectedMetric)?.color}\r\n                strokeWidth={3}\r\n                dot={{ fill: metricOptions.find(m => m.value === selectedMetric)?.color, r: 6 }}\r\n                activeDot={{ r: 8 }}\r\n              />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </motion.div>\r\n\r\n        {/* Performance Metrics Pie Chart */}\r\n        <motion.div\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          className=\"bg-white rounded-xl shadow-lg p-6\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Performance Scores</h3>\r\n          \r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <PieChart>\r\n              <Pie\r\n                data={pieData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                innerRadius={60}\r\n                outerRadius={100}\r\n                paddingAngle={5}\r\n                dataKey=\"value\"\r\n              >\r\n                {pieData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip \r\n                formatter={(value: number) => [`${value.toFixed(1)}%`, 'Score']}\r\n                contentStyle={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e5e7eb',\r\n                  borderRadius: '8px',\r\n                }}\r\n              />\r\n              <Legend />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n\r\n          <div className=\"mt-4 space-y-3\">\r\n            {pieData.map((item, index) => (\r\n              <div key={index} className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center\">\r\n                  <div \r\n                    className=\"w-3 h-3 rounded-full mr-3\"\r\n                    style={{ backgroundColor: item.color }}\r\n                  />\r\n                  <span className=\"text-gray-700\">{item.name}</span>\r\n                </div>\r\n                <span className=\"font-semibold text-gray-900\">\r\n                  {item.value.toFixed(1)}%\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Weekly Activity Chart */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"bg-white rounded-xl shadow-lg p-6\"\r\n      >\r\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Weekly Activity</h3>\r\n        \r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <BarChart data={data.weeklyStats}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n            <XAxis \r\n              dataKey=\"week\" \r\n              stroke=\"#6b7280\"\r\n              fontSize={12}\r\n            />\r\n            <YAxis \r\n              stroke=\"#6b7280\"\r\n              fontSize={12}\r\n            />\r\n            <Tooltip \r\n              contentStyle={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e5e7eb',\r\n                borderRadius: '8px',\r\n                boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            />\r\n            <Bar \r\n              dataKey=\"sessions\" \r\n              fill=\"#6366f1\" \r\n              radius={[4, 4, 0, 0]}\r\n              name=\"Sessions\"\r\n            />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </motion.div>\r\n\r\n      {/* Recent Sessions Table */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"bg-white rounded-xl shadow-lg overflow-hidden\"\r\n      >\r\n        <div className=\"px-6 py-4 border-b border-gray-200\">\r\n          <h3 className=\"text-xl font-semibold text-gray-900\">Recent Sessions</h3>\r\n        </div>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Date\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  WPM\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Duration\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Filler Words\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Adherence\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {data.recentSessions.slice(0, 10).map((session, index) => (\r\n                <tr key={index} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                    {new Date(session.date).toLocaleDateString()}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                      {session.wpm.toFixed(0)} WPM\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    {formatTime(session.duration)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                      session.fillerWords <= 3 ? 'bg-green-100 text-green-800' : \r\n                      session.fillerWords <= 6 ? 'bg-yellow-100 text-yellow-800' : \r\n                      'bg-red-100 text-red-800'\r\n                    }`}>\r\n                      {session.fillerWords}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                      session.adherence >= 80 ? 'bg-green-100 text-green-800' : \r\n                      session.adherence >= 60 ? 'bg-yellow-100 text-yellow-800' : \r\n                      'bg-red-100 text-red-800'\r\n                    }`}>\r\n                      {session.adherence.toFixed(1)}%\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                    <button className=\"text-blue-600 hover:text-blue-900 flex items-center\">\r\n                      <EyeIcon className=\"h-4 w-4 mr-1\" />\r\n                      View\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":47,"column":22,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":47,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":58,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":24,"suggestions":[{"fix":{"range":[2033,2083],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":97,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":101,"endColumn":6},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":105,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":109,"endColumn":6}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport {\r\n  User as FirebaseUser,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  signOut as firebaseSignOut,\r\n  sendPasswordResetEmail,\r\n  onAuthStateChanged,\r\n  updateProfile,\r\n} from 'firebase/auth';\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\r\nimport { auth, db } from '@/lib/firebase';\r\nimport { User, AuthContextType } from '@/types';\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [firebaseUser, setFirebaseUser] = useState<FirebaseUser | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      setFirebaseUser(firebaseUser);\r\n      \r\n      if (firebaseUser) {\r\n        try {\r\n          // Get user document from Firestore\r\n          const userDoc = await getDoc(doc(db, 'users', firebaseUser.uid));\r\n          \r\n          if (userDoc.exists()) {\r\n            setUser(userDoc.data() as User);\r\n          } else {\r\n            // Create user document if it doesn't exist\r\n            const newUser: User = {\r\n              id: firebaseUser.uid,\r\n              email: firebaseUser.email!,\r\n              displayName: firebaseUser.displayName || undefined,\r\n              photoURL: firebaseUser.photoURL || undefined,\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            };\r\n            \r\n            await setDoc(doc(db, 'users', firebaseUser.uid), newUser);\r\n            setUser(newUser);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching user data:', error);\r\n        }\r\n      } else {\r\n        setUser(null);\r\n      }\r\n      \r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    setLoading(true);\r\n    try {\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signUp = async (email: string, password: string, displayName?: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await createUserWithEmailAndPassword(auth, email, password);\r\n      \r\n      if (displayName) {\r\n        await updateProfile(result.user, { displayName });\r\n      }\r\n      \r\n      // User document will be created in the auth state change listener\r\n    } catch (error) {\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await firebaseSignOut(auth);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const resetPassword = async (email: string) => {\r\n    try {\r\n      await sendPasswordResetEmail(auth, email);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    firebaseUser,\r\n    loading,\r\n    signIn,\r\n    signUp,\r\n    signOut,\r\n    resetPassword,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\contexts\\ScriptContext.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":44,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":45,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":48,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":49,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":92,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":22,"suggestions":[{"fix":{"range":[2623,2675],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":110,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":110,"endColumn":58,"fix":{"range":[3157,3199],"text":"{throw new Error('User not authenticated');}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":136,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":136,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":136,"endColumn":20,"suggestions":[{"fix":{"range":[4023,4070],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":142,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":142,"endColumn":58,"fix":{"range":[4211,4253],"text":"{throw new Error('User not authenticated');}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":161,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":161,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":161,"endColumn":20,"suggestions":[{"fix":{"range":[4904,4951],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":167,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":167,"endColumn":58,"fix":{"range":[5066,5108],"text":"{throw new Error('User not authenticated');}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":176,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":176,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":20,"suggestions":[{"fix":{"range":[5311,5358],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":186,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":186,"endColumn":23,"fix":{"range":[5586,5593],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":200,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":200,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":200,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":200,"endColumn":20,"suggestions":[{"fix":{"range":[6067,6114],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":4,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  Timestamp,\r\n} from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { useAuth } from './AuthContext';\r\nimport { Script, ScriptContextType, SyncStatus } from '@/types';\r\n\r\nconst ScriptContext = createContext<ScriptContextType | undefined>(undefined);\r\n\r\nexport function useScripts() {\r\n  const context = useContext(ScriptContext);\r\n  if (context === undefined) {\r\n    throw new Error('useScripts must be used within a ScriptProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function ScriptProvider({ children }: { children: React.ReactNode }) {\r\n  const { user } = useAuth();\r\n  const [scripts, setScripts] = useState<Script[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [syncStatus, setSyncStatus] = useState<SyncStatus>({\r\n    isOnline: true,\r\n    pendingChanges: 0,\r\n    syncErrors: [],\r\n  });\r\n\r\n  // Listen for network status changes\r\n  useEffect(() => {\r\n    const handleOnline = () => setSyncStatus(prev => ({ ...prev, isOnline: true }));\r\n    const handleOffline = () => setSyncStatus(prev => ({ ...prev, isOnline: false }));\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  // Listen for scripts changes in real-time\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setScripts([]);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    \r\n    const q = query(\r\n      collection(db, 'scripts'),\r\n      where('userId', '==', user.id),\r\n      where('isDeleted', '!=', true),\r\n      orderBy('updatedAt', 'desc')\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(\r\n      q,\r\n      (snapshot) => {\r\n        const scriptsData: Script[] = [];\r\n        snapshot.forEach((doc) => {\r\n          const data = doc.data();\r\n          scriptsData.push({\r\n            id: doc.id,\r\n            ...data,\r\n            createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n            updatedAt: data.updatedAt?.toDate?.()?.toISOString() || data.updatedAt,\r\n          } as Script);\r\n        });\r\n        \r\n        setScripts(scriptsData);\r\n        setLoading(false);\r\n        setSyncStatus(prev => ({ \r\n          ...prev, \r\n          lastSyncAt: new Date().toISOString(),\r\n          pendingChanges: 0,\r\n        }));\r\n      },\r\n      (error) => {\r\n        console.error('Error listening to scripts:', error);\r\n        setLoading(false);\r\n        setSyncStatus(prev => ({\r\n          ...prev,\r\n          syncErrors: [...prev.syncErrors, {\r\n            id: Date.now().toString(),\r\n            message: error.message,\r\n            timestamp: new Date().toISOString(),\r\n            type: 'network',\r\n          }],\r\n        }));\r\n      }\r\n    );\r\n\r\n    return () => unsubscribe();\r\n  }, [user]);\r\n\r\n  const createScript = async (title: string, content = ''): Promise<Script> => {\r\n    if (!user) throw new Error('User not authenticated');\r\n\r\n    try {\r\n      const scriptData = {\r\n        title,\r\n        content,\r\n        userId: user.id,\r\n        version: 1,\r\n        syncStatus: 'synced' as const,\r\n        createdAt: Timestamp.now(),\r\n        updatedAt: Timestamp.now(),\r\n        wordCount: content.split(/\\s+/).filter(word => word.length > 0).length,\r\n        estimatedDuration: Math.ceil(content.split(/\\s+/).filter(word => word.length > 0).length / 150) * 60, // Assuming 150 WPM\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, 'scripts'), scriptData);\r\n      \r\n      const newScript: Script = {\r\n        id: docRef.id,\r\n        ...scriptData,\r\n        createdAt: scriptData.createdAt.toDate().toISOString(),\r\n        updatedAt: scriptData.updatedAt.toDate().toISOString(),\r\n      };\r\n\r\n      return newScript;\r\n    } catch (error) {\r\n      console.error('Error creating script:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const updateScript = async (id: string, updates: Partial<Script>): Promise<void> => {\r\n    if (!user) throw new Error('User not authenticated');\r\n\r\n    try {\r\n      const scriptRef = doc(db, 'scripts', id);\r\n      const updateData = {\r\n        ...updates,\r\n        updatedAt: Timestamp.now(),\r\n        version: (scripts.find(s => s.id === id)?.version || 1) + 1,\r\n      };\r\n\r\n      // Calculate word count and estimated duration if content is updated\r\n      if (updates.content !== undefined) {\r\n        const wordCount = updates.content.split(/\\s+/).filter(word => word.length > 0).length;\r\n        updateData.wordCount = wordCount;\r\n        updateData.estimatedDuration = Math.ceil(wordCount / 150) * 60;\r\n      }\r\n\r\n      await updateDoc(scriptRef, updateData);\r\n    } catch (error) {\r\n      console.error('Error updating script:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const deleteScript = async (id: string): Promise<void> => {\r\n    if (!user) throw new Error('User not authenticated');\r\n\r\n    try {\r\n      const scriptRef = doc(db, 'scripts', id);\r\n      await updateDoc(scriptRef, {\r\n        isDeleted: true,\r\n        updatedAt: Timestamp.now(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error deleting script:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const getScript = (id: string): Script | null => {\r\n    return scripts.find(script => script.id === id) || null;\r\n  };\r\n\r\n  const syncScripts = async (): Promise<void> => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      setSyncStatus(prev => ({ ...prev, pendingChanges: prev.pendingChanges + 1 }));\r\n      \r\n      // In a real implementation, this would handle offline changes and conflicts\r\n      // For now, it's a placeholder that updates the last sync time\r\n      \r\n      setSyncStatus(prev => ({ \r\n        ...prev, \r\n        lastSyncAt: new Date().toISOString(),\r\n        pendingChanges: Math.max(0, prev.pendingChanges - 1),\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error syncing scripts:', error);\r\n      setSyncStatus(prev => ({\r\n        ...prev,\r\n        syncErrors: [...prev.syncErrors, {\r\n          id: Date.now().toString(),\r\n          message: 'Failed to sync scripts',\r\n          timestamp: new Date().toISOString(),\r\n          type: 'network',\r\n        }],\r\n      }));\r\n    }\r\n  };\r\n\r\n  const value: ScriptContextType = {\r\n    scripts,\r\n    loading,\r\n    syncStatus,\r\n    createScript,\r\n    updateScript,\r\n    deleteScript,\r\n    getScript,\r\n    syncScripts,\r\n  };\r\n\r\n  return <ScriptContext.Provider value={value}>{children}</ScriptContext.Provider>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\lib\\firebase.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":8,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":9,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":10,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":12,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":17}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { initializeApp } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Firebase Auth\r\nexport const auth = getAuth(app);\r\n\r\n// Initialize Firestore\r\nexport const db = getFirestore(app);\r\n\r\n// Initialize Storage\r\nexport const storage = getStorage(app);\r\n\r\nexport default app;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\services\\teamService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":100,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[2360,2376],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":100,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":291,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[7776,7786],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'members' is defined but never used.","line":310,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":310,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"members"},"fix":{"range":[8461,8482],"text":""},"desc":"Remove unused variable 'members'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'activities' is defined but never used.","line":331,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":331,"endColumn":87,"suggestions":[{"messageId":"removeVar","data":{"varName":"activities"},"fix":{"range":[9171,9197],"text":""},"desc":"Remove unused variable 'activities'."}]},{"ruleId":"no-undef","severity":2,"message":"'TeamStats' is not defined.","line":410,"column":73,"nodeType":"Identifier","messageId":"undef","endLine":410,"endColumn":82}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  onSnapshot,\r\n  Timestamp,\r\n  writeBatch,\r\n} from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport {\r\n  Team,\r\n  TeamMember,\r\n  TeamInvitation,\r\n  TeamActivity,\r\n  TeamRole,\r\n  TeamPermissions,\r\n  ScriptFolder,\r\n  SubscriptionTier,\r\n} from '@/types';\r\n\r\nexport class TeamService {\r\n  // Team Management\r\n  static async createTeam(\r\n    name: string,\r\n    description: string,\r\n    ownerId: string,\r\n    plan: SubscriptionTier = 'business'\r\n  ): Promise<Team> {\r\n    const teamData = {\r\n      name,\r\n      description,\r\n      ownerId,\r\n      plan,\r\n      createdAt: Timestamp.now(),\r\n      updatedAt: Timestamp.now(),\r\n      settings: {\r\n        allowGuestAccess: false,\r\n        defaultScriptPermissions: {\r\n          canEdit: true,\r\n          canDelete: false,\r\n          canShare: true,\r\n          canMove: true,\r\n        },\r\n        requireApprovalForNewMembers: false,\r\n        allowMemberInvites: true,\r\n        dataRetentionDays: 365,\r\n      },\r\n      stats: {\r\n        memberCount: 1,\r\n        scriptCount: 0,\r\n        totalWordCount: 0,\r\n        storageUsed: 0,\r\n        lastActivityAt: Timestamp.now(),\r\n      },\r\n    };\r\n\r\n    const teamRef = await addDoc(collection(db, 'teams'), teamData);\r\n    \r\n    // Add owner as team member\r\n    await this.addTeamMember(teamRef.id, ownerId, 'owner');\r\n    \r\n    // Log activity\r\n    await this.logActivity(teamRef.id, ownerId, 'created', 'team', teamRef.id, name);\r\n\r\n    return {\r\n      id: teamRef.id,\r\n      ...teamData,\r\n      createdAt: teamData.createdAt.toDate().toISOString(),\r\n      updatedAt: teamData.updatedAt.toDate().toISOString(),\r\n      stats: {\r\n        ...teamData.stats,\r\n        lastActivityAt: teamData.stats.lastActivityAt.toDate().toISOString(),\r\n      },\r\n    };\r\n  }\r\n\r\n  static async updateTeam(\r\n    teamId: string,\r\n    updates: Partial<Team>,\r\n    userId: string\r\n  ): Promise<void> {\r\n    const teamRef = doc(db, 'teams', teamId);\r\n    const updateData = {\r\n      ...updates,\r\n      updatedAt: Timestamp.now(),\r\n    };\r\n\r\n    await updateDoc(teamRef, updateData);\r\n    await this.logActivity(teamId, userId, 'team_settings_updated', 'team', teamId, updates.name || 'Team');\r\n  }\r\n\r\n  static async deleteTeam(teamId: string, userId: string): Promise<void> {\r\n    const batch = writeBatch(db);\r\n    \r\n    // Delete team\r\n    const teamRef = doc(db, 'teams', teamId);\r\n    batch.delete(teamRef);\r\n    \r\n    // Delete all team members\r\n    const membersQuery = query(collection(db, 'teams', teamId, 'members'));\r\n    const membersSnapshot = await getDocs(membersQuery);\r\n    membersSnapshot.docs.forEach((memberDoc) => {\r\n      batch.delete(memberDoc.ref);\r\n    });\r\n    \r\n    // Delete all team scripts\r\n    const scriptsQuery = query(\r\n      collection(db, 'scripts'),\r\n      where('teamId', '==', teamId)\r\n    );\r\n    const scriptsSnapshot = await getDocs(scriptsQuery);\r\n    scriptsSnapshot.docs.forEach((scriptDoc) => {\r\n      batch.update(scriptDoc.ref, { isDeleted: true });\r\n    });\r\n    \r\n    await batch.commit();\r\n  }\r\n\r\n  // Team Member Management\r\n  static async addTeamMember(\r\n    teamId: string,\r\n    userId: string,\r\n    role: TeamRole,\r\n    invitedBy?: string\r\n  ): Promise<void> {\r\n    const memberData = {\r\n      userId,\r\n      teamId,\r\n      role,\r\n      joinedAt: Timestamp.now(),\r\n      permissions: this.getRolePermissions(role),\r\n    };\r\n\r\n    await addDoc(collection(db, 'teams', teamId, 'members'), memberData);\r\n    \r\n    // Update team stats\r\n    await this.updateTeamStats(teamId, { memberCount: 1 });\r\n    \r\n    if (invitedBy) {\r\n      await this.logActivity(teamId, invitedBy, 'member_joined', 'member', userId, 'New Member');\r\n    }\r\n  }\r\n\r\n  static async updateMemberRole(\r\n    teamId: string,\r\n    memberId: string,\r\n    newRole: TeamRole,\r\n    updatedBy: string\r\n  ): Promise<void> {\r\n    const memberRef = doc(db, 'teams', teamId, 'members', memberId);\r\n    await updateDoc(memberRef, {\r\n      role: newRole,\r\n      permissions: this.getRolePermissions(newRole),\r\n    });\r\n    \r\n    await this.logActivity(teamId, updatedBy, 'role_changed', 'member', memberId, 'Member');\r\n  }\r\n\r\n  static async removeMember(\r\n    teamId: string,\r\n    memberId: string,\r\n    removedBy: string\r\n  ): Promise<void> {\r\n    const memberRef = doc(db, 'teams', teamId, 'members', memberId);\r\n    await deleteDoc(memberRef);\r\n    \r\n    // Update team stats\r\n    await this.updateTeamStats(teamId, { memberCount: -1 });\r\n    \r\n    await this.logActivity(teamId, removedBy, 'member_removed', 'member', memberId, 'Member');\r\n  }\r\n\r\n  // Team Invitations\r\n  static async createInvitation(\r\n    teamId: string,\r\n    email: string,\r\n    role: TeamRole,\r\n    invitedBy: string,\r\n    message?: string\r\n  ): Promise<TeamInvitation> {\r\n    const invitationData = {\r\n      teamId,\r\n      email,\r\n      role,\r\n      invitedBy,\r\n      message,\r\n      invitedAt: Timestamp.now(),\r\n      expiresAt: Timestamp.fromDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)), // 7 days\r\n      status: 'pending' as const,\r\n    };\r\n\r\n    const invitationRef = await addDoc(collection(db, 'teamInvitations'), invitationData);\r\n    \r\n    await this.logActivity(teamId, invitedBy, 'member_invited', 'member', email, email);\r\n\r\n    return {\r\n      id: invitationRef.id,\r\n      ...invitationData,\r\n      invitedAt: invitationData.invitedAt.toDate().toISOString(),\r\n      expiresAt: invitationData.expiresAt.toDate().toISOString(),\r\n    };\r\n  }\r\n\r\n  static async acceptInvitation(invitationId: string, userId: string): Promise<void> {\r\n    const invitationRef = doc(db, 'teamInvitations', invitationId);\r\n    const invitationDoc = await getDoc(invitationRef);\r\n    \r\n    if (!invitationDoc.exists()) {\r\n      throw new Error('Invitation not found');\r\n    }\r\n    \r\n    const invitation = invitationDoc.data() as TeamInvitation;\r\n    \r\n    if (invitation.status !== 'pending') {\r\n      throw new Error('Invitation is no longer valid');\r\n    }\r\n    \r\n    if (new Date(invitation.expiresAt) < new Date()) {\r\n      throw new Error('Invitation has expired');\r\n    }\r\n    \r\n    // Add user to team\r\n    await this.addTeamMember(invitation.teamId, userId, invitation.role, invitation.invitedBy);\r\n    \r\n    // Update invitation status\r\n    await updateDoc(invitationRef, { status: 'accepted' });\r\n  }\r\n\r\n  // Folder Management\r\n  static async createFolder(\r\n    name: string,\r\n    teamId: string,\r\n    userId: string,\r\n    parentId?: string\r\n  ): Promise<ScriptFolder> {\r\n    const folderData = {\r\n      name,\r\n      teamId,\r\n      userId,\r\n      parentId,\r\n      createdAt: Timestamp.now(),\r\n      updatedAt: Timestamp.now(),\r\n      scriptCount: 0,\r\n    };\r\n\r\n    const folderRef = await addDoc(collection(db, 'scriptFolders'), folderData);\r\n    \r\n    await this.logActivity(teamId, userId, 'created', 'folder', folderRef.id, name);\r\n\r\n    return {\r\n      id: folderRef.id,\r\n      ...folderData,\r\n      createdAt: folderData.createdAt.toDate().toISOString(),\r\n      updatedAt: folderData.updatedAt.toDate().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Activity Logging\r\n  static async logActivity(\r\n    teamId: string,\r\n    userId: string,\r\n    action: TeamActivity['action'],\r\n    targetType: TeamActivity['targetType'],\r\n    targetId: string,\r\n    targetName: string,\r\n    metadata?: Record<string, unknown>\r\n  ): Promise<void> {\r\n    const activityData = {\r\n      teamId,\r\n      userId,\r\n      action,\r\n      targetType,\r\n      targetId,\r\n      targetName,\r\n      metadata,\r\n      timestamp: Timestamp.now(),\r\n    };\r\n\r\n    await addDoc(collection(db, 'teamActivity'), activityData);\r\n  }\r\n\r\n  // Real-time subscriptions\r\n  static subscribeToTeam(teamId: string, callback: (team: Team) => void) {\r\n    const teamRef = doc(db, 'teams', teamId);\r\n    return onSnapshot(teamRef, (doc) => {\r\n      if (doc.exists()) {\r\n        const data = doc.data();\r\n        callback({\r\n          id: doc.id,\r\n          ...data,\r\n          createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n          updatedAt: data.updatedAt?.toDate?.()?.toISOString() || data.updatedAt,\r\n          stats: {\r\n            ...data.stats,\r\n            lastActivityAt: data.stats?.lastActivityAt?.toDate?.()?.toISOString() || data.stats?.lastActivityAt,\r\n          },\r\n        } as Team);\r\n      }\r\n    });\r\n  }\r\n\r\n  static subscribeToTeamMembers(teamId: string, callback: (members: TeamMember[]) => void) {\r\n    const membersQuery = query(\r\n      collection(db, 'teams', teamId, 'members'),\r\n      orderBy('joinedAt', 'desc')\r\n    );\r\n    \r\n    return onSnapshot(membersQuery, (snapshot) => {\r\n      const members: TeamMember[] = [];\r\n      snapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        members.push({\r\n          id: doc.id,\r\n          ...data,\r\n          joinedAt: data.joinedAt?.toDate?.()?.toISOString() || data.joinedAt,\r\n          lastActiveAt: data.lastActiveAt?.toDate?.()?.toISOString() || data.lastActiveAt,\r\n        } as TeamMember);\r\n      });\r\n      callback(members);\r\n    });\r\n  }\r\n\r\n  static subscribeToTeamActivity(teamId: string, callback: (activities: TeamActivity[]) => void) {\r\n    const activityQuery = query(\r\n      collection(db, 'teamActivity'),\r\n      where('teamId', '==', teamId),\r\n      orderBy('timestamp', 'desc'),\r\n      limit(50)\r\n    );\r\n    \r\n    return onSnapshot(activityQuery, (snapshot) => {\r\n      const activities: TeamActivity[] = [];\r\n      snapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        activities.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate?.()?.toISOString() || data.timestamp,\r\n        } as TeamActivity);\r\n      });\r\n      callback(activities);\r\n    });\r\n  }\r\n\r\n  // Helper methods\r\n  private static getRolePermissions(role: TeamRole): TeamPermissions {\r\n    const basePermissions = {\r\n      canInviteMembers: false,\r\n      canRemoveMembers: false,\r\n      canEditTeamSettings: false,\r\n      canCreateScripts: false,\r\n      canEditScripts: false,\r\n      canDeleteScripts: false,\r\n      canCreateFolders: false,\r\n      canManageFolders: false,\r\n      canViewAnalytics: false,\r\n      canExportData: false,\r\n    };\r\n\r\n    switch (role) {\r\n      case 'owner':\r\n        return {\r\n          ...basePermissions,\r\n          canInviteMembers: true,\r\n          canRemoveMembers: true,\r\n          canEditTeamSettings: true,\r\n          canCreateScripts: true,\r\n          canEditScripts: true,\r\n          canDeleteScripts: true,\r\n          canCreateFolders: true,\r\n          canManageFolders: true,\r\n          canViewAnalytics: true,\r\n          canExportData: true,\r\n        };\r\n      case 'admin':\r\n        return {\r\n          ...basePermissions,\r\n          canInviteMembers: true,\r\n          canRemoveMembers: true,\r\n          canCreateScripts: true,\r\n          canEditScripts: true,\r\n          canDeleteScripts: true,\r\n          canCreateFolders: true,\r\n          canManageFolders: true,\r\n          canViewAnalytics: true,\r\n          canExportData: true,\r\n        };\r\n      case 'editor':\r\n        return {\r\n          ...basePermissions,\r\n          canCreateScripts: true,\r\n          canEditScripts: true,\r\n          canCreateFolders: true,\r\n        };\r\n      case 'viewer':\r\n        return basePermissions;\r\n      default:\r\n        return basePermissions;\r\n    }\r\n  }\r\n\r\n  private static async updateTeamStats(teamId: string, changes: Partial<TeamStats>): Promise<void> {\r\n    const teamRef = doc(db, 'teams', teamId);\r\n    const updateData: Record<string, unknown> = {};\r\n    \r\n    Object.entries(changes).forEach(([key, value]) => {\r\n      if (typeof value === 'number') {\r\n        updateData[`stats.${key}`] = value > 0 ? \r\n          { increment: value } : \r\n          { increment: value };\r\n      } else {\r\n        updateData[`stats.${key}`] = value;\r\n      }\r\n    });\r\n    \r\n    updateData['stats.lastActivityAt'] = Timestamp.now();\r\n    \r\n    await updateDoc(teamRef, updateData);\r\n  }\r\n}\r\n\r\nexport default TeamService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\speaksync-web\\src\\types\\index.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":70,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[1499,1513],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":70,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"password"},"fix":{"range":[1512,1530],"text":""},"desc":"Remove unused variable 'password'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":71,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[1562,1576],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":71,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"password"},"fix":{"range":[1575,1593],"text":""},"desc":"Remove unused variable 'password'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'displayName' is defined but never used.","line":71,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayName"},"fix":{"range":[1593,1615],"text":""},"desc":"Remove unused variable 'displayName'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":73,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[1687,1700],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'title' is defined but never used.","line":80,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[1851,1865],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'content' is defined but never used.","line":80,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"content"},"fix":{"range":[1864,1882],"text":""},"desc":"Remove unused variable 'content'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":81,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1922,1933],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":81,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[1932,1958],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":82,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1996,2006],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":83,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[2041,2051],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-undef","severity":2,"message":"'SVGSVGElement' is not defined.","line":126,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":126,"endColumn":57}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { User as FirebaseUser } from 'firebase/auth';\r\n\r\n// User Types\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  displayName?: string;\r\n  photoURL?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n// Script Types\r\nexport interface Script {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  userId: string;\r\n  version: number;\r\n  syncStatus: 'synced' | 'pending' | 'conflict' | 'error';\r\n  isDeleted?: boolean;\r\n  tags?: string[];\r\n  wordCount?: number;\r\n  estimatedDuration?: number; // in seconds\r\n  teamId?: string; // For team scripts\r\n  folderId?: string; // For organization\r\n  permissions?: ScriptPermissions;\r\n}\r\n\r\nexport interface ScriptPermissions {\r\n  canEdit: boolean;\r\n  canDelete: boolean;\r\n  canShare: boolean;\r\n  canMove: boolean;\r\n}\r\n\r\nexport interface ScriptVersion {\r\n  id: string;\r\n  scriptId: string;\r\n  version: number;\r\n  content: string;\r\n  title: string;\r\n  createdAt: string;\r\n  changes?: string; // description of changes\r\n}\r\n\r\n// Sync Types\r\nexport interface SyncStatus {\r\n  isOnline: boolean;\r\n  lastSyncAt?: string;\r\n  pendingChanges: number;\r\n  syncErrors: SyncError[];\r\n}\r\n\r\nexport interface SyncError {\r\n  id: string;\r\n  message: string;\r\n  timestamp: string;\r\n  type: 'network' | 'auth' | 'conflict' | 'unknown';\r\n  scriptId?: string;\r\n}\r\n\r\n// Context Types\r\nexport interface AuthContextType {\r\n  user: User | null;\r\n  firebaseUser: FirebaseUser | null;\r\n  loading: boolean;\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signUp: (email: string, password: string, displayName?: string) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n  resetPassword: (email: string) => Promise<void>;\r\n}\r\n\r\nexport interface ScriptContextType {\r\n  scripts: Script[];\r\n  loading: boolean;\r\n  syncStatus: SyncStatus;\r\n  createScript: (title: string, content?: string) => Promise<Script>;\r\n  updateScript: (id: string, updates: Partial<Script>) => Promise<void>;\r\n  deleteScript: (id: string) => Promise<void>;\r\n  getScript: (id: string) => Script | null;\r\n  syncScripts: () => Promise<void>;\r\n}\r\n\r\n// UI Types\r\nexport interface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport interface ButtonProps {\r\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  type?: 'button' | 'submit' | 'reset';\r\n  className?: string;\r\n}\r\n\r\n// Editor Types\r\nexport interface EditorSettings {\r\n  fontSize: number;\r\n  lineHeight: number;\r\n  fontFamily: string;\r\n  autosave: boolean;\r\n  spellCheck: boolean;\r\n  grammarCheck: boolean;\r\n}\r\n\r\nexport interface WordCount {\r\n  characters: number;\r\n  charactersWithoutSpaces: number;\r\n  words: number;\r\n  paragraphs: number;\r\n}\r\n\r\n// Navigation Types\r\nexport interface NavItem {\r\n  name: string;\r\n  href: string;\r\n  icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\r\n  current?: boolean;\r\n}\r\n\r\n// Team Types\r\nexport interface Team {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  ownerId: string;\r\n  plan: SubscriptionTier;\r\n  settings: TeamSettings;\r\n  stats: TeamStats;\r\n}\r\n\r\nexport interface TeamMember {\r\n  id: string;\r\n  userId: string;\r\n  teamId: string;\r\n  role: TeamRole;\r\n  email: string;\r\n  displayName?: string;\r\n  photoURL?: string;\r\n  joinedAt: string;\r\n  lastActiveAt?: string;\r\n  permissions: TeamPermissions;\r\n}\r\n\r\nexport type TeamRole = 'owner' | 'admin' | 'editor' | 'viewer';\r\n\r\nexport interface TeamPermissions {\r\n  canInviteMembers: boolean;\r\n  canRemoveMembers: boolean;\r\n  canEditTeamSettings: boolean;\r\n  canCreateScripts: boolean;\r\n  canEditScripts: boolean;\r\n  canDeleteScripts: boolean;\r\n  canCreateFolders: boolean;\r\n  canManageFolders: boolean;\r\n  canViewAnalytics: boolean;\r\n  canExportData: boolean;\r\n}\r\n\r\nexport interface TeamInvitation {\r\n  id: string;\r\n  teamId: string;\r\n  email: string;\r\n  role: TeamRole;\r\n  invitedBy: string;\r\n  invitedAt: string;\r\n  expiresAt: string;\r\n  status: 'pending' | 'accepted' | 'declined' | 'expired';\r\n  message?: string;\r\n}\r\n\r\nexport interface TeamSettings {\r\n  allowGuestAccess: boolean;\r\n  defaultScriptPermissions: ScriptPermissions;\r\n  requireApprovalForNewMembers: boolean;\r\n  allowMemberInvites: boolean;\r\n  dataRetentionDays: number;\r\n}\r\n\r\nexport interface TeamStats {\r\n  memberCount: number;\r\n  scriptCount: number;\r\n  totalWordCount: number;\r\n  storageUsed: number; // in bytes\r\n  lastActivityAt: string;\r\n}\r\n\r\nexport interface ScriptFolder {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  parentId?: string;\r\n  teamId?: string;\r\n  userId: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  color?: string;\r\n  scriptCount: number;\r\n}\r\n\r\nexport interface TeamActivity {\r\n  id: string;\r\n  teamId: string;\r\n  userId: string;\r\n  action: TeamActivityAction;\r\n  targetType: 'script' | 'folder' | 'member' | 'team';\r\n  targetId: string;\r\n  targetName: string;\r\n  metadata?: Record<string, unknown>;\r\n  timestamp: string;\r\n}\r\n\r\nexport type TeamActivityAction = \r\n  | 'created' | 'updated' | 'deleted' | 'moved' | 'shared'\r\n  | 'member_invited' | 'member_joined' | 'member_removed' | 'role_changed'\r\n  | 'team_settings_updated';\r\n\r\n// Subscription Types\r\nexport type SubscriptionTier = 'free' | 'pro' | 'business' | 'enterprise';\r\n\r\nexport interface Subscription {\r\n  id: string;\r\n  userId: string;\r\n  tier: SubscriptionTier;\r\n  status: 'active' | 'canceled' | 'past_due' | 'unpaid' | 'incomplete';\r\n  currentPeriodStart: string;\r\n  currentPeriodEnd: string;\r\n  cancelAtPeriodEnd: boolean;\r\n  stripeCustomerId?: string;\r\n  stripeSubscriptionId?: string;\r\n  stripePriceId?: string;\r\n  features: SubscriptionFeatures;\r\n  usage: SubscriptionUsage;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface SubscriptionFeatures {\r\n  maxScripts: number;\r\n  maxTeamMembers: number;\r\n  maxTeams: number;\r\n  storageLimit: number; // in bytes\r\n  hasAdvancedEditor: boolean;\r\n  hasTeamCollaboration: boolean;\r\n  hasAnalytics: boolean;\r\n  hasApiAccess: boolean;\r\n  hasPrioritySupport: boolean;\r\n  hasCustomBranding: boolean;\r\n  hasAdvancedSecurity: boolean;\r\n  hasDataExport: boolean;\r\n}\r\n\r\nexport interface SubscriptionUsage {\r\n  scriptsUsed: number;\r\n  teamsUsed: number;\r\n  teamMembersUsed: number;\r\n  storageUsed: number;\r\n  apiCallsUsed: number;\r\n  lastUpdated: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\AdaptiveScrollSettings.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":22,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[449,481],"text":""},"desc":"Remove unused variable 'settings'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n} from 'react-native';\r\nimport {\r\n  Modal,\r\n  Portal,\r\n  Surface,\r\n  Text,\r\n  Button,\r\n  Switch,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport Slider from '@react-native-community/slider';\r\nimport { AdaptiveScrollSettings } from '../types';\r\n\r\ninterface AdaptiveScrollSettingsModalProps {\r\n  visible: boolean;\r\n  settings: AdaptiveScrollSettings;\r\n  onClose: () => void;\r\n  onSave: (settings: AdaptiveScrollSettings) => void;\r\n  onReset: () => void;\r\n}\r\n\r\nexport default function AdaptiveScrollSettingsModal({\r\n  visible,\r\n  settings,\r\n  onClose,\r\n  onSave,\r\n  onReset,\r\n}: AdaptiveScrollSettingsModalProps) {\r\n  const [localSettings, setLocalSettings] = React.useState<AdaptiveScrollSettings>(settings);\r\n\r\n  React.useEffect(() => {\r\n    setLocalSettings(settings);\r\n  }, [settings]);\r\n\r\n  const handleSave = () => {\r\n    onSave(localSettings);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    onReset();\r\n    onClose();\r\n  };\r\n\r\n  const updateSetting = <K extends keyof AdaptiveScrollSettings>(\r\n    key: K,\r\n    value: AdaptiveScrollSettings[K]\r\n  ) => {\r\n    setLocalSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onClose}\r\n        contentContainerStyle={styles.modal}\r\n      >\r\n        <Surface style={styles.surface}>\r\n          <Text variant=\"headlineSmall\" style={styles.title}>\r\n            Adaptive Scroll Settings\r\n          </Text>\r\n          \r\n          <Text variant=\"bodyMedium\" style={styles.description}>\r\n            Configure dynamic scrolling based on your speaking pace\r\n          </Text>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          <View style={styles.settingRow}>\r\n            <View style={styles.settingInfo}>\r\n              <Text variant=\"bodyLarge\">Enable Adaptive Scrolling</Text>\r\n              <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n                Automatically adjust scroll speed based on speech pace\r\n              </Text>\r\n            </View>\r\n            <Switch\r\n              value={localSettings.enabled}\r\n              onValueChange={(value) => updateSetting('enabled', value)}\r\n            />\r\n          </View>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Base Scroll Speed: {Math.round(localSettings.baseScrollSpeed)}\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Base scrolling speed when speech is not detected\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={10}\r\n              maximumValue={200}\r\n              value={localSettings.baseScrollSpeed}\r\n              onValueChange={(value) => updateSetting('baseScrollSpeed', value)}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Responsiveness: {Math.round(localSettings.responsiveness * 100)}%\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              How quickly scrolling adapts to pace changes\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0.1}\r\n              maximumValue={1.0}\r\n              value={localSettings.responsiveness}\r\n              onValueChange={(value) => updateSetting('responsiveness', value)}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Smoothing: {Math.round(localSettings.smoothingFactor * 100)}%\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Higher values create smoother but less responsive scrolling\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0.1}\r\n              maximumValue={1.0}\r\n              value={localSettings.smoothingFactor}\r\n              onValueChange={(value) => updateSetting('smoothingFactor', value)}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Pause Threshold: {localSettings.pauseThreshold.toFixed(1)}s\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Time before detecting speech pause\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0.5}\r\n              maximumValue={5.0}\r\n              value={localSettings.pauseThreshold}\r\n              onValueChange={(value) => updateSetting('pauseThreshold', value)}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Max Acceleration: {localSettings.accelerationLimit.toFixed(1)}x\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Maximum scroll speed multiplier for fast speech\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={1.0}\r\n              maximumValue={5.0}\r\n              value={localSettings.accelerationLimit}\r\n              onValueChange={(value) => updateSetting('accelerationLimit', value)}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderSection}>\r\n            <Text variant=\"bodyLarge\" style={styles.sliderLabel}>\r\n              Look Ahead: {localSettings.lookAheadWords} words\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              How many words ahead to scroll for smooth reading\r\n            </Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={1}\r\n              maximumValue={20}\r\n              value={localSettings.lookAheadWords}\r\n              onValueChange={(value) => updateSetting('lookAheadWords', Math.round(value))}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n              thumbTintColor=\"#6366f1\"\r\n            />\r\n          </View>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          <View style={styles.buttonRow}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={handleReset}\r\n              style={styles.button}\r\n            >\r\n              Reset\r\n            </Button>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={onClose}\r\n              style={styles.button}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleSave}\r\n              style={styles.button}\r\n            >\r\n              Save\r\n            </Button>\r\n          </View>\r\n        </Surface>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  modal: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    margin: 20,\r\n  },\r\n  surface: {\r\n    padding: 24,\r\n    borderRadius: 8,\r\n    width: '100%',\r\n    maxWidth: 500,\r\n    maxHeight: '90%',\r\n  },\r\n  title: {\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n    fontWeight: 'bold',\r\n  },\r\n  description: {\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n    color: '#6b7280',\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  settingRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 8,\r\n  },\r\n  settingInfo: {\r\n    flex: 1,\r\n    marginRight: 16,\r\n  },\r\n  settingDescription: {\r\n    color: '#6b7280',\r\n    marginTop: 4,\r\n  },\r\n  sliderSection: {\r\n    marginBottom: 20,\r\n  },\r\n  sliderLabel: {\r\n    marginBottom: 4,\r\n    fontWeight: '600',\r\n  },\r\n  slider: {\r\n    width: '100%',\r\n    height: 40,\r\n    marginTop: 8,\r\n  },\r\n  buttonRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 16,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    marginHorizontal: 4,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\AiSuggestionPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[97,118],"text":""},"desc":"Remove unused variable 'TouchableOpacity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[501,504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[501,504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'suggestion' is defined but never used.","line":21,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"suggestion"},"fix":{"range":[531,555],"text":""},"desc":"Remove unused variable 'suggestion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'suggestion' is defined but never used.","line":22,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"suggestion"},"fix":{"range":[591,615],"text":""},"desc":"Remove unused variable 'suggestion'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'showSuggestion'. Either include it or remove the dependency array.","line":53,"column":6,"nodeType":"ArrayExpression","endLine":53,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [showSuggestion]","fix":{"range":[1531,1533],"text":"[showSuggestion]"}}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":15}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Animated,\r\n  TouchableOpacity,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Surface,\r\n  Button,\r\n  IconButton,\r\n} from 'react-native-paper';\r\nimport { MaterialIcons } from '@expo/vector-icons';\r\nimport GeminiAiService, { AiSuggestion, AiPromptingSettings } from '../services/geminiAiService';\r\n\r\ninterface AiSuggestionPanelProps {\r\n  visible: boolean;\r\n  position?: 'bottom' | 'center' | 'floating';\r\n  style?: any;\r\n  onSuggestionAccept?: (suggestion: AiSuggestion) => void;\r\n  onSuggestionReject?: (suggestion: AiSuggestion) => void;\r\n}\r\n\r\nexport default function AiSuggestionPanel({\r\n  visible,\r\n  position = 'bottom',\r\n  style,\r\n  onSuggestionAccept,\r\n  onSuggestionReject,\r\n}: AiSuggestionPanelProps) {\r\n  const [currentSuggestion, setCurrentSuggestion] = useState<AiSuggestion | null>(null);\r\n  const [settings, setSettings] = useState<AiPromptingSettings | null>(null);\r\n  const [slideAnim] = useState(new Animated.Value(0));\r\n  const [fadeAnim] = useState(new Animated.Value(0));\r\n\r\n  useEffect(() => {\r\n    const geminiService = GeminiAiService.getInstance();\r\n\r\n    const handleSuggestion = (suggestion: AiSuggestion) => {\r\n      setCurrentSuggestion(suggestion);\r\n      showSuggestion();\r\n    };\r\n\r\n    // Load settings\r\n    setSettings(geminiService.getSettings());\r\n\r\n    geminiService.addSuggestionListener(handleSuggestion);\r\n\r\n    return () => {\r\n      geminiService.removeSuggestionListener(handleSuggestion);\r\n    };\r\n  }, []);\r\n\r\n  const showSuggestion = () => {\r\n    Animated.parallel([\r\n      Animated.timing(slideAnim, {\r\n        toValue: 1,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }),\r\n      Animated.timing(fadeAnim, {\r\n        toValue: 1,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }),\r\n    ]).start();\r\n\r\n    // Auto-hide after 10 seconds if no interaction\r\n    setTimeout(() => {\r\n      if (currentSuggestion) {\r\n        hideSuggestion();\r\n      }\r\n    }, 10000);\r\n  };\r\n\r\n  const hideSuggestion = () => {\r\n    Animated.parallel([\r\n      Animated.timing(slideAnim, {\r\n        toValue: 0,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }),\r\n      Animated.timing(fadeAnim, {\r\n        toValue: 0,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }),\r\n    ]).start(() => {\r\n      setCurrentSuggestion(null);\r\n    });\r\n  };\r\n\r\n  const handleAccept = () => {\r\n    if (currentSuggestion && onSuggestionAccept) {\r\n      onSuggestionAccept(currentSuggestion);\r\n    }\r\n    hideSuggestion();\r\n  };\r\n\r\n  const handleReject = () => {\r\n    if (currentSuggestion && onSuggestionReject) {\r\n      onSuggestionReject(currentSuggestion);\r\n    }\r\n    hideSuggestion();\r\n  };\r\n\r\n  const getSuggestionIcon = (type: AiSuggestion['type']) => {\r\n    switch (type) {\r\n      case 'next_phrase':\r\n        return 'play-arrow';\r\n      case 'transition':\r\n        return 'trending-flat';\r\n      case 'rephrase':\r\n        return 'refresh';\r\n      case 'continuation':\r\n        return 'more-horiz';\r\n      default:\r\n        return 'lightbulb';\r\n    }\r\n  };\r\n\r\n  const getSuggestionColor = (type: AiSuggestion['type']) => {\r\n    switch (type) {\r\n      case 'next_phrase':\r\n        return '#10B981';\r\n      case 'transition':\r\n        return '#3B82F6';\r\n      case 'rephrase':\r\n        return '#F59E0B';\r\n      case 'continuation':\r\n        return '#8B5CF6';\r\n      default:\r\n        return '#6B7280';\r\n    }\r\n  };\r\n\r\n  const getPositionStyle = () => {\r\n    const baseStyle = {\r\n      position: 'absolute' as const,\r\n      left: 20,\r\n      right: 20,\r\n      zIndex: 1000,\r\n    };\r\n\r\n    switch (position) {\r\n      case 'bottom':\r\n        return {\r\n          ...baseStyle,\r\n          bottom: 100,\r\n          transform: [\r\n            {\r\n              translateY: slideAnim.interpolate({\r\n                inputRange: [0, 1],\r\n                outputRange: [100, 0],\r\n              }),\r\n            },\r\n          ],\r\n        };\r\n      case 'center':\r\n        return {\r\n          ...baseStyle,\r\n          top: '50%',\r\n          transform: [\r\n            {\r\n              translateY: slideAnim.interpolate({\r\n                inputRange: [0, 1],\r\n                outputRange: [50, -50],\r\n              }),\r\n            },\r\n          ],\r\n        };\r\n      case 'floating':\r\n        return {\r\n          ...baseStyle,\r\n          bottom: 200,\r\n          transform: [\r\n            {\r\n              scale: slideAnim.interpolate({\r\n                inputRange: [0, 1],\r\n                outputRange: [0.8, 1],\r\n              }),\r\n            },\r\n          ],\r\n        };\r\n      default:\r\n        return baseStyle;\r\n    }\r\n  };\r\n\r\n  if (!visible || !currentSuggestion || !settings?.enabled) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Animated.View\r\n      style={[\r\n        getPositionStyle(),\r\n        {\r\n          opacity: fadeAnim,\r\n        },\r\n        style,\r\n      ]}\r\n    >\r\n      <Surface style={styles.container} elevation={4}>\r\n        <View style={styles.header}>\r\n          <View style={styles.iconContainer}>\r\n            <MaterialIcons\r\n              name={getSuggestionIcon(currentSuggestion.type)}\r\n              size={20}\r\n              color={getSuggestionColor(currentSuggestion.type)}\r\n            />\r\n          </View>\r\n          <View style={styles.headerText}>\r\n            <Text variant=\"labelSmall\" style={styles.aiLabel}>\r\n              AI Assistant\r\n            </Text>\r\n            <Text variant=\"labelSmall\" style={styles.reasoning}>\r\n              {currentSuggestion.reasoning}\r\n            </Text>\r\n          </View>\r\n          <IconButton\r\n            icon=\"close\"\r\n            size={16}\r\n            onPress={handleReject}\r\n            style={styles.closeButton}\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.suggestionContainer}>\r\n          <Text variant=\"bodyMedium\" style={styles.suggestionText}>\r\n            \"{currentSuggestion.text}\"\r\n          </Text>\r\n          \r\n          <View style={styles.confidenceContainer}>\r\n            <Text variant=\"labelSmall\" style={styles.confidenceText}>\r\n              Confidence: {Math.round(currentSuggestion.confidence * 100)}%\r\n            </Text>\r\n          </View>\r\n        </View>\r\n\r\n        <View style={styles.actions}>\r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={handleReject}\r\n            style={styles.rejectButton}\r\n            labelStyle={styles.buttonLabel}\r\n          >\r\n            Dismiss\r\n          </Button>\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={handleAccept}\r\n            style={[styles.acceptButton, { backgroundColor: getSuggestionColor(currentSuggestion.type) }]}\r\n            labelStyle={styles.buttonLabel}\r\n          >\r\n            Use Suggestion\r\n          </Button>\r\n        </View>\r\n      </Surface>\r\n    </Animated.View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.98)',\r\n    borderRadius: 16,\r\n    padding: 16,\r\n    marginHorizontal: 4,\r\n    borderWidth: 1,\r\n    borderColor: '#E5E7EB',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  iconContainer: {\r\n    width: 32,\r\n    height: 32,\r\n    borderRadius: 16,\r\n    backgroundColor: '#F3F4F6',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 12,\r\n  },\r\n  headerText: {\r\n    flex: 1,\r\n  },\r\n  aiLabel: {\r\n    fontWeight: 'bold',\r\n    color: '#374151',\r\n  },\r\n  reasoning: {\r\n    color: '#6B7280',\r\n    marginTop: 2,\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  suggestionContainer: {\r\n    marginBottom: 16,\r\n  },\r\n  suggestionText: {\r\n    fontStyle: 'italic',\r\n    color: '#1F2937',\r\n    lineHeight: 20,\r\n    marginBottom: 8,\r\n  },\r\n  confidenceContainer: {\r\n    alignSelf: 'flex-start',\r\n  },\r\n  confidenceText: {\r\n    color: '#6B7280',\r\n    fontSize: 11,\r\n  },\r\n  actions: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n  },\r\n  rejectButton: {\r\n    flex: 1,\r\n    borderColor: '#D1D5DB',\r\n  },\r\n  acceptButton: {\r\n    flex: 2,\r\n  },\r\n  buttonLabel: {\r\n    fontSize: 13,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\BLERemotePanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Switch"},"fix":{"range":[220,231],"text":""},"desc":"Remove unused variable 'Switch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'action' is defined but never used.","line":34,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"action"},"fix":{"range":[626,652],"text":""},"desc":"Remove unused variable 'action'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":57,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":18,"suggestions":[{"fix":{"range":[1599,1648],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1700,1703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1700,1703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1857,1860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1857,1860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":68,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":94,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":94,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":113,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":113,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":113,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":113,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":125,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":125,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":125,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":125,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'handleUpdateButtonMapping' is assigned a value but never used.","line":130,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleUpdateButtonMapping"},"fix":{"range":[4027,4329],"text":""},"desc":"Remove unused variable 'handleUpdateButtonMapping'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleUpdateButtonMapping' is assigned a value but never used.","line":130,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'props' is defined but never used.","line":172,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":172,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"props"},"fix":{"range":[5591,5596],"text":""},"desc":"Remove unused variable 'props'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is defined but never used.","line":172,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":172,"endColumn":20}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  Alert,\r\n  DeviceEventEmitter,\r\n} from 'react-native';\r\nimport {\r\n  Surface,\r\n  Text,\r\n  Button,\r\n  List,\r\n  IconButton,\r\n  Switch,\r\n  Chip,\r\n  Portal,\r\n  Modal,\r\n  ProgressBar,\r\n  Card,\r\n} from 'react-native-paper';\r\nimport {\r\n  bleRemoteService,\r\n  BLERemoteState,\r\n  BLEDevice,\r\n  ButtonMapping,\r\n  TeleprompterAction,\r\n  RemoteCommand,\r\n} from '../services/bleRemoteService';\r\nimport { useSubscriptionStore } from '../store/subscriptionStore';\r\n\r\ninterface BLERemotePanelProps {\r\n  isActive: boolean;\r\n  onRemoteAction: (action: TeleprompterAction) => void;\r\n}\r\n\r\nexport function BLERemotePanel({ isActive, onRemoteAction }: BLERemotePanelProps) {\r\n  const { subscription } = useSubscriptionStore();\r\n  const [remoteState, setRemoteState] = useState<BLERemoteState>(\r\n    bleRemoteService.getCurrentState()\r\n  );\r\n  const [showDeviceList, setShowDeviceList] = useState(false);\r\n  const [showButtonMapping, setShowButtonMapping] = useState(false);\r\n  const [selectedDevice, setSelectedDevice] = useState<BLEDevice | null>(null);\r\n  const [lastFeedback, setLastFeedback] = useState<string | null>(null);\r\n  const [buttonMappings, setButtonMappings] = useState<Map<string, ButtonMapping>>(\r\n    bleRemoteService.getAllButtonMappings()\r\n  );\r\n\r\n  useEffect(() => {\r\n    const stateListener = (state: BLERemoteState) => {\r\n      setRemoteState(state);\r\n    };\r\n\r\n    const commandListener = (command: RemoteCommand) => {\r\n      // Commands are processed by the service, we just show feedback\r\n      console.log('Remote command received:', command);\r\n    };\r\n\r\n    const actionListener = (actionData: any) => {\r\n      // Handle teleprompter actions from remote\r\n      onRemoteAction(actionData.action);\r\n    };\r\n\r\n    const feedbackListener = (feedbackData: any) => {\r\n      setLastFeedback(feedbackData.message);\r\n      // Clear feedback after 2 seconds\r\n      setTimeout(() => setLastFeedback(null), 2000);\r\n    };\r\n\r\n    bleRemoteService.addListener(stateListener);\r\n    bleRemoteService.addCommandListener(commandListener);\r\n    \r\n    DeviceEventEmitter.addListener('TeleprompterRemoteAction', actionListener);\r\n    DeviceEventEmitter.addListener('RemoteCommandFeedback', feedbackListener);\r\n\r\n    // Initialize service if subscription allows\r\n    if (subscription?.features.bluetoothRemote) {\r\n      bleRemoteService.initialize();\r\n    }\r\n\r\n    return () => {\r\n      bleRemoteService.removeListener(stateListener);\r\n      bleRemoteService.removeCommandListener(commandListener);\r\n      DeviceEventEmitter.removeAllListeners('TeleprompterRemoteAction');\r\n      DeviceEventEmitter.removeAllListeners('RemoteCommandFeedback');\r\n    };\r\n  }, [subscription, onRemoteAction]);\r\n\r\n  const handleStartScanning = async () => {\r\n    try {\r\n      await bleRemoteService.startScanning(15000); // 15 seconds\r\n      setShowDeviceList(true);\r\n    } catch (error) {\r\n      Alert.alert('Scan Error', 'Failed to start scanning for remote devices');\r\n    }\r\n  };\r\n\r\n  const handleStopScanning = async () => {\r\n    await bleRemoteService.stopScanning();\r\n  };\r\n\r\n  const handleConnectDevice = async (device: BLEDevice) => {\r\n    try {\r\n      const success = await bleRemoteService.connectToDevice(device.id);\r\n      \r\n      if (success) {\r\n        setShowDeviceList(false);\r\n        Alert.alert('Connected', `Connected to ${device.name}`);\r\n      } else {\r\n        Alert.alert('Connection Failed', `Failed to connect to ${device.name}`);\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Connection Error', 'An error occurred while connecting');\r\n    }\r\n  };\r\n\r\n  const handleDisconnectDevice = async (device: BLEDevice) => {\r\n    try {\r\n      const success = await bleRemoteService.disconnectFromDevice(device.id);\r\n      \r\n      if (success) {\r\n        Alert.alert('Disconnected', `Disconnected from ${device.name}`);\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Disconnect Error', 'Failed to disconnect device');\r\n    }\r\n  };\r\n\r\n  const handleUpdateButtonMapping = (button: string, action: TeleprompterAction) => {\r\n    const mapping: ButtonMapping = {\r\n      button,\r\n      action,\r\n    };\r\n    \r\n    bleRemoteService.setButtonMapping(button, mapping);\r\n    setButtonMappings(new Map(bleRemoteService.getAllButtonMappings()));\r\n  };\r\n\r\n  const getDeviceIcon = (device: BLEDevice): string => {\r\n    switch (device.type) {\r\n      case 'presentation_remote': return 'presentation';\r\n      case 'foot_pedal': return 'foot-print';\r\n      case 'keyboard': return 'keyboard';\r\n      default: return 'bluetooth';\r\n    }\r\n  };\r\n\r\n  const getActionIcon = (action: TeleprompterAction): string => {\r\n    switch (action) {\r\n      case 'play_pause': return 'play-pause';\r\n      case 'scroll_up': return 'arrow-up';\r\n      case 'scroll_down': return 'arrow-down';\r\n      case 'speed_increase': return 'speedometer';\r\n      case 'speed_decrease': return 'speedometer-slow';\r\n      case 'next_marker': return 'skip-next';\r\n      case 'previous_marker': return 'skip-previous';\r\n      case 'reset_position': return 'restore';\r\n      case 'toggle_speech_recognition': return 'microphone';\r\n      case 'toggle_karaoke': return 'music';\r\n      default: return 'gesture-tap';\r\n    }\r\n  };\r\n\r\n  const renderDeviceItem = ({ item }: { item: BLEDevice }) => (\r\n    <List.Item\r\n      title={item.name}\r\n      description={`${item.type}  ${item.manufacturer || 'Unknown'}  Signal: ${item.rssi || 'N/A'}dBm`}\r\n      left={(props) => (\r\n        <List.Icon {...props} icon={getDeviceIcon(item)} />\r\n      )}\r\n      right={(props) => (\r\n        <View style={styles.deviceActions}>\r\n          {item.batteryLevel && (\r\n            <Chip icon=\"battery\" compact style={styles.batteryChip}>\r\n              {item.batteryLevel}%\r\n            </Chip>\r\n          )}\r\n          <Button\r\n            mode={item.isConnected ? 'outlined' : 'contained'}\r\n            compact\r\n            onPress={() => \r\n              item.isConnected \r\n                ? handleDisconnectDevice(item)\r\n                : handleConnectDevice(item)\r\n            }\r\n          >\r\n            {item.isConnected ? 'Disconnect' : 'Connect'}\r\n          </Button>\r\n        </View>\r\n      )}\r\n      style={styles.deviceItem}\r\n      onPress={() => {\r\n        setSelectedDevice(item);\r\n        setShowButtonMapping(true);\r\n      }}\r\n    />\r\n  );\r\n\r\n  const renderButtonMapping = (button: string, mapping: ButtonMapping) => (\r\n    <Card key={button} style={styles.mappingCard}>\r\n      <Card.Content>\r\n        <View style={styles.mappingRow}>\r\n          <View style={styles.mappingInfo}>\r\n            <Text variant=\"titleSmall\">{button.replace('_', ' ').toUpperCase()}</Text>\r\n            <Text variant=\"bodyMedium\">{mapping.action.replace('_', ' ')}</Text>\r\n          </View>\r\n          <IconButton\r\n            icon={getActionIcon(mapping.action)}\r\n            size={20}\r\n          />\r\n        </View>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n\r\n  // Check if feature is available for current subscription\r\n  if (!subscription?.features.bluetoothRemote) {\r\n    return (\r\n      <Surface style={styles.upgradeContainer}>\r\n        <Text variant=\"titleMedium\" style={styles.upgradeTitle}>\r\n          Bluetooth Remote\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.upgradeText}>\r\n          Control your teleprompter with presentation remotes and foot pedals.\r\n        </Text>\r\n        <Button\r\n          mode=\"contained\"\r\n          style={styles.upgradeButton}\r\n          onPress={() => {/* Navigate to subscription */}}\r\n        >\r\n          Upgrade to Pro\r\n        </Button>\r\n      </Surface>\r\n    );\r\n  }\r\n\r\n  if (!isActive) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Surface style={styles.panel}>\r\n        {/* Bluetooth Status */}\r\n        <View style={styles.statusContainer}>\r\n          <Text variant=\"titleSmall\">Bluetooth Remote</Text>\r\n          {!remoteState.isBluetoothEnabled && (\r\n            <Chip icon=\"bluetooth-off\" compact style={styles.statusChip}>\r\n              Bluetooth Off\r\n            </Chip>\r\n          )}\r\n          {remoteState.connectedDevices.length > 0 && (\r\n            <Chip icon=\"bluetooth-connect\" compact style={styles.statusChip}>\r\n              {remoteState.connectedDevices.length} Connected\r\n            </Chip>\r\n          )}\r\n        </View>\r\n\r\n        {/* Connected Devices */}\r\n        {remoteState.connectedDevices.length > 0 ? (\r\n          <View style={styles.connectedDevices}>\r\n            {remoteState.connectedDevices.map((device) => (\r\n              <View key={device.id} style={styles.connectedDevice}>\r\n                <Text variant=\"bodySmall\">{device.name}</Text>\r\n                <IconButton\r\n                  icon=\"close\"\r\n                  size={16}\r\n                  onPress={() => handleDisconnectDevice(device)}\r\n                />\r\n              </View>\r\n            ))}\r\n          </View>\r\n        ) : (\r\n          <Button\r\n            mode=\"contained\"\r\n            compact\r\n            icon=\"bluetooth-audio\"\r\n            onPress={handleStartScanning}\r\n            disabled={!remoteState.isBluetoothEnabled || remoteState.isScanning}\r\n            loading={remoteState.isScanning}\r\n            style={styles.scanButton}\r\n          >\r\n            {remoteState.isScanning ? 'Scanning...' : 'Connect Remote'}\r\n          </Button>\r\n        )}\r\n\r\n        {/* Button Mappings Button */}\r\n        {remoteState.connectedDevices.length > 0 && (\r\n          <Button\r\n            mode=\"outlined\"\r\n            compact\r\n            icon=\"tune\"\r\n            onPress={() => setShowButtonMapping(true)}\r\n            style={styles.settingsButton}\r\n          >\r\n            Button Mapping\r\n          </Button>\r\n        )}\r\n\r\n        {/* Last Feedback */}\r\n        {lastFeedback && (\r\n          <View style={styles.feedbackContainer}>\r\n            <Text variant=\"bodySmall\" style={styles.feedbackText}>\r\n              {lastFeedback}\r\n            </Text>\r\n          </View>\r\n        )}\r\n\r\n        {/* Error Display */}\r\n        {remoteState.error && (\r\n          <Text variant=\"bodySmall\" style={styles.errorText}>\r\n            {remoteState.error}\r\n          </Text>\r\n        )}\r\n      </Surface>\r\n\r\n      {/* Device List Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showDeviceList}\r\n          onDismiss={() => setShowDeviceList(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Bluetooth Devices\r\n          </Text>\r\n          \r\n          {remoteState.isScanning && (\r\n            <View style={styles.scanningContainer}>\r\n              <ProgressBar indeterminate />\r\n              <Text variant=\"bodyMedium\" style={styles.scanningText}>\r\n                Scanning for devices...\r\n              </Text>\r\n            </View>\r\n          )}\r\n\r\n          {remoteState.discoveredDevices.length === 0 && !remoteState.isScanning ? (\r\n            <View style={styles.emptyState}>\r\n              <Text variant=\"bodyMedium\">No devices found</Text>\r\n              <Text variant=\"bodySmall\" style={styles.emptyHint}>\r\n                Make sure your remote device is in pairing mode\r\n              </Text>\r\n            </View>\r\n          ) : (\r\n            <FlatList\r\n              data={remoteState.discoveredDevices}\r\n              renderItem={renderDeviceItem}\r\n              keyExtractor={(item) => item.id}\r\n              style={styles.deviceList}\r\n            />\r\n          )}\r\n\r\n          <View style={styles.modalActions}>\r\n            <Button \r\n              onPress={handleStartScanning} \r\n              disabled={remoteState.isScanning}\r\n            >\r\n              Scan Again\r\n            </Button>\r\n            <Button onPress={handleStopScanning}>\r\n              Stop Scan\r\n            </Button>\r\n            <Button onPress={() => setShowDeviceList(false)}>\r\n              Close\r\n            </Button>\r\n          </View>\r\n        </Modal>\r\n      </Portal>\r\n\r\n      {/* Button Mapping Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showButtonMapping}\r\n          onDismiss={() => setShowButtonMapping(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Button Mappings\r\n          </Text>\r\n          \r\n          {selectedDevice && (\r\n            <Text variant=\"bodyMedium\" style={styles.deviceName}>\r\n              {selectedDevice.name}\r\n            </Text>\r\n          )}\r\n\r\n          <View style={styles.mappingsContainer}>\r\n            {Array.from(buttonMappings.entries()).map(([button, mapping]) =>\r\n              renderButtonMapping(button, mapping)\r\n            )}\r\n          </View>\r\n\r\n          <Text variant=\"bodySmall\" style={styles.mappingHint}>\r\n            Tap a button on your remote to see it highlighted here\r\n          </Text>\r\n\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={() => setShowButtonMapping(false)}\r\n            style={styles.modalCloseButton}\r\n          >\r\n            Done\r\n          </Button>\r\n        </Modal>\r\n      </Portal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'absolute',\r\n    bottom: 100,\r\n    right: 16,\r\n    zIndex: 999,\r\n  },\r\n  panel: {\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n    minWidth: 180,\r\n    elevation: 4,\r\n  },\r\n  upgradeContainer: {\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    margin: 16,\r\n    alignItems: 'center',\r\n  },\r\n  upgradeTitle: {\r\n    marginBottom: 8,\r\n    textAlign: 'center',\r\n  },\r\n  upgradeText: {\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n    color: '#666',\r\n  },\r\n  upgradeButton: {\r\n    minWidth: 120,\r\n  },\r\n  statusContainer: {\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  statusChip: {\r\n    marginTop: 4,\r\n  },\r\n  connectedDevices: {\r\n    marginBottom: 8,\r\n  },\r\n  connectedDevice: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    paddingVertical: 4,\r\n  },\r\n  scanButton: {\r\n    marginBottom: 8,\r\n  },\r\n  settingsButton: {\r\n    marginTop: 4,\r\n  },\r\n  feedbackContainer: {\r\n    backgroundColor: '#e3f2fd',\r\n    padding: 8,\r\n    borderRadius: 4,\r\n    marginTop: 8,\r\n  },\r\n  feedbackText: {\r\n    textAlign: 'center',\r\n    color: '#1976d2',\r\n    fontWeight: 'bold',\r\n  },\r\n  errorText: {\r\n    color: '#ef4444',\r\n    marginTop: 4,\r\n    fontSize: 12,\r\n    textAlign: 'center',\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    padding: 20,\r\n    borderRadius: 12,\r\n    maxHeight: '80%',\r\n  },\r\n  modalTitle: {\r\n    marginBottom: 16,\r\n    textAlign: 'center',\r\n  },\r\n  scanningContainer: {\r\n    padding: 16,\r\n  },\r\n  scanningText: {\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n  },\r\n  deviceList: {\r\n    maxHeight: 300,\r\n  },\r\n  deviceItem: {\r\n    paddingVertical: 8,\r\n  },\r\n  deviceActions: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 8,\r\n  },\r\n  batteryChip: {\r\n    height: 24,\r\n  },\r\n  emptyState: {\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  emptyHint: {\r\n    color: '#666',\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginTop: 16,\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n  },\r\n  deviceName: {\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n    color: '#666',\r\n  },\r\n  mappingsContainer: {\r\n    maxHeight: 300,\r\n  },\r\n  mappingCard: {\r\n    marginBottom: 8,\r\n  },\r\n  mappingRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  mappingInfo: {\r\n    flex: 1,\r\n  },\r\n  mappingHint: {\r\n    textAlign: 'center',\r\n    color: '#666',\r\n    marginTop: 16,\r\n    fontStyle: 'italic',\r\n  },\r\n  modalCloseButton: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\ConflictResolution.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'resolution' is defined but never used.","line":9,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"resolution"},"fix":{"range":[283,313],"text":""},"desc":"Remove unused variable 'resolution'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport { Text, Card, Button, Divider } from 'react-native-paper';\r\nimport { Script } from '../types';\r\n\r\ninterface ConflictResolutionProps {\r\n  localScript: Script;\r\n  remoteScript: Script;\r\n  onResolve: (resolution: 'local' | 'remote') => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport default function ConflictResolution({\r\n  localScript,\r\n  remoteScript,\r\n  onResolve,\r\n  onCancel\r\n}: ConflictResolutionProps) {\r\n  const formatDate = (date: Date) => {\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: '2-digit',\r\n    }).format(date);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <Text variant=\"titleLarge\" style={styles.title}>\r\n            Sync Conflict Detected\r\n          </Text>\r\n          <Text variant=\"bodyMedium\" style={styles.description}>\r\n            This script has been modified both locally and remotely. \r\n            Please choose which version to keep:\r\n          </Text>\r\n\r\n          <View style={styles.versionsContainer}>\r\n            {/* Local Version */}\r\n            <Card style={styles.versionCard} mode=\"outlined\">\r\n              <Card.Content>\r\n                <Text variant=\"titleMedium\" style={styles.versionTitle}>\r\n                   Local Version\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.versionDate}>\r\n                  Modified: {formatDate(localScript.updatedAt)}\r\n                </Text>\r\n                <Divider style={styles.divider} />\r\n                <Text variant=\"titleSmall\" style={styles.contentTitle}>\r\n                  Title:\r\n                </Text>\r\n                <Text variant=\"bodyMedium\" style={styles.contentText}>\r\n                  {localScript.title}\r\n                </Text>\r\n                <Text variant=\"titleSmall\" style={styles.contentTitle}>\r\n                  Content Preview:\r\n                </Text>\r\n                <Text \r\n                  variant=\"bodyMedium\" \r\n                  style={styles.contentText}\r\n                  numberOfLines={3}\r\n                >\r\n                  {localScript.content || 'No content'}\r\n                </Text>\r\n              </Card.Content>\r\n            </Card>\r\n\r\n            {/* Remote Version */}\r\n            <Card style={styles.versionCard} mode=\"outlined\">\r\n              <Card.Content>\r\n                <Text variant=\"titleMedium\" style={styles.versionTitle}>\r\n                   Cloud Version\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.versionDate}>\r\n                  Modified: {formatDate(remoteScript.updatedAt)}\r\n                </Text>\r\n                <Divider style={styles.divider} />\r\n                <Text variant=\"titleSmall\" style={styles.contentTitle}>\r\n                  Title:\r\n                </Text>\r\n                <Text variant=\"bodyMedium\" style={styles.contentText}>\r\n                  {remoteScript.title}\r\n                </Text>\r\n                <Text variant=\"titleSmall\" style={styles.contentTitle}>\r\n                  Content Preview:\r\n                </Text>\r\n                <Text \r\n                  variant=\"bodyMedium\" \r\n                  style={styles.contentText}\r\n                  numberOfLines={3}\r\n                >\r\n                  {remoteScript.content || 'No content'}\r\n                </Text>\r\n              </Card.Content>\r\n            </Card>\r\n          </View>\r\n\r\n          <View style={styles.buttonContainer}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => onResolve('local')}\r\n              style={[styles.button, styles.localButton]}\r\n              labelStyle={styles.localButtonText}\r\n            >\r\n              Keep Local\r\n            </Button>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => onResolve('remote')}\r\n              style={[styles.button, styles.remoteButton]}\r\n              labelStyle={styles.remoteButtonText}\r\n            >\r\n              Keep Cloud\r\n            </Button>\r\n          </View>\r\n\r\n          <Button\r\n            mode=\"text\"\r\n            onPress={onCancel}\r\n            style={styles.cancelButton}\r\n            labelStyle={styles.cancelButtonText}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Card.Content>\r\n      </Card>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  card: {\r\n    elevation: 8,\r\n  },\r\n  title: {\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n    color: '#1f2937',\r\n    fontWeight: 'bold',\r\n  },\r\n  description: {\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n    color: '#6b7280',\r\n    lineHeight: 20,\r\n  },\r\n  versionsContainer: {\r\n    gap: 16,\r\n    marginBottom: 24,\r\n  },\r\n  versionCard: {\r\n    borderWidth: 2,\r\n  },\r\n  versionTitle: {\r\n    marginBottom: 4,\r\n    fontWeight: 'bold',\r\n    color: '#374151',\r\n  },\r\n  versionDate: {\r\n    marginBottom: 12,\r\n    color: '#9ca3af',\r\n  },\r\n  divider: {\r\n    marginBottom: 12,\r\n  },\r\n  contentTitle: {\r\n    marginBottom: 4,\r\n    marginTop: 8,\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n  },\r\n  contentText: {\r\n    marginBottom: 8,\r\n    color: '#6b7280',\r\n    lineHeight: 18,\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    marginBottom: 16,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    paddingVertical: 8,\r\n  },\r\n  localButton: {\r\n    borderColor: '#6366f1',\r\n  },\r\n  localButtonText: {\r\n    color: '#6366f1',\r\n  },\r\n  remoteButton: {\r\n    borderColor: '#10b981',\r\n  },\r\n  remoteButtonText: {\r\n    color: '#10b981',\r\n  },\r\n  cancelButton: {\r\n    marginTop: 8,\r\n  },\r\n  cancelButtonText: {\r\n    color: '#6b7280',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\EmotionIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[471,474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[471,474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'emotion' is defined but never used.","line":19,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotion"},"fix":{"range":[498,522],"text":""},"desc":"Remove unused variable 'emotion'."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":60,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2431,2434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2431,2434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Animated,\r\n  Text as RNText,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Surface,\r\n  ProgressBar,\r\n} from 'react-native-paper';\r\nimport HumeEmotionService, { EmotionIndicatorState, EmotionAnalysis } from '../services/humeEmotionService';\r\n\r\ninterface EmotionIndicatorProps {\r\n  visible: boolean;\r\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\r\n  style?: any;\r\n  onEmotionChange?: (emotion: EmotionAnalysis) => void;\r\n}\r\n\r\nexport default function EmotionIndicator({\r\n  visible,\r\n  position = 'top-right',\r\n  style,\r\n  onEmotionChange,\r\n}: EmotionIndicatorProps) {\r\n  const [indicator, setIndicator] = useState<EmotionIndicatorState>({\r\n    emoji: '',\r\n    color: '#9CA3AF',\r\n    confidence: 0,\r\n    description: 'Neutral',\r\n  });\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [fadeAnim] = useState(new Animated.Value(0));\r\n  const [pulseAnim] = useState(new Animated.Value(1));\r\n\r\n  useEffect(() => {\r\n    const humeService = HumeEmotionService.getInstance();\r\n\r\n    const handleIndicatorUpdate = (newIndicator: EmotionIndicatorState) => {\r\n      setIndicator(newIndicator);\r\n      setIsActive(true);\r\n      \r\n      // Pulse animation for new emotion\r\n      Animated.sequence([\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1.2,\r\n          duration: 200,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1,\r\n          duration: 200,\r\n          useNativeDriver: true,\r\n        }),\r\n      ]).start();\r\n\r\n      // Auto-hide after inactivity\r\n      setTimeout(() => setIsActive(false), 3000);\r\n    };\r\n\r\n    const handleEmotionUpdate = (emotion: EmotionAnalysis) => {\r\n      if (onEmotionChange) {\r\n        onEmotionChange(emotion);\r\n      }\r\n    };\r\n\r\n    humeService.addIndicatorListener(handleIndicatorUpdate);\r\n    humeService.addEmotionListener(handleEmotionUpdate);\r\n\r\n    return () => {\r\n      humeService.removeIndicatorListener(handleIndicatorUpdate);\r\n      humeService.removeEmotionListener(handleEmotionUpdate);\r\n    };\r\n  }, [onEmotionChange, pulseAnim]);\r\n\r\n  useEffect(() => {\r\n    Animated.timing(fadeAnim, {\r\n      toValue: visible && isActive ? 1 : 0,\r\n      duration: 300,\r\n      useNativeDriver: true,\r\n    }).start();\r\n  }, [visible, isActive, fadeAnim]);\r\n\r\n  const getPositionStyle = () => {\r\n    const styles: any = {\r\n      position: 'absolute',\r\n      zIndex: 1000,\r\n    };\r\n\r\n    switch (position) {\r\n      case 'top-left':\r\n        return { ...styles, top: 20, left: 20 };\r\n      case 'top-right':\r\n        return { ...styles, top: 20, right: 20 };\r\n      case 'bottom-left':\r\n        return { ...styles, bottom: 20, left: 20 };\r\n      case 'bottom-right':\r\n        return { ...styles, bottom: 20, right: 20 };\r\n      default:\r\n        return { ...styles, top: 20, right: 20 };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Animated.View\r\n      style={[\r\n        getPositionStyle(),\r\n        {\r\n          opacity: fadeAnim,\r\n          transform: [{ scale: pulseAnim }],\r\n        },\r\n        style,\r\n      ]}\r\n      pointerEvents=\"none\"\r\n    >\r\n      <Surface style={[styles.container, { borderColor: indicator.color }]} elevation={3}>\r\n        <View style={styles.header}>\r\n          <RNText style={styles.emoji}>{indicator.emoji}</RNText>\r\n          <View style={styles.textContainer}>\r\n            <Text variant=\"labelSmall\" style={[styles.description, { color: indicator.color }]}>\r\n              {indicator.description}\r\n            </Text>\r\n            <Text variant=\"labelSmall\" style={styles.confidence}>\r\n              {Math.round(indicator.confidence * 100)}% confident\r\n            </Text>\r\n          </View>\r\n        </View>\r\n        \r\n        <ProgressBar\r\n          progress={indicator.confidence}\r\n          color={indicator.color}\r\n          style={styles.progressBar}\r\n        />\r\n      </Surface>\r\n    </Animated.View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n    borderRadius: 12,\r\n    padding: 12,\r\n    minWidth: 160,\r\n    borderWidth: 2,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  emoji: {\r\n    fontSize: 24,\r\n    marginRight: 8,\r\n  },\r\n  textContainer: {\r\n    flex: 1,\r\n  },\r\n  description: {\r\n    fontWeight: 'bold',\r\n    fontSize: 12,\r\n  },\r\n  confidence: {\r\n    fontSize: 10,\r\n    color: '#666',\r\n    marginTop: 2,\r\n  },\r\n  progressBar: {\r\n    height: 4,\r\n    borderRadius: 2,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\ExternalDisplayPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ProgressBar' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProgressBar"},"fix":{"range":[238,254],"text":""},"desc":"Remove unused variable 'ProgressBar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProgressBar' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":33,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[691,726],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":89,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":89,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":106,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":106,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":106,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":115,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":115,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":115,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'props' is defined but never used.","line":140,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":140,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"props"},"fix":{"range":[4363,4368],"text":""},"desc":"Remove unused variable 'props'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is defined but never used.","line":140,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":20}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Surface,\r\n  Text,\r\n  Button,\r\n  List,\r\n  IconButton,\r\n  Switch,\r\n  Chip,\r\n  Portal,\r\n  Modal,\r\n  ProgressBar,\r\n} from 'react-native-paper';\r\nimport {\r\n  externalDisplayService,\r\n  ExternalDisplayState,\r\n  ExternalDisplay,\r\n  TeleprompterDisplayOptions,\r\n} from '../services/externalDisplayService';\r\nimport { useSubscriptionStore } from '../store/subscriptionStore';\r\n\r\ninterface ExternalDisplayPanelProps {\r\n  isActive: boolean;\r\n  scriptContent: string;\r\n  currentPosition: number;\r\n  highlightedWords?: number[];\r\n  onDisplayOptionsChange?: (options: TeleprompterDisplayOptions) => void;\r\n}\r\n\r\nexport function ExternalDisplayPanel({\r\n  isActive,\r\n  scriptContent,\r\n  currentPosition,\r\n  highlightedWords,\r\n  onDisplayOptionsChange,\r\n}: ExternalDisplayPanelProps) {\r\n  const { subscription } = useSubscriptionStore();\r\n  const [displayState, setDisplayState] = useState<ExternalDisplayState>(\r\n    externalDisplayService.getCurrentState()\r\n  );\r\n  const [showDisplayList, setShowDisplayList] = useState(false);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [displayOptions, setDisplayOptions] = useState<TeleprompterDisplayOptions>({\r\n    mirrorHorizontally: true,\r\n    fontSize: 24,\r\n    backgroundColor: '#000000',\r\n    textColor: '#FFFFFF',\r\n    scrollSpeed: 1.0,\r\n    showControls: false,\r\n    enableSpeechTracking: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const listener = (state: ExternalDisplayState) => {\r\n      setDisplayState(state);\r\n    };\r\n\r\n    externalDisplayService.addListener(listener);\r\n    \r\n    // Initialize service if subscription allows\r\n    if (subscription?.features.externalDisplay) {\r\n      externalDisplayService.initialize();\r\n    }\r\n\r\n    return () => {\r\n      externalDisplayService.removeListener(listener);\r\n    };\r\n  }, [subscription]);\r\n\r\n  // Update display content when props change\r\n  useEffect(() => {\r\n    if (displayState.currentDisplay && (displayState.isMirroring || displayState.isWirelessCasting)) {\r\n      externalDisplayService.updateDisplayContent(scriptContent, currentPosition, highlightedWords);\r\n    }\r\n  }, [scriptContent, currentPosition, highlightedWords, displayState.currentDisplay, displayState.isMirroring, displayState.isWirelessCasting]);\r\n\r\n  const handleScanForDisplays = async () => {\r\n    setIsScanning(true);\r\n    try {\r\n      await externalDisplayService.scanForDisplays();\r\n      setShowDisplayList(true);\r\n    } catch (error) {\r\n      Alert.alert('Scan Error', 'Failed to scan for external displays');\r\n    } finally {\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  const handleConnectToDisplay = async (display: ExternalDisplay) => {\r\n    try {\r\n      const success = await externalDisplayService.connectToDisplay(display.id, displayOptions);\r\n      \r\n      if (success) {\r\n        setShowDisplayList(false);\r\n        Alert.alert('Connected', `Connected to ${display.name}`);\r\n      } else {\r\n        Alert.alert('Connection Failed', `Failed to connect to ${display.name}`);\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Connection Error', 'An error occurred while connecting');\r\n    }\r\n  };\r\n\r\n  const handleDisconnect = async () => {\r\n    try {\r\n      await externalDisplayService.disconnect();\r\n      Alert.alert('Disconnected', 'Disconnected from external display');\r\n    } catch (error) {\r\n      Alert.alert('Disconnect Error', 'Failed to disconnect');\r\n    }\r\n  };\r\n\r\n  const handleOptionsChange = (newOptions: Partial<TeleprompterDisplayOptions>) => {\r\n    const updatedOptions = { ...displayOptions, ...newOptions };\r\n    setDisplayOptions(updatedOptions);\r\n    onDisplayOptionsChange?.(updatedOptions);\r\n  };\r\n\r\n  const renderDisplayItem = ({ item }: { item: ExternalDisplay }) => (\r\n    <List.Item\r\n      title={item.name}\r\n      description={`${item.type}  ${item.technology}  ${item.resolution.width}x${item.resolution.height}`}\r\n      left={(props) => (\r\n        <List.Icon\r\n          {...props}\r\n          icon={\r\n            item.type === 'wired' \r\n              ? item.technology === 'hdmi' ? 'video-input-hdmi' : 'usb'\r\n              : item.technology === 'chromecast' ? 'cast' : 'airplay'\r\n          }\r\n        />\r\n      )}\r\n      right={(props) => (\r\n        <Button\r\n          mode=\"contained\"\r\n          compact\r\n          onPress={() => handleConnectToDisplay(item)}\r\n          disabled={!item.isAvailable}\r\n        >\r\n          Connect\r\n        </Button>\r\n      )}\r\n      style={styles.displayItem}\r\n    />\r\n  );\r\n\r\n  // Check if feature is available for current subscription\r\n  if (!subscription?.features.externalDisplay) {\r\n    return (\r\n      <Surface style={styles.upgradeContainer}>\r\n        <Text variant=\"titleMedium\" style={styles.upgradeTitle}>\r\n          External Display\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.upgradeText}>\r\n          Connect to external monitors and wireless displays.\r\n        </Text>\r\n        <Button\r\n          mode=\"contained\"\r\n          style={styles.upgradeButton}\r\n          onPress={() => {/* Navigate to subscription */}}\r\n        >\r\n          Upgrade to Pro\r\n        </Button>\r\n      </Surface>\r\n    );\r\n  }\r\n\r\n  if (!isActive) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Surface style={styles.panel}>\r\n        {/* Connection Status */}\r\n        {displayState.currentDisplay ? (\r\n          <View style={styles.connectedContainer}>\r\n            <View style={styles.connectedHeader}>\r\n              <Text variant=\"titleSmall\">{displayState.currentDisplay.name}</Text>\r\n              <Chip \r\n                icon={displayState.isMirroring ? 'monitor' : 'cast'}\r\n                compact\r\n              >\r\n                {displayState.isMirroring ? 'Mirrored' : 'Casting'}\r\n              </Chip>\r\n            </View>\r\n            <View style={styles.connectedControls}>\r\n              <IconButton\r\n                icon=\"cog\"\r\n                size={20}\r\n                onPress={() => setShowSettings(true)}\r\n              />\r\n              <IconButton\r\n                icon=\"close\"\r\n                size={20}\r\n                onPress={handleDisconnect}\r\n              />\r\n            </View>\r\n          </View>\r\n        ) : (\r\n          <View style={styles.disconnectedContainer}>\r\n            <Text variant=\"titleSmall\">External Display</Text>\r\n            <Button\r\n              mode=\"contained\"\r\n              compact\r\n              icon=\"monitor-multiple\"\r\n              onPress={handleScanForDisplays}\r\n              loading={isScanning}\r\n              disabled={isScanning}\r\n              style={styles.scanButton}\r\n            >\r\n              {isScanning ? 'Scanning...' : 'Connect Display'}\r\n            </Button>\r\n          </View>\r\n        )}\r\n\r\n        {/* Error Display */}\r\n        {displayState.error && (\r\n          <Text variant=\"bodySmall\" style={styles.errorText}>\r\n            {displayState.error}\r\n          </Text>\r\n        )}\r\n      </Surface>\r\n\r\n      {/* Display List Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showDisplayList}\r\n          onDismiss={() => setShowDisplayList(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Available Displays\r\n          </Text>\r\n          \r\n          {displayState.availableDisplays.length === 0 ? (\r\n            <View style={styles.emptyState}>\r\n              <Text variant=\"bodyMedium\">No displays found</Text>\r\n              <Text variant=\"bodySmall\" style={styles.emptyHint}>\r\n                Make sure your external display is connected or your wireless device is discoverable\r\n              </Text>\r\n            </View>\r\n          ) : (\r\n            <FlatList\r\n              data={displayState.availableDisplays}\r\n              renderItem={renderDisplayItem}\r\n              keyExtractor={(item) => item.id}\r\n              style={styles.displayList}\r\n            />\r\n          )}\r\n\r\n          <View style={styles.modalActions}>\r\n            <Button onPress={handleScanForDisplays} disabled={isScanning}>\r\n              Refresh\r\n            </Button>\r\n            <Button onPress={() => setShowDisplayList(false)}>\r\n              Cancel\r\n            </Button>\r\n          </View>\r\n        </Modal>\r\n      </Portal>\r\n\r\n      {/* Display Settings Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showSettings}\r\n          onDismiss={() => setShowSettings(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Display Settings\r\n          </Text>\r\n\r\n          {/* Mirror Horizontally */}\r\n          <View style={styles.settingRow}>\r\n            <Text variant=\"titleMedium\">Mirror Horizontally</Text>\r\n            <Switch\r\n              value={displayOptions.mirrorHorizontally}\r\n              onValueChange={(value) => handleOptionsChange({ mirrorHorizontally: value })}\r\n            />\r\n          </View>\r\n\r\n          {/* Font Size */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\">Font Size: {displayOptions.fontSize}px</Text>\r\n            <View style={styles.fontSizeButtons}>\r\n              {[16, 20, 24, 28, 32, 36].map((size) => (\r\n                <Button\r\n                  key={size}\r\n                  mode={displayOptions.fontSize === size ? 'contained' : 'outlined'}\r\n                  compact\r\n                  onPress={() => handleOptionsChange({ fontSize: size })}\r\n                  style={styles.fontSizeButton}\r\n                >\r\n                  {size}\r\n                </Button>\r\n              ))}\r\n            </View>\r\n          </View>\r\n\r\n          {/* Colors */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\">Background Color</Text>\r\n            <View style={styles.colorButtons}>\r\n              {['#000000', '#1a1a1a', '#333333', '#ffffff'].map((color) => (\r\n                <Button\r\n                  key={color}\r\n                  mode={displayOptions.backgroundColor === color ? 'contained' : 'outlined'}\r\n                  compact\r\n                  onPress={() => handleOptionsChange({ backgroundColor: color })}\r\n                  style={[styles.colorButton, { backgroundColor: color }]}\r\n                >\r\n                  {color === '#000000' ? 'Black' : \r\n                   color === '#1a1a1a' ? 'Dark' : \r\n                   color === '#333333' ? 'Gray' : 'White'}\r\n                </Button>\r\n              ))}\r\n            </View>\r\n          </View>\r\n\r\n          {/* Speech Tracking */}\r\n          <View style={styles.settingRow}>\r\n            <Text variant=\"titleMedium\">Enable Speech Tracking</Text>\r\n            <Switch\r\n              value={displayOptions.enableSpeechTracking}\r\n              onValueChange={(value) => handleOptionsChange({ enableSpeechTracking: value })}\r\n            />\r\n          </View>\r\n\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={() => setShowSettings(false)}\r\n            style={styles.modalCloseButton}\r\n          >\r\n            Done\r\n          </Button>\r\n        </Modal>\r\n      </Portal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'absolute',\r\n    top: 80,\r\n    right: 16,\r\n    zIndex: 999,\r\n  },\r\n  panel: {\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n    minWidth: 200,\r\n    elevation: 4,\r\n  },\r\n  upgradeContainer: {\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    margin: 16,\r\n    alignItems: 'center',\r\n  },\r\n  upgradeTitle: {\r\n    marginBottom: 8,\r\n    textAlign: 'center',\r\n  },\r\n  upgradeText: {\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n    color: '#666',\r\n  },\r\n  upgradeButton: {\r\n    minWidth: 120,\r\n  },\r\n  connectedContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  connectedHeader: {\r\n    flex: 1,\r\n  },\r\n  connectedControls: {\r\n    flexDirection: 'row',\r\n  },\r\n  disconnectedContainer: {\r\n    alignItems: 'center',\r\n  },\r\n  scanButton: {\r\n    marginTop: 8,\r\n  },\r\n  errorText: {\r\n    color: '#ef4444',\r\n    marginTop: 4,\r\n    fontSize: 12,\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    padding: 20,\r\n    borderRadius: 12,\r\n    maxHeight: '80%',\r\n  },\r\n  modalTitle: {\r\n    marginBottom: 16,\r\n    textAlign: 'center',\r\n  },\r\n  displayList: {\r\n    maxHeight: 300,\r\n  },\r\n  displayItem: {\r\n    paddingVertical: 8,\r\n  },\r\n  emptyState: {\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  emptyHint: {\r\n    color: '#666',\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginTop: 16,\r\n  },\r\n  settingRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  settingGroup: {\r\n    marginBottom: 16,\r\n  },\r\n  fontSizeButtons: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n    marginTop: 8,\r\n  },\r\n  fontSizeButton: {\r\n    minWidth: 50,\r\n  },\r\n  colorButtons: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n    marginTop: 8,\r\n  },\r\n  colorButton: {\r\n    minWidth: 70,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n  },\r\n  modalCloseButton: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\FeedbackPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Chip"},"fix":{"range":[238,247],"text":""},"desc":"Remove unused variable 'Chip'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Surface"},"fix":{"range":[247,259],"text":""},"desc":"Remove unused variable 'Surface'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'feedbackId' is defined but never used.","line":31,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"feedbackId"},"fix":{"range":[559,577],"text":""},"desc":"Remove unused variable 'feedbackId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'categories' is assigned a value but never used.","line":46,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"categories"},"fix":{"range":[1178,1188],"text":""},"desc":"Remove unused variable 'categories'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categories' is assigned a value but never used.","line":46,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadCategories'. Either include it or remove the dependency array.","line":57,"column":6,"nodeType":"ArrayExpression","endLine":57,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [loadCategories, visible]","fix":{"range":[1539,1548],"text":"[loadCategories, visible]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":113,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":20,"suggestions":[{"fix":{"range":[2994,3045],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  Button,\r\n  TextInput,\r\n  Portal,\r\n  Modal,\r\n  IconButton,\r\n  RadioButton,\r\n  Chip,\r\n  Surface,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport FeedbackService from '../services/feedbackService';\r\nimport {\r\n  FeedbackSubmission,\r\n  FeedbackCategory,\r\n  FeedbackAttachment,\r\n} from '../types';\r\n\r\ninterface FeedbackPanelProps {\r\n  visible: boolean;\r\n  onDismiss: () => void;\r\n  onSubmitted?: (feedbackId: string) => void;\r\n}\r\n\r\nexport const FeedbackPanel: React.FC<FeedbackPanelProps> = ({\r\n  visible,\r\n  onDismiss,\r\n  onSubmitted\r\n}) => {\r\n  const [selectedType, setSelectedType] = useState<FeedbackSubmission['type']>('general_feedback');\r\n  const [selectedCategory, setSelectedCategory] = useState('general');\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [priority, setPriority] = useState<FeedbackSubmission['priority']>('medium');\r\n  const [email, setEmail] = useState('');\r\n  const [allowFollowUp, setAllowFollowUp] = useState(true);\r\n  const [categories, setCategories] = useState<FeedbackCategory[]>([]);\r\n  const [attachments, setAttachments] = useState<FeedbackAttachment[]>([]);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const feedbackService = FeedbackService.getInstance();\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      loadCategories();\r\n      resetForm();\r\n    }\r\n  }, [visible]);\r\n\r\n  const loadCategories = () => {\r\n    const cats = feedbackService.getCategories();\r\n    setCategories(cats);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setSelectedType('general_feedback');\r\n    setSelectedCategory('general');\r\n    setTitle('');\r\n    setDescription('');\r\n    setPriority('medium');\r\n    setEmail('');\r\n    setAllowFollowUp(true);\r\n    setAttachments([]);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!title.trim()) {\r\n      Alert.alert('Error', 'Please enter a title for your feedback.');\r\n      return;\r\n    }\r\n\r\n    if (!description.trim()) {\r\n      Alert.alert('Error', 'Please describe your feedback.');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const feedbackId = await feedbackService.submitFeedback(\r\n        selectedType,\r\n        selectedCategory,\r\n        title.trim(),\r\n        description.trim(),\r\n        priority,\r\n        attachments,\r\n        email.trim() ? {\r\n          email: email.trim(),\r\n          allowFollowUp,\r\n          preferredContactMethod: 'email'\r\n        } : undefined\r\n      );\r\n\r\n      Alert.alert(\r\n        'Feedback Submitted',\r\n        'Thank you for your feedback! We\\'ll review it and get back to you if needed.',\r\n        [{ text: 'OK', onPress: onDismiss }]\r\n      );\r\n\r\n      if (onSubmitted) {\r\n        onSubmitted(feedbackId);\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to submit feedback. Please try again.');\r\n      console.error('Feedback submission error:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onDismiss}\r\n        contentContainerStyle={styles.container}\r\n      >\r\n        <Card style={styles.mainCard}>\r\n          <Card.Content>\r\n            <View style={styles.header}>\r\n              <Text style={styles.title}> Send Feedback</Text>\r\n              <IconButton\r\n                icon=\"close\"\r\n                onPress={onDismiss}\r\n                style={styles.closeButton}\r\n              />\r\n            </View>\r\n\r\n            <ScrollView style={styles.scrollView}>\r\n              <Card style={styles.sectionCard}>\r\n                <Card.Content>\r\n                  <Text style={styles.sectionTitle}>Feedback Type</Text>\r\n                  <RadioButton.Group\r\n                    onValueChange={(value) => setSelectedType(value as FeedbackSubmission['type'])}\r\n                    value={selectedType}\r\n                  >\r\n                    <View style={styles.radioOption}>\r\n                      <RadioButton value=\"bug_report\" />\r\n                      <Text style={styles.radioLabel}> Bug Report</Text>\r\n                    </View>\r\n                    <View style={styles.radioOption}>\r\n                      <RadioButton value=\"feature_request\" />\r\n                      <Text style={styles.radioLabel}> Feature Request</Text>\r\n                    </View>\r\n                    <View style={styles.radioOption}>\r\n                      <RadioButton value=\"improvement_suggestion\" />\r\n                      <Text style={styles.radioLabel}> Improvement Suggestion</Text>\r\n                    </View>\r\n                    <View style={styles.radioOption}>\r\n                      <RadioButton value=\"general_feedback\" />\r\n                      <Text style={styles.radioLabel}> General Feedback</Text>\r\n                    </View>\r\n                  </RadioButton.Group>\r\n                </Card.Content>\r\n              </Card>\r\n\r\n              <Card style={styles.sectionCard}>\r\n                <Card.Content>\r\n                  <TextInput\r\n                    label=\"Title\"\r\n                    value={title}\r\n                    onChangeText={setTitle}\r\n                    style={styles.input}\r\n                    mode=\"outlined\"\r\n                    placeholder=\"Brief description of your feedback\"\r\n                  />\r\n\r\n                  <TextInput\r\n                    label=\"Description\"\r\n                    value={description}\r\n                    onChangeText={setDescription}\r\n                    style={styles.textArea}\r\n                    mode=\"outlined\"\r\n                    multiline\r\n                    numberOfLines={6}\r\n                    placeholder=\"Please provide detailed information...\"\r\n                  />\r\n\r\n                  <TextInput\r\n                    label=\"Email (Optional)\"\r\n                    value={email}\r\n                    onChangeText={setEmail}\r\n                    style={styles.input}\r\n                    mode=\"outlined\"\r\n                    keyboardType=\"email-address\"\r\n                    placeholder=\"your@email.com\"\r\n                  />\r\n                </Card.Content>\r\n              </Card>\r\n            </ScrollView>\r\n\r\n            <Divider style={styles.divider} />\r\n\r\n            <View style={styles.footer}>\r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={onDismiss}\r\n                style={styles.cancelButton}\r\n                disabled={isSubmitting}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                mode=\"contained\"\r\n                onPress={handleSubmit}\r\n                style={styles.submitButton}\r\n                loading={isSubmitting}\r\n                disabled={isSubmitting || !title.trim() || !description.trim()}\r\n              >\r\n                Submit Feedback\r\n              </Button>\r\n            </View>\r\n          </Card.Content>\r\n        </Card>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    margin: 20,\r\n  },\r\n  mainCard: {\r\n    flex: 1,\r\n    maxHeight: '90%',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  scrollView: {\r\n    flex: 1,\r\n  },\r\n  sectionCard: {\r\n    marginBottom: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n  },\r\n  radioOption: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginVertical: 4,\r\n  },\r\n  radioLabel: {\r\n    fontSize: 16,\r\n    marginLeft: 8,\r\n  },\r\n  input: {\r\n    marginBottom: 16,\r\n  },\r\n  textArea: {\r\n    marginBottom: 16,\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  footer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    gap: 12,\r\n  },\r\n  cancelButton: {\r\n    flex: 1,\r\n  },\r\n  submitButton: {\r\n    flex: 1,\r\n    backgroundColor: '#2196F3',\r\n  },\r\n});\r\n\r\nexport default FeedbackPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\FillerWordCue.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[398,401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[398,401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":26,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[529,554],"text":""},"desc":"Remove unused variable 'theme'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":26,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":76,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":76,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":80,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fadeAnim', 'handleDismiss', 'scaleAnim', 'settings.visualCueType', and 'shakeAnim'. Either include them or remove the dependency array.","line":81,"column":6,"nodeType":"ArrayExpression","endLine":81,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [detection.timestamp, fadeAnim, handleDismiss, scaleAnim, settings.visualCueType, shakeAnim]","fix":{"range":[2002,2023],"text":"[detection.timestamp, fadeAnim, handleDismiss, scaleAnim, settings.visualCueType, shakeAnim]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4622,4625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4622,4625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":191,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"word"},"fix":{"range":[4674,4679],"text":""},"desc":"Remove unused variable 'word'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":191,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":191,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'textStyle' is defined but never used.","line":194,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":194,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"textStyle"},"fix":{"range":[4708,4722],"text":""},"desc":"Remove unused variable 'textStyle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'textStyle' is defined but never used.","line":194,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":12},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'pulseAnim', 'settings.enabled', and 'settings.showInRealTime'. Either include them or remove the dependency array.","line":216,"column":6,"nodeType":"ArrayExpression","endLine":216,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [isFillerWord, pulseAnim, settings.enabled, settings.showInRealTime]","fix":{"range":[5378,5392],"text":"[isFillerWord, pulseAnim, settings.enabled, settings.showInRealTime]"}}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Animated,\r\n} from 'react-native';\r\nimport {\r\n  IconButton,\r\n  useTheme,\r\n} from 'react-native-paper';\r\nimport { FillerWordDetection, FillerWordSettings } from '../types';\r\n\r\ninterface FillerWordCueProps {\r\n  detection: FillerWordDetection;\r\n  settings: FillerWordSettings;\r\n  onDismiss?: () => void;\r\n  style?: any;\r\n}\r\n\r\nexport default function FillerWordCue({\r\n  detection,\r\n  settings,\r\n  onDismiss,\r\n  style,\r\n}: FillerWordCueProps) {\r\n  const theme = useTheme();\r\n  const fadeAnim = useRef(new Animated.Value(0)).current;\r\n  const shakeAnim = useRef(new Animated.Value(0)).current;\r\n  const scaleAnim = useRef(new Animated.Value(0)).current;\r\n\r\n  useEffect(() => {\r\n    // Entry animation\r\n    Animated.parallel([\r\n      Animated.timing(fadeAnim, {\r\n        toValue: 1,\r\n        duration: 200,\r\n        useNativeDriver: true,\r\n      }),\r\n      Animated.spring(scaleAnim, {\r\n        toValue: 1,\r\n        tension: 100,\r\n        friction: 8,\r\n        useNativeDriver: true,\r\n      }),\r\n    ]).start();\r\n\r\n    // Shake animation for visual attention\r\n    if (settings.visualCueType === 'shake') {\r\n      const shakeSequence = Animated.sequence([\r\n        Animated.timing(shakeAnim, {\r\n          toValue: 10,\r\n          duration: 50,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(shakeAnim, {\r\n          toValue: -10,\r\n          duration: 50,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(shakeAnim, {\r\n          toValue: 10,\r\n          duration: 50,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(shakeAnim, {\r\n          toValue: 0,\r\n          duration: 50,\r\n          useNativeDriver: true,\r\n        }),\r\n      ]);\r\n      \r\n      shakeSequence.start();\r\n    }\r\n\r\n    // Auto-dismiss after duration\r\n    const dismissTimer = setTimeout(() => {\r\n      handleDismiss();\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(dismissTimer);\r\n  }, [detection.timestamp]);\r\n\r\n  const handleDismiss = () => {\r\n    Animated.parallel([\r\n      Animated.timing(fadeAnim, {\r\n        toValue: 0,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }),\r\n      Animated.timing(scaleAnim, {\r\n        toValue: 0,\r\n        duration: 200,\r\n        useNativeDriver: true,\r\n      }),\r\n    ]).start(() => {\r\n      onDismiss?.();\r\n    });\r\n  };\r\n\r\n  const getIconName = () => {\r\n    switch (settings.iconType) {\r\n      case 'warning': return 'alert';\r\n      case 'alert': return 'alert-circle';\r\n      case 'circle': return 'circle';\r\n      case 'dot': return 'circle-small';\r\n      default: return 'alert';\r\n    }\r\n  };\r\n\r\n  const renderIcon = () => (\r\n    <Animated.View\r\n      style={[\r\n        styles.iconContainer,\r\n        {\r\n          backgroundColor: settings.cueColor + '20',\r\n          borderColor: settings.cueColor,\r\n          transform: [\r\n            { scale: scaleAnim },\r\n            { translateX: shakeAnim },\r\n          ],\r\n          opacity: fadeAnim,\r\n        },\r\n      ]}\r\n    >\r\n      <IconButton\r\n        icon={getIconName()}\r\n        iconColor={settings.cueColor}\r\n        size={16}\r\n        style={styles.icon}\r\n        onPress={handleDismiss}\r\n      />\r\n    </Animated.View>\r\n  );\r\n\r\n  const renderHighlight = () => (\r\n    <Animated.View\r\n      style={[\r\n        styles.highlightContainer,\r\n        {\r\n          backgroundColor: settings.cueColor + '30',\r\n          borderBottomColor: settings.cueColor,\r\n          transform: [\r\n            { scale: scaleAnim },\r\n            { translateX: shakeAnim },\r\n          ],\r\n          opacity: fadeAnim,\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n\r\n  const renderUnderline = () => (\r\n    <Animated.View\r\n      style={[\r\n        styles.underlineContainer,\r\n        {\r\n          backgroundColor: settings.cueColor,\r\n          transform: [\r\n            { scaleX: scaleAnim },\r\n            { translateX: shakeAnim },\r\n          ],\r\n          opacity: fadeAnim,\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n\r\n  if (!settings.enabled || !settings.showInRealTime) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <View style={[styles.container, style]} pointerEvents=\"box-none\">\r\n      {settings.visualCueType === 'icon' && renderIcon()}\r\n      {settings.visualCueType === 'highlight' && renderHighlight()}\r\n      {settings.visualCueType === 'underline' && renderUnderline()}\r\n      {settings.visualCueType === 'shake' && renderIcon()}\r\n    </View>\r\n  );\r\n}\r\n\r\n// Component for inline text highlighting\r\ninterface FillerWordHighlightProps {\r\n  word: string;\r\n  isFillerWord: boolean;\r\n  settings: FillerWordSettings;\r\n  textStyle?: any;\r\n}\r\n\r\nexport function FillerWordHighlight({\r\n  word,\r\n  isFillerWord,\r\n  settings,\r\n  textStyle,\r\n}: FillerWordHighlightProps) {\r\n  const pulseAnim = useRef(new Animated.Value(1)).current;\r\n\r\n  useEffect(() => {\r\n    if (isFillerWord && settings.enabled && settings.showInRealTime) {\r\n      // Pulse animation for detected filler words\r\n      const pulseSequence = Animated.sequence([\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1.2,\r\n          duration: 150,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1,\r\n          duration: 150,\r\n          useNativeDriver: true,\r\n        }),\r\n      ]);\r\n      \r\n      Animated.loop(pulseSequence, { iterations: 2 }).start();\r\n    }\r\n  }, [isFillerWord]);\r\n\r\n  if (!isFillerWord || !settings.enabled) {\r\n    return null;\r\n  }\r\n\r\n  const getHighlightStyle = () => {\r\n    switch (settings.visualCueType) {\r\n      case 'highlight':\r\n        return {\r\n          backgroundColor: settings.cueColor + '40',\r\n          borderRadius: 4,\r\n          paddingHorizontal: 2,\r\n        };\r\n      case 'underline':\r\n        return {\r\n          borderBottomWidth: 2,\r\n          borderBottomColor: settings.cueColor,\r\n        };\r\n      default:\r\n        return {};\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Animated.View\r\n      style={[\r\n        getHighlightStyle(),\r\n        {\r\n          transform: [{ scale: pulseAnim }],\r\n        },\r\n      ]}\r\n    >\r\n      {/* This would be integrated into the text rendering component */}\r\n    </Animated.View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'absolute',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    zIndex: 1000,\r\n  },\r\n  iconContainer: {\r\n    borderRadius: 20,\r\n    borderWidth: 1,\r\n    elevation: 2,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 1,\r\n    },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 1.41,\r\n  },\r\n  icon: {\r\n    margin: 0,\r\n  },\r\n  highlightContainer: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    borderRadius: 4,\r\n    borderBottomWidth: 2,\r\n  },\r\n  underlineContainer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    height: 2,\r\n    borderRadius: 1,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\GamificationPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[281,293],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'UserProgress' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"UserProgress"},"fix":{"range":[459,472],"text":""},"desc":"Remove unused variable 'UserProgress'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UserProgress' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'shareData' is defined but never used.","line":39,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"shareData"},"fix":{"range":[739,761],"text":""},"desc":"Remove unused variable 'shareData'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":53,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"loading"},"fix":{"range":[1369,1376],"text":""},"desc":"Remove unused variable 'loading'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":53,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadGamificationData'. Either include it or remove the dependency array.","line":61,"column":6,"nodeType":"ArrayExpression","endLine":61,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [loadGamificationData, visible]","fix":{"range":[1564,1573],"text":"[loadGamificationData, visible]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":80,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":80,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":80,"endColumn":20,"suggestions":[{"fix":{"range":[2196,2254],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":87,"column":19,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":87,"endColumn":26,"fix":{"range":[2404,2411],"text":"{return;}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":92,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":92,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":19},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":98,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":98,"endColumn":40,"fix":{"range":[2725,2737],"text":"{return null;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":122,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":122,"endColumn":43,"fix":{"range":[3539,3551],"text":"{return null;}"}},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":158,"column":32,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":158,"endColumn":45},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":158,"column":68,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":158,"endColumn":81},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":161,"column":42,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":161,"endColumn":54,"fix":{"range":[5110,5122],"text":"{return null;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":188,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":188,"endColumn":47,"fix":{"range":[6227,6239],"text":"{return null;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":221,"column":38,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":221,"endColumn":50,"fix":{"range":[7410,7422],"text":"{return null;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":294,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":294,"endColumn":43,"fix":{"range":[9998,10010],"text":"{return null;}"}}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":7,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Dimensions,\r\n  TouchableOpacity,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  Surface,\r\n  ProgressBar,\r\n  Button,\r\n  IconButton,\r\n  Portal,\r\n  Modal,\r\n  Chip,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport { LineChart } from 'react-native-chart-kit';\r\nimport GamificationService from '../services/gamificationService';\r\nimport {\r\n  UserProgress,\r\n  Achievement,\r\n  UserStreak,\r\n  GamificationData,\r\n  ProgressTrend,\r\n  WeeklyGoal,\r\n  SocialShare\r\n} from '../types';\r\n\r\nconst { width } = Dimensions.get('window');\r\n\r\ninterface GamificationPanelProps {\r\n  visible: boolean;\r\n  onDismiss: () => void;\r\n  onShare?: (shareData: SocialShare) => void;\r\n}\r\n\r\nexport const GamificationPanel: React.FC<GamificationPanelProps> = ({\r\n  visible,\r\n  onDismiss,\r\n  onShare\r\n}) => {\r\n  const [gamificationData, setGamificationData] = useState<GamificationData | null>(null);\r\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\r\n  const [streaks, setStreaks] = useState<UserStreak[]>([]);\r\n  const [weeklyGoals, setWeeklyGoals] = useState<WeeklyGoal[]>([]);\r\n  const [progressTrends, setProgressTrends] = useState<ProgressTrend[]>([]);\r\n  const [selectedAchievement, setSelectedAchievement] = useState<Achievement | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const gamificationService = GamificationService.getInstance();\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      loadGamificationData();\r\n    }\r\n  }, [visible]);\r\n\r\n  const loadGamificationData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [data, achievementList, streakList, goals, trends] = await Promise.all([\r\n        gamificationService.getGamificationData(),\r\n        gamificationService.getAchievements(),\r\n        gamificationService.getStreaks(),\r\n        gamificationService.getWeeklyGoals(),\r\n        gamificationService.getProgressTrends()\r\n      ]);\r\n\r\n      setGamificationData(data);\r\n      setAchievements(achievementList);\r\n      setStreaks(streakList);\r\n      setWeeklyGoals(goals);\r\n      setProgressTrends(trends);\r\n    } catch (error) {\r\n      console.error('Failed to load gamification data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleShareAchievement = async (achievement: Achievement) => {\r\n    if (!onShare) return;\r\n\r\n    try {\r\n      const shareData = await gamificationService.generateSocialShare(achievement.id, 'clipboard');\r\n      onShare(shareData);\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to generate share content');\r\n    }\r\n  };\r\n\r\n  const renderProgressSection = () => {\r\n    if (!gamificationData) return null;\r\n\r\n    const progressPercent = (gamificationData.totalXP / (gamificationData.totalXP + 100)) * 100;\r\n\r\n    return (\r\n      <Card style={styles.progressCard}>\r\n        <Card.Content>\r\n          <View style={styles.levelHeader}>\r\n            <Text style={styles.levelText}>Level {gamificationData.currentLevel}</Text>\r\n            <Text style={styles.xpText}>{gamificationData.totalXP} XP</Text>\r\n          </View>\r\n          <ProgressBar \r\n            progress={progressPercent / 100} \r\n            style={styles.progressBar}\r\n          />\r\n          <Text style={styles.progressText}>\r\n            {100 - (gamificationData.totalXP % 100)} XP to next level\r\n          </Text>\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const renderStreakSection = () => {\r\n    if (streaks.length === 0) return null;\r\n\r\n    return (\r\n      <Card style={styles.sectionCard}>\r\n        <Card.Content>\r\n          <Text style={styles.sectionTitle}> Practice Streaks</Text>\r\n          {streaks.map((streak, index) => (\r\n            <Surface key={index} style={styles.streakItem}>\r\n              <View style={styles.streakContent}>\r\n                <Text style={styles.streakType}>\r\n                  {streak.streakType === 'daily' ? '' : ''} {streak.streakType.charAt(0).toUpperCase() + streak.streakType.slice(1)}\r\n                </Text>\r\n                <View style={styles.streakNumbers}>\r\n                  <Text style={styles.currentStreak}>{streak.currentStreak}</Text>\r\n                  <Text style={styles.streakLabel}>Current</Text>\r\n                </View>\r\n                <View style={styles.streakNumbers}>\r\n                  <Text style={styles.longestStreak}>{streak.longestStreak}</Text>\r\n                  <Text style={styles.streakLabel}>Best</Text>\r\n                </View>\r\n                {streak.isActive && (\r\n                  <Chip mode=\"flat\" style={styles.activeChip}>\r\n                    Active\r\n                  </Chip>\r\n                )}\r\n              </View>\r\n            </Surface>\r\n          ))}\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const renderAchievementsSection = () => {\r\n    const recentAchievements = achievements\r\n      .filter(a => a.unlockedAt)\r\n      .sort((a, b) => new Date(b.unlockedAt!).getTime() - new Date(a.unlockedAt!).getTime())\r\n      .slice(0, 6);\r\n\r\n    if (recentAchievements.length === 0) return null;\r\n\r\n    return (\r\n      <Card style={styles.sectionCard}>\r\n        <Card.Content>\r\n          <Text style={styles.sectionTitle}> Recent Achievements</Text>\r\n          <ScrollView horizontal showsHorizontalScrollIndicator={false}>\r\n            {recentAchievements.map((achievement) => (\r\n              <TouchableOpacity\r\n                key={achievement.id}\r\n                style={styles.achievementItem}\r\n                onPress={() => setSelectedAchievement(achievement)}\r\n              >\r\n                <Surface style={[styles.achievementSurface, { backgroundColor: getRarityColor(achievement.rarity) }]}>\r\n                  <Text style={styles.achievementIcon}>{achievement.icon}</Text>\r\n                  <Text style={styles.achievementName}>{achievement.name}</Text>\r\n                  <Text style={styles.achievementPoints}>{achievement.points} XP</Text>\r\n                </Surface>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </ScrollView>\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const renderWeeklyGoalsSection = () => {\r\n    if (weeklyGoals.length === 0) return null;\r\n\r\n    return (\r\n      <Card style={styles.sectionCard}>\r\n        <Card.Content>\r\n          <Text style={styles.sectionTitle}> Weekly Goals</Text>\r\n          {weeklyGoals.map((goal) => (\r\n            <Surface key={goal.id} style={styles.goalItem}>\r\n              <View style={styles.goalContent}>\r\n                <Text style={styles.goalDescription}>{goal.description}</Text>\r\n                <View style={styles.goalProgress}>\r\n                  <ProgressBar\r\n                    progress={Math.min(goal.current / goal.target, 1)}\r\n                    style={styles.goalProgressBar}\r\n                  />\r\n                  <Text style={styles.goalProgressText}>\r\n                    {goal.current}/{goal.target}\r\n                  </Text>\r\n                </View>\r\n                {goal.isCompleted && (\r\n                  <Chip icon=\"check\" mode=\"flat\" style={styles.completedChip}>\r\n                    Completed\r\n                  </Chip>\r\n                )}\r\n              </View>\r\n            </Surface>\r\n          ))}\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const renderProgressTrendsSection = () => {\r\n    if (progressTrends.length === 0) return null;\r\n\r\n    const chartData = progressTrends[0]?.data || [];\r\n    const labels = chartData.slice(-7).map((_, index) => `${index + 1}d`);\r\n    const dataPoints = chartData.slice(-7).map(point => point.value);\r\n\r\n    return (\r\n      <Card style={styles.sectionCard}>\r\n        <Card.Content>\r\n          <Text style={styles.sectionTitle}> Progress Trends</Text>\r\n          {chartData.length > 0 && (\r\n            <LineChart\r\n              data={{\r\n                labels,\r\n                datasets: [{\r\n                  data: dataPoints,\r\n                  color: (opacity = 1) => `rgba(76, 175, 80, ${opacity})`,\r\n                  strokeWidth: 2\r\n                }]\r\n              }}\r\n              width={width - 80}\r\n              height={200}\r\n              yAxisLabel=\"\"\r\n              yAxisSuffix=\"\"\r\n              chartConfig={{\r\n                backgroundColor: '#ffffff',\r\n                backgroundGradientFrom: '#ffffff',\r\n                backgroundGradientTo: '#ffffff',\r\n                decimalPlaces: 1,\r\n                color: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\r\n                labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\r\n                style: {\r\n                  borderRadius: 16\r\n                },\r\n                propsForDots: {\r\n                  r: '6',\r\n                  strokeWidth: '2',\r\n                  stroke: '#4CAF50'\r\n                }\r\n              }}\r\n              bezier\r\n              style={styles.chart}\r\n            />\r\n          )}\r\n          <View style={styles.trendsContainer}>\r\n            {progressTrends.map((trend) => (\r\n              <View key={trend.metric} style={styles.trendItem}>\r\n                <Text style={styles.trendMetric}>{trend.metric.replace('_', ' ').toUpperCase()}</Text>\r\n                <Text style={[\r\n                  styles.trendValue,\r\n                  { color: trend.trend === 'improving' ? '#4CAF50' : trend.trend === 'declining' ? '#F44336' : '#9E9E9E' }\r\n                ]}>\r\n                  {trend.changePercent > 0 ? '+' : ''}{trend.changePercent.toFixed(1)}%\r\n                </Text>\r\n              </View>\r\n            ))}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const getRarityColor = (rarity: Achievement['rarity']) => {\r\n    switch (rarity) {\r\n      case 'common': return '#E8F5E8';\r\n      case 'rare': return '#E3F2FD';\r\n      case 'epic': return '#F3E5F5';\r\n      case 'legendary': return '#FFF3E0';\r\n      default: return '#F5F5F5';\r\n    }\r\n  };\r\n\r\n  const renderAchievementModal = () => {\r\n    if (!selectedAchievement) return null;\r\n\r\n    return (\r\n      <Portal>\r\n        <Modal\r\n          visible={!!selectedAchievement}\r\n          onDismiss={() => setSelectedAchievement(null)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Card style={styles.achievementModal}>\r\n            <Card.Content>\r\n              <View style={styles.modalHeader}>\r\n                <Text style={styles.modalIcon}>{selectedAchievement.icon}</Text>\r\n                <IconButton\r\n                  icon=\"close\"\r\n                  onPress={() => setSelectedAchievement(null)}\r\n                  style={styles.closeButton}\r\n                />\r\n              </View>\r\n              <Text style={styles.modalTitle}>{selectedAchievement.name}</Text>\r\n              <Text style={styles.modalDescription}>{selectedAchievement.description}</Text>\r\n              <View style={styles.modalDetails}>\r\n                <Chip mode=\"outlined\" style={styles.rarityChip}>\r\n                  {selectedAchievement.rarity}\r\n                </Chip>\r\n                <Chip mode=\"outlined\" style={styles.pointsChip}>\r\n                  {selectedAchievement.points} XP\r\n                </Chip>\r\n              </View>\r\n              {selectedAchievement.unlockedAt && (\r\n                <Text style={styles.unlockedDate}>\r\n                  Unlocked on {new Date(selectedAchievement.unlockedAt).toLocaleDateString()}\r\n                </Text>\r\n              )}\r\n              <Button\r\n                mode=\"contained\"\r\n                onPress={() => handleShareAchievement(selectedAchievement)}\r\n                style={styles.shareButton}\r\n                icon=\"share\"\r\n              >\r\n                Share Achievement\r\n              </Button>\r\n            </Card.Content>\r\n          </Card>\r\n        </Modal>\r\n      </Portal>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onDismiss}\r\n        contentContainerStyle={styles.container}\r\n      >\r\n        <Card style={styles.mainCard}>\r\n          <Card.Content>\r\n            <View style={styles.header}>\r\n              <Text style={styles.title}> Your Progress</Text>\r\n              <IconButton\r\n                icon=\"close\"\r\n                onPress={onDismiss}\r\n                style={styles.closeButton}\r\n              />\r\n            </View>\r\n            \r\n            <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\r\n              {renderProgressSection()}\r\n              {renderStreakSection()}\r\n              {renderAchievementsSection()}\r\n              {renderWeeklyGoalsSection()}\r\n              {renderProgressTrendsSection()}\r\n            </ScrollView>\r\n          </Card.Content>\r\n        </Card>\r\n        {renderAchievementModal()}\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    margin: 20,\r\n  },\r\n  mainCard: {\r\n    flex: 1,\r\n    maxHeight: '90%',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  scrollView: {\r\n    flex: 1,\r\n  },\r\n  progressCard: {\r\n    marginBottom: 16,\r\n    backgroundColor: '#E8F5E8',\r\n  },\r\n  levelHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  levelText: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    color: '#2E7D32',\r\n  },\r\n  xpText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#388E3C',\r\n  },\r\n  progressBar: {\r\n    marginVertical: 8,\r\n  },\r\n  progressText: {\r\n    textAlign: 'center',\r\n    fontSize: 12,\r\n    color: '#666',\r\n  },\r\n  sectionCard: {\r\n    marginBottom: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n  },\r\n  streakItem: {\r\n    padding: 16,\r\n    marginBottom: 8,\r\n    borderRadius: 12,\r\n    elevation: 2,\r\n  },\r\n  streakContent: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  streakType: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    flex: 1,\r\n  },\r\n  streakNumbers: {\r\n    alignItems: 'center',\r\n    marginHorizontal: 12,\r\n  },\r\n  currentStreak: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    color: '#FF5722',\r\n  },\r\n  longestStreak: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#9E9E9E',\r\n  },\r\n  streakLabel: {\r\n    fontSize: 10,\r\n    color: '#666',\r\n  },\r\n  activeChip: {\r\n    backgroundColor: '#FFE0B2',\r\n  },\r\n  achievementItem: {\r\n    marginRight: 12,\r\n  },\r\n  achievementSurface: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n    width: 120,\r\n    elevation: 2,\r\n  },\r\n  achievementIcon: {\r\n    fontSize: 32,\r\n    marginBottom: 8,\r\n  },\r\n  achievementName: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n    textAlign: 'center',\r\n    marginBottom: 4,\r\n  },\r\n  achievementPoints: {\r\n    fontSize: 10,\r\n    color: '#666',\r\n  },\r\n  goalItem: {\r\n    padding: 16,\r\n    marginBottom: 8,\r\n    borderRadius: 12,\r\n    elevation: 2,\r\n  },\r\n  goalContent: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  goalDescription: {\r\n    fontSize: 14,\r\n    flex: 1,\r\n    marginRight: 16,\r\n  },\r\n  goalProgress: {\r\n    alignItems: 'center',\r\n  },\r\n  goalProgressBar: {\r\n    marginBottom: 4,\r\n  },\r\n  goalProgressText: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n  },\r\n  completedChip: {\r\n    backgroundColor: '#C8E6C9',\r\n  },\r\n  chart: {\r\n    marginVertical: 8,\r\n    borderRadius: 16,\r\n  },\r\n  trendsContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginTop: 16,\r\n  },\r\n  trendItem: {\r\n    alignItems: 'center',\r\n  },\r\n  trendMetric: {\r\n    fontSize: 10,\r\n    color: '#666',\r\n    marginBottom: 4,\r\n  },\r\n  trendValue: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n  },\r\n  modalContainer: {\r\n    margin: 20,\r\n  },\r\n  achievementModal: {\r\n    backgroundColor: 'white',\r\n  },\r\n  modalHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  modalIcon: {\r\n    fontSize: 48,\r\n  },\r\n  modalTitle: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  modalDescription: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 16,\r\n  },\r\n  modalDetails: {\r\n    flexDirection: 'row',\r\n    marginBottom: 16,\r\n  },\r\n  rarityChip: {\r\n    marginRight: 8,\r\n  },\r\n  pointsChip: {\r\n    backgroundColor: '#E8F5E8',\r\n  },\r\n  unlockedDate: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    marginBottom: 16,\r\n  },\r\n  shareButton: {\r\n    backgroundColor: '#2196F3',\r\n  },\r\n});\r\n\r\nexport default GamificationPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\KaraokeSettings.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":28,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[529,563],"text":""},"desc":"Remove unused variable 'settings'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport {\r\n  Modal,\r\n  Portal,\r\n  Text,\r\n  Button,\r\n  Switch,\r\n  TextInput,\r\n  Card,\r\n  Title,\r\n  Paragraph,\r\n  Divider,\r\n  Chip,\r\n  IconButton,\r\n} from 'react-native-paper';\r\nimport Slider from '@react-native-community/slider';\r\nimport { KaraokeHighlightSettings } from '../types';\r\n\r\ninterface KaraokeSettingsProps {\r\n  visible: boolean;\r\n  settings: KaraokeHighlightSettings;\r\n  onClose: () => void;\r\n  onSave: (settings: KaraokeHighlightSettings) => void;\r\n  onReset: () => void;\r\n}\r\n\r\n/**\r\n * Comprehensive karaoke settings configuration panel\r\n */\r\nexport const KaraokeSettings: React.FC<KaraokeSettingsProps> = ({\r\n  visible,\r\n  settings,\r\n  onClose,\r\n  onSave,\r\n  onReset,\r\n}) => {\r\n  const [localSettings, setLocalSettings] = useState<KaraokeHighlightSettings>(settings);\r\n\r\n  React.useEffect(() => {\r\n    setLocalSettings(settings);\r\n  }, [settings]);\r\n\r\n  const updateSetting = <K extends keyof KaraokeHighlightSettings>(\r\n    key: K,\r\n    value: KaraokeHighlightSettings[K]\r\n  ) => {\r\n    setLocalSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    onSave(localSettings);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    onReset();\r\n    onClose();\r\n  };\r\n\r\n  const predefinedColors = [\r\n    { name: 'Gold', value: '#FFD700' },\r\n    { name: 'Yellow', value: '#FFFF00' },\r\n    { name: 'Orange', value: '#FFA500' },\r\n    { name: 'Red', value: '#FF4444' },\r\n    { name: 'Green', value: '#44FF44' },\r\n    { name: 'Blue', value: '#4444FF' },\r\n    { name: 'Purple', value: '#AA44FF' },\r\n    { name: 'Pink', value: '#FF44AA' },\r\n  ];\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onClose}\r\n        contentContainerStyle={styles.modalContainer}\r\n      >\r\n        <ScrollView showsVerticalScrollIndicator={false}>\r\n          <View style={styles.header}>\r\n            <Title style={styles.title}>Karaoke Highlighting Settings</Title>\r\n            <IconButton\r\n              icon=\"close\"\r\n              size={24}\r\n              onPress={onClose}\r\n              style={styles.closeButton}\r\n            />\r\n          </View>\r\n\r\n          {/* Enable/Disable Karaoke */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <View style={styles.settingRow}>\r\n                <View style={styles.settingInfo}>\r\n                  <Text style={styles.settingLabel}>Enable Karaoke Mode</Text>\r\n                  <Paragraph style={styles.settingDescription}>\r\n                    Real-time word highlighting as you speak\r\n                  </Paragraph>\r\n                </View>\r\n                <Switch\r\n                  value={localSettings.enabled}\r\n                  onValueChange={(value) => updateSetting('enabled', value)}\r\n                />\r\n              </View>\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          {/* Highlight Colors */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <Text style={styles.sectionTitle}>Highlight Appearance</Text>\r\n              \r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>Text Color</Text>\r\n                <View style={styles.colorPicker}>\r\n                  {predefinedColors.map((color) => (\r\n                    <Chip\r\n                      key={color.value}\r\n                      selected={localSettings.highlightColor === color.value}\r\n                      onPress={() => updateSetting('highlightColor', color.value)}\r\n                      style={[\r\n                        styles.colorChip,\r\n                        { backgroundColor: color.value },\r\n                      ]}\r\n                      textStyle={{ color: '#000' }}\r\n                    >\r\n                      {color.name}\r\n                    </Chip>\r\n                  ))}\r\n                </View>\r\n                \r\n                <TextInput\r\n                  label=\"Custom Color (Hex)\"\r\n                  value={localSettings.highlightColor}\r\n                  onChangeText={(value) => updateSetting('highlightColor', value)}\r\n                  style={styles.textInput}\r\n                  mode=\"outlined\"\r\n                  placeholder=\"#FFD700\"\r\n                />\r\n              </View>\r\n\r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>Background Color</Text>\r\n                <TextInput\r\n                  label=\"Background Color (RGBA)\"\r\n                  value={localSettings.highlightBackgroundColor}\r\n                  onChangeText={(value) => updateSetting('highlightBackgroundColor', value)}\r\n                  style={styles.textInput}\r\n                  mode=\"outlined\"\r\n                  placeholder=\"rgba(255, 215, 0, 0.3)\"\r\n                />\r\n              </View>\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          {/* Auto-Scroll Settings */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <Text style={styles.sectionTitle}>Auto-Scroll</Text>\r\n              \r\n              <View style={styles.settingRow}>\r\n                <View style={styles.settingInfo}>\r\n                  <Text style={styles.settingLabel}>Enable Auto-Scroll</Text>\r\n                  <Paragraph style={styles.settingDescription}>\r\n                    Automatically scroll to keep highlighted words in view\r\n                  </Paragraph>\r\n                </View>\r\n                <Switch\r\n                  value={localSettings.autoScroll}\r\n                  onValueChange={(value) => updateSetting('autoScroll', value)}\r\n                />\r\n              </View>\r\n\r\n              {localSettings.autoScroll && (\r\n                <View style={styles.settingGroup}>\r\n                  <Text style={styles.settingLabel}>\r\n                    Scroll Offset: {localSettings.scrollOffset}px\r\n                  </Text>\r\n                  <Slider\r\n                    style={styles.slider}\r\n                    minimumValue={0}\r\n                    maximumValue={300}\r\n                    step={10}\r\n                    value={localSettings.scrollOffset}\r\n                    onValueChange={(value: number) => updateSetting('scrollOffset', value)}\r\n                  />\r\n                  <Paragraph style={styles.settingDescription}>\r\n                    Distance from top of screen when auto-scrolling\r\n                  </Paragraph>\r\n                </View>\r\n              )}\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          {/* Matching Sensitivity */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <Text style={styles.sectionTitle}>Matching Sensitivity</Text>\r\n              \r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>\r\n                  Match Threshold: {Math.round(localSettings.matchThreshold * 100)}%\r\n                </Text>\r\n                <Slider\r\n                  style={styles.slider}\r\n                  minimumValue={0.3}\r\n                  maximumValue={1.0}\r\n                  step={0.05}\r\n                  value={localSettings.matchThreshold}\r\n                  onValueChange={(value: number) => updateSetting('matchThreshold', value)}\r\n                />\r\n                <Paragraph style={styles.settingDescription}>\r\n                  Lower = more lenient matching, Higher = exact matching required\r\n                </Paragraph>\r\n              </View>\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          {/* Animation Settings */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <Text style={styles.sectionTitle}>Animation</Text>\r\n              \r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>\r\n                  Highlight Duration: {localSettings.highlightDuration}ms\r\n                </Text>\r\n                <Slider\r\n                  style={styles.slider}\r\n                  minimumValue={500}\r\n                  maximumValue={3000}\r\n                  step={100}\r\n                  value={localSettings.highlightDuration}\r\n                  onValueChange={(value: number) => updateSetting('highlightDuration', value)}\r\n                />\r\n              </View>\r\n\r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>\r\n                  Animation Speed: {localSettings.animationDuration}ms\r\n                </Text>\r\n                <Slider\r\n                  style={styles.slider}\r\n                  minimumValue={100}\r\n                  maximumValue={800}\r\n                  step={50}\r\n                  value={localSettings.animationDuration}\r\n                  onValueChange={(value: number) => updateSetting('animationDuration', value)}\r\n                />\r\n              </View>\r\n\r\n              <View style={styles.settingGroup}>\r\n                <Text style={styles.settingLabel}>\r\n                  Fade Delay: {localSettings.fadeOutDelay}ms\r\n                </Text>\r\n                <Slider\r\n                  style={styles.slider}\r\n                  minimumValue={0}\r\n                  maximumValue={2000}\r\n                  step={100}\r\n                  value={localSettings.fadeOutDelay}\r\n                  onValueChange={(value: number) => updateSetting('fadeOutDelay', value)}\r\n                />\r\n                <Paragraph style={styles.settingDescription}>\r\n                  Time before highlight starts fading out\r\n                </Paragraph>\r\n              </View>\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          {/* Preview */}\r\n          <Card style={styles.section}>\r\n            <Card.Content>\r\n              <Text style={styles.sectionTitle}>Preview</Text>\r\n              <View\r\n                style={[\r\n                  styles.preview,\r\n                  { backgroundColor: localSettings.highlightBackgroundColor },\r\n                ]}\r\n              >\r\n                <Text style={[styles.previewText, { color: localSettings.highlightColor }]}>\r\n                  This is how highlighted text will appear\r\n                </Text>\r\n              </View>\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          {/* Action Buttons */}\r\n          <View style={styles.buttonRow}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={handleReset}\r\n              style={styles.button}\r\n            >\r\n              Reset to Defaults\r\n            </Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleSave}\r\n              style={styles.button}\r\n            >\r\n              Save Settings\r\n            </Button>\r\n          </View>\r\n\r\n          <View style={styles.bottomSpace} />\r\n        </ScrollView>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContainer: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    borderRadius: 8,\r\n    maxHeight: '90%',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e0e0e0',\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    flex: 1,\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  section: {\r\n    margin: 16,\r\n    marginBottom: 8,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n    color: '#333',\r\n  },\r\n  settingRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 8,\r\n  },\r\n  settingInfo: {\r\n    flex: 1,\r\n    marginRight: 16,\r\n  },\r\n  settingLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n    marginBottom: 4,\r\n  },\r\n  settingDescription: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    marginBottom: 0,\r\n  },\r\n  settingGroup: {\r\n    marginBottom: 16,\r\n  },\r\n  textInput: {\r\n    marginTop: 8,\r\n  },\r\n  slider: {\r\n    marginVertical: 8,\r\n  },\r\n  colorPicker: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    marginVertical: 8,\r\n  },\r\n  colorChip: {\r\n    margin: 4,\r\n  },\r\n  preview: {\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 8,\r\n  },\r\n  previewText: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  buttonRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    paddingHorizontal: 16,\r\n    paddingBottom: 16,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    marginHorizontal: 8,\r\n  },\r\n  bottomSpace: {\r\n    height: 20,\r\n  },\r\n});\r\n\r\nexport default KaraokeSettings;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\KaraokeText.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":18,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[525,543],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'layout' is defined but never used.","line":18,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":101,"suggestions":[{"messageId":"removeVar","data":{"varName":"layout"},"fix":{"range":[542,607],"text":""},"desc":"Remove unused variable 'layout'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'y' is defined but never used.","line":19,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"y"},"fix":{"range":[640,649],"text":""},"desc":"Remove unused variable 'y'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scrollViewRef' is assigned a value but never used.","line":43,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"scrollViewRef"},"fix":{"range":[1113,1160],"text":""},"desc":"Remove unused variable 'scrollViewRef'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scrollViewRef' is assigned a value but never used.","line":43,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'renderHighlightableWords' and 'renderPlainText'. Either include them or remove the dependency array.","line":55,"column":6,"nodeType":"ArrayExpression","endLine":55,"endColumn":63,"suggestions":[{"desc":"Update the dependencies array to be: [scriptAnalysis, renderHighlightableWords, renderPlainText]","fix":{"range":[1567,1624],"text":"[scriptAnalysis, renderHighlightableWords, renderPlainText]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'getTextStyle'. Either include it or remove the dependency array.","line":107,"column":6,"nodeType":"ArrayExpression","endLine":107,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [content, getTextStyle]","fix":{"range":[3341,3372],"text":"[content, getTextStyle]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":113,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":113,"endColumn":38,"fix":{"range":[3533,3545],"text":"{return null;}"}},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'getTextStyle'. Either include it or remove the dependency array.","line":182,"column":6,"nodeType":"ArrayExpression","endLine":182,"endColumn":82,"suggestions":[{"desc":"Update the dependencies array to be: [scriptAnalysis, karaokeState.highlightedWords, karaokeState.currentWordIndex, settings, getTextStyle, onWordLayout]","fix":{"range":[5788,5864],"text":"[scriptAnalysis, karaokeState.highlightedWords, karaokeState.currentWordIndex, settings, getTextStyle, onWordLayout]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":223,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6941,6944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6941,6944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'layout' is defined but never used.","line":224,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":224,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"layout"},"fix":{"range":[6960,7023],"text":""},"desc":"Remove unused variable 'layout'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":229,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":229,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[7109,7123],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":229,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":229,"endColumn":12}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useMemo, useCallback, useRef, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Animated,\r\n  LayoutChangeEvent,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport { KaraokeState, ScriptAnalysis, KaraokeHighlightSettings, TeleprompterSettings } from '../types';\r\n\r\ninterface KaraokeTextProps {\r\n  content: string;\r\n  karaokeState: KaraokeState;\r\n  scriptAnalysis: ScriptAnalysis | null;\r\n  settings: KaraokeHighlightSettings;\r\n  teleprompterSettings: TeleprompterSettings;\r\n  onWordLayout?: (wordIndex: number, layout: { x: number; y: number; width: number; height: number }) => void;\r\n  onScrollRequest?: (y: number) => void;\r\n}\r\n\r\ninterface WordLayoutInfo {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  wordIndex: number;\r\n}\r\n\r\n/**\r\n * High-performance karaoke text component with real-time highlighting\r\n * Optimized for ultra-low latency visual feedback\r\n */\r\nexport const KaraokeText: React.FC<KaraokeTextProps> = ({\r\n  content,\r\n  karaokeState,\r\n  scriptAnalysis,\r\n  settings,\r\n  teleprompterSettings,\r\n  onWordLayout,\r\n  onScrollRequest,\r\n}) => {\r\n  const scrollViewRef = useRef<ScrollView>(null);\r\n  const wordLayoutsRef = useRef<Map<number, WordLayoutInfo>>(new Map());\r\n  const highlightAnimationsRef = useRef<Map<number, Animated.Value>>(new Map());\r\n  const containerRef = useRef<View>(null);\r\n\r\n  // Memoize word components for performance\r\n  const wordComponents = useMemo(() => {\r\n    if (!scriptAnalysis) {\r\n      return renderPlainText();\r\n    }\r\n\r\n    return renderHighlightableWords();\r\n  }, [content, scriptAnalysis, teleprompterSettings, settings]);\r\n\r\n  // Auto-scroll to highlighted word\r\n  useEffect(() => {\r\n    if (settings.autoScroll && karaokeState.highlightedWords.length > 0) {\r\n      const wordIndex = karaokeState.highlightedWords[0];\r\n      const layout = wordLayoutsRef.current.get(wordIndex);\r\n      \r\n      if (layout && onScrollRequest) {\r\n        const scrollY = Math.max(0, layout.y - settings.scrollOffset);\r\n        onScrollRequest(scrollY);\r\n      }\r\n    }\r\n  }, [karaokeState.highlightedWords, settings.autoScroll, settings.scrollOffset, onScrollRequest]);\r\n\r\n  // Animate highlights\r\n  useEffect(() => {\r\n    karaokeState.highlightedWords.forEach(wordIndex => {\r\n      let animation = highlightAnimationsRef.current.get(wordIndex);\r\n      if (!animation) {\r\n        animation = new Animated.Value(0);\r\n        highlightAnimationsRef.current.set(wordIndex, animation);\r\n      }\r\n\r\n      // Trigger highlight animation\r\n      Animated.sequence([\r\n        Animated.timing(animation, {\r\n          toValue: 1,\r\n          duration: settings.animationDuration,\r\n          useNativeDriver: false,\r\n        }),\r\n        Animated.delay(settings.fadeOutDelay),\r\n        Animated.timing(animation, {\r\n          toValue: 0,\r\n          duration: settings.animationDuration,\r\n          useNativeDriver: false,\r\n        }),\r\n      ]).start(() => {\r\n        highlightAnimationsRef.current.delete(wordIndex);\r\n      });\r\n    });\r\n  }, [karaokeState.highlightedWords, settings.animationDuration, settings.fadeOutDelay]);\r\n\r\n  /**\r\n   * Render plain text when script analysis is not available\r\n   */\r\n  const renderPlainText = useCallback(() => {\r\n    return (\r\n      <Text style={[styles.text, getTextStyle()]}>\r\n        {content}\r\n      </Text>\r\n    );\r\n  }, [content, teleprompterSettings]);\r\n\r\n  /**\r\n   * Render highlightable words with individual components\r\n   */\r\n  const renderHighlightableWords = useCallback(() => {\r\n    if (!scriptAnalysis) return null;\r\n\r\n    const paragraphs: React.ReactElement[] = [];\r\n    let currentParagraph = -1;\r\n    let currentParagraphWords: React.ReactElement[] = [];\r\n\r\n    scriptAnalysis.words.forEach((wordData, index) => {\r\n      const isHighlighted = karaokeState.highlightedWords.includes(index);\r\n      const isCurrent = karaokeState.currentWordIndex === index;\r\n      \r\n      // Start new paragraph if needed\r\n      if (wordData.paragraph !== currentParagraph) {\r\n        if (currentParagraphWords.length > 0) {\r\n          paragraphs.push(\r\n            <View key={`paragraph-${currentParagraph}`} style={styles.paragraph}>\r\n              <Text style={[styles.text, getTextStyle()]}>\r\n                {currentParagraphWords}\r\n              </Text>\r\n            </View>\r\n          );\r\n        }\r\n        currentParagraph = wordData.paragraph;\r\n        currentParagraphWords = [];\r\n      }\r\n\r\n      // Create word component\r\n      const wordComponent = (\r\n        <KaraokeWord\r\n          key={`word-${index}`}\r\n          word={wordData.word}\r\n          wordIndex={index}\r\n          isHighlighted={isHighlighted}\r\n          isCurrent={isCurrent}\r\n          settings={settings}\r\n          textStyle={getTextStyle()}\r\n          onLayout={(layout) => {\r\n            wordLayoutsRef.current.set(index, { ...layout, wordIndex: index });\r\n            onWordLayout?.(index, layout);\r\n          }}\r\n        />\r\n      );\r\n\r\n      currentParagraphWords.push(wordComponent);\r\n\r\n      // Add space after word (except for last word in sentence)\r\n      const isLastInSentence = index === scriptAnalysis.words.length - 1 || \r\n        scriptAnalysis.words[index + 1]?.sentence !== wordData.sentence;\r\n      \r\n      if (!isLastInSentence) {\r\n        currentParagraphWords.push(\r\n          <Text key={`space-${index}`} style={[styles.text, getTextStyle()]}>\r\n            {' '}\r\n          </Text>\r\n        );\r\n      }\r\n    });\r\n\r\n    // Add final paragraph\r\n    if (currentParagraphWords.length > 0) {\r\n      paragraphs.push(\r\n        <View key={`paragraph-${currentParagraph}`} style={styles.paragraph}>\r\n          <Text style={[styles.text, getTextStyle()]}>\r\n            {currentParagraphWords}\r\n          </Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return paragraphs;\r\n  }, [scriptAnalysis, karaokeState, settings, teleprompterSettings, onWordLayout]);\r\n\r\n  /**\r\n   * Get text style based on teleprompter settings\r\n   */\r\n  const getTextStyle = useCallback(() => {\r\n    return {\r\n      fontSize: teleprompterSettings.fontSize,\r\n      fontFamily: teleprompterSettings.fontFamily,\r\n      color: teleprompterSettings.textColor,\r\n      lineHeight: teleprompterSettings.fontSize * teleprompterSettings.lineHeight,\r\n      textAlign: teleprompterSettings.textAlign,\r\n      transform: teleprompterSettings.isMirrored ? [{ scaleX: -1 }] : undefined,\r\n    };\r\n  }, [teleprompterSettings]);\r\n\r\n  return (\r\n    <View \r\n      ref={containerRef}\r\n      style={[\r\n        styles.container,\r\n        {\r\n          backgroundColor: teleprompterSettings.backgroundColor,\r\n          paddingHorizontal: teleprompterSettings.padding,\r\n        },\r\n      ]}\r\n    >\r\n      {wordComponents}\r\n    </View>\r\n  );\r\n};\r\n\r\n/**\r\n * Individual word component with highlight animation\r\n */\r\ninterface KaraokeWordProps {\r\n  word: string;\r\n  wordIndex: number;\r\n  isHighlighted: boolean;\r\n  isCurrent: boolean;\r\n  settings: KaraokeHighlightSettings;\r\n  textStyle: any;\r\n  onLayout: (layout: { x: number; y: number; width: number; height: number }) => void;\r\n}\r\n\r\nconst KaraokeWord: React.FC<KaraokeWordProps> = React.memo(({\r\n  word,\r\n  wordIndex,\r\n  isHighlighted,\r\n  isCurrent,\r\n  settings,\r\n  textStyle,\r\n  onLayout,\r\n}) => {\r\n  const animatedValue = useRef(new Animated.Value(0)).current;\r\n  const textRef = useRef<Text>(null);\r\n\r\n  useEffect(() => {\r\n    if (isHighlighted) {\r\n      Animated.sequence([\r\n        Animated.timing(animatedValue, {\r\n          toValue: 1,\r\n          duration: settings.animationDuration,\r\n          useNativeDriver: false,\r\n        }),\r\n        Animated.delay(settings.fadeOutDelay),\r\n        Animated.timing(animatedValue, {\r\n          toValue: 0,\r\n          duration: settings.animationDuration,\r\n          useNativeDriver: false,\r\n        }),\r\n      ]).start();\r\n    }\r\n  }, [isHighlighted, settings.animationDuration, settings.fadeOutDelay, animatedValue]);\r\n\r\n  const handleLayout = useCallback((event: LayoutChangeEvent) => {\r\n    const { x, y, width, height } = event.nativeEvent.layout;\r\n    onLayout({ x, y, width, height });\r\n  }, [onLayout]);\r\n\r\n  const getWordStyle = useCallback(() => {\r\n    const baseStyle = [textStyle];\r\n\r\n    if (isHighlighted || isCurrent) {\r\n      const highlightOpacity = animatedValue.interpolate({\r\n        inputRange: [0, 1],\r\n        outputRange: [0, 1],\r\n      });\r\n\r\n      return [\r\n        ...baseStyle,\r\n        {\r\n          color: settings.highlightColor,\r\n          backgroundColor: settings.highlightBackgroundColor,\r\n          opacity: highlightOpacity,\r\n        },\r\n      ];\r\n    }\r\n\r\n    return baseStyle;\r\n  }, [textStyle, isHighlighted, isCurrent, settings, animatedValue]);\r\n\r\n  return (\r\n    <Animated.Text\r\n      ref={textRef}\r\n      style={getWordStyle()}\r\n      onLayout={handleLayout}\r\n    >\r\n      {word}\r\n    </Animated.Text>\r\n  );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  paragraph: {\r\n    marginBottom: 16,\r\n  },\r\n  text: {\r\n    flexWrap: 'wrap',\r\n  },\r\n});\r\n\r\nexport default KaraokeText;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\LanguageSelector.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'language' is defined but never used.","line":24,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"language"},"fix":{"range":[502,526],"text":""},"desc":"Remove unused variable 'language'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'multiLanguageService'. Either include it or remove the dependency array.","line":54,"column":6,"nodeType":"ArrayExpression","endLine":54,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [multiLanguageService]","fix":{"range":[1480,1482],"text":"[multiLanguageService]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  TouchableOpacity,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Button,\r\n  Card,\r\n  Portal,\r\n  Modal,\r\n  Searchbar,\r\n  Surface,\r\n  IconButton,\r\n  Chip,\r\n} from 'react-native-paper';\r\nimport { LanguageOption } from '../types';\r\nimport MultiLanguageService from '../services/multiLanguageService';\r\n\r\ninterface LanguageSelectorProps {\r\n  selectedLanguage?: LanguageOption | null;\r\n  onLanguageSelect: (language: LanguageOption) => void;\r\n  showDetectionInfo?: boolean;\r\n  detectedLanguage?: LanguageOption | null;\r\n  confidence?: number;\r\n  showFlags?: boolean;\r\n  title?: string;\r\n  subtitle?: string;\r\n}\r\n\r\nexport const LanguageSelector: React.FC<LanguageSelectorProps> = ({\r\n  selectedLanguage,\r\n  onLanguageSelect,\r\n  showDetectionInfo = false,\r\n  detectedLanguage,\r\n  confidence,\r\n  showFlags = true,\r\n  title = 'Select Language',\r\n  subtitle,\r\n}) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [supportedLanguages, setSupportedLanguages] = useState<LanguageOption[]>([]);\r\n  const [filteredLanguages, setFilteredLanguages] = useState<LanguageOption[]>([]);\r\n\r\n  const multiLanguageService = MultiLanguageService.getInstance();\r\n\r\n  useEffect(() => {\r\n    const languages = multiLanguageService.getSupportedLanguages();\r\n    setSupportedLanguages(languages);\r\n    setFilteredLanguages(languages);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (searchQuery.trim() === '') {\r\n      setFilteredLanguages(supportedLanguages);\r\n    } else {\r\n      const filtered = supportedLanguages.filter(\r\n        (lang) =>\r\n          lang.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          lang.nativeName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          lang.code.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n      setFilteredLanguages(filtered);\r\n    }\r\n  }, [searchQuery, supportedLanguages]);\r\n\r\n  const handleLanguageSelect = (language: LanguageOption) => {\r\n    onLanguageSelect(language);\r\n    setVisible(false);\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const renderLanguageItem = ({ item }: { item: LanguageOption }) => (\r\n    <TouchableOpacity onPress={() => handleLanguageSelect(item)}>\r\n      <Surface style={styles.languageItem}>\r\n        <View style={styles.languageInfo}>\r\n          {showFlags && (\r\n            <Text style={styles.flag}>{item.flag}</Text>\r\n          )}\r\n          <View style={styles.languageText}>\r\n            <Text style={styles.languageName}>{item.name}</Text>\r\n            <Text style={styles.nativeName}>{item.nativeName}</Text>\r\n          </View>\r\n          {item.rtl && (\r\n            <Chip\r\n              mode=\"outlined\"\r\n              compact\r\n              style={styles.rtlChip}\r\n              textStyle={styles.chipText}\r\n            >\r\n              RTL\r\n            </Chip>\r\n          )}\r\n        </View>\r\n        {selectedLanguage?.code === item.code && (\r\n          <IconButton icon=\"check\" iconColor=\"#4CAF50\" size={20} />\r\n        )}\r\n      </Surface>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  const getDisplayText = () => {\r\n    if (selectedLanguage) {\r\n      return showFlags\r\n        ? `${selectedLanguage.flag} ${selectedLanguage.name}`\r\n        : selectedLanguage.name;\r\n    }\r\n    return 'Select Language';\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <TouchableOpacity onPress={() => setVisible(true)}>\r\n        <Surface style={styles.selector}>\r\n          <View style={styles.selectorContent}>\r\n            <View style={styles.selectorText}>\r\n              <Text style={styles.selectorTitle}>{title}</Text>\r\n              {subtitle && <Text style={styles.selectorSubtitle}>{subtitle}</Text>}\r\n            </View>\r\n            <View style={styles.selectedLanguage}>\r\n              <Text style={styles.selectedText}>{getDisplayText()}</Text>\r\n              <IconButton icon=\"chevron-down\" size={20} />\r\n            </View>\r\n          </View>\r\n        </Surface>\r\n      </TouchableOpacity>\r\n\r\n      {showDetectionInfo && detectedLanguage && (\r\n        <Card style={styles.detectionCard}>\r\n          <Card.Content>\r\n            <View style={styles.detectionContent}>\r\n              <IconButton icon=\"auto-fix\" size={20} iconColor=\"#2196F3\" />\r\n              <View style={styles.detectionText}>\r\n                <Text style={styles.detectionTitle}>Auto-detected Language</Text>\r\n                <Text style={styles.detectionLanguage}>\r\n                  {showFlags && detectedLanguage.flag} {detectedLanguage.name}\r\n                  {confidence && (\r\n                    <Text style={styles.confidence}>\r\n                      {' '}({Math.round(confidence * 100)}% confidence)\r\n                    </Text>\r\n                  )}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      <Portal>\r\n        <Modal\r\n          visible={visible}\r\n          onDismiss={() => setVisible(false)}\r\n          contentContainerStyle={styles.modal}\r\n        >\r\n          <View style={styles.modalHeader}>\r\n            <Text style={styles.modalTitle}>Choose Language</Text>\r\n            <IconButton\r\n              icon=\"close\"\r\n              onPress={() => setVisible(false)}\r\n              style={styles.closeButton}\r\n            />\r\n          </View>\r\n\r\n          <Searchbar\r\n            placeholder=\"Search languages...\"\r\n            onChangeText={setSearchQuery}\r\n            value={searchQuery}\r\n            style={styles.searchbar}\r\n          />\r\n\r\n          <FlatList\r\n            data={filteredLanguages}\r\n            renderItem={renderLanguageItem}\r\n            keyExtractor={(item) => item.code}\r\n            style={styles.languageList}\r\n            showsVerticalScrollIndicator={false}\r\n          />\r\n\r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={() => setVisible(false)}\r\n            style={styles.cancelButton}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Modal>\r\n      </Portal>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    marginVertical: 8,\r\n  },\r\n  selector: {\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    elevation: 2,\r\n  },\r\n  selectorContent: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  selectorText: {\r\n    flex: 1,\r\n  },\r\n  selectorTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 2,\r\n  },\r\n  selectorSubtitle: {\r\n    fontSize: 12,\r\n    opacity: 0.7,\r\n  },\r\n  selectedLanguage: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  selectedText: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n  },\r\n  detectionCard: {\r\n    marginTop: 8,\r\n    backgroundColor: '#E3F2FD',\r\n  },\r\n  detectionContent: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  detectionText: {\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n  detectionTitle: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n    color: '#1976D2',\r\n  },\r\n  detectionLanguage: {\r\n    fontSize: 14,\r\n    color: '#1976D2',\r\n  },\r\n  confidence: {\r\n    fontSize: 12,\r\n    opacity: 0.8,\r\n  },\r\n  modal: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    borderRadius: 12,\r\n    maxHeight: '80%',\r\n  },\r\n  modalHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n    paddingBottom: 10,\r\n  },\r\n  modalTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  searchbar: {\r\n    marginHorizontal: 20,\r\n    marginBottom: 10,\r\n  },\r\n  languageList: {\r\n    maxHeight: 400,\r\n  },\r\n  languageItem: {\r\n    padding: 16,\r\n    marginHorizontal: 20,\r\n    marginVertical: 2,\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    borderRadius: 8,\r\n  },\r\n  languageInfo: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  flag: {\r\n    fontSize: 24,\r\n    marginRight: 12,\r\n  },\r\n  languageText: {\r\n    flex: 1,\r\n  },\r\n  languageName: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    marginBottom: 2,\r\n  },\r\n  nativeName: {\r\n    fontSize: 12,\r\n    opacity: 0.7,\r\n  },\r\n  rtlChip: {\r\n    marginLeft: 8,\r\n    height: 24,\r\n  },\r\n  chipText: {\r\n    fontSize: 10,\r\n  },\r\n  cancelButton: {\r\n    margin: 20,\r\n    marginTop: 10,\r\n  },\r\n});\r\n\r\nexport default LanguageSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\PacingMeter.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ProgressBar' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProgressBar"},"fix":{"range":[165,181],"text":""},"desc":"Remove unused variable 'ProgressBar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProgressBar' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[471,474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[471,474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Animated,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Surface,\r\n  ProgressBar,\r\n  IconButton,\r\n  useTheme,\r\n} from 'react-native-paper';\r\nimport { PacingMeterState, PacingMeterSettings } from '../types';\r\n\r\ninterface PacingMeterProps {\r\n  state: PacingMeterState;\r\n  settings: PacingMeterSettings;\r\n  isVisible: boolean;\r\n  onToggleVisibility: () => void;\r\n  style?: any;\r\n}\r\n\r\nconst { width } = Dimensions.get('window');\r\nconst METER_WIDTH = Math.min(width * 0.9, 320);\r\n\r\nexport default function PacingMeter({\r\n  state,\r\n  settings,\r\n  isVisible,\r\n  onToggleVisibility,\r\n  style,\r\n}: PacingMeterProps) {\r\n  const theme = useTheme();\r\n  const slideAnim = useRef(new Animated.Value(isVisible ? 0 : -80)).current;\r\n  const pulseAnim = useRef(new Animated.Value(1)).current;\r\n\r\n  useEffect(() => {\r\n    Animated.timing(slideAnim, {\r\n      toValue: isVisible ? 0 : -80,\r\n      duration: 300,\r\n      useNativeDriver: true,\r\n    }).start();\r\n  }, [isVisible, slideAnim]);\r\n\r\n  // Pulse animation for non-optimal pace\r\n  useEffect(() => {\r\n    if (!state.isInOptimalRange && state.currentWPM > 0) {\r\n      const pulseSequence = Animated.sequence([\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1.1,\r\n          duration: 400,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(pulseAnim, {\r\n          toValue: 1,\r\n          duration: 400,\r\n          useNativeDriver: true,\r\n        }),\r\n      ]);\r\n      \r\n      Animated.loop(pulseSequence, { iterations: 3 }).start();\r\n    } else {\r\n      pulseAnim.setValue(1);\r\n    }\r\n  }, [state.isInOptimalRange, state.currentWPM, pulseAnim]);\r\n\r\n  if (!settings.enabled || !settings.showVisualMeter) {\r\n    return null;\r\n  }\r\n\r\n  const { targetWPM, toleranceRange, colorScheme } = settings;\r\n  const { currentWPM, averageWPM } = state;\r\n\r\n  // Calculate pace zones\r\n  const minOptimal = targetWPM - toleranceRange;\r\n  const maxOptimal = targetWPM + toleranceRange;\r\n  const maxScale = Math.max(targetWPM * 1.5, currentWPM * 1.2, 200);\r\n\r\n  // Determine current pace zone color\r\n  const getCurrentColor = () => {\r\n    if (currentWPM >= minOptimal && currentWPM <= maxOptimal) {\r\n      return colorScheme.optimal;\r\n    } else if (currentWPM > maxOptimal * 1.5 || currentWPM < minOptimal * 0.5) {\r\n      return colorScheme.poor;\r\n    } else {\r\n      return colorScheme.acceptable;\r\n    }\r\n  };\r\n\r\n  // Calculate progress values for the gauge\r\n  const currentProgress = Math.min(currentWPM / maxScale, 1);\r\n  const targetProgress = targetWPM / maxScale;\r\n  const optimalZoneStart = minOptimal / maxScale;\r\n  const optimalZoneEnd = maxOptimal / maxScale;\r\n\r\n  const renderGauge = () => (\r\n    <View style={styles.gaugeContainer}>\r\n      {/* Background track */}\r\n      <View style={[styles.gaugeTrack, { width: METER_WIDTH }]}>\r\n        {/* Optimal zone indicator */}\r\n        <View\r\n          style={[\r\n            styles.optimalZone,\r\n            {\r\n              left: `${optimalZoneStart * 100}%`,\r\n              width: `${(optimalZoneEnd - optimalZoneStart) * 100}%`,\r\n              backgroundColor: colorScheme.optimal + '30',\r\n            },\r\n          ]}\r\n        />\r\n        \r\n        {/* Target marker */}\r\n        <View\r\n          style={[\r\n            styles.targetMarker,\r\n            {\r\n              left: `${targetProgress * 100}%`,\r\n              backgroundColor: theme.colors.primary,\r\n            },\r\n          ]}\r\n        />\r\n        \r\n        {/* Current WPM progress */}\r\n        <Animated.View\r\n          style={[\r\n            styles.gaugeProgress,\r\n            {\r\n              width: `${currentProgress * 100}%`,\r\n              backgroundColor: getCurrentColor(),\r\n              transform: [{ scaleY: pulseAnim }],\r\n            },\r\n          ]}\r\n        />\r\n      </View>\r\n      \r\n      {/* Scale markers */}\r\n      <View style={styles.scaleContainer}>\r\n        {[0, Math.round(maxScale * 0.25), Math.round(maxScale * 0.5), Math.round(maxScale * 0.75), Math.round(maxScale)].map((value, index) => (\r\n          <Text key={index} style={styles.scaleLabel}>\r\n            {value}\r\n          </Text>\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <Animated.View\r\n      style={[\r\n        styles.container,\r\n        {\r\n          transform: [{ translateY: slideAnim }],\r\n        },\r\n        style,\r\n      ]}\r\n    >\r\n      <Surface style={styles.surface}>\r\n        <View style={styles.header}>\r\n          <View style={styles.titleContainer}>\r\n            <Text variant=\"titleSmall\" style={styles.title}>\r\n              Speaking Pace\r\n            </Text>\r\n            <IconButton\r\n              icon={isVisible ? 'chevron-up' : 'chevron-down'}\r\n              size={16}\r\n              onPress={onToggleVisibility}\r\n              style={styles.toggleButton}\r\n            />\r\n          </View>\r\n        </View>\r\n        \r\n        {isVisible && (\r\n          <View style={styles.content}>\r\n            {/* Current WPM display */}\r\n            <View style={styles.wpmDisplay}>\r\n              <Text variant=\"headlineMedium\" style={[styles.currentWpm, { color: getCurrentColor() }]}>\r\n                {Math.round(currentWPM)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.wpmLabel}>\r\n                WPM\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.targetLabel}>\r\n                Target: {targetWPM}\r\n              </Text>\r\n            </View>\r\n            \r\n            {/* Gauge visualization */}\r\n            {renderGauge()}\r\n            \r\n            {/* Status indicators */}\r\n            <View style={styles.statusContainer}>\r\n              <View style={styles.statusItem}>\r\n                <View style={[styles.statusDot, { backgroundColor: getCurrentColor() }]} />\r\n                <Text variant=\"bodySmall\" style={styles.statusText}>\r\n                  {state.isInOptimalRange ? 'Optimal Pace' : \r\n                   currentWPM > maxOptimal ? 'Too Fast' : \r\n                   currentWPM < minOptimal ? 'Too Slow' : 'Acceptable'}\r\n                </Text>\r\n              </View>\r\n              \r\n              <View style={styles.statusItem}>\r\n                <Text variant=\"bodySmall\" style={styles.averageLabel}>\r\n                  Avg: {Math.round(averageWPM)} WPM\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </View>\r\n        )}\r\n      </Surface>\r\n    </Animated.View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    zIndex: 1000,\r\n  },\r\n  surface: {\r\n    margin: 8,\r\n    borderRadius: 12,\r\n    elevation: 4,\r\n  },\r\n  header: {\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n  },\r\n  titleContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n  },\r\n  toggleButton: {\r\n    margin: 0,\r\n  },\r\n  content: {\r\n    paddingHorizontal: 16,\r\n    paddingBottom: 16,\r\n  },\r\n  wpmDisplay: {\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  currentWpm: {\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  wpmLabel: {\r\n    opacity: 0.7,\r\n    marginTop: -4,\r\n  },\r\n  targetLabel: {\r\n    opacity: 0.6,\r\n    marginTop: 4,\r\n  },\r\n  gaugeContainer: {\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  gaugeTrack: {\r\n    height: 24,\r\n    backgroundColor: '#E0E0E0',\r\n    borderRadius: 12,\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n  },\r\n  optimalZone: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    borderRadius: 12,\r\n  },\r\n  targetMarker: {\r\n    position: 'absolute',\r\n    top: -2,\r\n    bottom: -2,\r\n    width: 3,\r\n    borderRadius: 1.5,\r\n    zIndex: 2,\r\n  },\r\n  gaugeProgress: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    borderRadius: 12,\r\n    zIndex: 1,\r\n  },\r\n  scaleContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    width: METER_WIDTH,\r\n    marginTop: 4,\r\n    paddingHorizontal: 2,\r\n  },\r\n  scaleLabel: {\r\n    fontSize: 10,\r\n    opacity: 0.6,\r\n  },\r\n  statusContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  statusItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  statusDot: {\r\n    width: 8,\r\n    height: 8,\r\n    borderRadius: 4,\r\n    marginRight: 6,\r\n  },\r\n  statusText: {\r\n    fontWeight: '500',\r\n  },\r\n  averageLabel: {\r\n    opacity: 0.7,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\PacingSettings.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":27,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[580,609],"text":""},"desc":"Remove unused variable 'settings'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":28,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[648,676],"text":""},"desc":"Remove unused variable 'settings'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":271,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9546,9549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9546,9549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":289,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10249,10252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10249,10252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11160,11163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11160,11163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Surface,\r\n  Switch,\r\n  Button,\r\n  TextInput,\r\n  Portal,\r\n  Modal,\r\n  IconButton,\r\n  Divider,\r\n  Chip,\r\n} from 'react-native-paper';\r\nimport Slider from '@react-native-community/slider';\r\nimport { PacingMeterSettings, FillerWordSettings } from '../types';\r\n\r\ninterface PacingSettingsProps {\r\n  visible: boolean;\r\n  onDismiss: () => void;\r\n  pacingSettings: PacingMeterSettings;\r\n  fillerSettings: FillerWordSettings;\r\n  onPacingSettingsChange: (settings: PacingMeterSettings) => void;\r\n  onFillerSettingsChange: (settings: FillerWordSettings) => void;\r\n}\r\n\r\nconst DEFAULT_FILLER_WORDS = [\r\n  'um', 'uh', 'like', 'you know', 'so', 'actually', 'basically', 'literally',\r\n  'honestly', 'obviously', 'right', 'okay', 'well', 'yeah', 'hmm', 'ah'\r\n];\r\n\r\nconst VISUAL_CUE_TYPES = [\r\n  { label: 'Icon', value: 'icon' },\r\n  { label: 'Highlight', value: 'highlight' },\r\n  { label: 'Underline', value: 'underline' },\r\n  { label: 'Shake', value: 'shake' },\r\n];\r\n\r\nconst ICON_TYPES = [\r\n  { label: 'Warning', value: 'warning' },\r\n  { label: 'Alert', value: 'alert' },\r\n  { label: 'Circle', value: 'circle' },\r\n  { label: 'Dot', value: 'dot' },\r\n];\r\n\r\nconst SENSITIVITY_LEVELS = [\r\n  { label: 'Low', value: 'low' },\r\n  { label: 'Medium', value: 'medium' },\r\n  { label: 'High', value: 'high' },\r\n];\r\n\r\nexport default function PacingSettings({\r\n  visible,\r\n  onDismiss,\r\n  pacingSettings,\r\n  fillerSettings,\r\n  onPacingSettingsChange,\r\n  onFillerSettingsChange,\r\n}: PacingSettingsProps) {\r\n  const [localPacingSettings, setLocalPacingSettings] = useState<PacingMeterSettings>(pacingSettings);\r\n  const [localFillerSettings, setLocalFillerSettings] = useState<FillerWordSettings>(fillerSettings);\r\n  const [activeTab, setActiveTab] = useState<'pacing' | 'fillers'>('pacing');\r\n  const [newFillerWord, setNewFillerWord] = useState('');\r\n\r\n  const handlePacingChange = <K extends keyof PacingMeterSettings>(\r\n    key: K,\r\n    value: PacingMeterSettings[K]\r\n  ) => {\r\n    setLocalPacingSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleFillerChange = <K extends keyof FillerWordSettings>(\r\n    key: K,\r\n    value: FillerWordSettings[K]\r\n  ) => {\r\n    setLocalFillerSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    onPacingSettingsChange(localPacingSettings);\r\n    onFillerSettingsChange(localFillerSettings);\r\n    onDismiss();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    if (activeTab === 'pacing') {\r\n      setLocalPacingSettings({\r\n        enabled: true,\r\n        targetWPM: 150,\r\n        toleranceRange: 20,\r\n        showVisualMeter: true,\r\n        showSessionSummary: true,\r\n        colorScheme: {\r\n          optimal: '#4CAF50',\r\n          acceptable: '#FF9800',\r\n          poor: '#F44336',\r\n        },\r\n      });\r\n    } else {\r\n      setLocalFillerSettings({\r\n        enabled: true,\r\n        fillerWords: DEFAULT_FILLER_WORDS,\r\n        visualCueType: 'icon',\r\n        iconType: 'warning',\r\n        cueColor: '#FF9800',\r\n        showInRealTime: true,\r\n        trackInSession: true,\r\n        sensitivity: 'medium',\r\n      });\r\n    }\r\n  };\r\n\r\n  const addFillerWord = () => {\r\n    if (newFillerWord.trim() && !localFillerSettings.fillerWords.includes(newFillerWord.trim().toLowerCase())) {\r\n      handleFillerChange('fillerWords', [...localFillerSettings.fillerWords, newFillerWord.trim().toLowerCase()]);\r\n      setNewFillerWord('');\r\n    }\r\n  };\r\n\r\n  const removeFillerWord = (word: string) => {\r\n    handleFillerChange('fillerWords', localFillerSettings.fillerWords.filter(w => w !== word));\r\n  };\r\n\r\n  const renderPacingTab = () => (\r\n    <ScrollView style={styles.tabContent} showsVerticalScrollIndicator={false}>\r\n      {/* Enable/Disable */}\r\n      <Surface style={styles.settingCard}>\r\n        <View style={styles.settingRow}>\r\n          <View style={styles.settingLabel}>\r\n            <Text variant=\"titleMedium\">Enable Pacing Meter</Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Show real-time speaking pace analysis\r\n            </Text>\r\n          </View>\r\n          <Switch\r\n            value={localPacingSettings.enabled}\r\n            onValueChange={(value) => handlePacingChange('enabled', value)}\r\n          />\r\n        </View>\r\n      </Surface>\r\n\r\n      {localPacingSettings.enabled && (\r\n        <>\r\n          {/* Target WPM */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Target Speaking Pace\r\n            </Text>\r\n            <View style={styles.sliderContainer}>\r\n              <Text variant=\"bodyMedium\" style={styles.sliderLabel}>\r\n                Target WPM: {localPacingSettings.targetWPM}\r\n              </Text>\r\n              <Slider\r\n                style={styles.slider}\r\n                minimumValue={80}\r\n                maximumValue={250}\r\n                step={10}\r\n                value={localPacingSettings.targetWPM}\r\n                onValueChange={(value) => handlePacingChange('targetWPM', value)}\r\n              />\r\n              <View style={styles.sliderLabels}>\r\n                <Text variant=\"bodySmall\">80 WPM</Text>\r\n                <Text variant=\"bodySmall\">250 WPM</Text>\r\n              </View>\r\n            </View>\r\n          </Surface>\r\n\r\n          {/* Tolerance Range */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Tolerance Range\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              How much deviation from target is considered optimal\r\n            </Text>\r\n            <View style={styles.sliderContainer}>\r\n              <Text variant=\"bodyMedium\" style={styles.sliderLabel}>\r\n                {localPacingSettings.toleranceRange} WPM\r\n              </Text>\r\n              <Slider\r\n                style={styles.slider}\r\n                minimumValue={5}\r\n                maximumValue={50}\r\n                step={5}\r\n                value={localPacingSettings.toleranceRange}\r\n                onValueChange={(value) => handlePacingChange('toleranceRange', value)}\r\n              />\r\n              <View style={styles.sliderLabels}>\r\n                <Text variant=\"bodySmall\">5 WPM</Text>\r\n                <Text variant=\"bodySmall\">50 WPM</Text>\r\n              </View>\r\n            </View>\r\n            <Text variant=\"bodySmall\" style={styles.rangeInfo}>\r\n              Optimal range: {localPacingSettings.targetWPM - localPacingSettings.toleranceRange} - {localPacingSettings.targetWPM + localPacingSettings.toleranceRange} WPM\r\n            </Text>\r\n          </Surface>\r\n\r\n          {/* Visual Options */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Visual Options\r\n            </Text>\r\n            \r\n            <View style={styles.settingRow}>\r\n              <View style={styles.settingLabel}>\r\n                <Text variant=\"bodyMedium\">Show Visual Meter</Text>\r\n                <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n                  Display real-time pace gauge\r\n                </Text>\r\n              </View>\r\n              <Switch\r\n                value={localPacingSettings.showVisualMeter}\r\n                onValueChange={(value) => handlePacingChange('showVisualMeter', value)}\r\n              />\r\n            </View>\r\n\r\n            <Divider style={styles.divider} />\r\n\r\n            <View style={styles.settingRow}>\r\n              <View style={styles.settingLabel}>\r\n                <Text variant=\"bodyMedium\">Session Summary</Text>\r\n                <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n                  Show detailed report after each session\r\n                </Text>\r\n              </View>\r\n              <Switch\r\n                value={localPacingSettings.showSessionSummary}\r\n                onValueChange={(value) => handlePacingChange('showSessionSummary', value)}\r\n              />\r\n            </View>\r\n          </Surface>\r\n        </>\r\n      )}\r\n    </ScrollView>\r\n  );\r\n\r\n  const renderFillersTab = () => (\r\n    <ScrollView style={styles.tabContent} showsVerticalScrollIndicator={false}>\r\n      {/* Enable/Disable */}\r\n      <Surface style={styles.settingCard}>\r\n        <View style={styles.settingRow}>\r\n          <View style={styles.settingLabel}>\r\n            <Text variant=\"titleMedium\">Enable Filler Detection</Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Detect and highlight filler words in real-time\r\n            </Text>\r\n          </View>\r\n          <Switch\r\n            value={localFillerSettings.enabled}\r\n            onValueChange={(value) => handleFillerChange('enabled', value)}\r\n          />\r\n        </View>\r\n      </Surface>\r\n\r\n      {localFillerSettings.enabled && (\r\n        <>\r\n          {/* Visual Cue Type */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Visual Cue Style\r\n            </Text>\r\n            <View style={styles.chipContainer}>\r\n              {VISUAL_CUE_TYPES.map((type) => (\r\n                <Chip\r\n                  key={type.value}\r\n                  selected={localFillerSettings.visualCueType === type.value}\r\n                  onPress={() => handleFillerChange('visualCueType', type.value as any)}\r\n                  style={styles.chip}\r\n                >\r\n                  {type.label}\r\n                </Chip>\r\n              ))}\r\n            </View>\r\n\r\n            {localFillerSettings.visualCueType === 'icon' && (\r\n              <>\r\n                <Text variant=\"bodyMedium\" style={styles.subSettingTitle}>\r\n                  Icon Type\r\n                </Text>\r\n                <View style={styles.chipContainer}>\r\n                  {ICON_TYPES.map((icon) => (\r\n                    <Chip\r\n                      key={icon.value}\r\n                      selected={localFillerSettings.iconType === icon.value}\r\n                      onPress={() => handleFillerChange('iconType', icon.value as any)}\r\n                      style={styles.chip}\r\n                    >\r\n                      {icon.label}\r\n                    </Chip>\r\n                  ))}\r\n                </View>\r\n              </>\r\n            )}\r\n          </Surface>\r\n\r\n          {/* Detection Settings */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Detection Settings\r\n            </Text>\r\n            \r\n            <Text variant=\"bodyMedium\" style={styles.subSettingTitle}>\r\n              Sensitivity\r\n            </Text>\r\n            <View style={styles.chipContainer}>\r\n              {SENSITIVITY_LEVELS.map((level) => (\r\n                <Chip\r\n                  key={level.value}\r\n                  selected={localFillerSettings.sensitivity === level.value}\r\n                  onPress={() => handleFillerChange('sensitivity', level.value as any)}\r\n                  style={styles.chip}\r\n                >\r\n                  {level.label}\r\n                </Chip>\r\n              ))}\r\n            </View>\r\n\r\n            <Divider style={styles.divider} />\r\n\r\n            <View style={styles.settingRow}>\r\n              <View style={styles.settingLabel}>\r\n                <Text variant=\"bodyMedium\">Real-time Display</Text>\r\n                <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n                  Show visual cues immediately when detected\r\n                </Text>\r\n              </View>\r\n              <Switch\r\n                value={localFillerSettings.showInRealTime}\r\n                onValueChange={(value) => handleFillerChange('showInRealTime', value)}\r\n              />\r\n            </View>\r\n\r\n            <Divider style={styles.divider} />\r\n\r\n            <View style={styles.settingRow}>\r\n              <View style={styles.settingLabel}>\r\n                <Text variant=\"bodyMedium\">Track in Session</Text>\r\n                <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n                  Include filler words in session summary\r\n                </Text>\r\n              </View>\r\n              <Switch\r\n                value={localFillerSettings.trackInSession}\r\n                onValueChange={(value) => handleFillerChange('trackInSession', value)}\r\n              />\r\n            </View>\r\n          </Surface>\r\n\r\n          {/* Filler Words List */}\r\n          <Surface style={styles.settingCard}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Filler Words\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.settingDescription}>\r\n              Words and phrases to detect as fillers\r\n            </Text>\r\n            \r\n            {/* Add new filler word */}\r\n            <View style={styles.addFillerContainer}>\r\n              <TextInput\r\n                mode=\"outlined\"\r\n                label=\"Add filler word\"\r\n                value={newFillerWord}\r\n                onChangeText={setNewFillerWord}\r\n                style={styles.fillerInput}\r\n                dense\r\n                onSubmitEditing={addFillerWord}\r\n              />\r\n              <Button mode=\"contained\" onPress={addFillerWord} style={styles.addButton}>\r\n                Add\r\n              </Button>\r\n            </View>\r\n\r\n            {/* Filler words list */}\r\n            <View style={styles.fillerWordsContainer}>\r\n              {localFillerSettings.fillerWords.map((word) => (\r\n                <Chip\r\n                  key={word}\r\n                  mode=\"outlined\"\r\n                  onClose={() => removeFillerWord(word)}\r\n                  style={styles.fillerWordChip}\r\n                >\r\n                  {word}\r\n                </Chip>\r\n              ))}\r\n            </View>\r\n          </Surface>\r\n        </>\r\n      )}\r\n    </ScrollView>\r\n  );\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onDismiss}\r\n        contentContainerStyle={styles.modalContent}\r\n      >\r\n        <View style={styles.modalHeader}>\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Pace & Filler Settings\r\n          </Text>\r\n          <IconButton\r\n            icon=\"close\"\r\n            onPress={onDismiss}\r\n            style={styles.closeButton}\r\n          />\r\n        </View>\r\n\r\n        {/* Tab navigation */}\r\n        <View style={styles.tabNavigation}>\r\n          <Button\r\n            mode={activeTab === 'pacing' ? 'contained' : 'outlined'}\r\n            onPress={() => setActiveTab('pacing')}\r\n            style={styles.tabButton}\r\n            compact\r\n          >\r\n            Pacing Meter\r\n          </Button>\r\n          <Button\r\n            mode={activeTab === 'fillers' ? 'contained' : 'outlined'}\r\n            onPress={() => setActiveTab('fillers')}\r\n            style={styles.tabButton}\r\n            compact\r\n          >\r\n            Filler Detection\r\n          </Button>\r\n        </View>\r\n\r\n        <View style={styles.modalBody}>\r\n          {activeTab === 'pacing' ? renderPacingTab() : renderFillersTab()}\r\n        </View>\r\n\r\n        {/* Action buttons */}\r\n        <View style={styles.modalActions}>\r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={handleReset}\r\n            style={styles.actionButton}\r\n          >\r\n            Reset to Defaults\r\n          </Button>\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={handleSave}\r\n            style={styles.actionButton}\r\n          >\r\n            Save Settings\r\n          </Button>\r\n        </View>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContent: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    borderRadius: 16,\r\n    maxHeight: '90%',\r\n  },\r\n  modalHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 16,\r\n    paddingBottom: 0,\r\n  },\r\n  modalTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  tabNavigation: {\r\n    flexDirection: 'row',\r\n    padding: 16,\r\n    gap: 8,\r\n  },\r\n  tabButton: {\r\n    flex: 1,\r\n  },\r\n  modalBody: {\r\n    flex: 1,\r\n    paddingHorizontal: 16,\r\n  },\r\n  tabContent: {\r\n    flex: 1,\r\n  },\r\n  settingCard: {\r\n    padding: 16,\r\n    marginBottom: 12,\r\n    borderRadius: 12,\r\n  },\r\n  settingRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  settingLabel: {\r\n    flex: 1,\r\n  },\r\n  settingTitle: {\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  settingDescription: {\r\n    opacity: 0.7,\r\n    marginTop: 2,\r\n  },\r\n  subSettingTitle: {\r\n    fontWeight: '500',\r\n    marginTop: 12,\r\n    marginBottom: 8,\r\n  },\r\n  sliderContainer: {\r\n    marginTop: 8,\r\n  },\r\n  sliderLabel: {\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  slider: {\r\n    height: 40,\r\n  },\r\n  sliderLabels: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 4,\r\n  },\r\n  rangeInfo: {\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n    opacity: 0.7,\r\n    fontStyle: 'italic',\r\n  },\r\n  divider: {\r\n    marginVertical: 12,\r\n  },\r\n  chipContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n    marginTop: 8,\r\n  },\r\n  chip: {\r\n    marginBottom: 4,\r\n  },\r\n  addFillerContainer: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n    marginTop: 12,\r\n    marginBottom: 16,\r\n  },\r\n  fillerInput: {\r\n    flex: 1,\r\n  },\r\n  addButton: {\r\n    alignSelf: 'center',\r\n  },\r\n  fillerWordsContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n  },\r\n  fillerWordChip: {\r\n    marginBottom: 4,\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    padding: 16,\r\n    borderTopWidth: StyleSheet.hairlineWidth,\r\n    borderTopColor: '#E0E0E0',\r\n  },\r\n  actionButton: {\r\n    flex: 1,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\RichTextToolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\ScriptCard.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":8,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[237,253],"text":""},"desc":"Remove unused variable 'scriptId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'script' is defined but never used.","line":9,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"script"},"fix":{"range":[278,292],"text":""},"desc":"Remove unused variable 'script'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":10,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[327,343],"text":""},"desc":"Remove unused variable 'scriptId'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport { Text, Card, IconButton } from 'react-native-paper';\r\nimport { Script } from '../types';\r\n\r\ninterface ScriptCardProps {\r\n  script: Script;\r\n  onEdit: (scriptId: string) => void;\r\n  onDelete: (script: Script) => void;\r\n  onOpenTeleprompter: (scriptId: string) => void;\r\n}\r\n\r\nexport default function ScriptCard({ \r\n  script, \r\n  onEdit, \r\n  onDelete, \r\n  onOpenTeleprompter \r\n}: ScriptCardProps) {\r\n  const formatDate = (date: Date) => {\r\n    return new Date(date).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Card style={styles.card} mode=\"elevated\">\r\n      <Card.Content>\r\n        <View style={styles.header}>\r\n          <Text variant=\"titleMedium\" style={styles.title}>\r\n            {script.title}\r\n          </Text>\r\n          <View style={styles.actions}>\r\n            <IconButton\r\n              icon=\"play\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#10b981\"\r\n              size={20}\r\n              onPress={() => onOpenTeleprompter(script.id)}\r\n            />\r\n            <IconButton\r\n              icon=\"pencil\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#6366f1\"\r\n              size={20}\r\n              onPress={() => onEdit(script.id)}\r\n            />\r\n            <IconButton\r\n              icon=\"delete\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#ef4444\"\r\n              size={20}\r\n              onPress={() => onDelete(script)}\r\n            />\r\n          </View>\r\n        </View>\r\n        <Text variant=\"bodyMedium\" style={styles.preview} numberOfLines={2}>\r\n          {script.content || 'No content'}\r\n        </Text>\r\n        <Text variant=\"bodySmall\" style={styles.date}>\r\n          Last updated: {formatDate(script.updatedAt)}\r\n        </Text>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  card: {\r\n    marginBottom: 12,\r\n    elevation: 3,\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n    marginBottom: 8,\r\n  },\r\n  title: {\r\n    flex: 1,\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  actions: {\r\n    flexDirection: 'row',\r\n    gap: 4,\r\n  },\r\n  preview: {\r\n    color: '#6b7280',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  date: {\r\n    color: '#9ca3af',\r\n    fontSize: 12,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\SessionSummary.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[214,226],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'PaceAnalysisSegment' is defined but never used.","line":20,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"PaceAnalysisSegment"},"fix":{"range":[317,338],"text":""},"desc":"Remove unused variable 'PaceAnalysisSegment'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PaceAnalysisSegment' is defined but never used.","line":20,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":51},{"ruleId":"no-unused-vars","severity":2,"message":"'FillerWordDetection' is defined but never used.","line":20,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"FillerWordDetection"},"fix":{"range":[338,359],"text":""},"desc":"Remove unused variable 'FillerWordDetection'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FillerWordDetection' is defined but never used.","line":20,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":72},{"ruleId":"no-unused-vars","severity":2,"message":"'report' is defined but never used.","line":26,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"report"},"fix":{"range":[513,541],"text":""},"desc":"Remove unused variable 'report'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'width' is assigned a value but never used.","line":30,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"width"},"fix":{"range":[601,607],"text":""},"desc":"Remove unused variable 'width'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'width' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":210,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7729,7736],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":210,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":210,"endColumn":57}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Surface,\r\n  Button,\r\n  IconButton,\r\n  Chip,\r\n  Portal,\r\n  Modal,\r\n  Divider,\r\n  ProgressBar,\r\n  useTheme,\r\n} from 'react-native-paper';\r\nimport { SessionSummaryReport, PaceAnalysisSegment, FillerWordDetection } from '../types';\r\n\r\ninterface SessionSummaryProps {\r\n  report: SessionSummaryReport;\r\n  visible: boolean;\r\n  onDismiss: () => void;\r\n  onSaveReport?: (report: SessionSummaryReport) => void;\r\n  onStartNewSession?: () => void;\r\n}\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nexport default function SessionSummary({\r\n  report,\r\n  visible,\r\n  onDismiss,\r\n  onSaveReport,\r\n  onStartNewSession,\r\n}: SessionSummaryProps) {\r\n  const theme = useTheme();\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'pace' | 'fillers'>('overview');\r\n\r\n  const formatDuration = (milliseconds: number): string => {\r\n    const seconds = Math.floor(milliseconds / 1000);\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds % 60;\r\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const formatTime = (timestamp: number): string => {\r\n    return new Date(timestamp).toLocaleTimeString([], { \r\n      hour: '2-digit', \r\n      minute: '2-digit' \r\n    });\r\n  };\r\n\r\n  const getPaceColor = (status: string) => {\r\n    switch (status) {\r\n      case 'optimal': return '#4CAF50';\r\n      case 'too-fast': return '#FF9800';\r\n      case 'too-slow': return '#F44336';\r\n      default: return theme.colors.primary;\r\n    }\r\n  };\r\n\r\n  const renderOverviewTab = () => (\r\n    <View style={styles.tabContent}>\r\n      {/* Session metrics */}\r\n      <Surface style={styles.metricsCard}>\r\n        <Text variant=\"titleMedium\" style={styles.cardTitle}>Session Metrics</Text>\r\n        <View style={styles.metricsGrid}>\r\n          <View style={styles.metricItem}>\r\n            <Text variant=\"headlineSmall\" style={styles.metricValue}>\r\n              {Math.round(report.averageWPM)}\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.metricLabel}>Average WPM</Text>\r\n          </View>\r\n          <View style={styles.metricItem}>\r\n            <Text variant=\"headlineSmall\" style={styles.metricValue}>\r\n              {report.targetWPM}\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.metricLabel}>Target WPM</Text>\r\n          </View>\r\n          <View style={styles.metricItem}>\r\n            <Text variant=\"headlineSmall\" style={[\r\n              styles.metricValue,\r\n              { color: report.optimalPercentage >= 70 ? '#4CAF50' : '#FF9800' }\r\n            ]}>\r\n              {Math.round(report.optimalPercentage)}%\r\n            </Text>\r\n            <Text variant=\"bodySmall\" style={styles.metricLabel}>Optimal Pace</Text>\r\n          </View>\r\n        </View>\r\n      </Surface>\r\n\r\n      {/* Session info */}\r\n      <Surface style={styles.infoCard}>\r\n        <Text variant=\"titleMedium\" style={styles.cardTitle}>Session Details</Text>\r\n        <View style={styles.infoRow}>\r\n          <Text variant=\"bodyMedium\">Duration:</Text>\r\n          <Text variant=\"bodyMedium\" style={styles.infoValue}>\r\n            {formatDuration(report.endTime - report.startTime)}\r\n          </Text>\r\n        </View>\r\n        <View style={styles.infoRow}>\r\n          <Text variant=\"bodyMedium\">Total Words:</Text>\r\n          <Text variant=\"bodyMedium\" style={styles.infoValue}>\r\n            {report.totalWords}\r\n          </Text>\r\n        </View>\r\n        <View style={styles.infoRow}>\r\n          <Text variant=\"bodyMedium\">Time:</Text>\r\n          <Text variant=\"bodyMedium\" style={styles.infoValue}>\r\n            {formatTime(report.startTime)} - {formatTime(report.endTime)}\r\n          </Text>\r\n        </View>\r\n        <View style={styles.infoRow}>\r\n          <Text variant=\"bodyMedium\">Filler Words:</Text>\r\n          <Text variant=\"bodyMedium\" style={styles.infoValue}>\r\n            {report.fillerWords.length} detected\r\n          </Text>\r\n        </View>\r\n      </Surface>\r\n\r\n      {/* Performance indicator */}\r\n      <Surface style={styles.performanceCard}>\r\n        <Text variant=\"titleMedium\" style={styles.cardTitle}>Overall Performance</Text>\r\n        <View style={styles.performanceIndicator}>\r\n          <ProgressBar\r\n            progress={report.optimalPercentage / 100}\r\n            color={report.optimalPercentage >= 70 ? '#4CAF50' : \r\n                   report.optimalPercentage >= 50 ? '#FF9800' : '#F44336'}\r\n            style={styles.performanceBar}\r\n          />\r\n          <Text variant=\"bodyMedium\" style={styles.performanceText}>\r\n            {report.optimalPercentage >= 80 ? 'Excellent!' :\r\n             report.optimalPercentage >= 60 ? 'Good!' :\r\n             report.optimalPercentage >= 40 ? 'Needs Improvement' : 'Practice More'}\r\n          </Text>\r\n        </View>\r\n      </Surface>\r\n    </View>\r\n  );\r\n\r\n  const renderPaceTab = () => (\r\n    <View style={styles.tabContent}>\r\n      <Surface style={styles.segmentsCard}>\r\n        <Text variant=\"titleMedium\" style={styles.cardTitle}>Pace Analysis</Text>\r\n        <Text variant=\"bodySmall\" style={styles.cardSubtitle}>\r\n          Color-coded segments show where your pace was off-target\r\n        </Text>\r\n        \r\n        <ScrollView style={styles.segmentsList} showsVerticalScrollIndicator={false}>\r\n          {report.segments.map((segment, index) => (\r\n            <View key={index} style={styles.segmentItem}>\r\n              <View style={styles.segmentHeader}>\r\n                <View style={[\r\n                  styles.segmentStatusDot, \r\n                  { backgroundColor: getPaceColor(segment.status) }\r\n                ]} />\r\n                <Text variant=\"bodyMedium\" style={styles.segmentTitle}>\r\n                  Words {segment.startWordIndex + 1}-{segment.endWordIndex + 1}\r\n                </Text>\r\n                <Chip \r\n                  mode=\"outlined\" \r\n                  textStyle={styles.chipText}\r\n                  style={[styles.segmentChip, { borderColor: getPaceColor(segment.status) }]}\r\n                >\r\n                  {Math.round(segment.averageWPM)} WPM\r\n                </Chip>\r\n              </View>\r\n              <Text variant=\"bodySmall\" style={styles.segmentDuration}>\r\n                Duration: {formatDuration(segment.duration)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={[\r\n                styles.segmentStatus,\r\n                { color: getPaceColor(segment.status) }\r\n              ]}>\r\n                {segment.status === 'optimal' ? 'Perfect pace' :\r\n                 segment.status === 'too-fast' ? 'Too fast - slow down' :\r\n                 'Too slow - speed up'}\r\n              </Text>\r\n            </View>\r\n          ))}\r\n        </ScrollView>\r\n      </Surface>\r\n    </View>\r\n  );\r\n\r\n  const renderFillersTab = () => {\r\n    const fillerCounts = report.fillerWords.reduce((acc, filler) => {\r\n      acc[filler.word] = (acc[filler.word] || 0) + 1;\r\n      return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    const sortedFillers = Object.entries(fillerCounts)\r\n      .sort(([,a], [,b]) => b - a)\r\n      .slice(0, 10);\r\n\r\n    return (\r\n      <View style={styles.tabContent}>\r\n        <Surface style={styles.fillersCard}>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>Filler Words Detected</Text>\r\n          <Text variant=\"bodySmall\" style={styles.cardSubtitle}>\r\n            {report.fillerWords.length} filler words detected during your session\r\n          </Text>\r\n          \r\n          {sortedFillers.length > 0 ? (\r\n            <>\r\n              <View style={styles.fillersList}>\r\n                {sortedFillers.map(([word, count], index) => (\r\n                  <View key={word} style={styles.fillerItem}>\r\n                    <Text variant=\"bodyLarge\" style={styles.fillerWord}>\r\n                      \"{word}\"\r\n                    </Text>\r\n                    <View style={styles.fillerCount}>\r\n                      <Text variant=\"bodyMedium\" style={styles.fillerCountText}>\r\n                        {count} times\r\n                      </Text>\r\n                      <ProgressBar\r\n                        progress={count / Math.max(...Object.values(fillerCounts))}\r\n                        color={theme.colors.primary}\r\n                        style={styles.fillerBar}\r\n                      />\r\n                    </View>\r\n                  </View>\r\n                ))}\r\n              </View>\r\n            </>\r\n          ) : (\r\n            <View style={styles.noFillersContainer}>\r\n              <Text variant=\"bodyMedium\" style={styles.noFillersText}>\r\n                 Great job! No filler words detected.\r\n              </Text>\r\n            </View>\r\n          )}\r\n        </Surface>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const renderRecommendations = () => (\r\n    <Surface style={styles.recommendationsCard}>\r\n      <Text variant=\"titleMedium\" style={styles.cardTitle}>Recommendations</Text>\r\n      {report.recommendations.map((recommendation, index) => (\r\n        <View key={index} style={styles.recommendationItem}>\r\n          <Text variant=\"bodyMedium\"> {recommendation}</Text>\r\n        </View>\r\n      ))}\r\n    </Surface>\r\n  );\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onDismiss}\r\n        contentContainerStyle={styles.modalContent}\r\n      >\r\n        <View style={styles.modalHeader}>\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Session Summary\r\n          </Text>\r\n          <IconButton\r\n            icon=\"close\"\r\n            onPress={onDismiss}\r\n            style={styles.closeButton}\r\n          />\r\n        </View>\r\n\r\n        {/* Tab navigation */}\r\n        <View style={styles.tabNavigation}>\r\n          <Button\r\n            mode={activeTab === 'overview' ? 'contained' : 'outlined'}\r\n            onPress={() => setActiveTab('overview')}\r\n            style={styles.tabButton}\r\n            compact\r\n          >\r\n            Overview\r\n          </Button>\r\n          <Button\r\n            mode={activeTab === 'pace' ? 'contained' : 'outlined'}\r\n            onPress={() => setActiveTab('pace')}\r\n            style={styles.tabButton}\r\n            compact\r\n          >\r\n            Pace Analysis\r\n          </Button>\r\n          <Button\r\n            mode={activeTab === 'fillers' ? 'contained' : 'outlined'}\r\n            onPress={() => setActiveTab('fillers')}\r\n            style={styles.tabButton}\r\n            compact\r\n          >\r\n            Filler Words\r\n          </Button>\r\n        </View>\r\n\r\n        <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\r\n          {activeTab === 'overview' && renderOverviewTab()}\r\n          {activeTab === 'pace' && renderPaceTab()}\r\n          {activeTab === 'fillers' && renderFillersTab()}\r\n          \r\n          {/* Recommendations always shown at bottom */}\r\n          {activeTab === 'overview' && renderRecommendations()}\r\n        </ScrollView>\r\n\r\n        {/* Action buttons */}\r\n        <View style={styles.modalActions}>\r\n          {onSaveReport && (\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => onSaveReport(report)}\r\n              style={styles.actionButton}\r\n            >\r\n              Save Report\r\n            </Button>\r\n          )}\r\n          {onStartNewSession && (\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={() => {\r\n                onStartNewSession();\r\n                onDismiss();\r\n              }}\r\n              style={styles.actionButton}\r\n            >\r\n              New Session\r\n            </Button>\r\n          )}\r\n        </View>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContent: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    borderRadius: 16,\r\n    maxHeight: height * 0.9,\r\n    minHeight: height * 0.7,\r\n  },\r\n  modalHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 16,\r\n    paddingBottom: 0,\r\n  },\r\n  modalTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  closeButton: {\r\n    margin: 0,\r\n  },\r\n  tabNavigation: {\r\n    flexDirection: 'row',\r\n    padding: 16,\r\n    gap: 8,\r\n  },\r\n  tabButton: {\r\n    flex: 1,\r\n  },\r\n  modalBody: {\r\n    flex: 1,\r\n    paddingHorizontal: 16,\r\n  },\r\n  tabContent: {\r\n    gap: 16,\r\n  },\r\n  metricsCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n  },\r\n  cardTitle: {\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n  },\r\n  cardSubtitle: {\r\n    opacity: 0.7,\r\n    marginBottom: 12,\r\n  },\r\n  metricsGrid: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n  },\r\n  metricItem: {\r\n    alignItems: 'center',\r\n  },\r\n  metricValue: {\r\n    fontWeight: 'bold',\r\n  },\r\n  metricLabel: {\r\n    opacity: 0.7,\r\n    marginTop: 4,\r\n  },\r\n  infoCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n  },\r\n  infoRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    paddingVertical: 4,\r\n  },\r\n  infoValue: {\r\n    fontWeight: '500',\r\n  },\r\n  performanceCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n  },\r\n  performanceIndicator: {\r\n    alignItems: 'center',\r\n  },\r\n  performanceBar: {\r\n    width: '100%',\r\n    height: 8,\r\n    borderRadius: 4,\r\n    marginBottom: 8,\r\n  },\r\n  performanceText: {\r\n    fontWeight: '500',\r\n  },\r\n  segmentsCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n  },\r\n  segmentsList: {\r\n    maxHeight: 300,\r\n  },\r\n  segmentItem: {\r\n    borderBottomWidth: StyleSheet.hairlineWidth,\r\n    borderBottomColor: '#E0E0E0',\r\n    paddingVertical: 12,\r\n  },\r\n  segmentHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 8,\r\n    marginBottom: 4,\r\n  },\r\n  segmentStatusDot: {\r\n    width: 8,\r\n    height: 8,\r\n    borderRadius: 4,\r\n  },\r\n  segmentTitle: {\r\n    flex: 1,\r\n    fontWeight: '500',\r\n  },\r\n  segmentChip: {\r\n    height: 24,\r\n  },\r\n  chipText: {\r\n    fontSize: 12,\r\n  },\r\n  segmentDuration: {\r\n    opacity: 0.7,\r\n    marginLeft: 16,\r\n  },\r\n  segmentStatus: {\r\n    fontWeight: '500',\r\n    marginLeft: 16,\r\n  },\r\n  fillersCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n  },\r\n  fillersList: {\r\n    gap: 12,\r\n  },\r\n  fillerItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 16,\r\n  },\r\n  fillerWord: {\r\n    fontWeight: '500',\r\n    minWidth: 80,\r\n  },\r\n  fillerCount: {\r\n    flex: 1,\r\n  },\r\n  fillerCountText: {\r\n    marginBottom: 4,\r\n  },\r\n  fillerBar: {\r\n    height: 4,\r\n    borderRadius: 2,\r\n  },\r\n  noFillersContainer: {\r\n    alignItems: 'center',\r\n    paddingVertical: 20,\r\n  },\r\n  noFillersText: {\r\n    textAlign: 'center',\r\n    opacity: 0.8,\r\n  },\r\n  recommendationsCard: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    marginTop: 16,\r\n  },\r\n  recommendationItem: {\r\n    paddingVertical: 4,\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    padding: 16,\r\n    borderTopWidth: StyleSheet.hairlineWidth,\r\n    borderTopColor: '#E0E0E0',\r\n  },\r\n  actionButton: {\r\n    flex: 1,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\SpeechRecognitionPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Platform"},"fix":{"range":[114,127],"text":""},"desc":"Remove unused variable 'Platform'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Switch"},"fix":{"range":[197,208],"text":""},"desc":"Remove unused variable 'Switch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'transcript' is defined but never used.","line":28,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"transcript"},"fix":{"range":[594,612],"text":""},"desc":"Remove unused variable 'transcript'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkPermissions'. Either include it or remove the dependency array.","line":71,"column":6,"nodeType":"ArrayExpression","endLine":71,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [checkPermissions, visible]","fix":{"range":[1742,1751],"text":"[checkPermissions, visible]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateAccuracy'. Either include it or remove the dependency array.","line":80,"column":6,"nodeType":"ArrayExpression","endLine":80,"endColumn":86,"suggestions":[{"desc":"Update the dependencies array to be: [speechState.currentTranscript, speechState.finalTranscript, onTranscriptUpdate, calculateAccuracy]","fix":{"range":[2044,2124],"text":"[speechState.currentTranscript, speechState.finalTranscript, onTranscriptUpdate, calculateAccuracy]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":89,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":89,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":20,"suggestions":[{"fix":{"range":[2377,2426],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":119,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":119,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":119,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":132,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":132,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":20,"suggestions":[{"fix":{"range":[3686,3736],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":174,"column":11,"nodeType":"MemberExpression","endLine":174,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":174,"column":30,"nodeType":"MemberExpression","endLine":174,"endColumn":48},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":195,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":195,"endColumn":45,"fix":{"range":[5564,5581],"text":"{return '#ef4444';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":196,"column":34,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":196,"endColumn":51,"fix":{"range":[5616,5633],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":197,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":197,"endColumn":52,"fix":{"range":[5669,5686],"text":"{return '#f59e0b';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":202,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":202,"endColumn":53,"fix":{"range":[5779,5804],"text":"{return speechState.error;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":203,"column":34,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":203,"endColumn":56,"fix":{"range":[5839,5861],"text":"{return 'Listening...';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":204,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":204,"endColumn":58,"fix":{"range":[5897,5920],"text":"{return 'Processing...';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":205,"column":37,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":205,"endColumn":77,"fix":{"range":[5958,5998],"text":"{return 'Microphone permission required';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":210,"column":46,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":210,"endColumn":63,"fix":{"range":[6120,6137],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":211,"column":46,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":211,"endColumn":63,"fix":{"range":[6184,6201],"text":"{return '#f59e0b';}"}}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":9,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Alert,\r\n  Linking,\r\n  Platform,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  IconButton,\r\n  Surface,\r\n  Switch,\r\n  Button,\r\n  Portal,\r\n  Modal,\r\n  TextInput,\r\n  Chip,\r\n  ProgressBar,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport { speechRecognitionService } from '../services/speechRecognitionService';\r\nimport type { SpeechRecognitionState, AudioPermissions } from '../types';\r\n\r\ninterface SpeechRecognitionPanelProps {\r\n  visible: boolean;\r\n  onDismiss: () => void;\r\n  onTranscriptUpdate: (transcript: string) => void;\r\n  currentScript: string;\r\n  settings: {\r\n    backgroundColor: string;\r\n    textColor: string;\r\n  };\r\n}\r\n\r\nexport default function SpeechRecognitionPanel({\r\n  visible,\r\n  onDismiss,\r\n  onTranscriptUpdate,\r\n  currentScript,\r\n  settings,\r\n}: SpeechRecognitionPanelProps) {\r\n  const [speechState, setSpeechState] = useState<SpeechRecognitionState>(\r\n    speechRecognitionService.getState()\r\n  );\r\n  const [apiKey, setApiKey] = useState('');\r\n  const [showApiKeyInput, setShowApiKeyInput] = useState(false);\r\n  const [transcriptComparison, setTranscriptComparison] = useState({\r\n    accuracy: 0,\r\n    wordsMatched: 0,\r\n    totalWords: 0,\r\n  });\r\n  \r\n  const unsubscribeRef = useRef<(() => void) | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      // Subscribe to speech recognition updates\r\n      unsubscribeRef.current = speechRecognitionService.subscribe(setSpeechState);\r\n      \r\n      // Check permissions on mount\r\n      checkPermissions();\r\n    }\r\n\r\n    return () => {\r\n      if (unsubscribeRef.current) {\r\n        unsubscribeRef.current();\r\n        unsubscribeRef.current = null;\r\n      }\r\n    };\r\n  }, [visible]);\r\n\r\n  useEffect(() => {\r\n    // Update transcript when speech recognition provides new text\r\n    const fullTranscript = speechRecognitionService.getFullTranscript();\r\n    if (fullTranscript) {\r\n      onTranscriptUpdate(fullTranscript);\r\n      calculateAccuracy(fullTranscript);\r\n    }\r\n  }, [speechState.currentTranscript, speechState.finalTranscript, onTranscriptUpdate]);\r\n\r\n  const checkPermissions = async () => {\r\n    try {\r\n      const permissions = await speechRecognitionService.checkPermissions();\r\n      if (!permissions.granted) {\r\n        showPermissionAlert(permissions);\r\n      }\r\n    } catch (error) {\r\n      console.error('Permission check failed:', error);\r\n    }\r\n  };\r\n\r\n  const showPermissionAlert = (permissions: AudioPermissions) => {\r\n    Alert.alert(\r\n      'Microphone Permission Required',\r\n      'SpeakSync needs microphone access for speech recognition during teleprompter practice. This helps you practice your delivery and compare your speech with the script.',\r\n      [\r\n        {\r\n          text: 'Cancel',\r\n          style: 'cancel',\r\n        },\r\n        {\r\n          text: permissions.canAskAgain ? 'Grant Permission' : 'Open Settings',\r\n          onPress: async () => {\r\n            if (permissions.canAskAgain) {\r\n              await speechRecognitionService.requestPermissions();\r\n            } else {\r\n              Linking.openSettings();\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const handleStartListening = async () => {\r\n    try {\r\n      await speechRecognitionService.startListening();\r\n    } catch (error) {\r\n      Alert.alert(\r\n        'Speech Recognition Error',\r\n        'Failed to start speech recognition. Please check your microphone permissions and try again.',\r\n        [{ text: 'OK' }]\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleStopListening = async () => {\r\n    try {\r\n      await speechRecognitionService.stopListening();\r\n    } catch (error) {\r\n      console.error('Failed to stop listening:', error);\r\n    }\r\n  };\r\n\r\n  const handleToggleListening = async () => {\r\n    if (speechState.isListening) {\r\n      await handleStopListening();\r\n    } else {\r\n      await handleStartListening();\r\n    }\r\n  };\r\n\r\n  const handleSwitchMode = (useDeepgram: boolean) => {\r\n    const mode = useDeepgram ? 'deepgram' : 'device';\r\n    speechRecognitionService.switchMode(mode);\r\n    \r\n    if (useDeepgram && !apiKey) {\r\n      setShowApiKeyInput(true);\r\n    }\r\n  };\r\n\r\n  const handleSetApiKey = () => {\r\n    if (apiKey.trim()) {\r\n      speechRecognitionService.setApiKey(apiKey.trim());\r\n      setShowApiKeyInput(false);\r\n    }\r\n  };\r\n\r\n  const calculateAccuracy = (transcript: string) => {\r\n    if (!currentScript || !transcript) {\r\n      setTranscriptComparison({ accuracy: 0, wordsMatched: 0, totalWords: 0 });\r\n      return;\r\n    }\r\n\r\n    // Simple word-based accuracy calculation\r\n    const scriptWords = currentScript.toLowerCase().split(/\\s+/).filter(word => word.length > 0);\r\n    const transcriptWords = transcript.toLowerCase().split(/\\s+/).filter(word => word.length > 0);\r\n    \r\n    let matches = 0;\r\n    const maxLength = Math.min(scriptWords.length, transcriptWords.length);\r\n    \r\n    for (let i = 0; i < maxLength; i++) {\r\n      if (scriptWords[i] === transcriptWords[i]) {\r\n        matches++;\r\n      }\r\n    }\r\n\r\n    const accuracy = scriptWords.length > 0 ? (matches / scriptWords.length) * 100 : 0;\r\n    \r\n    setTranscriptComparison({\r\n      accuracy: Math.round(accuracy),\r\n      wordsMatched: matches,\r\n      totalWords: scriptWords.length,\r\n    });\r\n  };\r\n\r\n  const handleClearTranscript = () => {\r\n    speechRecognitionService.clearTranscript();\r\n    onTranscriptUpdate('');\r\n    setTranscriptComparison({ accuracy: 0, wordsMatched: 0, totalWords: 0 });\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    if (speechState.error) return '#ef4444';\r\n    if (speechState.isListening) return '#10b981';\r\n    if (speechState.isProcessing) return '#f59e0b';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (speechState.error) return speechState.error;\r\n    if (speechState.isListening) return 'Listening...';\r\n    if (speechState.isProcessing) return 'Processing...';\r\n    if (!speechState.hasPermission) return 'Microphone permission required';\r\n    return 'Ready to listen';\r\n  };\r\n\r\n  const getAccuracyColor = () => {\r\n    if (transcriptComparison.accuracy >= 90) return '#10b981';\r\n    if (transcriptComparison.accuracy >= 75) return '#f59e0b';\r\n    return '#ef4444';\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      <Modal\r\n        visible={visible}\r\n        onDismiss={onDismiss}\r\n        contentContainerStyle={[\r\n          styles.modal,\r\n          { backgroundColor: settings.backgroundColor }\r\n        ]}\r\n      >\r\n        <Surface style={styles.header} elevation={2}>\r\n          <Text variant=\"headlineSmall\" style={[styles.title, { color: settings.textColor }]}>\r\n            Speech Recognition\r\n          </Text>\r\n          <IconButton\r\n            icon=\"close\"\r\n            size={24}\r\n            onPress={onDismiss}\r\n            iconColor={settings.textColor}\r\n          />\r\n        </Surface>\r\n\r\n        <View style={styles.content}>\r\n          {/* Status Section */}\r\n          <View style={styles.statusSection}>\r\n            <View style={styles.statusRow}>\r\n              <View style={[styles.statusIndicator, { backgroundColor: getStatusColor() }]} />\r\n              <Text variant=\"bodyMedium\" style={[styles.statusText, { color: settings.textColor }]}>\r\n                {getStatusText()}\r\n              </Text>\r\n            </View>\r\n            \r\n            {speechState.isListening && (\r\n              <ProgressBar\r\n                indeterminate\r\n                color={getStatusColor()}\r\n                style={styles.progressBar}\r\n              />\r\n            )}\r\n          </View>\r\n\r\n          {/* Mode Selection */}\r\n          <View style={styles.modeSection}>\r\n            <Text variant=\"titleMedium\" style={[styles.sectionTitle, { color: settings.textColor }]}>\r\n              Recognition Mode\r\n            </Text>\r\n            \r\n            <View style={styles.modeButtons}>\r\n              <Button\r\n                mode={speechState.mode === 'deepgram' ? 'contained' : 'outlined'}\r\n                onPress={() => handleSwitchMode(true)}\r\n                style={styles.modeButton}\r\n                disabled={speechState.isListening}\r\n              >\r\n                Deepgram (Cloud)\r\n              </Button>\r\n              <Button\r\n                mode={speechState.mode === 'device' ? 'contained' : 'outlined'}\r\n                onPress={() => handleSwitchMode(false)}\r\n                style={styles.modeButton}\r\n                disabled={speechState.isListening}\r\n              >\r\n                Device STT\r\n              </Button>\r\n            </View>\r\n\r\n            {speechState.mode === 'deepgram' && (\r\n              <View style={styles.apiKeySection}>\r\n                <Button\r\n                  mode=\"outlined\"\r\n                  onPress={() => setShowApiKeyInput(true)}\r\n                  icon=\"key\"\r\n                  style={styles.apiKeyButton}\r\n                >\r\n                  {apiKey ? 'Update API Key' : 'Set Deepgram API Key'}\r\n                </Button>\r\n                {speechState.isConnected && (\r\n                  <Chip icon=\"check\" style={styles.connectedChip}>\r\n                    Connected\r\n                  </Chip>\r\n                )}\r\n              </View>\r\n            )}\r\n          </View>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          {/* Control Section */}\r\n          <View style={styles.controlSection}>\r\n            <View style={styles.mainControls}>\r\n              <IconButton\r\n                icon={speechState.isListening ? 'microphone-off' : 'microphone'}\r\n                size={48}\r\n                mode=\"contained\"\r\n                onPress={handleToggleListening}\r\n                disabled={!speechState.hasPermission || speechState.isProcessing}\r\n                iconColor=\"#ffffff\"\r\n                containerColor={speechState.isListening ? '#ef4444' : '#10b981'}\r\n                style={styles.micButton}\r\n              />\r\n              \r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={handleClearTranscript}\r\n                icon=\"delete\"\r\n                style={styles.clearButton}\r\n                disabled={speechState.isListening}\r\n              >\r\n                Clear\r\n              </Button>\r\n            </View>\r\n          </View>\r\n\r\n          {/* Accuracy Section */}\r\n          {transcriptComparison.totalWords > 0 && (\r\n            <>\r\n              <Divider style={styles.divider} />\r\n              <View style={styles.accuracySection}>\r\n                <Text variant=\"titleMedium\" style={[styles.sectionTitle, { color: settings.textColor }]}>\r\n                  Speech Accuracy\r\n                </Text>\r\n                \r\n                <View style={styles.accuracyStats}>\r\n                  <View style={styles.accuracyStat}>\r\n                    <Text variant=\"displaySmall\" style={[styles.accuracyNumber, { color: getAccuracyColor() }]}>\r\n                      {transcriptComparison.accuracy}%\r\n                    </Text>\r\n                    <Text variant=\"bodySmall\" style={[styles.accuracyLabel, { color: settings.textColor }]}>\r\n                      Accuracy\r\n                    </Text>\r\n                  </View>\r\n                  \r\n                  <View style={styles.accuracyStat}>\r\n                    <Text variant=\"titleLarge\" style={[styles.matchNumber, { color: settings.textColor }]}>\r\n                      {transcriptComparison.wordsMatched}/{transcriptComparison.totalWords}\r\n                    </Text>\r\n                    <Text variant=\"bodySmall\" style={[styles.accuracyLabel, { color: settings.textColor }]}>\r\n                      Words Matched\r\n                    </Text>\r\n                  </View>\r\n                </View>\r\n              </View>\r\n            </>\r\n          )}\r\n\r\n          {/* Current Transcript */}\r\n          {(speechState.currentTranscript || speechState.finalTranscript) && (\r\n            <>\r\n              <Divider style={styles.divider} />\r\n              <View style={styles.transcriptSection}>\r\n                <Text variant=\"titleMedium\" style={[styles.sectionTitle, { color: settings.textColor }]}>\r\n                  Live Transcript\r\n                </Text>\r\n                \r\n                <Surface style={styles.transcriptBox} elevation={1}>\r\n                  <Text style={[styles.finalTranscript, { color: settings.textColor }]}>\r\n                    {speechState.finalTranscript}\r\n                  </Text>\r\n                  {speechState.currentTranscript && (\r\n                    <Text style={[styles.currentTranscript, { color: getStatusColor() }]}>\r\n                      {speechState.currentTranscript}\r\n                    </Text>\r\n                  )}\r\n                </Surface>\r\n                \r\n                {speechState.confidence > 0 && (\r\n                  <Text variant=\"bodySmall\" style={[styles.confidence, { color: settings.textColor }]}>\r\n                    Confidence: {Math.round(speechState.confidence * 100)}%\r\n                  </Text>\r\n                )}\r\n              </View>\r\n            </>\r\n          )}\r\n        </View>\r\n\r\n        {/* API Key Input Modal */}\r\n        <Portal>\r\n          <Modal\r\n            visible={showApiKeyInput}\r\n            onDismiss={() => setShowApiKeyInput(false)}\r\n            contentContainerStyle={styles.apiKeyModal}\r\n          >\r\n            <Text variant=\"titleLarge\" style={styles.apiKeyTitle}>\r\n              Deepgram API Key\r\n            </Text>\r\n            \r\n            <Text variant=\"bodyMedium\" style={styles.apiKeyDescription}>\r\n              Enter your Deepgram API key for high-quality cloud speech recognition.\r\n              You can get a free API key at deepgram.com\r\n            </Text>\r\n            \r\n            <TextInput\r\n              value={apiKey}\r\n              onChangeText={setApiKey}\r\n              placeholder=\"Enter API key...\"\r\n              secureTextEntry\r\n              style={styles.apiKeyInput}\r\n            />\r\n            \r\n            <View style={styles.apiKeyButtons}>\r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={() => setShowApiKeyInput(false)}\r\n                style={styles.apiKeyButton}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                mode=\"contained\"\r\n                onPress={handleSetApiKey}\r\n                disabled={!apiKey.trim()}\r\n                style={styles.apiKeyButton}\r\n              >\r\n                Save\r\n              </Button>\r\n            </View>\r\n          </Modal>\r\n        </Portal>\r\n      </Modal>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  modal: {\r\n    flex: 1,\r\n    marginTop: 50,\r\n    borderTopLeftRadius: 20,\r\n    borderTopRightRadius: 20,\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 16,\r\n    backgroundColor: '#6366f1',\r\n  },\r\n  title: {\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    padding: 20,\r\n  },\r\n  statusSection: {\r\n    marginBottom: 20,\r\n  },\r\n  statusRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  statusIndicator: {\r\n    width: 12,\r\n    height: 12,\r\n    borderRadius: 6,\r\n    marginRight: 12,\r\n  },\r\n  statusText: {\r\n    flex: 1,\r\n  },\r\n  progressBar: {\r\n    height: 4,\r\n    borderRadius: 2,\r\n  },\r\n  modeSection: {\r\n    marginBottom: 20,\r\n  },\r\n  sectionTitle: {\r\n    marginBottom: 12,\r\n    fontWeight: '600',\r\n  },\r\n  modeButtons: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    marginBottom: 12,\r\n  },\r\n  modeButton: {\r\n    flex: 1,\r\n  },\r\n  apiKeySection: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 12,\r\n  },\r\n  apiKeyButton: {\r\n    flex: 1,\r\n  },\r\n  connectedChip: {\r\n    backgroundColor: '#10b981',\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  controlSection: {\r\n    alignItems: 'center',\r\n    marginBottom: 20,\r\n  },\r\n  mainControls: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 20,\r\n  },\r\n  micButton: {\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 4,\r\n    elevation: 5,\r\n  },\r\n  clearButton: {},\r\n  accuracySection: {\r\n    marginBottom: 20,\r\n  },\r\n  accuracyStats: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    alignItems: 'center',\r\n  },\r\n  accuracyStat: {\r\n    alignItems: 'center',\r\n  },\r\n  accuracyNumber: {\r\n    fontWeight: 'bold',\r\n  },\r\n  matchNumber: {\r\n    fontWeight: 'bold',\r\n  },\r\n  accuracyLabel: {\r\n    marginTop: 4,\r\n  },\r\n  transcriptSection: {},\r\n  transcriptBox: {\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    minHeight: 80,\r\n  },\r\n  finalTranscript: {\r\n    lineHeight: 24,\r\n    marginBottom: 8,\r\n  },\r\n  currentTranscript: {\r\n    lineHeight: 24,\r\n    fontStyle: 'italic',\r\n  },\r\n  confidence: {\r\n    textAlign: 'right',\r\n  },\r\n  apiKeyModal: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    margin: 20,\r\n    borderRadius: 8,\r\n  },\r\n  apiKeyTitle: {\r\n    marginBottom: 12,\r\n    textAlign: 'center',\r\n  },\r\n  apiKeyDescription: {\r\n    marginBottom: 20,\r\n    textAlign: 'center',\r\n    color: '#6b7280',\r\n  },\r\n  apiKeyInput: {\r\n    marginBottom: 20,\r\n  },\r\n  apiKeyButtons: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\VideoRecordingPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"Dimensions"},"fix":{"range":[92,107],"text":""},"desc":"Remove unused variable 'Dimensions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'RNText' is defined but never used.","line":7,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"RNText"},"fix":{"range":[117,136],"text":""},"desc":"Remove unused variable 'RNText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RNText' is defined but never used.","line":7,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'CameraType' is defined but never used.","line":20,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"CameraType"},"fix":{"range":[326,338],"text":""},"desc":"Remove unused variable 'CameraType'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CameraType' is defined but never used.","line":20,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'isRecording' is defined but never used.","line":32,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"isRecording"},"fix":{"range":[696,716],"text":""},"desc":"Remove unused variable 'isRecording'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'videoUri' is defined but never used.","line":33,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"videoUri"},"fix":{"range":[748,764],"text":""},"desc":"Remove unused variable 'videoUri'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":34,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[794,812],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scrollPosition' is defined but never used.","line":34,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"scrollPosition"},"fix":{"range":[811,835],"text":""},"desc":"Remove unused variable 'scrollPosition'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":257,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7931,7934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7931,7934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Dimensions,\r\n  Alert,\r\n  Text as RNText,\r\n} from 'react-native';\r\nimport {\r\n  Surface,\r\n  IconButton,\r\n  Text,\r\n  Switch,\r\n  Portal,\r\n  Modal,\r\n  Button,\r\n  Chip,\r\n  ProgressBar,\r\n} from 'react-native-paper';\r\nimport { CameraView, CameraType } from 'expo-camera';\r\nimport { \r\n  videoRecordingService, \r\n  VideoRecordingState, \r\n  VideoRecordingOptions,\r\n  WatermarkOptions \r\n} from '../services/videoRecordingService';\r\nimport { useSubscriptionStore } from '../store/subscriptionStore';\r\n\r\ninterface VideoRecordingPanelProps {\r\n  sessionId: string;\r\n  isActive: boolean;\r\n  onRecordingStateChange: (isRecording: boolean) => void;\r\n  onVideoRecorded: (videoUri: string) => void;\r\n  onScrollSync?: (timestamp: number, scrollPosition: number) => void;\r\n}\r\n\r\nexport function VideoRecordingPanel({\r\n  sessionId,\r\n  isActive,\r\n  onRecordingStateChange,\r\n  onVideoRecorded,\r\n  onScrollSync,\r\n}: VideoRecordingPanelProps) {\r\n  const cameraRef = useRef<CameraView>(null);\r\n  const { subscription } = useSubscriptionStore();\r\n  const [recordingState, setRecordingState] = useState<VideoRecordingState>(\r\n    videoRecordingService.getCurrentState()\r\n  );\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [recordingOptions, setRecordingOptions] = useState<VideoRecordingOptions>({\r\n    quality: subscription?.tier === 'free' ? 'medium' : 'high',\r\n    orientation: 'landscape',\r\n    enableAudio: true,\r\n    maxDuration: subscription?.tier === 'free' ? 600 : 3600, // 10 min free, 1 hour paid\r\n  });\r\n\r\n  useEffect(() => {\r\n    const listener = (state: VideoRecordingState) => {\r\n      setRecordingState(state);\r\n      onRecordingStateChange(state.isRecording);\r\n    };\r\n\r\n    videoRecordingService.addListener(listener);\r\n    videoRecordingService.initialize();\r\n\r\n    return () => {\r\n      videoRecordingService.removeListener(listener);\r\n    };\r\n  }, [onRecordingStateChange]);\r\n\r\n  useEffect(() => {\r\n    if (cameraRef.current) {\r\n      videoRecordingService.setCameraRef(cameraRef.current);\r\n    }\r\n  }, []);\r\n\r\n  const handleStartRecording = async () => {\r\n    const success = await videoRecordingService.startRecording(\r\n      recordingOptions,\r\n      sessionId,\r\n      onScrollSync\r\n    );\r\n\r\n    if (!success) {\r\n      Alert.alert('Recording Error', 'Failed to start video recording');\r\n    }\r\n  };\r\n\r\n  const handleStopRecording = async () => {\r\n    const videoUri = await videoRecordingService.stopRecording();\r\n    \r\n    if (videoUri) {\r\n      // Apply watermark based on subscription tier\r\n      const watermarkOptions: WatermarkOptions = {\r\n        enabled: subscription?.tier === 'free',\r\n        text: 'SpeakSync',\r\n        position: 'bottom-right',\r\n        opacity: 0.7,\r\n        size: 'medium',\r\n      };\r\n\r\n      const exportedUri = await videoRecordingService.exportVideo(\r\n        videoUri,\r\n        watermarkOptions\r\n      );\r\n\r\n      if (exportedUri) {\r\n        onVideoRecorded(exportedUri);\r\n        \r\n        // Show tier-appropriate message\r\n        if (subscription?.tier === 'free') {\r\n          Alert.alert(\r\n            'Video Recorded!',\r\n            'Your video has been saved with a SpeakSync watermark. Upgrade to Pro to remove watermarks!',\r\n            [\r\n              { text: 'OK' },\r\n              { text: 'Upgrade Now', onPress: () => {/* Navigate to subscription */ } }\r\n            ]\r\n          );\r\n        } else {\r\n          Alert.alert('Video Recorded!', 'Your video has been saved without watermarks.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const getQualityLabel = (quality: string) => {\r\n    switch (quality) {\r\n      case '4k': return '4K UHD';\r\n      case 'high': return '1080p HD';\r\n      case 'medium': return '720p';\r\n      case 'low': return '480p';\r\n      default: return quality;\r\n    }\r\n  };\r\n\r\n  const getAvailableQualities = () => {\r\n    const base = ['low', 'medium'];\r\n    if (subscription?.tier !== 'free') {\r\n      base.push('high');\r\n      if (subscription?.tier === 'studio') {\r\n        base.push('4k');\r\n      }\r\n    }\r\n    return base;\r\n  };\r\n\r\n  if (!isActive || !recordingState.hasPermission) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Surface style={styles.panel}>\r\n        {/* Camera Preview */}\r\n        <View style={styles.cameraContainer}>\r\n          <CameraView\r\n            ref={cameraRef}\r\n            style={styles.camera}\r\n            facing={recordingState.cameraType}\r\n            flash={recordingState.flashMode}\r\n          >\r\n            {/* Recording indicator */}\r\n            {recordingState.isRecording && (\r\n              <View style={styles.recordingIndicator}>\r\n                <View style={styles.recordingDot} />\r\n                <Text style={styles.recordingText}>REC</Text>\r\n              </View>\r\n            )}\r\n\r\n            {/* Camera controls overlay */}\r\n            <View style={styles.cameraControls}>\r\n              <IconButton\r\n                icon=\"camera-flip\"\r\n                iconColor=\"white\"\r\n                size={24}\r\n                onPress={() => videoRecordingService.switchCamera()}\r\n              />\r\n              <IconButton\r\n                icon={recordingState.flashMode === 'off' ? 'flash-off' : 'flash'}\r\n                iconColor=\"white\"\r\n                size={24}\r\n                onPress={() => videoRecordingService.toggleFlash()}\r\n              />\r\n            </View>\r\n          </CameraView>\r\n        </View>\r\n\r\n        {/* Recording controls */}\r\n        <View style={styles.controls}>\r\n          <IconButton\r\n            icon=\"cog\"\r\n            size={24}\r\n            onPress={() => setShowSettings(true)}\r\n            disabled={recordingState.isRecording}\r\n          />\r\n\r\n          {/* Main record button */}\r\n          <IconButton\r\n            icon={recordingState.isRecording ? 'stop' : 'record'}\r\n            iconColor={recordingState.isRecording ? '#ef4444' : '#10b981'}\r\n            size={40}\r\n            style={[\r\n              styles.recordButton,\r\n              recordingState.isRecording && styles.recordingButton\r\n            ]}\r\n            onPress={recordingState.isRecording ? handleStopRecording : handleStartRecording}\r\n            disabled={recordingState.isProcessing}\r\n          />\r\n\r\n          <View style={styles.statusContainer}>\r\n            <Text variant=\"bodySmall\">\r\n              {getQualityLabel(recordingOptions.quality)}\r\n            </Text>\r\n            {subscription?.tier === 'free' && (\r\n              <Chip \r\n                icon=\"watermark\" \r\n                compact \r\n                textStyle={styles.watermarkChip}\r\n              >\r\n                Watermark\r\n              </Chip>\r\n            )}\r\n          </View>\r\n        </View>\r\n\r\n        {/* Processing indicator */}\r\n        {recordingState.isProcessing && (\r\n          <View style={styles.processingContainer}>\r\n            <ProgressBar indeterminate />\r\n            <Text variant=\"bodySmall\" style={styles.processingText}>\r\n              Processing video...\r\n            </Text>\r\n          </View>\r\n        )}\r\n      </Surface>\r\n\r\n      {/* Settings Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showSettings}\r\n          onDismiss={() => setShowSettings(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Video Settings\r\n          </Text>\r\n\r\n          {/* Quality Selection */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\">Quality</Text>\r\n            <View style={styles.qualityButtons}>\r\n              {getAvailableQualities().map((quality) => (\r\n                <Button\r\n                  key={quality}\r\n                  mode={recordingOptions.quality === quality ? 'contained' : 'outlined'}\r\n                  onPress={() => setRecordingOptions(prev => ({ ...prev, quality: quality as any }))}\r\n                  style={styles.qualityButton}\r\n                  compact\r\n                >\r\n                  {getQualityLabel(quality)}\r\n                </Button>\r\n              ))}\r\n            </View>\r\n            {subscription?.tier === 'free' && (\r\n              <Text variant=\"bodySmall\" style={styles.upgradeText}>\r\n                Upgrade to Pro for HD quality and 4K (Studio tier)\r\n              </Text>\r\n            )}\r\n          </View>\r\n\r\n          {/* Audio Recording */}\r\n          <View style={styles.settingGroup}>\r\n            <View style={styles.settingRow}>\r\n              <Text variant=\"titleMedium\">Record Audio</Text>\r\n              <Switch\r\n                value={recordingOptions.enableAudio}\r\n                onValueChange={(value) => \r\n                  setRecordingOptions(prev => ({ ...prev, enableAudio: value }))\r\n                }\r\n              />\r\n            </View>\r\n          </View>\r\n\r\n          {/* Max Duration */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\">Max Duration</Text>\r\n            <Text variant=\"bodyMedium\">\r\n              {subscription?.tier === 'free' \r\n                ? '10 minutes (Free tier)' \r\n                : '60 minutes (Pro/Studio tier)'\r\n              }\r\n            </Text>\r\n          </View>\r\n\r\n          {/* Watermark Info */}\r\n          {subscription?.tier === 'free' && (\r\n            <View style={styles.settingGroup}>\r\n              <Text variant=\"titleMedium\" style={styles.watermarkTitle}>\r\n                Watermark\r\n              </Text>\r\n              <Text variant=\"bodyMedium\">\r\n                Free tier videos include a SpeakSync watermark. \r\n                Upgrade to Pro to remove watermarks.\r\n              </Text>\r\n              <Button\r\n                mode=\"contained\"\r\n                style={styles.upgradeButton}\r\n                onPress={() => {/* Navigate to subscription */}}\r\n              >\r\n                Upgrade Now\r\n              </Button>\r\n            </View>\r\n          )}\r\n\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={() => setShowSettings(false)}\r\n            style={styles.modalCloseButton}\r\n          >\r\n            Done\r\n          </Button>\r\n        </Modal>\r\n      </Portal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'absolute',\r\n    top: 16,\r\n    right: 16,\r\n    zIndex: 1000,\r\n  },\r\n  panel: {\r\n    padding: 8,\r\n    borderRadius: 12,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    minWidth: 200,\r\n  },\r\n  cameraContainer: {\r\n    borderRadius: 8,\r\n    overflow: 'hidden',\r\n    marginBottom: 8,\r\n  },\r\n  camera: {\r\n    width: 160,\r\n    height: 120,\r\n  },\r\n  recordingIndicator: {\r\n    position: 'absolute',\r\n    top: 8,\r\n    left: 8,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(239, 68, 68, 0.9)',\r\n    paddingHorizontal: 8,\r\n    paddingVertical: 4,\r\n    borderRadius: 12,\r\n  },\r\n  recordingDot: {\r\n    width: 8,\r\n    height: 8,\r\n    borderRadius: 4,\r\n    backgroundColor: 'white',\r\n    marginRight: 4,\r\n  },\r\n  recordingText: {\r\n    color: 'white',\r\n    fontSize: 12,\r\n    fontWeight: 'bold',\r\n  },\r\n  cameraControls: {\r\n    position: 'absolute',\r\n    top: 8,\r\n    right: 8,\r\n    flexDirection: 'column',\r\n  },\r\n  controls: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  recordButton: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\r\n  },\r\n  recordingButton: {\r\n    backgroundColor: 'rgba(239, 68, 68, 0.3)',\r\n  },\r\n  statusContainer: {\r\n    alignItems: 'center',\r\n  },\r\n  watermarkChip: {\r\n    fontSize: 10,\r\n  },\r\n  processingContainer: {\r\n    marginTop: 8,\r\n    padding: 8,\r\n  },\r\n  processingText: {\r\n    textAlign: 'center',\r\n    marginTop: 4,\r\n    color: 'white',\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: 'white',\r\n    margin: 20,\r\n    padding: 20,\r\n    borderRadius: 12,\r\n  },\r\n  modalTitle: {\r\n    marginBottom: 16,\r\n    textAlign: 'center',\r\n  },\r\n  settingGroup: {\r\n    marginBottom: 16,\r\n  },\r\n  settingRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  qualityButtons: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n    marginTop: 8,\r\n  },\r\n  qualityButton: {\r\n    minWidth: 80,\r\n  },\r\n  upgradeText: {\r\n    color: '#6366f1',\r\n    marginTop: 4,\r\n  },\r\n  watermarkTitle: {\r\n    color: '#f59e0b',\r\n  },\r\n  upgradeButton: {\r\n    marginTop: 8,\r\n  },\r\n  modalCloseButton: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\VirtualScrollView.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'item' is defined but never used.","line":8,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[312,320],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":8,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[319,334],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'item' is defined but never used.","line":11,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[442,450],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":11,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[449,464],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[497,500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[497,500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[529,532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[529,532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":34,"column":24,"nodeType":"Identifier","endLine":34,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1134,1137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1134,1137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2802,2805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2802,2805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo, useRef, useCallback } from 'react';\r\nimport { View, ScrollView, StyleSheet } from 'react-native';\r\nimport { performanceOptimizer } from '../services/performanceOptimizer';\r\n\r\ninterface VirtualScrollViewProps<T> {\r\n  data: T[];\r\n  itemHeight: number;\r\n  renderItem: (item: T, index: number) => React.ReactElement;\r\n  onEndReached?: () => void;\r\n  onEndReachedThreshold?: number;\r\n  keyExtractor: (item: T, index: number) => string;\r\n  containerStyle?: any;\r\n  contentContainerStyle?: any;\r\n  overscan?: number;\r\n}\r\n\r\nexport function VirtualScrollView<T>({\r\n  data,\r\n  itemHeight,\r\n  renderItem,\r\n  onEndReached,\r\n  onEndReachedThreshold = 0.7,\r\n  keyExtractor,\r\n  containerStyle,\r\n  contentContainerStyle,\r\n  overscan = 5,\r\n}: VirtualScrollViewProps<T>) {\r\n  const [containerHeight, setContainerHeight] = useState(0);\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n  const scrollViewRef = useRef<ScrollView>(null);\r\n  const lastEndReachedCall = useRef(0);\r\n\r\n  // Throttled scroll handler for performance\r\n  const handleScroll = useCallback(\r\n    performanceOptimizer.throttle((event: any) => {\r\n      const newScrollTop = event.nativeEvent.contentOffset.y;\r\n      setScrollTop(newScrollTop);\r\n\r\n      // Check if we need to load more data\r\n      if (onEndReached && data.length > 0) {\r\n        const totalHeight = data.length * itemHeight;\r\n        const scrollPosition = newScrollTop + containerHeight;\r\n        const threshold = totalHeight * onEndReachedThreshold;\r\n\r\n        if (scrollPosition >= threshold) {\r\n          const now = Date.now();\r\n          if (now - lastEndReachedCall.current > 1000) { // Debounce by 1 second\r\n            lastEndReachedCall.current = now;\r\n            onEndReached();\r\n          }\r\n        }\r\n      }\r\n    }, 16), // ~60fps\r\n    [containerHeight, itemHeight, data.length, onEndReached, onEndReachedThreshold]\r\n  );\r\n\r\n  // Calculate visible items using the performance optimizer\r\n  const visibleItems = useMemo(() => {\r\n    if (!containerHeight || !itemHeight || data.length === 0) {\r\n      return { items: [], offsetY: 0, totalHeight: 0 };\r\n    }\r\n\r\n    const scrollData = performanceOptimizer.calculateVirtualScrollItems(\r\n      containerHeight,\r\n      itemHeight,\r\n      scrollTop,\r\n      data.length,\r\n      overscan\r\n    );\r\n\r\n    const items = data\r\n      .slice(scrollData.start, scrollData.end + 1)\r\n      .map((item, index) => ({\r\n        item,\r\n        index: scrollData.start + index,\r\n        key: keyExtractor(item, scrollData.start + index),\r\n      }));\r\n\r\n    return {\r\n      items,\r\n      offsetY: scrollData.offsetY,\r\n      totalHeight: data.length * itemHeight,\r\n    };\r\n  }, [data, itemHeight, scrollTop, containerHeight, overscan, keyExtractor]);\r\n\r\n  const handleLayout = useCallback((event: any) => {\r\n    setContainerHeight(event.nativeEvent.layout.height);\r\n  }, []);\r\n\r\n  return (\r\n    <View style={[styles.container, containerStyle]} onLayout={handleLayout}>\r\n      <ScrollView\r\n        ref={scrollViewRef}\r\n        style={styles.scrollView}\r\n        contentContainerStyle={[\r\n          {\r\n            height: visibleItems.totalHeight,\r\n            paddingTop: visibleItems.offsetY,\r\n          },\r\n          contentContainerStyle,\r\n        ]}\r\n        onScroll={handleScroll}\r\n        scrollEventThrottle={16}\r\n        showsVerticalScrollIndicator={true}\r\n        removeClippedSubviews={true}\r\n      >\r\n        <View style={{ height: visibleItems.totalHeight - visibleItems.offsetY }}>\r\n          {visibleItems.items.map(({ item, index, key }) => (\r\n            <View key={key} style={{ height: itemHeight }}>\r\n              {renderItem(item, index)}\r\n            </View>\r\n          ))}\r\n        </View>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n}\r\n\r\n// Memoized version for better performance\r\nexport const MemoizedVirtualScrollView = React.memo(VirtualScrollView) as typeof VirtualScrollView;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  scrollView: {\r\n    flex: 1,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\AnalyticsFilters.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":18,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[392,417],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-redeclare","severity":2,"message":"'AnalyticsFilters' is already defined.","line":22,"column":17,"nodeType":"Identifier","messageId":"redeclared","endLine":22,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Button,\r\n  TextInput,\r\n  Card,\r\n} from 'react-native-paper';\r\nimport DatePicker from 'react-native-date-picker';\r\nimport { AnalyticsFilters } from '../../types';\r\n\r\ninterface AnalyticsFiltersProps {\r\n  currentFilters: AnalyticsFilters;\r\n  onApplyFilters: (filters: AnalyticsFilters) => void;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function AnalyticsFilters({\r\n  currentFilters,\r\n  onApplyFilters,\r\n  onClose,\r\n}: AnalyticsFiltersProps) {\r\n  const [filters, setFilters] = useState<AnalyticsFilters>(currentFilters);\r\n  const [showStartDatePicker, setShowStartDatePicker] = useState(false);\r\n  const [showEndDatePicker, setShowEndDatePicker] = useState(false);\r\n\r\n  const handleApply = () => {\r\n    onApplyFilters(filters);\r\n    onClose();\r\n  };\r\n\r\n  const handleClear = () => {\r\n    setFilters({});\r\n  };\r\n\r\n  const handleWPMMinChange = (text: string) => {\r\n    const min = parseInt(text) || undefined;\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      wpmRange: min !== undefined \r\n        ? { ...prev.wpmRange, min } \r\n        : prev.wpmRange?.max \r\n          ? { max: prev.wpmRange.max } \r\n          : undefined,\r\n    }));\r\n  };\r\n\r\n  const handleWPMMaxChange = (text: string) => {\r\n    const max = parseInt(text) || undefined;\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      wpmRange: max !== undefined \r\n        ? { ...prev.wpmRange, max } \r\n        : prev.wpmRange?.min \r\n          ? { min: prev.wpmRange.min } \r\n          : undefined,\r\n    }));\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text variant=\"headlineSmall\" style={styles.title}>\r\n          Filter Analytics\r\n        </Text>\r\n      </View>\r\n\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Date Range\r\n          </Text>\r\n          \r\n          <View style={styles.dateSection}>\r\n            <View style={styles.dateInput}>\r\n              <Text variant=\"labelMedium\">Start Date</Text>\r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={() => setShowStartDatePicker(true)}\r\n                style={styles.dateButton}\r\n              >\r\n                {filters.dateRange?.start ? formatDate(filters.dateRange.start) : 'Select Start Date'}\r\n              </Button>\r\n            </View>\r\n\r\n            <View style={styles.dateInput}>\r\n              <Text variant=\"labelMedium\">End Date</Text>\r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={() => setShowEndDatePicker(true)}\r\n                style={styles.dateButton}\r\n              >\r\n                {filters.dateRange?.end ? formatDate(filters.dateRange.end) : 'Select End Date'}\r\n              </Button>\r\n            </View>\r\n          </View>\r\n\r\n          {filters.dateRange && (\r\n            <Button\r\n              mode=\"text\"\r\n              onPress={() => setFilters(prev => ({ ...prev, dateRange: undefined }))}\r\n              style={styles.clearButton}\r\n            >\r\n              Clear Date Range\r\n            </Button>\r\n          )}\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Performance Range\r\n          </Text>\r\n          \r\n          <View style={styles.rangeSection}>\r\n            <View style={styles.rangeInput}>\r\n              <TextInput\r\n                label=\"Min WPM\"\r\n                value={filters.wpmRange?.min?.toString() || ''}\r\n                onChangeText={handleWPMMinChange}\r\n                keyboardType=\"numeric\"\r\n                mode=\"outlined\"\r\n                style={styles.textInput}\r\n              />\r\n            </View>\r\n\r\n            <View style={styles.rangeInput}>\r\n              <TextInput\r\n                label=\"Max WPM\"\r\n                value={filters.wpmRange?.max?.toString() || ''}\r\n                onChangeText={handleWPMMaxChange}\r\n                keyboardType=\"numeric\"\r\n                mode=\"outlined\"\r\n                style={styles.textInput}\r\n              />\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Session Duration\r\n          </Text>\r\n          \r\n          <View style={styles.rangeSection}>\r\n            <View style={styles.rangeInput}>\r\n              <TextInput\r\n                label=\"Min Duration (minutes)\"\r\n                value={filters.minDuration ? (filters.minDuration / 60000).toString() : ''}\r\n                onChangeText={(text) => {\r\n                  const minutes = parseInt(text) || undefined;\r\n                  setFilters(prev => ({\r\n                    ...prev,\r\n                    minDuration: minutes ? minutes * 60000 : undefined,\r\n                  }));\r\n                }}\r\n                keyboardType=\"numeric\"\r\n                mode=\"outlined\"\r\n                style={styles.textInput}\r\n              />\r\n            </View>\r\n\r\n            <View style={styles.rangeInput}>\r\n              <TextInput\r\n                label=\"Max Duration (minutes)\"\r\n                value={filters.maxDuration ? (filters.maxDuration / 60000).toString() : ''}\r\n                onChangeText={(text) => {\r\n                  const minutes = parseInt(text) || undefined;\r\n                  setFilters(prev => ({\r\n                    ...prev,\r\n                    maxDuration: minutes ? minutes * 60000 : undefined,\r\n                  }));\r\n                }}\r\n                keyboardType=\"numeric\"\r\n                mode=\"outlined\"\r\n                style={styles.textInput}\r\n              />\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Apply/Cancel buttons */}\r\n      <View style={styles.actions}>\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={handleClear}\r\n          style={styles.actionButton}\r\n        >\r\n          Clear All\r\n        </Button>\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={onClose}\r\n          style={styles.actionButton}\r\n        >\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          mode=\"contained\"\r\n          onPress={handleApply}\r\n          style={styles.actionButton}\r\n        >\r\n          Apply Filters\r\n        </Button>\r\n      </View>\r\n\r\n      {/* Date Picker Modals */}\r\n      <DatePicker\r\n        modal\r\n        open={showStartDatePicker}\r\n        date={filters.dateRange?.start || new Date()}\r\n        mode=\"date\"\r\n        onConfirm={(date) => {\r\n          setFilters(prev => ({\r\n            ...prev,\r\n            dateRange: {\r\n              start: date,\r\n              end: prev.dateRange?.end || new Date(),\r\n            },\r\n          }));\r\n          setShowStartDatePicker(false);\r\n        }}\r\n        onCancel={() => setShowStartDatePicker(false)}\r\n      />\r\n\r\n      <DatePicker\r\n        modal\r\n        open={showEndDatePicker}\r\n        date={filters.dateRange?.end || new Date()}\r\n        mode=\"date\"\r\n        onConfirm={(date) => {\r\n          setFilters(prev => ({\r\n            ...prev,\r\n            dateRange: {\r\n              start: prev.dateRange?.start || new Date(),\r\n              end: date,\r\n            },\r\n          }));\r\n          setShowEndDatePicker(false);\r\n        }}\r\n        onCancel={() => setShowEndDatePicker(false)}\r\n      />\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    padding: 20,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e5e7eb',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  section: {\r\n    margin: 16,\r\n    marginBottom: 8,\r\n  },\r\n  sectionTitle: {\r\n    marginBottom: 16,\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  dateSection: {\r\n    gap: 12,\r\n  },\r\n  dateInput: {\r\n    gap: 8,\r\n  },\r\n  dateButton: {\r\n    justifyContent: 'flex-start',\r\n  },\r\n  clearButton: {\r\n    marginTop: 8,\r\n    alignSelf: 'flex-start',\r\n  },\r\n  rangeSection: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n  },\r\n  rangeInput: {\r\n    flex: 1,\r\n  },\r\n  textInput: {\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  actions: {\r\n    flexDirection: 'row',\r\n    padding: 20,\r\n    gap: 12,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  actionButton: {\r\n    minWidth: 80,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\ExportOptions.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[185,197],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":10},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":54,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":54,"endColumn":33,"fix":{"range":[1603,1610],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":86,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":20,"suggestions":[{"fix":{"range":[2506,2544],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3784,3787],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3784,3787],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Alert,\r\n  Share,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Button,\r\n  Card,\r\n  RadioButton,\r\n  Checkbox,\r\n  Divider,\r\n  ActivityIndicator,\r\n} from 'react-native-paper';\r\nimport { SessionReport, AnalyticsFilters, AnalyticsExportOptions } from '../../types';\r\nimport { analyticsService } from '../../services/analyticsService';\r\nimport { useScriptStore } from '../../store/scriptStore';\r\n\r\ninterface ExportOptionsProps {\r\n  sessions: SessionReport[];\r\n  filters: AnalyticsFilters;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function ExportOptions({ sessions, filters, onClose }: ExportOptionsProps) {\r\n  const { authState } = useScriptStore();\r\n  const [exportFormat, setExportFormat] = useState<'csv' | 'json' | 'pdf' | 'excel'>('csv');\r\n  const [selectedSessions, setSelectedSessions] = useState<string[]>([]);\r\n  const [includeCharts, setIncludeCharts] = useState(true);\r\n  const [includeSummary, setIncludeSummary] = useState(true);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  const handleSessionToggle = (sessionId: string) => {\r\n    setSelectedSessions(prev => {\r\n      if (prev.includes(sessionId)) {\r\n        return prev.filter(id => id !== sessionId);\r\n      } else {\r\n        return [...prev, sessionId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedSessions.length === sessions.length) {\r\n      setSelectedSessions([]);\r\n    } else {\r\n      setSelectedSessions(sessions.map(s => s.id));\r\n    }\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    if (!authState.user) return;\r\n    \r\n    if (selectedSessions.length === 0) {\r\n      Alert.alert('No Sessions Selected', 'Please select at least one session to export.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsExporting(true);\r\n\r\n      const exportOptions: AnalyticsExportOptions = {\r\n        format: exportFormat,\r\n        sessionIds: selectedSessions,\r\n        ...(filters.dateRange && { dateRange: filters.dateRange }),\r\n        includeCharts,\r\n        includeSummary,\r\n      };\r\n\r\n      const exportData = await analyticsService.exportSessions(\r\n        authState.user.uid,\r\n        exportOptions\r\n      );\r\n\r\n      // For now, share the data as text\r\n      // In production, you'd save to file system and share file\r\n      await Share.share({\r\n        message: exportData,\r\n        title: `SpeakSync Analytics Export - ${exportFormat.toUpperCase()}`,\r\n      });\r\n\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Export error:', error);\r\n      Alert.alert('Export Failed', 'There was an error exporting your data. Please try again.');\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const formatOptions = [\r\n    { value: 'csv', label: 'CSV (Spreadsheet)', description: 'Compatible with Excel, Google Sheets' },\r\n    { value: 'json', label: 'JSON (Data)', description: 'Raw data format for developers' },\r\n    { value: 'pdf', label: 'PDF (Report)', description: 'Formatted report with charts' },\r\n    { value: 'excel', label: 'Excel (Workbook)', description: 'Native Excel format' },\r\n  ] as const;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text variant=\"headlineSmall\" style={styles.title}>\r\n          Export Analytics\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.subtitle}>\r\n          Export your analytics data for external analysis\r\n        </Text>\r\n      </View>\r\n\r\n      {/* Format Selection */}\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Export Format\r\n          </Text>\r\n          \r\n          <RadioButton.Group\r\n            onValueChange={(value) => setExportFormat(value as any)}\r\n            value={exportFormat}\r\n          >\r\n            {formatOptions.map((option) => (\r\n              <View key={option.value} style={styles.radioOption}>\r\n                <RadioButton.Item\r\n                  label={option.label}\r\n                  value={option.value}\r\n                  style={styles.radioItem}\r\n                />\r\n                <Text variant=\"bodySmall\" style={styles.optionDescription}>\r\n                  {option.description}\r\n                </Text>\r\n              </View>\r\n            ))}\r\n          </RadioButton.Group>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Session Selection */}\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <View style={styles.sectionHeader}>\r\n            <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n              Select Sessions\r\n            </Text>\r\n            <Button\r\n              mode=\"text\"\r\n              compact\r\n              onPress={handleSelectAll}\r\n            >\r\n              {selectedSessions.length === sessions.length ? 'Deselect All' : 'Select All'}\r\n            </Button>\r\n          </View>\r\n\r\n          <Text variant=\"bodySmall\" style={styles.selectionInfo}>\r\n            {selectedSessions.length} of {sessions.length} sessions selected\r\n          </Text>\r\n\r\n          <View style={styles.sessionsList}>\r\n            {sessions.slice(0, 10).map((session) => (\r\n              <View key={session.id} style={styles.sessionItem}>\r\n                <Checkbox\r\n                  status={selectedSessions.includes(session.id) ? 'checked' : 'unchecked'}\r\n                  onPress={() => handleSessionToggle(session.id)}\r\n                />\r\n                <View style={styles.sessionInfo}>\r\n                  <Text variant=\"bodyMedium\" style={styles.sessionTitle}>\r\n                    {session.scriptTitle}\r\n                  </Text>\r\n                  <Text variant=\"bodySmall\" style={styles.sessionDate}>\r\n                    {session.startTime.toLocaleDateString()}\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n            ))}\r\n            \r\n            {sessions.length > 10 && (\r\n              <Text variant=\"bodySmall\" style={styles.moreInfo}>\r\n                + {sessions.length - 10} more sessions\r\n              </Text>\r\n            )}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Export Options */}\r\n      <Card style={styles.section}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Include Options\r\n          </Text>\r\n\r\n          <View style={styles.checkboxOption}>\r\n            <Checkbox\r\n              status={includeSummary ? 'checked' : 'unchecked'}\r\n              onPress={() => setIncludeSummary(!includeSummary)}\r\n            />\r\n            <View style={styles.checkboxText}>\r\n              <Text variant=\"bodyMedium\">Summary Statistics</Text>\r\n              <Text variant=\"bodySmall\" style={styles.optionDescription}>\r\n                Overall performance metrics and trends\r\n              </Text>\r\n            </View>\r\n          </View>\r\n\r\n          <View style={styles.checkboxOption}>\r\n            <Checkbox\r\n              status={includeCharts ? 'checked' : 'unchecked'}\r\n              onPress={() => setIncludeCharts(!includeCharts)}\r\n            />\r\n            <View style={styles.checkboxText}>\r\n              <Text variant=\"bodyMedium\">Charts and Graphs</Text>\r\n              <Text variant=\"bodySmall\" style={styles.optionDescription}>\r\n                Visual charts (PDF format only)\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Actions */}\r\n      <View style={styles.actions}>\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={onClose}\r\n          style={styles.actionButton}\r\n          disabled={isExporting}\r\n        >\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          mode=\"contained\"\r\n          onPress={handleExport}\r\n          style={styles.actionButton}\r\n          disabled={isExporting || selectedSessions.length === 0}\r\n        >\r\n          {isExporting ? (\r\n            <ActivityIndicator size=\"small\" color=\"#ffffff\" />\r\n          ) : (\r\n            'Export'\r\n          )}\r\n        </Button>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    padding: 20,\r\n    alignItems: 'center',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e5e7eb',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  subtitle: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  section: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  sectionHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  sectionTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 12,\r\n  },\r\n  radioOption: {\r\n    marginBottom: 8,\r\n  },\r\n  radioItem: {\r\n    paddingVertical: 0,\r\n  },\r\n  optionDescription: {\r\n    color: '#6b7280',\r\n    marginLeft: 40,\r\n    marginTop: -8,\r\n    marginBottom: 8,\r\n  },\r\n  selectionInfo: {\r\n    color: '#6b7280',\r\n    marginBottom: 12,\r\n  },\r\n  sessionsList: {\r\n    maxHeight: 200,\r\n  },\r\n  sessionItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    paddingVertical: 8,\r\n  },\r\n  sessionInfo: {\r\n    marginLeft: 8,\r\n    flex: 1,\r\n  },\r\n  sessionTitle: {\r\n    fontWeight: '500',\r\n    color: '#1f2937',\r\n  },\r\n  sessionDate: {\r\n    color: '#6b7280',\r\n  },\r\n  moreInfo: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    fontStyle: 'italic',\r\n    marginTop: 8,\r\n  },\r\n  checkboxOption: {\r\n    flexDirection: 'row',\r\n    alignItems: 'flex-start',\r\n    marginBottom: 16,\r\n  },\r\n  checkboxText: {\r\n    marginLeft: 8,\r\n    flex: 1,\r\n  },\r\n  actions: {\r\n    flexDirection: 'row',\r\n    padding: 20,\r\n    gap: 12,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  actionButton: {\r\n    minWidth: 100,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\PerformanceSummary.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Surface"},"fix":{"range":[127,139],"text":""},"desc":"Remove unused variable 'Surface'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":30,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":30,"endColumn":32,"fix":{"range":[716,728],"text":"{return '';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":31,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":31,"endColumn":33,"fix":{"range":[750,762],"text":"{return '';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":36,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":36,"endColumn":37,"fix":{"range":[855,872],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":37,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":37,"endColumn":38,"fix":{"range":[894,911],"text":"{return '#ef4444';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":42,"column":22,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":42,"endColumn":39,"fix":{"range":[1011,1028],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":43,"column":22,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":43,"endColumn":39,"fix":{"range":[1051,1068],"text":"{return '#f59e0b';}"}}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":6,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n} from 'react-native';\r\nimport {\r\n  Card,\r\n  Text,\r\n  ProgressBar,\r\n  Surface,\r\n} from 'react-native-paper';\r\nimport { AnalyticsSummary } from '../../types';\r\n\r\ninterface PerformanceSummaryProps {\r\n  summary: AnalyticsSummary;\r\n}\r\n\r\nexport function PerformanceSummary({ summary }: PerformanceSummaryProps) {\r\n  const formatTime = (milliseconds: number) => {\r\n    const hours = Math.floor(milliseconds / 3600000);\r\n    const minutes = Math.floor((milliseconds % 3600000) / 60000);\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes}m`;\r\n    }\r\n    return `${minutes}m`;\r\n  };\r\n\r\n  const getTrendIcon = (trend: number) => {\r\n    if (trend > 5) return '';\r\n    if (trend < -5) return '';\r\n    return '';\r\n  };\r\n\r\n  const getTrendColor = (trend: number) => {\r\n    if (trend > 5) return '#10b981';\r\n    if (trend < -5) return '#ef4444';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= 80) return '#10b981';\r\n    if (score >= 60) return '#f59e0b';\r\n    return '#ef4444';\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Main Performance Card */}\r\n      <Card style={styles.performanceCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleLarge\" style={styles.cardTitle}>\r\n            Performance Overview\r\n          </Text>\r\n          \r\n          <View style={styles.metricsRow}>\r\n            <View style={styles.metricBox}>\r\n              <Text variant=\"headlineMedium\" style={styles.metricValue}>\r\n                {summary.totalSessions}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Total Sessions\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.metricBox}>\r\n              <Text variant=\"headlineMedium\" style={styles.metricValue}>\r\n                {formatTime(summary.totalPracticeTime)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Practice Time\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.metricBox}>\r\n              <Text variant=\"headlineMedium\" style={styles.metricValue}>\r\n                {summary.averageWPM.toFixed(0)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Avg WPM\r\n              </Text>\r\n            </View>\r\n          </View>\r\n\r\n          <View style={styles.trendsSection}>\r\n            <View style={styles.trendItem}>\r\n              <View style={styles.trendHeader}>\r\n                <Text variant=\"bodyMedium\" style={styles.trendLabel}>\r\n                  Speaking Pace\r\n                </Text>\r\n                <Text style={{ fontSize: 16 }}>\r\n                  {getTrendIcon(summary.improvementTrend)}\r\n                </Text>\r\n              </View>\r\n              <Text \r\n                variant=\"titleMedium\" \r\n                style={[\r\n                  styles.trendValue,\r\n                  { color: getTrendColor(summary.improvementTrend) }\r\n                ]}\r\n              >\r\n                {summary.improvementTrend > 0 ? '+' : ''}{summary.improvementTrend.toFixed(1)}%\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.trendItem}>\r\n              <View style={styles.trendHeader}>\r\n                <Text variant=\"bodyMedium\" style={styles.trendLabel}>\r\n                  Filler Words\r\n                </Text>\r\n                <Text style={{ fontSize: 16 }}>\r\n                  {getTrendIcon(-summary.fillerWordTrend)}\r\n                </Text>\r\n              </View>\r\n              <Text \r\n                variant=\"titleMedium\" \r\n                style={[\r\n                  styles.trendValue,\r\n                  { color: getTrendColor(-summary.fillerWordTrend) }\r\n                ]}\r\n              >\r\n                {summary.fillerWordTrend > 0 ? '+' : ''}{summary.fillerWordTrend.toFixed(1)}%\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Performance Scores */}\r\n      <Card style={styles.scoresCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Performance Scores\r\n          </Text>\r\n\r\n          <View style={styles.scoreItem}>\r\n            <View style={styles.scoreHeader}>\r\n              <Text variant=\"bodyMedium\">Consistency</Text>\r\n              <Text \r\n                variant=\"titleSmall\" \r\n                style={[\r\n                  styles.scoreValue,\r\n                  { color: getScoreColor(summary.performanceMetrics.consistency) }\r\n                ]}\r\n              >\r\n                {summary.performanceMetrics.consistency.toFixed(0)}%\r\n              </Text>\r\n            </View>\r\n            <ProgressBar\r\n              progress={summary.performanceMetrics.consistency / 100}\r\n              color={getScoreColor(summary.performanceMetrics.consistency)}\r\n              style={styles.progressBar}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.scoreItem}>\r\n            <View style={styles.scoreHeader}>\r\n              <Text variant=\"bodyMedium\">Accuracy</Text>\r\n              <Text \r\n                variant=\"titleSmall\" \r\n                style={[\r\n                  styles.scoreValue,\r\n                  { color: getScoreColor(summary.performanceMetrics.accuracy) }\r\n                ]}\r\n              >\r\n                {summary.performanceMetrics.accuracy.toFixed(0)}%\r\n              </Text>\r\n            </View>\r\n            <ProgressBar\r\n              progress={summary.performanceMetrics.accuracy / 100}\r\n              color={getScoreColor(summary.performanceMetrics.accuracy)}\r\n              style={styles.progressBar}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.scoreItem}>\r\n            <View style={styles.scoreHeader}>\r\n              <Text variant=\"bodyMedium\">Fluency</Text>\r\n              <Text \r\n                variant=\"titleSmall\" \r\n                style={[\r\n                  styles.scoreValue,\r\n                  { color: getScoreColor(summary.performanceMetrics.fluency) }\r\n                ]}\r\n              >\r\n                {summary.performanceMetrics.fluency.toFixed(0)}%\r\n              </Text>\r\n            </View>\r\n            <ProgressBar\r\n              progress={summary.performanceMetrics.fluency / 100}\r\n              color={getScoreColor(summary.performanceMetrics.fluency)}\r\n              style={styles.progressBar}\r\n            />\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Most Practiced Script */}\r\n      {summary.mostPracticedScript.sessionCount > 0 && (\r\n        <Card style={styles.scriptCard}>\r\n          <Card.Content>\r\n            <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n              Most Practiced Script\r\n            </Text>\r\n            <View style={styles.scriptInfo}>\r\n              <Text variant=\"bodyLarge\" style={styles.scriptTitle}>\r\n                {summary.mostPracticedScript.title}\r\n              </Text>\r\n              <Text variant=\"bodyMedium\" style={styles.scriptSessions}>\r\n                {summary.mostPracticedScript.sessionCount} session\r\n                {summary.mostPracticedScript.sessionCount > 1 ? 's' : ''}\r\n              </Text>\r\n            </View>\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    gap: 16,\r\n  },\r\n  performanceCard: {\r\n    elevation: 2,\r\n  },\r\n  scoresCard: {\r\n    elevation: 2,\r\n  },\r\n  scriptCard: {\r\n    elevation: 2,\r\n  },\r\n  cardTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 16,\r\n  },\r\n  metricsRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 20,\r\n  },\r\n  metricBox: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  metricValue: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n    marginBottom: 4,\r\n  },\r\n  metricLabel: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  trendsSection: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    paddingTop: 16,\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#e5e7eb',\r\n  },\r\n  trendItem: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  trendHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 4,\r\n    gap: 8,\r\n  },\r\n  trendLabel: {\r\n    color: '#6b7280',\r\n  },\r\n  trendValue: {\r\n    fontWeight: 'bold',\r\n  },\r\n  scoreItem: {\r\n    marginBottom: 16,\r\n  },\r\n  scoreHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  scoreValue: {\r\n    fontWeight: 'bold',\r\n  },\r\n  progressBar: {\r\n    height: 8,\r\n    borderRadius: 4,\r\n  },\r\n  scriptInfo: {\r\n    alignItems: 'center',\r\n  },\r\n  scriptTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n    textAlign: 'center',\r\n  },\r\n  scriptSessions: {\r\n    color: '#6b7280',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\SessionComparison.tsx","messages":[{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":37,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":37,"endColumn":38,"fix":{"range":[841,858],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":38,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":38,"endColumn":37,"fix":{"range":[888,905],"text":"{return '#f59e0b';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":39,"column":22,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":39,"endColumn":39,"fix":{"range":[938,955],"text":"{return '#f97316';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":44,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":44,"endColumn":32,"fix":{"range":[1072,1084],"text":"{return '';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":45,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":45,"endColumn":33,"fix":{"range":[1106,1118],"text":"{return '';}"}}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":5,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  View,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  Button,\r\n  Surface,\r\n  Divider,\r\n  Chip,\r\n} from 'react-native-paper';\r\nimport { LineChart } from 'react-native-chart-kit';\r\nimport { ComparisonAnalytics } from '../../types';\r\n\r\nconst { width: screenWidth } = Dimensions.get('window');\r\n\r\ninterface SessionComparisonProps {\r\n  comparison: ComparisonAnalytics;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function SessionComparison({ comparison, onClose }: SessionComparisonProps) {\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const getProgressColor = (value: number) => {\r\n    if (value > 10) return '#10b981'; // Green\r\n    if (value > 0) return '#f59e0b'; // Yellow\r\n    if (value > -10) return '#f97316'; // Orange\r\n    return '#ef4444'; // Red\r\n  };\r\n\r\n  const getProgressIcon = (value: number) => {\r\n    if (value > 5) return '';\r\n    if (value < -5) return '';\r\n    return '';\r\n  };\r\n\r\n  // Chart configuration\r\n  const chartConfig = {\r\n    backgroundColor: '#ffffff',\r\n    backgroundGradientFrom: '#ffffff',\r\n    backgroundGradientTo: '#ffffff',\r\n    decimalPlaces: 1,\r\n    color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n    labelColor: (opacity = 1) => `rgba(31, 41, 55, ${opacity})`,\r\n    style: {\r\n      borderRadius: 16,\r\n    },\r\n    propsForDots: {\r\n      r: '4',\r\n      strokeWidth: '2',\r\n      stroke: '#6366f1',\r\n    },\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text variant=\"headlineSmall\" style={styles.title}>\r\n          Session Comparison\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.subtitle}>\r\n          Comparing {comparison.sessions.length} sessions\r\n        </Text>\r\n      </View>\r\n\r\n      {/* Progress Metrics */}\r\n      <Card style={styles.metricsCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Progress Metrics\r\n          </Text>\r\n\r\n          <View style={styles.metricsGrid}>\r\n            <View style={styles.metricItem}>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                WPM Progress\r\n              </Text>\r\n              <View style={styles.metricValue}>\r\n                <Text style={{ fontSize: 20 }}>\r\n                  {getProgressIcon(comparison.metrics.wpmProgress)}\r\n                </Text>\r\n                <Text \r\n                  variant=\"titleMedium\" \r\n                  style={[\r\n                    styles.metricNumber,\r\n                    { color: getProgressColor(comparison.metrics.wpmProgress) }\r\n                  ]}\r\n                >\r\n                  {comparison.metrics.wpmProgress > 0 ? '+' : ''}\r\n                  {comparison.metrics.wpmProgress.toFixed(1)}%\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n            <View style={styles.metricItem}>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Filler Words\r\n              </Text>\r\n              <View style={styles.metricValue}>\r\n                <Text style={{ fontSize: 20 }}>\r\n                  {getProgressIcon(comparison.metrics.fillerWordImprovement)}\r\n                </Text>\r\n                <Text \r\n                  variant=\"titleMedium\" \r\n                  style={[\r\n                    styles.metricNumber,\r\n                    { color: getProgressColor(comparison.metrics.fillerWordImprovement) }\r\n                  ]}\r\n                >\r\n                  {comparison.metrics.fillerWordImprovement > 0 ? '+' : ''}\r\n                  {comparison.metrics.fillerWordImprovement.toFixed(1)}%\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n            <View style={styles.metricItem}>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Adherence\r\n              </Text>\r\n              <View style={styles.metricValue}>\r\n                <Text style={{ fontSize: 20 }}>\r\n                  {getProgressIcon(comparison.metrics.adherenceImprovement)}\r\n                </Text>\r\n                <Text \r\n                  variant=\"titleMedium\" \r\n                  style={[\r\n                    styles.metricNumber,\r\n                    { color: getProgressColor(comparison.metrics.adherenceImprovement) }\r\n                  ]}\r\n                >\r\n                  {comparison.metrics.adherenceImprovement > 0 ? '+' : ''}\r\n                  {comparison.metrics.adherenceImprovement.toFixed(1)}%\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n            <View style={styles.metricItem}>\r\n              <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                Consistency\r\n              </Text>\r\n              <View style={styles.metricValue}>\r\n                <Text variant=\"titleMedium\" style={styles.metricNumber}>\r\n                  {comparison.metrics.consistencyScore.toFixed(0)}%\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* WPM Trend Chart */}\r\n      <Card style={styles.chartCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            WPM Trend\r\n          </Text>\r\n          <LineChart\r\n            data={{\r\n              labels: comparison.trends.wpm.map((_, index) => `S${index + 1}`),\r\n              datasets: [{\r\n                data: comparison.trends.wpm.map(point => point.value),\r\n                color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n                strokeWidth: 3,\r\n              }],\r\n            }}\r\n            width={screenWidth - 80}\r\n            height={200}\r\n            chartConfig={chartConfig}\r\n            bezier\r\n            style={styles.chart}\r\n          />\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Filler Words Trend Chart */}\r\n      <Card style={styles.chartCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Filler Words Trend\r\n          </Text>\r\n          <LineChart\r\n            data={{\r\n              labels: comparison.trends.fillerWords.map((_, index) => `S${index + 1}`),\r\n              datasets: [{\r\n                data: comparison.trends.fillerWords.map(point => point.value),\r\n                color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\r\n                strokeWidth: 3,\r\n              }],\r\n            }}\r\n            width={screenWidth - 80}\r\n            height={200}\r\n            chartConfig={{\r\n              ...chartConfig,\r\n              color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\r\n            }}\r\n            bezier\r\n            style={styles.chart}\r\n          />\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Session Details */}\r\n      <Card style={styles.sessionsCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Sessions Compared\r\n          </Text>\r\n          {comparison.sessions.map((session, index) => (\r\n            <View key={session.id}>\r\n              <Surface style={styles.sessionItem}>\r\n                <View style={styles.sessionHeader}>\r\n                  <Text variant=\"bodyLarge\" style={styles.sessionTitle}>\r\n                    {session.scriptTitle}\r\n                  </Text>\r\n                  <Text variant=\"bodySmall\" style={styles.sessionDate}>\r\n                    {formatDate(session.startTime)}\r\n                  </Text>\r\n                </View>\r\n                \r\n                <View style={styles.sessionMetrics}>\r\n                  <Chip mode=\"outlined\" style={styles.sessionChip}>\r\n                    {session.averageWPM.toFixed(0)} WPM\r\n                  </Chip>\r\n                  <Chip mode=\"outlined\" style={styles.sessionChip}>\r\n                    {session.fillerWordAnalysis.fillerRate.toFixed(1)} filler/min\r\n                  </Chip>\r\n                  <Chip mode=\"outlined\" style={styles.sessionChip}>\r\n                    {session.scriptAdherence.adherencePercentage.toFixed(1)}% adherence\r\n                  </Chip>\r\n                </View>\r\n              </Surface>\r\n              {index < comparison.sessions.length - 1 && <Divider style={styles.divider} />}\r\n            </View>\r\n          ))}\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Insights */}\r\n      {comparison.insights && comparison.insights.length > 0 && (\r\n        <Card style={styles.insightsCard}>\r\n          <Card.Content>\r\n            <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n              Insights\r\n            </Text>\r\n            {comparison.insights.map((insight, index) => (\r\n              <Text key={index} variant=\"bodyMedium\" style={styles.insight}>\r\n                 {insight}\r\n              </Text>\r\n            ))}\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Recommendations */}\r\n      {comparison.recommendations && comparison.recommendations.length > 0 && (\r\n        <Card style={styles.recommendationsCard}>\r\n          <Card.Content>\r\n            <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n              Recommendations\r\n            </Text>\r\n            {comparison.recommendations.map((recommendation, index) => (\r\n              <Text key={index} variant=\"bodyMedium\" style={styles.recommendation}>\r\n                 {recommendation}\r\n              </Text>\r\n            ))}\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Close Button */}\r\n      <View style={styles.actions}>\r\n        <Button\r\n          mode=\"contained\"\r\n          onPress={onClose}\r\n          style={styles.closeButton}\r\n        >\r\n          Close Comparison\r\n        </Button>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    padding: 20,\r\n    alignItems: 'center',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e5e7eb',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  subtitle: {\r\n    color: '#6b7280',\r\n  },\r\n  metricsCard: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  chartCard: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  sessionsCard: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  insightsCard: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  recommendationsCard: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  cardTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 16,\r\n  },\r\n  metricsGrid: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n  },\r\n  metricItem: {\r\n    width: '48%',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  metricLabel: {\r\n    color: '#6b7280',\r\n    marginBottom: 8,\r\n    textAlign: 'center',\r\n  },\r\n  metricValue: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 8,\r\n  },\r\n  metricNumber: {\r\n    fontWeight: 'bold',\r\n  },\r\n  chart: {\r\n    borderRadius: 16,\r\n    marginTop: 8,\r\n  },\r\n  sessionItem: {\r\n    padding: 12,\r\n    borderRadius: 8,\r\n  },\r\n  sessionHeader: {\r\n    marginBottom: 8,\r\n  },\r\n  sessionTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 2,\r\n  },\r\n  sessionDate: {\r\n    color: '#6b7280',\r\n  },\r\n  sessionMetrics: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n  },\r\n  sessionChip: {\r\n    height: 28,\r\n  },\r\n  divider: {\r\n    marginVertical: 8,\r\n  },\r\n  insight: {\r\n    color: '#1f2937',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  recommendation: {\r\n    color: '#1f2937',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  actions: {\r\n    padding: 20,\r\n    alignItems: 'center',\r\n  },\r\n  closeButton: {\r\n    minWidth: 200,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\SessionList.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'FlatList' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"FlatList"},"fix":{"range":[44,57],"text":""},"desc":"Remove unused variable 'FlatList'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FlatList' is defined but never used.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"IconButton"},"fix":{"range":[167,182],"text":""},"desc":"Remove unused variable 'IconButton'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Surface"},"fix":{"range":[182,194],"text":""},"desc":"Remove unused variable 'Surface'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Surface' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":22,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[445,462],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'session' is defined but never used.","line":23,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"session"},"fix":{"range":[493,515],"text":""},"desc":"Remove unused variable 'session'."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":48,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":48,"endColumn":38,"fix":{"range":[1176,1193],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":49,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":49,"endColumn":38,"fix":{"range":[1224,1241],"text":"{return '#f59e0b';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":54,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":54,"endColumn":37,"fix":{"range":[1360,1377],"text":"{return '#10b981';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":55,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":55,"endColumn":37,"fix":{"range":[1407,1424],"text":"{return '#f59e0b';}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":176,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[5626,5641],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":176,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":176,"endColumn":46}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":4,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  View,\r\n  FlatList,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n} from 'react-native';\r\nimport {\r\n  Card,\r\n  Text,\r\n  Checkbox,\r\n  Chip,\r\n  IconButton,\r\n  Surface,\r\n} from 'react-native-paper';\r\nimport { VirtualScrollView } from '../VirtualScrollView';\r\nimport { SessionReport } from '../../types';\r\n\r\ninterface SessionListProps {\r\n  sessions: SessionReport[];\r\n  selectedSessions: string[];\r\n  onSessionSelect: (sessionId: string) => void;\r\n  onSessionPress: (session: SessionReport) => void;\r\n}\r\n\r\nexport function SessionList({\r\n  sessions,\r\n  selectedSessions,\r\n  onSessionSelect,\r\n  onSessionPress,\r\n}: SessionListProps) {\r\n  const formatDuration = (milliseconds: number) => {\r\n    const minutes = Math.floor(milliseconds / 60000);\r\n    const seconds = Math.floor((milliseconds % 60000) / 1000);\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const getPerformanceColor = (wpm: number) => {\r\n    if (wpm >= 160) return '#10b981'; // Green\r\n    if (wpm >= 130) return '#f59e0b'; // Yellow\r\n    return '#ef4444'; // Red\r\n  };\r\n\r\n  const getFillerWordColor = (rate: number) => {\r\n    if (rate <= 1) return '#10b981'; // Green\r\n    if (rate <= 3) return '#f59e0b'; // Yellow\r\n    return '#ef4444'; // Red\r\n  };\r\n\r\n  const renderSessionItem = ({ item }: { item: SessionReport }) => {\r\n    const isSelected = selectedSessions.includes(item.id);\r\n    \r\n    return (\r\n      <Card style={[styles.sessionCard, isSelected && styles.selectedCard]}>\r\n        <TouchableOpacity\r\n          onPress={() => onSessionPress(item)}\r\n          style={styles.cardTouchable}\r\n        >\r\n          <Card.Content>\r\n            <View style={styles.sessionHeader}>\r\n              <View style={styles.sessionInfo}>\r\n                <Text variant=\"titleMedium\" style={styles.scriptTitle}>\r\n                  {item.scriptTitle}\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.sessionDate}>\r\n                  {formatDate(item.startTime)}\r\n                </Text>\r\n              </View>\r\n              <View style={styles.sessionActions}>\r\n                <Checkbox\r\n                  status={isSelected ? 'checked' : 'unchecked'}\r\n                  onPress={() => onSessionSelect(item.id)}\r\n                />\r\n              </View>\r\n            </View>\r\n\r\n            <View style={styles.metricsGrid}>\r\n              <View style={styles.metricItem}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Duration\r\n                </Text>\r\n                <Text variant=\"bodyLarge\" style={styles.metricValue}>\r\n                  {formatDuration(item.totalDuration)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.metricItem}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  WPM\r\n                </Text>\r\n                <Text \r\n                  variant=\"bodyLarge\" \r\n                  style={[\r\n                    styles.metricValue,\r\n                    { color: getPerformanceColor(item.averageWPM) }\r\n                  ]}\r\n                >\r\n                  {item.averageWPM.toFixed(0)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.metricItem}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Words\r\n                </Text>\r\n                <Text variant=\"bodyLarge\" style={styles.metricValue}>\r\n                  {item.wordsSpoken}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.metricItem}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Accuracy\r\n                </Text>\r\n                <Text variant=\"bodyLarge\" style={styles.metricValue}>\r\n                  {item.scriptAdherence.accuracyScore.toFixed(1)}%\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n            <View style={styles.chipsContainer}>\r\n              <Chip\r\n                mode=\"outlined\"\r\n                style={[\r\n                  styles.chip,\r\n                  { borderColor: getFillerWordColor(item.fillerWordAnalysis.fillerRate) }\r\n                ]}\r\n                textStyle={{ \r\n                  color: getFillerWordColor(item.fillerWordAnalysis.fillerRate),\r\n                  fontSize: 12,\r\n                }}\r\n              >\r\n                {item.fillerWordAnalysis.fillerRate.toFixed(1)} filler/min\r\n              </Chip>\r\n              \r\n              <Chip\r\n                mode=\"outlined\"\r\n                style={styles.chip}\r\n                textStyle={{ fontSize: 12 }}\r\n              >\r\n                {item.scriptAdherence.adherencePercentage.toFixed(1)}% adherence\r\n              </Chip>\r\n            </View>\r\n          </Card.Content>\r\n        </TouchableOpacity>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  if (sessions.length === 0) {\r\n    return (\r\n      <View style={styles.emptyState}>\r\n        <Text variant=\"titleMedium\" style={styles.emptyTitle}>\r\n          No Sessions Found\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.emptyDescription}>\r\n          Start practicing with your scripts to see analytics data here.\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <VirtualScrollView\r\n      data={sessions}\r\n      itemHeight={120} // Estimated height for each session item\r\n      renderItem={(item: SessionReport, index: number) => renderSessionItem({ item })}\r\n      keyExtractor={(item: SessionReport) => item.id}\r\n      containerStyle={styles.listContainer}\r\n    />\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  listContainer: {\r\n    paddingBottom: 16,\r\n  },\r\n  sessionCard: {\r\n    marginBottom: 12,\r\n    elevation: 2,\r\n  },\r\n  selectedCard: {\r\n    borderColor: '#6366f1',\r\n    borderWidth: 2,\r\n  },\r\n  cardTouchable: {\r\n    flex: 1,\r\n  },\r\n  sessionHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n    marginBottom: 12,\r\n  },\r\n  sessionInfo: {\r\n    flex: 1,\r\n  },\r\n  scriptTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  sessionDate: {\r\n    color: '#6b7280',\r\n  },\r\n  sessionActions: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  metricsGrid: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 12,\r\n  },\r\n  metricItem: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  metricLabel: {\r\n    color: '#6b7280',\r\n    marginBottom: 2,\r\n  },\r\n  metricValue: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  chipsContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n  },\r\n  chip: {\r\n    height: 28,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 32,\r\n  },\r\n  emptyTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 8,\r\n  },\r\n  emptyDescription: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\__tests__\\PerformanceSummary.test.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":61,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":62,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":67,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":72,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":78,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":81,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":84,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":89,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":89,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":90,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":90,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":91,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":94,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":119,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":120,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":120,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":123,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":123,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":134,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":134,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":137,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":149,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":149,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":150,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":150,"endColumn":11}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render } from '@testing-library/react-native';\r\nimport { Provider as PaperProvider } from 'react-native-paper';\r\nimport { PerformanceSummary } from '../PerformanceSummary';\r\nimport { AnalyticsSummary } from '../../../types';\r\n\r\nconst mockTheme = {\r\n  colors: {\r\n    primary: '#6200EE',\r\n    surface: '#FFFFFF',\r\n    background: '#F5F5F5',\r\n    onSurface: '#000000',\r\n  },\r\n};\r\n\r\nconst renderWithTheme = (component: React.ReactElement) => {\r\n  return render(\r\n    <PaperProvider theme={mockTheme}>\r\n      {component}\r\n    </PaperProvider>\r\n  );\r\n};\r\n\r\nconst mockSummary: AnalyticsSummary = {\r\n  totalSessions: 15,\r\n  totalPracticeTime: 7200000, // 2 hours\r\n  averageSessionDuration: 480000, // 8 minutes\r\n  averageWPM: 152,\r\n  improvementTrend: 12,\r\n  fillerWordTrend: -8,\r\n  mostPracticedScript: {\r\n    id: 'script-1',\r\n    title: 'Product Launch Presentation',\r\n    sessionCount: 5,\r\n  },\r\n  performanceMetrics: {\r\n    consistency: 85,\r\n    accuracy: 92,\r\n    fluency: 88,\r\n  },\r\n  weeklyStats: [\r\n    {\r\n      week: '2024-W01',\r\n      sessionCount: 3,\r\n      totalDuration: 1800000,\r\n      averageWPM: 145,\r\n      fillerWordRate: 2.5,\r\n      adherenceScore: 88,\r\n    },\r\n    {\r\n      week: '2024-W02',\r\n      sessionCount: 4,\r\n      totalDuration: 2400000,\r\n      averageWPM: 155,\r\n      fillerWordRate: 1.8,\r\n      adherenceScore: 92,\r\n    },\r\n  ],\r\n};\r\n\r\ndescribe('PerformanceSummary', () => {\r\n  it('should render summary data correctly', () => {\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={mockSummary} />\r\n    );\r\n\r\n    expect(getByText('15')).toBeTruthy(); // Total sessions\r\n    expect(getByText('152')).toBeTruthy(); // Average WPM\r\n    expect(getByText('Product Launch Presentation')).toBeTruthy(); // Most practiced script\r\n  });\r\n\r\n  it('should display improvement trends with correct styling', () => {\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={mockSummary} />\r\n    );\r\n\r\n    // Should show positive trend for WPM improvement\r\n    expect(getByText(/12/)).toBeTruthy();\r\n    \r\n    // Should show negative trend for filler words (which is good)\r\n    expect(getByText(/-8/)).toBeTruthy();\r\n  });\r\n\r\n  it('should render performance metrics', () => {\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={mockSummary} />\r\n    );\r\n\r\n    expect(getByText('Consistency')).toBeTruthy();\r\n    expect(getByText('Accuracy')).toBeTruthy();\r\n    expect(getByText('Fluency')).toBeTruthy();\r\n  });\r\n\r\n  it('should handle empty summary gracefully', () => {\r\n    const emptySummary: AnalyticsSummary = {\r\n      totalSessions: 0,\r\n      totalPracticeTime: 0,\r\n      averageSessionDuration: 0,\r\n      averageWPM: 0,\r\n      improvementTrend: 0,\r\n      fillerWordTrend: 0,\r\n      mostPracticedScript: {\r\n        id: '',\r\n        title: 'No scripts practiced yet',\r\n        sessionCount: 0,\r\n      },\r\n      performanceMetrics: {\r\n        consistency: 0,\r\n        accuracy: 0,\r\n        fluency: 0,\r\n      },\r\n      weeklyStats: [],\r\n    };\r\n\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={emptySummary} />\r\n    );\r\n\r\n    expect(getByText('0')).toBeTruthy();\r\n    expect(getByText('No scripts practiced yet')).toBeTruthy();\r\n  });\r\n\r\n  it('should format time duration correctly', () => {\r\n    const summaryWithLongTime: AnalyticsSummary = {\r\n      ...mockSummary,\r\n      totalPracticeTime: 3661000, // 1 hour, 1 minute, 1 second\r\n      averageSessionDuration: 3661000,\r\n    };\r\n\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={summaryWithLongTime} />\r\n    );\r\n\r\n    expect(getByText(/1h 1m/)).toBeTruthy();\r\n  });\r\n\r\n  it('should handle very large numbers correctly', () => {\r\n    const summaryWithLargeNumbers: AnalyticsSummary = {\r\n      ...mockSummary,\r\n      totalSessions: 1000,\r\n      averageWPM: 999,\r\n      totalPracticeTime: 36000000, // 10 hours\r\n    };\r\n\r\n    const { getByText } = renderWithTheme(\r\n      <PerformanceSummary summary={summaryWithLargeNumbers} />\r\n    );\r\n\r\n    expect(getByText('1000')).toBeTruthy();\r\n    expect(getByText('999')).toBeTruthy();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\analytics\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\team\\SubscriptionManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Linking' is defined but never used.","line":2,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"Linking"},"fix":{"range":[97,106],"text":""},"desc":"Remove unused variable 'Linking'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Linking' is defined but never used.","line":2,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":54},{"ruleId":"no-unused-vars","severity":2,"message":"'subscription' is defined but never used.","line":24,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"subscription"},"fix":{"range":[583,609],"text":""},"desc":"Remove unused variable 'subscription'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1050,1053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1050,1053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkUsageLimits'. Either include it or remove the dependency array.","line":42,"column":6,"nodeType":"ArrayExpression","endLine":42,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [checkUsageLimits, subscription]","fix":{"range":[1150,1164],"text":"[checkUsageLimits, subscription]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":49,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":20,"suggestions":[{"fix":{"range":[1357,1410],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":79,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":20,"suggestions":[{"fix":{"range":[2419,2473],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":88,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":88,"endColumn":31,"fix":{"range":[2696,2703],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":108,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":28,"suggestions":[{"fix":{"range":[3520,3575],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":120,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":120,"endColumn":31,"fix":{"range":[3837,3844],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":131,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":131,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":131,"endColumn":20,"suggestions":[{"fix":{"range":[4232,4289],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":151,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":151,"endColumn":30,"fix":{"range":[4882,4891],"text":"{return 0;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":156,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":156,"endColumn":53,"fix":{"range":[5038,5064],"text":"{return theme.colors.error;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":157,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":157,"endColumn":64,"fix":{"range":[5092,5129],"text":"{return theme.colors.onErrorContainer;}"}}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":5,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, ScrollView, Alert, Linking } from 'react-native';\r\nimport {\r\n  Card,\r\n  Title,\r\n  Paragraph,\r\n  Button,\r\n  Chip,\r\n  List,\r\n  Divider,\r\n  ProgressBar,\r\n  Dialog,\r\n  Portal,\r\n  ActivityIndicator,\r\n  useTheme,\r\n  Surface,\r\n} from 'react-native-paper';\r\nimport { Subscription, SubscriptionTier, FeatureName } from '../../types';\r\nimport { subscriptionService } from '../../services';\r\n\r\ninterface SubscriptionManagerProps {\r\n  userId: string;\r\n  subscription: Subscription | null;\r\n  onSubscriptionUpdate: (subscription: Subscription) => void;\r\n}\r\n\r\nexport const SubscriptionManager: React.FC<SubscriptionManagerProps> = ({\r\n  userId,\r\n  subscription,\r\n  onSubscriptionUpdate,\r\n}) => {\r\n  const theme = useTheme();\r\n  const [loading, setLoading] = useState(false);\r\n  const [upgradeDialogVisible, setUpgradeDialogVisible] = useState(false);\r\n  const [selectedTier, setSelectedTier] = useState<SubscriptionTier>('personal');\r\n  const [usageLimits, setUsageLimits] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    if (subscription) {\r\n      checkUsageLimits();\r\n    }\r\n  }, [subscription]);\r\n\r\n  const checkUsageLimits = async () => {\r\n    try {\r\n      const limits = await subscriptionService.checkUsageLimits(userId);\r\n      setUsageLimits(limits);\r\n    } catch (error) {\r\n      console.error('Error checking usage limits:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpgrade = async (tier: SubscriptionTier) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // For mobile, we would integrate with RevenueCat here\r\n      // For now, we'll show a placeholder\r\n      Alert.alert(\r\n        'Upgrade Subscription',\r\n        `Upgrading to ${subscriptionService.getTierDisplayName(tier)}. This would open the payment flow.`,\r\n        [\r\n          { text: 'Cancel', style: 'cancel' },\r\n          {\r\n            text: 'Continue',\r\n            onPress: async () => {\r\n              // Simulate upgrade\r\n              await subscriptionService.updateSubscription(userId, tier);\r\n              const updatedSubscription = await subscriptionService.getSubscription(userId);\r\n              if (updatedSubscription) {\r\n                onSubscriptionUpdate(updatedSubscription);\r\n              }\r\n              Alert.alert('Success', 'Subscription upgraded successfully!');\r\n            },\r\n          },\r\n        ]\r\n      );\r\n    } catch (error) {\r\n      console.error('Error upgrading subscription:', error);\r\n      Alert.alert('Error', 'Failed to upgrade subscription');\r\n    } finally {\r\n      setLoading(false);\r\n      setUpgradeDialogVisible(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async () => {\r\n    if (!subscription) return;\r\n\r\n    Alert.alert(\r\n      'Cancel Subscription',\r\n      'Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.',\r\n      [\r\n        { text: 'Keep Subscription', style: 'cancel' },\r\n        {\r\n          text: 'Cancel',\r\n          style: 'destructive',\r\n          onPress: async () => {\r\n            try {\r\n              setLoading(true);\r\n              await subscriptionService.cancelSubscription(userId);\r\n              const updatedSubscription = await subscriptionService.getSubscription(userId);\r\n              if (updatedSubscription) {\r\n                onSubscriptionUpdate(updatedSubscription);\r\n              }\r\n              Alert.alert('Success', 'Subscription cancelled successfully');\r\n            } catch (error) {\r\n              console.error('Error cancelling subscription:', error);\r\n              Alert.alert('Error', 'Failed to cancel subscription');\r\n            } finally {\r\n              setLoading(false);\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const handleReactivate = async () => {\r\n    if (!subscription) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      await subscriptionService.reactivateSubscription(userId);\r\n      const updatedSubscription = await subscriptionService.getSubscription(userId);\r\n      if (updatedSubscription) {\r\n        onSubscriptionUpdate(updatedSubscription);\r\n      }\r\n      Alert.alert('Success', 'Subscription reactivated successfully!');\r\n    } catch (error) {\r\n      console.error('Error reactivating subscription:', error);\r\n      Alert.alert('Error', 'Failed to reactivate subscription');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const openBillingPortal = () => {\r\n    // In a real implementation, this would open the billing portal\r\n    Alert.alert(\r\n      'Billing Portal',\r\n      'This would open the billing portal where you can manage your payment methods and view invoices.'\r\n    );\r\n  };\r\n\r\n  const getTierColor = (tier: SubscriptionTier) => {\r\n    return subscriptionService.getTierColor(tier);\r\n  };\r\n\r\n  const getUsagePercentage = (used: number, max: number) => {\r\n    if (max === -1) return 0; // Unlimited\r\n    return Math.min((used / max) * 100, 100);\r\n  };\r\n\r\n  const getUsageColor = (percentage: number) => {\r\n    if (percentage >= 90) return theme.colors.error;\r\n    if (percentage >= 75) return theme.colors.onErrorContainer;\r\n    return theme.colors.primary;\r\n  };\r\n\r\n  const renderFeatureStatus = (feature: FeatureName, label: string) => {\r\n    const featureGate = subscriptionService.checkFeature(feature, subscription);\r\n    return (\r\n      <List.Item\r\n        title={label}\r\n        left={() => (\r\n          <List.Icon\r\n            icon={featureGate.enabled ? 'check-circle' : 'close-circle'}\r\n            color={featureGate.enabled ? theme.colors.primary : theme.colors.outline}\r\n          />\r\n        )}\r\n        right={() => (\r\n          !featureGate.enabled && (\r\n            <Button\r\n              mode=\"text\"\r\n              compact\r\n              onPress={() => {\r\n                setSelectedTier('business');\r\n                setUpgradeDialogVisible(true);\r\n              }}\r\n            >\r\n              Upgrade\r\n            </Button>\r\n          )\r\n        )}\r\n        description={featureGate.enabled ? 'Available' : featureGate.reason}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderUsageItem = (label: string, used: number, max: number, unit: string = '') => {\r\n    const percentage = getUsagePercentage(used, max);\r\n    const isUnlimited = max === -1;\r\n    \r\n    return (\r\n      <View style={styles.usageItem}>\r\n        <View style={styles.usageHeader}>\r\n          <Paragraph style={styles.usageLabel}>{label}</Paragraph>\r\n          <Paragraph style={styles.usageText}>\r\n            {used}{unit} {isUnlimited ? '/ Unlimited' : `/ ${max}${unit}`}\r\n          </Paragraph>\r\n        </View>\r\n        {!isUnlimited && (\r\n          <ProgressBar\r\n            progress={percentage / 100}\r\n            color={getUsageColor(percentage)}\r\n            style={styles.progressBar}\r\n          />\r\n        )}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  if (!subscription) {\r\n    return (\r\n      <View style={[styles.container, styles.centered]}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Paragraph style={styles.loadingText}>Loading subscription...</Paragraph>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={styles.container} showsVerticalScrollIndicator={false}>\r\n      {/* Current Plan */}\r\n      <Card style={styles.card}>\r\n        <Card.Content>\r\n          <View style={styles.planHeader}>\r\n            <View>\r\n              <Title style={styles.planTitle}>Current Plan</Title>\r\n              <View style={styles.planTierContainer}>\r\n                <Chip\r\n                  style={[styles.tierChip, { backgroundColor: getTierColor(subscription.tier) }]}\r\n                  textStyle={[styles.tierText, { color: theme.colors.onPrimary }]}\r\n                >\r\n                  {subscriptionService.getTierDisplayName(subscription.tier)}\r\n                </Chip>\r\n                <Chip\r\n                  style={[\r\n                    styles.statusChip,\r\n                    {\r\n                      backgroundColor: subscription.status === 'active' \r\n                        ? theme.colors.primary \r\n                        : theme.colors.error\r\n                    }\r\n                  ]}\r\n                  textStyle={{ color: theme.colors.onPrimary }}\r\n                >\r\n                  {subscription.status.toUpperCase()}\r\n                </Chip>\r\n              </View>\r\n            </View>\r\n            {subscription.tier !== 'enterprise' && (\r\n              <Button\r\n                mode=\"contained\"\r\n                onPress={() => setUpgradeDialogVisible(true)}\r\n                disabled={loading}\r\n              >\r\n                Upgrade\r\n              </Button>\r\n            )}\r\n          </View>\r\n\r\n          <Divider style={styles.divider} />\r\n\r\n          <View style={styles.planDetails}>\r\n            <Paragraph style={styles.detailText}>\r\n              Billing Period: {subscription.currentPeriodStart.toLocaleDateString()} - {subscription.currentPeriodEnd.toLocaleDateString()}\r\n            </Paragraph>\r\n            {subscription.cancelAtPeriodEnd && (\r\n              <Paragraph style={[styles.detailText, { color: theme.colors.error }]}>\r\n                 Subscription will be cancelled at the end of this period\r\n              </Paragraph>\r\n            )}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Usage */}\r\n      <Card style={styles.card}>\r\n        <Card.Content>\r\n          <Title style={styles.sectionTitle}>Usage</Title>\r\n          {subscription.usage && (\r\n            <View style={styles.usageContainer}>\r\n              {renderUsageItem(\r\n                'Scripts',\r\n                subscription.usage.scriptsUsed,\r\n                subscription.features.maxScripts\r\n              )}\r\n              {renderUsageItem(\r\n                'Teams',\r\n                subscription.usage.teamsUsed,\r\n                subscription.features.maxTeams\r\n              )}\r\n              {renderUsageItem(\r\n                'Storage',\r\n                subscription.usage.storageUsedGB,\r\n                subscription.features.maxStorageGB,\r\n                'GB'\r\n              )}\r\n              {renderUsageItem(\r\n                'Team Members',\r\n                subscription.usage.teamMembersUsed,\r\n                subscription.features.maxTeamMembers\r\n              )}\r\n            </View>\r\n          )}\r\n\r\n          {usageLimits?.warnings.length > 0 && (\r\n            <Surface style={styles.warningsContainer}>\r\n              <Title style={styles.warningsTitle}>Usage Warnings</Title>\r\n              {usageLimits.warnings.map((warning: string, index: number) => (\r\n                <Paragraph key={index} style={styles.warningText}>\r\n                   {warning}\r\n                </Paragraph>\r\n              ))}\r\n            </Surface>\r\n          )}\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Features */}\r\n      <Card style={styles.card}>\r\n        <Card.Content>\r\n          <Title style={styles.sectionTitle}>Features</Title>\r\n          <View style={styles.featuresContainer}>\r\n            {renderFeatureStatus('team_collaboration', 'Team Collaboration')}\r\n            {renderFeatureStatus('advanced_analytics', 'Advanced Analytics')}\r\n            {renderFeatureStatus('priority_support', 'Priority Support')}\r\n            {renderFeatureStatus('custom_branding', 'Custom Branding')}\r\n            {renderFeatureStatus('api_access', 'API Access')}\r\n            {renderFeatureStatus('bulk_export', 'Bulk Export')}\r\n            {renderFeatureStatus('integrations', 'Integrations')}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Account Actions */}\r\n      <Card style={styles.card}>\r\n        <Card.Content>\r\n          <Title style={styles.sectionTitle}>Account</Title>\r\n          <View style={styles.actionsContainer}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={openBillingPortal}\r\n              style={styles.actionButton}\r\n              icon=\"credit-card\"\r\n            >\r\n              Billing Portal\r\n            </Button>\r\n            \r\n            {subscription.cancelAtPeriodEnd ? (\r\n              <Button\r\n                mode=\"contained\"\r\n                onPress={handleReactivate}\r\n                style={styles.actionButton}\r\n                loading={loading}\r\n                disabled={loading}\r\n                icon=\"restore\"\r\n              >\r\n                Reactivate\r\n              </Button>\r\n            ) : (\r\n              subscription.tier !== 'free' && (\r\n                <Button\r\n                  mode=\"outlined\"\r\n                  onPress={handleCancel}\r\n                  style={[styles.actionButton, { borderColor: theme.colors.error }]}\r\n                  textColor={theme.colors.error}\r\n                  loading={loading}\r\n                  disabled={loading}\r\n                  icon=\"cancel\"\r\n                >\r\n                  Cancel Subscription\r\n                </Button>\r\n              )\r\n            )}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Upgrade Dialog */}\r\n      <Portal>\r\n        <Dialog visible={upgradeDialogVisible} onDismiss={() => setUpgradeDialogVisible(false)}>\r\n          <Dialog.Title>Upgrade Subscription</Dialog.Title>\r\n          <Dialog.Content>\r\n            <Paragraph style={styles.upgradeDescription}>\r\n              Choose your new subscription tier:\r\n            </Paragraph>\r\n            \r\n            <View style={styles.tierOptions}>\r\n              {(['personal', 'business', 'enterprise'] as SubscriptionTier[])\r\n                .filter(tier => tier !== subscription.tier)\r\n                .map((tier) => (\r\n                <Card\r\n                  key={tier}\r\n                  style={[\r\n                    styles.tierCard,\r\n                    selectedTier === tier && {\r\n                      borderColor: theme.colors.primary,\r\n                      borderWidth: 2,\r\n                    },\r\n                  ]}\r\n                  onPress={() => setSelectedTier(tier)}\r\n                >\r\n                  <Card.Content style={styles.tierContent}>\r\n                    <View style={styles.tierHeader}>\r\n                      <Title style={styles.tierName}>\r\n                        {subscriptionService.getTierDisplayName(tier)}\r\n                      </Title>\r\n                      <Chip\r\n                        style={[styles.tierPriceChip, { backgroundColor: getTierColor(tier) }]}\r\n                        textStyle={{ color: theme.colors.onPrimary }}\r\n                      >\r\n                        ${tier === 'personal' ? '9.99' : tier === 'business' ? '29.99' : '99.99'}/mo\r\n                      </Chip>\r\n                    </View>\r\n                    <View style={styles.tierFeatures}>\r\n                      {subscriptionService.getFeaturesList(tier).slice(0, 3).map((feature) => (\r\n                        <Paragraph key={feature} style={styles.tierFeature}>\r\n                           {feature}\r\n                        </Paragraph>\r\n                      ))}\r\n                    </View>\r\n                  </Card.Content>\r\n                </Card>\r\n              ))}\r\n            </View>\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button onPress={() => setUpgradeDialogVisible(false)}>Cancel</Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={() => handleUpgrade(selectedTier)}\r\n              loading={loading}\r\n              disabled={loading}\r\n            >\r\n              Upgrade to {subscriptionService.getTierDisplayName(selectedTier)}\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n  },\r\n  centered: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  card: {\r\n    marginBottom: 16,\r\n  },\r\n  planHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n  },\r\n  planTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n  },\r\n  planTierContainer: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  tierChip: {\r\n    height: 32,\r\n  },\r\n  tierText: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n  },\r\n  statusChip: {\r\n    height: 32,\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  planDetails: {\r\n    gap: 4,\r\n  },\r\n  detailText: {\r\n    fontSize: 14,\r\n    opacity: 0.7,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    marginBottom: 12,\r\n  },\r\n  usageContainer: {\r\n    gap: 16,\r\n  },\r\n  usageItem: {\r\n    marginBottom: 8,\r\n  },\r\n  usageHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 4,\r\n  },\r\n  usageLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n  },\r\n  usageText: {\r\n    fontSize: 14,\r\n    opacity: 0.7,\r\n  },\r\n  progressBar: {\r\n    height: 6,\r\n    borderRadius: 3,\r\n  },\r\n  warningsContainer: {\r\n    padding: 12,\r\n    marginTop: 16,\r\n    borderRadius: 8,\r\n    backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n  },\r\n  warningsTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n  },\r\n  warningText: {\r\n    fontSize: 14,\r\n    marginBottom: 4,\r\n  },\r\n  featuresContainer: {\r\n    gap: 4,\r\n  },\r\n  actionsContainer: {\r\n    gap: 12,\r\n  },\r\n  actionButton: {\r\n    marginBottom: 8,\r\n  },\r\n  upgradeDescription: {\r\n    marginBottom: 16,\r\n    opacity: 0.7,\r\n  },\r\n  tierOptions: {\r\n    gap: 12,\r\n  },\r\n  tierCard: {\r\n    borderWidth: 1,\r\n    borderColor: 'transparent',\r\n  },\r\n  tierContent: {\r\n    paddingVertical: 12,\r\n  },\r\n  tierHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  tierName: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  tierPriceChip: {\r\n    height: 28,\r\n  },\r\n  tierFeatures: {\r\n    gap: 2,\r\n  },\r\n  tierFeature: {\r\n    fontSize: 12,\r\n    opacity: 0.7,\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    opacity: 0.7,\r\n  },\r\n});\r\n\r\nexport default SubscriptionManager;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\team\\TeamMembers.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'List' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"List"},"fix":{"range":[258,267],"text":""},"desc":"Remove unused variable 'List'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'List' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":7},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadMembers'. Either include it or remove the dependency array.","line":50,"column":6,"nodeType":"ArrayExpression","endLine":50,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [loadMembers, team.id]","fix":{"range":[1445,1454],"text":"[loadMembers, team.id]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":57,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":20,"suggestions":[{"fix":{"range":[1639,1686],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":69,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":69,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":69,"endColumn":20,"suggestions":[{"fix":{"range":[2054,2105],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":102,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":20,"suggestions":[{"fix":{"range":[3026,3073],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":145,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":145,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":145,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":145,"endColumn":20,"suggestions":[{"fix":{"range":[4301,4348],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":170,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":170,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":170,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":170,"endColumn":20,"suggestions":[{"fix":{"range":[5089,5134],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":184,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":184,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":184,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":184,"endColumn":20,"suggestions":[{"fix":{"range":[5529,5575],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":209,"column":42,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":209,"endColumn":54,"fix":{"range":[6287,6299],"text":"{return true;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":210,"column":38,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":210,"endColumn":50,"fix":{"range":[6358,6370],"text":"{return true;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":211,"column":65,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":211,"endColumn":77,"fix":{"range":[6436,6448],"text":"{return true;}"}}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":3,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, FlatList, Alert, Share } from 'react-native';\r\nimport {\r\n  Card,\r\n  Title,\r\n  Paragraph,\r\n  Avatar,\r\n  Chip,\r\n  IconButton,\r\n  Menu,\r\n  Button,\r\n  Dialog,\r\n  Portal,\r\n  TextInput,\r\n  List,\r\n  Divider,\r\n  ActivityIndicator,\r\n  useTheme,\r\n  FAB,\r\n} from 'react-native-paper';\r\nimport { TeamMember, TeamRole, TeamInvitation, Team } from '../../types';\r\nimport { teamService } from '../../services';\r\n\r\ninterface TeamMembersProps {\r\n  team: Team;\r\n  currentUserId: string;\r\n  currentUserRole: TeamRole;\r\n}\r\n\r\nexport const TeamMembers: React.FC<TeamMembersProps> = ({\r\n  team,\r\n  currentUserId,\r\n  currentUserRole,\r\n}) => {\r\n  const theme = useTheme();\r\n  const [members, setMembers] = useState<TeamMember[]>([]);\r\n  const [invitations, setInvitations] = useState<TeamInvitation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [inviteDialogVisible, setInviteDialogVisible] = useState(false);\r\n  const [inviteEmail, setInviteEmail] = useState('');\r\n  const [inviteRole, setInviteRole] = useState<TeamRole>('viewer');\r\n  const [inviteMessage, setInviteMessage] = useState('');\r\n  const [inviting, setInviting] = useState(false);\r\n  const [selectedMember, setSelectedMember] = useState<TeamMember | null>(null);\r\n  const [memberMenuVisible, setMemberMenuVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadMembers();\r\n    loadInvitations();\r\n  }, [team.id]);\r\n\r\n  const loadMembers = async () => {\r\n    try {\r\n      const teamMembers = await teamService.getTeamMembers(team.id);\r\n      setMembers(teamMembers);\r\n    } catch (error) {\r\n      console.error('Error loading members:', error);\r\n      Alert.alert('Error', 'Failed to load team members');\r\n    }\r\n  };\r\n\r\n  const loadInvitations = async () => {\r\n    try {\r\n      // This would need to be implemented in teamService\r\n      // const teamInvitations = await teamService.getTeamInvitations(team.id);\r\n      // setInvitations(teamInvitations);\r\n      setInvitations([]);\r\n    } catch (error) {\r\n      console.error('Error loading invitations:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const canManageMembers = currentUserRole === 'owner' || currentUserRole === 'admin';\r\n  const canInviteMembers = canManageMembers || team.settings.allowMemberInvites;\r\n\r\n  const handleInviteMember = async () => {\r\n    if (!inviteEmail.trim()) {\r\n      Alert.alert('Error', 'Please enter an email address');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setInviting(true);\r\n      await teamService.inviteMember(\r\n        team.id,\r\n        inviteEmail.trim(),\r\n        inviteRole,\r\n        currentUserId,\r\n        'Team Member', // This should come from user data\r\n        inviteMessage.trim() || undefined\r\n      );\r\n\r\n      Alert.alert('Success', 'Invitation sent successfully!');\r\n      setInviteDialogVisible(false);\r\n      setInviteEmail('');\r\n      setInviteMessage('');\r\n      setInviteRole('viewer');\r\n      loadInvitations();\r\n    } catch (error) {\r\n      console.error('Error inviting member:', error);\r\n      Alert.alert('Error', error instanceof Error ? error.message : 'Failed to send invitation');\r\n    } finally {\r\n      setInviting(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveMember = (member: TeamMember) => {\r\n    if (member.userId === currentUserId) {\r\n      Alert.alert(\r\n        'Leave Team',\r\n        'Are you sure you want to leave this team?',\r\n        [\r\n          { text: 'Cancel', style: 'cancel' },\r\n          {\r\n            text: 'Leave',\r\n            style: 'destructive',\r\n            onPress: () => removeMember(member),\r\n          },\r\n        ]\r\n      );\r\n    } else {\r\n      Alert.alert(\r\n        'Remove Member',\r\n        `Are you sure you want to remove ${member.displayName || member.email} from the team?`,\r\n        [\r\n          { text: 'Cancel', style: 'cancel' },\r\n          {\r\n            text: 'Remove',\r\n            style: 'destructive',\r\n            onPress: () => removeMember(member),\r\n          },\r\n        ]\r\n      );\r\n    }\r\n  };\r\n\r\n  const removeMember = async (member: TeamMember) => {\r\n    try {\r\n      await teamService.removeMember(team.id, member.userId, currentUserId);\r\n      Alert.alert('Success', 'Member removed successfully');\r\n      loadMembers();\r\n    } catch (error) {\r\n      console.error('Error removing member:', error);\r\n      Alert.alert('Error', 'Failed to remove member');\r\n    }\r\n  };\r\n\r\n  const handleChangeRole = (member: TeamMember, newRole: TeamRole) => {\r\n    Alert.alert(\r\n      'Change Role',\r\n      `Change ${member.displayName || member.email}'s role to ${newRole}?`,\r\n      [\r\n        { text: 'Cancel', style: 'cancel' },\r\n        {\r\n          text: 'Change',\r\n          onPress: () => changeRole(member, newRole),\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const changeRole = async (member: TeamMember, newRole: TeamRole) => {\r\n    try {\r\n      await teamService.updateMemberRole(team.id, member.userId, newRole, currentUserId);\r\n      Alert.alert('Success', 'Member role updated successfully');\r\n      loadMembers();\r\n    } catch (error) {\r\n      console.error('Error changing role:', error);\r\n      Alert.alert('Error', 'Failed to change member role');\r\n    }\r\n  };\r\n\r\n  const shareInviteLink = async () => {\r\n    try {\r\n      const shareUrl = `speaksync://invite/${team.id}`;\r\n      await Share.share({\r\n        message: `Join my team \"${team.name}\" on SpeakSync! ${shareUrl}`,\r\n        title: 'Join my SpeakSync team',\r\n        url: shareUrl,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error sharing invite:', error);\r\n    }\r\n  };\r\n\r\n  const getRoleColor = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return theme.colors.error;\r\n      case 'admin': return theme.colors.primary;\r\n      case 'editor': return theme.colors.tertiary;\r\n      case 'viewer': return theme.colors.outline;\r\n      default: return theme.colors.outline;\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return 'crown';\r\n      case 'admin': return 'shield-account';\r\n      case 'editor': return 'pencil';\r\n      case 'viewer': return 'eye';\r\n      default: return 'account';\r\n    }\r\n  };\r\n\r\n  const canModifyMember = (member: TeamMember) => {\r\n    if (member.userId === currentUserId) return true; // Can always leave\r\n    if (currentUserRole === 'owner') return true;\r\n    if (currentUserRole === 'admin' && member.role !== 'owner') return true;\r\n    return false;\r\n  };\r\n\r\n  const renderMember = ({ item }: { item: TeamMember }) => (\r\n    <Card style={styles.memberCard}>\r\n      <Card.Content>\r\n        <View style={styles.memberHeader}>\r\n          <Avatar.Text\r\n            size={50}\r\n            label={(item.displayName || item.email).charAt(0).toUpperCase()}\r\n            style={{ backgroundColor: theme.colors.secondary }}\r\n          />\r\n          <View style={styles.memberInfo}>\r\n            <Title style={styles.memberName}>\r\n              {item.displayName || item.email}\r\n              {item.userId === currentUserId && ' (You)'}\r\n            </Title>\r\n            <Paragraph style={styles.memberEmail}>{item.email}</Paragraph>\r\n            <Paragraph style={styles.memberDate}>\r\n              Joined {item.joinedAt.toLocaleDateString()}\r\n            </Paragraph>\r\n          </View>\r\n          <View style={styles.memberActions}>\r\n            <Chip\r\n              icon={getRoleIcon(item.role)}\r\n              style={[styles.roleChip, { backgroundColor: getRoleColor(item.role) }]}\r\n              textStyle={[styles.roleText, { color: theme.colors.onPrimary }]}\r\n            >\r\n              {item.role.toUpperCase()}\r\n            </Chip>\r\n            {canModifyMember(item) && (\r\n              <Menu\r\n                visible={memberMenuVisible && selectedMember?.id === item.id}\r\n                onDismiss={() => setMemberMenuVisible(false)}\r\n                anchor={\r\n                  <IconButton\r\n                    icon=\"dots-vertical\"\r\n                    size={20}\r\n                    onPress={() => {\r\n                      setSelectedMember(item);\r\n                      setMemberMenuVisible(true);\r\n                    }}\r\n                  />\r\n                }\r\n              >\r\n                {canManageMembers && item.role !== 'owner' && item.userId !== currentUserId && (\r\n                  <>\r\n                    <Menu.Item\r\n                      onPress={() => {\r\n                        setMemberMenuVisible(false);\r\n                        handleChangeRole(item, 'admin');\r\n                      }}\r\n                      title=\"Make Admin\"\r\n                      leadingIcon=\"shield-account\"\r\n                    />\r\n                    <Menu.Item\r\n                      onPress={() => {\r\n                        setMemberMenuVisible(false);\r\n                        handleChangeRole(item, 'editor');\r\n                      }}\r\n                      title=\"Make Editor\"\r\n                      leadingIcon=\"pencil\"\r\n                    />\r\n                    <Menu.Item\r\n                      onPress={() => {\r\n                        setMemberMenuVisible(false);\r\n                        handleChangeRole(item, 'viewer');\r\n                      }}\r\n                      title=\"Make Viewer\"\r\n                      leadingIcon=\"eye\"\r\n                    />\r\n                    <Divider />\r\n                  </>\r\n                )}\r\n                <Menu.Item\r\n                  onPress={() => {\r\n                    setMemberMenuVisible(false);\r\n                    handleRemoveMember(item);\r\n                  }}\r\n                  title={item.userId === currentUserId ? 'Leave Team' : 'Remove Member'}\r\n                  leadingIcon=\"account-remove\"\r\n                />\r\n              </Menu>\r\n            )}\r\n          </View>\r\n        </View>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n\r\n  const renderInvitation = ({ item }: { item: TeamInvitation }) => (\r\n    <Card style={styles.invitationCard}>\r\n      <Card.Content>\r\n        <View style={styles.invitationHeader}>\r\n          <Avatar.Icon\r\n            size={40}\r\n            icon=\"email\"\r\n            style={{ backgroundColor: theme.colors.outline }}\r\n          />\r\n          <View style={styles.invitationInfo}>\r\n            <Title style={styles.invitationEmail}>{item.email}</Title>\r\n            <Paragraph style={styles.invitationStatus}>\r\n              Invited as {item.role}  {item.createdAt.toLocaleDateString()}\r\n            </Paragraph>\r\n            {item.message && (\r\n              <Paragraph style={styles.invitationMessage}>\"{item.message}\"</Paragraph>\r\n            )}\r\n          </View>\r\n          <Chip\r\n            style={[styles.statusChip, { backgroundColor: theme.colors.outline }]}\r\n            textStyle={{ color: theme.colors.onSurface }}\r\n          >\r\n            PENDING\r\n          </Chip>\r\n        </View>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={[styles.container, styles.centered]}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Paragraph style={styles.loadingText}>Loading team members...</Paragraph>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Title>Team Members ({members.length})</Title>\r\n        {canInviteMembers && (\r\n          <Button\r\n            mode=\"outlined\"\r\n            icon=\"share\"\r\n            onPress={shareInviteLink}\r\n            style={styles.shareButton}\r\n          >\r\n            Share\r\n          </Button>\r\n        )}\r\n      </View>\r\n\r\n      <FlatList\r\n        data={members}\r\n        renderItem={renderMember}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.membersList}\r\n        showsVerticalScrollIndicator={false}\r\n        ListHeaderComponent={\r\n          invitations.length > 0 ? (\r\n            <View>\r\n              <Title style={styles.sectionTitle}>Pending Invitations</Title>\r\n              <FlatList\r\n                data={invitations}\r\n                renderItem={renderInvitation}\r\n                keyExtractor={(item) => item.id}\r\n                scrollEnabled={false}\r\n              />\r\n              <Title style={styles.sectionTitle}>Members</Title>\r\n            </View>\r\n          ) : null\r\n        }\r\n      />\r\n\r\n      {canInviteMembers && (\r\n        <FAB\r\n          icon=\"account-plus\"\r\n          style={styles.fab}\r\n          onPress={() => setInviteDialogVisible(true)}\r\n        />\r\n      )}\r\n\r\n      <Portal>\r\n        <Dialog visible={inviteDialogVisible} onDismiss={() => setInviteDialogVisible(false)}>\r\n          <Dialog.Title>Invite Team Member</Dialog.Title>\r\n          <Dialog.Content>\r\n            <TextInput\r\n              label=\"Email Address\"\r\n              value={inviteEmail}\r\n              onChangeText={setInviteEmail}\r\n              mode=\"outlined\"\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n              style={styles.input}\r\n            />\r\n            \r\n            <View style={styles.roleSelector}>\r\n              <Paragraph style={styles.roleLabel}>Role:</Paragraph>\r\n              <View style={styles.roleOptions}>\r\n                {(['viewer', 'editor', 'admin'] as TeamRole[]).map((role) => (\r\n                  <Chip\r\n                    key={role}\r\n                    selected={inviteRole === role}\r\n                    onPress={() => setInviteRole(role)}\r\n                    style={styles.roleOption}\r\n                  >\r\n                    {role.charAt(0).toUpperCase() + role.slice(1)}\r\n                  </Chip>\r\n                ))}\r\n              </View>\r\n            </View>\r\n\r\n            <TextInput\r\n              label=\"Personal Message (Optional)\"\r\n              value={inviteMessage}\r\n              onChangeText={setInviteMessage}\r\n              mode=\"outlined\"\r\n              multiline\r\n              numberOfLines={3}\r\n              style={styles.input}\r\n              placeholder=\"Welcome to our team!\"\r\n            />\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button onPress={() => setInviteDialogVisible(false)}>Cancel</Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleInviteMember}\r\n              loading={inviting}\r\n              disabled={inviting || !inviteEmail.trim()}\r\n            >\r\n              Send Invite\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  centered: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n  },\r\n  shareButton: {\r\n    marginLeft: 8,\r\n  },\r\n  membersList: {\r\n    padding: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    marginBottom: 12,\r\n    marginTop: 8,\r\n  },\r\n  memberCard: {\r\n    marginBottom: 12,\r\n  },\r\n  memberHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  memberInfo: {\r\n    flex: 1,\r\n    marginLeft: 12,\r\n  },\r\n  memberName: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 2,\r\n  },\r\n  memberEmail: {\r\n    fontSize: 14,\r\n    opacity: 0.7,\r\n    marginBottom: 2,\r\n  },\r\n  memberDate: {\r\n    fontSize: 12,\r\n    opacity: 0.5,\r\n  },\r\n  memberActions: {\r\n    alignItems: 'flex-end',\r\n  },\r\n  roleChip: {\r\n    marginBottom: 4,\r\n  },\r\n  roleText: {\r\n    fontSize: 10,\r\n    fontWeight: '600',\r\n  },\r\n  invitationCard: {\r\n    marginBottom: 12,\r\n    opacity: 0.8,\r\n  },\r\n  invitationHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  invitationInfo: {\r\n    flex: 1,\r\n    marginLeft: 12,\r\n  },\r\n  invitationEmail: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 2,\r\n  },\r\n  invitationStatus: {\r\n    fontSize: 14,\r\n    opacity: 0.7,\r\n    marginBottom: 2,\r\n  },\r\n  invitationMessage: {\r\n    fontSize: 12,\r\n    fontStyle: 'italic',\r\n    opacity: 0.6,\r\n  },\r\n  statusChip: {\r\n    height: 24,\r\n  },\r\n  fab: {\r\n    position: 'absolute',\r\n    margin: 16,\r\n    right: 0,\r\n    bottom: 0,\r\n  },\r\n  input: {\r\n    marginBottom: 16,\r\n  },\r\n  roleSelector: {\r\n    marginBottom: 16,\r\n  },\r\n  roleLabel: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n  },\r\n  roleOptions: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  roleOption: {\r\n    marginRight: 8,\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    opacity: 0.7,\r\n  },\r\n});\r\n\r\nexport default TeamMembers;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\team\\TeamSelector.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[151,156],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'TeamMember' is defined but never used.","line":16,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"TeamMember"},"fix":{"range":[332,344],"text":""},"desc":"Remove unused variable 'TeamMember'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TeamMember' is defined but never used.","line":16,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":21,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[504,521],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTeams'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadTeams, userId]","fix":{"range":[904,912],"text":"[loadTeams, userId]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":45,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":20,"suggestions":[{"fix":{"range":[1111,1156],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getRoleColor' is assigned a value but never used.","line":52,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"getRoleColor"},"fix":{"range":[1271,1593],"text":""},"desc":"Remove unused variable 'getRoleColor'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getRoleColor' is assigned a value but never used.","line":52,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'getRoleIcon' is assigned a value but never used.","line":62,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"getRoleIcon"},"fix":{"range":[1599,1866],"text":""},"desc":"Remove unused variable 'getRoleIcon'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getRoleIcon' is assigned a value but never used.","line":62,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":20}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, FlatList, TouchableOpacity, Alert } from 'react-native';\r\nimport { \r\n  Card, \r\n  Title, \r\n  Paragraph, \r\n  Chip, \r\n  IconButton, \r\n  Menu, \r\n  Avatar,\r\n  useTheme,\r\n  ActivityIndicator,\r\n  Button,\r\n  Divider\r\n} from 'react-native-paper';\r\nimport { Team, TeamMember, TeamRole } from '../../types';\r\nimport { teamService } from '../../services';\r\n\r\ninterface TeamSelectorProps {\r\n  currentTeam: Team | null;\r\n  onTeamSelect: (team: Team | null) => void;\r\n  userId: string;\r\n}\r\n\r\nexport const TeamSelector: React.FC<TeamSelectorProps> = ({\r\n  currentTeam,\r\n  onTeamSelect,\r\n  userId,\r\n}) => {\r\n  const theme = useTheme();\r\n  const [teams, setTeams] = useState<Team[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [menuVisible, setMenuVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadTeams();\r\n  }, [userId]);\r\n\r\n  const loadTeams = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const userTeams = await teamService.getUserTeams(userId);\r\n      setTeams(userTeams);\r\n    } catch (error) {\r\n      console.error('Error loading teams:', error);\r\n      Alert.alert('Error', 'Failed to load teams');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRoleColor = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return theme.colors.error;\r\n      case 'admin': return theme.colors.primary;\r\n      case 'editor': return theme.colors.tertiary;\r\n      case 'viewer': return theme.colors.outline;\r\n      default: return theme.colors.outline;\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: TeamRole) => {\r\n    switch (role) {\r\n      case 'owner': return 'crown';\r\n      case 'admin': return 'shield-account';\r\n      case 'editor': return 'pencil';\r\n      case 'viewer': return 'eye';\r\n      default: return 'account';\r\n    }\r\n  };\r\n\r\n  const renderTeamItem = ({ item }: { item: Team }) => (\r\n    <TouchableOpacity\r\n      onPress={() => onTeamSelect(item)}\r\n      style={[\r\n        styles.teamItem,\r\n        currentTeam?.id === item.id && {\r\n          backgroundColor: theme.colors.primaryContainer,\r\n          borderColor: theme.colors.primary,\r\n        },\r\n      ]}\r\n    >\r\n      <View style={styles.teamHeader}>\r\n        <Avatar.Text\r\n          size={40}\r\n          label={item.name.charAt(0).toUpperCase()}\r\n          style={{ backgroundColor: theme.colors.secondary }}\r\n        />\r\n        <View style={styles.teamInfo}>\r\n          <Title style={styles.teamName}>{item.name}</Title>\r\n          {item.description && (\r\n            <Paragraph style={styles.teamDescription} numberOfLines={2}>\r\n              {item.description}\r\n            </Paragraph>\r\n          )}\r\n        </View>\r\n      </View>\r\n      \r\n      <View style={styles.teamStats}>\r\n        <Chip \r\n          icon=\"account-group\" \r\n          style={styles.statChip}\r\n          textStyle={styles.statText}\r\n        >\r\n          {item.stats.memberCount} members\r\n        </Chip>\r\n        <Chip \r\n          icon=\"file-document\" \r\n          style={styles.statChip}\r\n          textStyle={styles.statText}\r\n        >\r\n          {item.stats.scriptCount} scripts\r\n        </Chip>\r\n        <Chip \r\n          icon=\"folder\" \r\n          style={styles.statChip}\r\n          textStyle={styles.statText}\r\n        >\r\n          {item.stats.folderCount} folders\r\n        </Chip>\r\n      </View>\r\n\r\n      <View style={styles.subscriptionBadge}>\r\n        <Chip \r\n          style={[\r\n            styles.tierChip,\r\n            { backgroundColor: getTierColor(item.subscriptionTier) }\r\n          ]}\r\n          textStyle={[styles.tierText, { color: theme.colors.onPrimary }]}\r\n        >\r\n          {item.subscriptionTier.toUpperCase()}\r\n        </Chip>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  const getTierColor = (tier: string) => {\r\n    switch (tier) {\r\n      case 'free': return theme.colors.outline;\r\n      case 'personal': return theme.colors.primary;\r\n      case 'business': return theme.colors.tertiary;\r\n      case 'enterprise': return theme.colors.secondary;\r\n      default: return theme.colors.outline;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={[styles.container, styles.centered]}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Paragraph style={styles.loadingText}>Loading teams...</Paragraph>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Title>Select Team</Title>\r\n        <Menu\r\n          visible={menuVisible}\r\n          onDismiss={() => setMenuVisible(false)}\r\n          anchor={\r\n            <IconButton\r\n              icon=\"dots-vertical\"\r\n              onPress={() => setMenuVisible(true)}\r\n            />\r\n          }\r\n        >\r\n          <Menu.Item\r\n            onPress={() => {\r\n              setMenuVisible(false);\r\n              onTeamSelect(null);\r\n            }}\r\n            title=\"Personal Scripts\"\r\n            leadingIcon=\"account\"\r\n          />\r\n          <Menu.Item\r\n            onPress={() => {\r\n              setMenuVisible(false);\r\n              loadTeams();\r\n            }}\r\n            title=\"Refresh\"\r\n            leadingIcon=\"refresh\"\r\n          />\r\n        </Menu>\r\n      </View>\r\n\r\n      <Divider />\r\n\r\n      <TouchableOpacity\r\n        onPress={() => onTeamSelect(null)}\r\n        style={[\r\n          styles.personalOption,\r\n          !currentTeam && {\r\n            backgroundColor: theme.colors.primaryContainer,\r\n            borderColor: theme.colors.primary,\r\n          },\r\n        ]}\r\n      >\r\n        <Avatar.Icon\r\n          size={40}\r\n          icon=\"account\"\r\n          style={{ backgroundColor: theme.colors.primary }}\r\n        />\r\n        <View style={styles.teamInfo}>\r\n          <Title style={styles.teamName}>Personal Scripts</Title>\r\n          <Paragraph style={styles.teamDescription}>\r\n            Your private scripts\r\n          </Paragraph>\r\n        </View>\r\n      </TouchableOpacity>\r\n\r\n      <Divider style={styles.divider} />\r\n\r\n      {teams.length === 0 ? (\r\n        <View style={styles.emptyState}>\r\n          <Paragraph style={styles.emptyText}>\r\n            No teams found. Create or join a team to collaborate!\r\n          </Paragraph>\r\n          <Button \r\n            mode=\"contained\" \r\n            onPress={loadTeams}\r\n            style={styles.refreshButton}\r\n          >\r\n            Refresh\r\n          </Button>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={teams}\r\n          renderItem={renderTeamItem}\r\n          keyExtractor={(item) => item.id}\r\n          contentContainerStyle={styles.teamsList}\r\n          showsVerticalScrollIndicator={false}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: 'transparent',\r\n  },\r\n  centered: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n  },\r\n  personalOption: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    borderWidth: 1,\r\n    borderColor: 'transparent',\r\n    borderRadius: 8,\r\n    marginHorizontal: 16,\r\n    marginVertical: 8,\r\n  },\r\n  teamsList: {\r\n    padding: 16,\r\n  },\r\n  teamItem: {\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    marginBottom: 12,\r\n    borderWidth: 1,\r\n    borderColor: 'transparent',\r\n    backgroundColor: 'rgba(255, 255, 255, 0.05)',\r\n  },\r\n  teamHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  teamInfo: {\r\n    flex: 1,\r\n    marginLeft: 12,\r\n  },\r\n  teamName: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    marginBottom: 4,\r\n  },\r\n  teamDescription: {\r\n    fontSize: 14,\r\n    opacity: 0.7,\r\n  },\r\n  teamStats: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n    marginBottom: 12,\r\n  },\r\n  statChip: {\r\n    height: 28,\r\n  },\r\n  statText: {\r\n    fontSize: 12,\r\n  },\r\n  subscriptionBadge: {\r\n    alignItems: 'flex-end',\r\n  },\r\n  tierChip: {\r\n    height: 24,\r\n  },\r\n  tierText: {\r\n    fontSize: 10,\r\n    fontWeight: '600',\r\n  },\r\n  divider: {\r\n    marginVertical: 8,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 32,\r\n  },\r\n  emptyText: {\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n    opacity: 0.7,\r\n  },\r\n  refreshButton: {\r\n    marginTop: 8,\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    opacity: 0.7,\r\n  },\r\n});\r\n\r\nexport default TeamSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\components\\team\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\navigation\\AppNavigator.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":45,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":22,"suggestions":[{"fix":{"range":[1310,1367],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { Provider as PaperProvider } from 'react-native-paper';\r\nimport { RootStackParamList } from '../types';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { useSubscriptionStore } from '../store/subscriptionStore';\r\nimport { \r\n  HomeScreen, \r\n  ScriptEditorScreen, \r\n  TeleprompterScreen,\r\n  AuthScreen,\r\n  SignInScreen,\r\n  SignUpScreen,\r\n  ProfileScreen,\r\n  AnalyticsScreen,\r\n  SessionDetailScreen,\r\n  SubscriptionScreen\r\n} from '../screens';\r\n\r\nconst Stack = createNativeStackNavigator<RootStackParamList>();\r\n\r\nconst theme = {\r\n  colors: {\r\n    primary: '#6366f1',\r\n    secondary: '#f59e0b',\r\n    background: '#f8fafc',\r\n    surface: '#ffffff',\r\n    text: '#1f2937',\r\n    placeholder: '#6b7280',\r\n  },\r\n};\r\n\r\nexport default function AppNavigator() {\r\n  const { authState } = useScriptStore();\r\n  const { initializeRevenueCat } = useSubscriptionStore();\r\n  const isAuthenticated = !!authState.user;\r\n\r\n  // Initialize RevenueCat when the app starts\r\n  useEffect(() => {\r\n    const initSubscriptions = async () => {\r\n      try {\r\n        await initializeRevenueCat();\r\n      } catch (error) {\r\n        console.error('Failed to initialize RevenueCat:', error);\r\n      }\r\n    };\r\n\r\n    initSubscriptions();\r\n  }, [initializeRevenueCat]);\r\n\r\n  return (\r\n    <PaperProvider theme={theme}>\r\n      <NavigationContainer>\r\n        <Stack.Navigator\r\n          screenOptions={{\r\n            headerStyle: {\r\n              backgroundColor: theme.colors.primary,\r\n            },\r\n            headerTintColor: '#ffffff',\r\n            headerTitleStyle: {\r\n              fontWeight: 'bold',\r\n            },\r\n          }}\r\n        >\r\n          {isAuthenticated ? (\r\n            // Authenticated Stack\r\n            <>\r\n              <Stack.Screen\r\n                name=\"Home\"\r\n                component={HomeScreen}\r\n                options={{\r\n                  title: 'SpeakSync',\r\n                  headerRight: () => (\r\n                    <ProfileButton />\r\n                  ),\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"ScriptEditor\"\r\n                component={ScriptEditorScreen}\r\n                options={{\r\n                  title: 'Script Editor',\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"Teleprompter\"\r\n                component={TeleprompterScreen}\r\n                options={{\r\n                  title: 'Teleprompter',\r\n                  headerShown: false,\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"Analytics\"\r\n                component={AnalyticsScreen}\r\n                options={{\r\n                  title: 'Analytics',\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"SessionDetail\"\r\n                component={SessionDetailScreen}\r\n                options={{\r\n                  title: 'Session Details',\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"Profile\"\r\n                component={ProfileScreen}\r\n                options={{\r\n                  title: 'Profile',\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"Subscription\"\r\n                component={SubscriptionScreen}\r\n                options={{\r\n                  title: 'Subscription',\r\n                }}\r\n              />\r\n            </>\r\n          ) : (\r\n            // Authentication Stack\r\n            <>\r\n              <Stack.Screen\r\n                name=\"Auth\"\r\n                component={AuthScreen}\r\n                options={{\r\n                  headerShown: false,\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"SignIn\"\r\n                component={SignInScreen}\r\n                options={{\r\n                  headerShown: false,\r\n                }}\r\n              />\r\n              <Stack.Screen\r\n                name=\"SignUp\"\r\n                component={SignUpScreen}\r\n                options={{\r\n                  headerShown: false,\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </Stack.Navigator>\r\n      </NavigationContainer>\r\n    </PaperProvider>\r\n  );\r\n}\r\n\r\n// Profile Button Component\r\nimport { IconButton } from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nfunction ProfileButton() {\r\n  const navigation = useNavigation();\r\n  \r\n  return (\r\n    <IconButton\r\n      icon=\"account-circle\"\r\n      size={24}\r\n      iconColor=\"#ffffff\"\r\n      onPress={() => navigation.navigate('Profile' as never)}\r\n    />\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\AnalyticsScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'FAB' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"FAB"},"fix":{"range":[236,244],"text":""},"desc":"Remove unused variable 'FAB'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FAB' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":6},{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[301,313],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'LanguageOption' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"LanguageOption"},"fix":{"range":[603,622],"text":""},"desc":"Remove unused variable 'LanguageOption'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LanguageOption' is defined but never used.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1168,1171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1168,1171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":74,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":74,"endColumn":33,"fix":{"range":[2415,2422],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":77,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":77,"endColumn":40,"fix":{"range":[2459,2476],"text":"{setLoading(true);}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":97,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":20,"suggestions":[{"fix":{"range":[3238,3287],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'loadAnalytics'. Either include it or remove the dependency array.","line":113,"column":8,"nodeType":"ArrayExpression","endLine":113,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [loadAnalytics]","fix":{"range":[3609,3634],"text":"[loadAnalytics]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":141,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":141,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":141,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":141,"endColumn":20,"suggestions":[{"fix":{"range":[4509,4559],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":159,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":159,"endColumn":39,"fix":{"range":[4979,4991],"text":"{return null;}"}}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":3,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  View,\r\n  ScrollView,\r\n  StyleSheet,\r\n  RefreshControl,\r\n  Dimensions,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  Button,\r\n  SegmentedButtons,\r\n  FAB,\r\n  Portal,\r\n  Modal,\r\n  Surface,\r\n  Chip,\r\n  IconButton,\r\n  Divider,\r\n  ActivityIndicator,\r\n} from 'react-native-paper';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\nimport { LineChart, BarChart } from 'react-native-chart-kit';\r\nimport {\r\n  SessionReport,\r\n  AnalyticsSummary,\r\n  AnalyticsFilters,\r\n  ComparisonAnalytics,\r\n  GamificationData,\r\n  LanguageOption,\r\n} from '../types';\r\nimport { analyticsService } from '../services/analyticsService';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport {\r\n  AnalyticsFilters as FiltersComponent,\r\n  SessionList,\r\n  PerformanceSummary,\r\n  SessionComparison,\r\n  ExportOptions,\r\n} from '../components/analytics';\r\nimport { GamificationPanel } from '../components';\r\nimport { gamificationService, multiLanguageService } from '../services';\r\n\r\nconst { width: screenWidth } = Dimensions.get('window');\r\n\r\ninterface AnalyticsScreenProps {\r\n  navigation: any;\r\n}\r\n\r\nexport default function AnalyticsScreen({ navigation }: AnalyticsScreenProps) {\r\n  const { authState } = useScriptStore();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [summary, setSummary] = useState<AnalyticsSummary | null>(null);\r\n  const [sessions, setSessions] = useState<SessionReport[]>([]);\r\n  const [selectedSessions, setSelectedSessions] = useState<string[]>([]);\r\n  const [comparison, setComparison] = useState<ComparisonAnalytics | null>(null);\r\n  const [filters, setFilters] = useState<AnalyticsFilters>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  \r\n  // Gamification and language data\r\n  const [gamificationData, setGamificationData] = useState<GamificationData | null>(null);\r\n  const [languageStats, setLanguageStats] = useState<{ [key: string]: number }>({});\r\n  \r\n  // Modal states\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [showExport, setShowExport] = useState(false);\r\n  const [showComparison, setShowComparison] = useState(false);\r\n  const [showGamificationDetails, setShowGamificationDetails] = useState(false);\r\n\r\n  const loadAnalytics = async (showLoader = true) => {\r\n    if (!authState.user) return;\r\n\r\n    try {\r\n      if (showLoader) setLoading(true);\r\n      \r\n      const [summaryData, sessionsData] = await Promise.all([\r\n        analyticsService.getAnalyticsSummary(authState.user.uid, filters),\r\n        analyticsService.getSessions(authState.user.uid, filters),\r\n      ]);\r\n\r\n      setSummary(summaryData);\r\n      setSessions(sessionsData);\r\n      \r\n      // Load gamification data\r\n      const gamificationSvc = gamificationService.getInstance();\r\n      const gamificationInfo = await gamificationSvc.getGamificationData();\r\n      setGamificationData(gamificationInfo);\r\n      \r\n      // Load language usage stats\r\n      const multiLangSvc = multiLanguageService.getInstance();\r\n      const langStats = multiLangSvc.getLanguageUsageStats();\r\n      setLanguageStats(langStats);\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error);\r\n      Alert.alert('Error', 'Failed to load analytics data');\r\n    } finally {\r\n      setLoading(false);\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const onRefresh = () => {\r\n    setRefreshing(true);\r\n    loadAnalytics(false);\r\n  };\r\n\r\n  useFocusEffect(\r\n    React.useCallback(() => {\r\n      loadAnalytics();\r\n    }, [authState.user, filters])\r\n  );\r\n\r\n  const handleSessionSelect = (sessionId: string) => {\r\n    setSelectedSessions(prev => {\r\n      if (prev.includes(sessionId)) {\r\n        return prev.filter(id => id !== sessionId);\r\n      } else if (prev.length < 5) { // Max 5 sessions for comparison\r\n        return [...prev, sessionId];\r\n      } else {\r\n        Alert.alert('Limit Reached', 'You can compare up to 5 sessions at once.');\r\n        return prev;\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleCompareSelected = async () => {\r\n    if (selectedSessions.length < 2) {\r\n      Alert.alert('Selection Required', 'Please select at least 2 sessions to compare.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const comparisonData = await analyticsService.compareSessions(selectedSessions);\r\n      setComparison(comparisonData);\r\n      setShowComparison(true);\r\n    } catch (error) {\r\n      console.error('Error comparing sessions:', error);\r\n      Alert.alert('Error', 'Failed to compare sessions');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApplyFilters = (newFilters: AnalyticsFilters) => {\r\n    setFilters(newFilters);\r\n    setShowFilters(false);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedSessions([]);\r\n  };\r\n\r\n  // Chart data preparation\r\n  const chartData = useMemo(() => {\r\n    if (!sessions.length) return null;\r\n\r\n    const recentSessions = sessions.slice(0, 10).reverse();\r\n    \r\n    return {\r\n      wpmData: {\r\n        labels: recentSessions.map((_, index) => `S${index + 1}`),\r\n        datasets: [{\r\n          data: recentSessions.map(s => s.averageWPM),\r\n          color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n          strokeWidth: 3,\r\n        }],\r\n      },\r\n      fillerWordsData: {\r\n        labels: recentSessions.map((_, index) => `S${index + 1}`),\r\n        datasets: [{\r\n          data: recentSessions.map(s => s.fillerWordAnalysis.fillerRate),\r\n          color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\r\n          strokeWidth: 3,\r\n        }],\r\n      },\r\n    };\r\n  }, [sessions]);\r\n\r\n  const chartConfig = {\r\n    backgroundColor: '#ffffff',\r\n    backgroundGradientFrom: '#ffffff',\r\n    backgroundGradientTo: '#ffffff',\r\n    decimalPlaces: 1,\r\n    color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n    labelColor: (opacity = 1) => `rgba(31, 41, 55, ${opacity})`,\r\n    style: {\r\n      borderRadius: 16,\r\n    },\r\n    propsForDots: {\r\n      r: '4',\r\n      strokeWidth: '2',\r\n      stroke: '#6366f1',\r\n    },\r\n  };\r\n\r\n  if (loading && !summary) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Text style={styles.loadingText}>Loading analytics...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Header with filters and actions */}\r\n      <Surface style={styles.headerSurface}>\r\n        <View style={styles.header}>\r\n          <Text variant=\"headlineSmall\" style={styles.headerTitle}>\r\n            Analytics\r\n          </Text>\r\n          <View style={styles.headerActions}>\r\n            <IconButton\r\n              icon=\"filter\"\r\n              mode=\"contained\"\r\n              size={20}\r\n              onPress={() => setShowFilters(true)}\r\n            />\r\n            <IconButton\r\n              icon=\"export\"\r\n              mode=\"contained\"\r\n              size={20}\r\n              onPress={() => setShowExport(true)}\r\n            />\r\n          </View>\r\n        </View>\r\n\r\n        {/* Active filters */}\r\n        {Object.keys(filters).length > 0 && (\r\n          <View style={styles.activeFilters}>\r\n            <Text variant=\"labelMedium\" style={styles.filtersLabel}>\r\n              Active Filters:\r\n            </Text>\r\n            <ScrollView horizontal showsHorizontalScrollIndicator={false}>\r\n              <View style={styles.filterChips}>\r\n                {filters.dateRange && (\r\n                  <Chip\r\n                    mode=\"outlined\"\r\n                    onClose={() => setFilters(prev => ({ ...prev, dateRange: undefined }))}\r\n                  >\r\n                    Date Range\r\n                  </Chip>\r\n                )}\r\n                {filters.scriptIds?.length && (\r\n                  <Chip\r\n                    mode=\"outlined\"\r\n                    onClose={() => setFilters(prev => ({ ...prev, scriptIds: undefined }))}\r\n                  >\r\n                    {filters.scriptIds.length} Scripts\r\n                  </Chip>\r\n                )}\r\n                {filters.wpmRange && (\r\n                  <Chip\r\n                    mode=\"outlined\"\r\n                    onClose={() => setFilters(prev => ({ ...prev, wpmRange: undefined }))}\r\n                  >\r\n                    WPM Range\r\n                  </Chip>\r\n                )}\r\n              </View>\r\n            </ScrollView>\r\n          </View>\r\n        )}\r\n\r\n        {/* Selection controls */}\r\n        {selectedSessions.length > 0 && (\r\n          <View style={styles.selectionControls}>\r\n            <Text variant=\"labelMedium\">\r\n              {selectedSessions.length} session{selectedSessions.length > 1 ? 's' : ''} selected\r\n            </Text>\r\n            <View style={styles.selectionActions}>\r\n              <Button\r\n                mode=\"outlined\"\r\n                compact\r\n                onPress={handleClearSelection}\r\n              >\r\n                Clear\r\n              </Button>\r\n              <Button\r\n                mode=\"contained\"\r\n                compact\r\n                onPress={handleCompareSelected}\r\n                disabled={selectedSessions.length < 2}\r\n              >\r\n                Compare\r\n              </Button>\r\n            </View>\r\n          </View>\r\n        )}\r\n      </Surface>\r\n\r\n      {/* Tab Navigation */}\r\n      <SegmentedButtons\r\n        value={activeTab}\r\n        onValueChange={setActiveTab}\r\n        buttons={[\r\n          { value: 'overview', label: 'Overview' },\r\n          { value: 'sessions', label: 'Sessions' },\r\n          { value: 'trends', label: 'Trends' },\r\n          { value: 'progress', label: 'Progress' },\r\n        ]}\r\n        style={styles.tabs}\r\n      />\r\n\r\n      {/* Content */}\r\n      <ScrollView\r\n        style={styles.content}\r\n        refreshControl={\r\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\r\n        }\r\n      >\r\n        {activeTab === 'overview' && (\r\n          <View>\r\n            {summary && <PerformanceSummary summary={summary} />}\r\n            \r\n            {/* Quick Stats */}\r\n            {summary && (\r\n              <Card style={styles.statsCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Quick Stats\r\n                  </Text>\r\n                  <View style={styles.statsGrid}>\r\n                    <View style={styles.statItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                        {summary.totalSessions}\r\n                      </Text>\r\n                      <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                        Total Sessions\r\n                      </Text>\r\n                    </View>\r\n                    <View style={styles.statItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                        {(summary.totalPracticeTime / 3600000).toFixed(1)}h\r\n                      </Text>\r\n                      <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                        Practice Time\r\n                      </Text>\r\n                    </View>\r\n                    <View style={styles.statItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                        {summary.averageWPM.toFixed(0)}\r\n                      </Text>\r\n                      <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                        Avg WPM\r\n                      </Text>\r\n                    </View>\r\n                    <View style={styles.statItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                        {summary.improvementTrend > 0 ? '+' : ''}{summary.improvementTrend.toFixed(1)}%\r\n                      </Text>\r\n                      <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                        Improvement\r\n                      </Text>\r\n                    </View>\r\n                  </View>\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Recent Performance Chart */}\r\n            {chartData && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Recent Performance (WPM)\r\n                  </Text>\r\n                  <LineChart\r\n                    data={chartData.wpmData}\r\n                    width={screenWidth - 64}\r\n                    height={200}\r\n                    chartConfig={chartConfig}\r\n                    bezier\r\n                    style={styles.chart}\r\n                  />\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n          </View>\r\n        )}\r\n\r\n        {activeTab === 'sessions' && (\r\n          <SessionList\r\n            sessions={sessions}\r\n            selectedSessions={selectedSessions}\r\n            onSessionSelect={handleSessionSelect}\r\n            onSessionPress={(session: SessionReport) => navigation.navigate('SessionDetail', { sessionId: session.id })}\r\n          />\r\n        )}\r\n\r\n        {activeTab === 'trends' && (\r\n          <View>\r\n            {/* WPM Trend Chart */}\r\n            {chartData && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Speaking Pace Trend\r\n                  </Text>\r\n                  <LineChart\r\n                    data={chartData.wpmData}\r\n                    width={screenWidth - 64}\r\n                    height={220}\r\n                    chartConfig={chartConfig}\r\n                    bezier\r\n                    style={styles.chart}\r\n                  />\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Filler Words Trend */}\r\n            {chartData && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Filler Words Trend\r\n                  </Text>\r\n                  <LineChart\r\n                    data={chartData.fillerWordsData}\r\n                    width={screenWidth - 64}\r\n                    height={220}\r\n                    chartConfig={{\r\n                      ...chartConfig,\r\n                      color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\r\n                    }}\r\n                    bezier\r\n                    style={styles.chart}\r\n                  />\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Weekly Stats */}\r\n            {summary?.weeklyStats && summary.weeklyStats.length > 0 && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Weekly Practice Sessions\r\n                  </Text>\r\n                  <BarChart\r\n                    data={{\r\n                      labels: summary.weeklyStats.slice(-8).map(w => w.week.split('-W')[1]),\r\n                      datasets: [{\r\n                        data: summary.weeklyStats.slice(-8).map(w => w.sessionCount),\r\n                      }],\r\n                    }}\r\n                    width={screenWidth - 64}\r\n                    height={220}\r\n                    yAxisLabel=\"\"\r\n                    yAxisSuffix=\"\"\r\n                    chartConfig={chartConfig}\r\n                    style={styles.chart}\r\n                  />\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n          </View>\r\n        )}\r\n\r\n        {activeTab === 'progress' && (\r\n          <View>\r\n            {/* Gamification Overview */}\r\n            {gamificationData && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Your Progress\r\n                  </Text>\r\n                  <View style={styles.progressOverview}>\r\n                    <View style={styles.progressItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.progressValue}>\r\n                        {gamificationData.currentLevel}\r\n                      </Text>\r\n                      <Text variant=\"bodyMedium\" style={styles.progressLabel}>\r\n                        Current Level\r\n                      </Text>\r\n                    </View>\r\n                    <View style={styles.progressItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.progressValue}>\r\n                        {gamificationData.totalXP}\r\n                      </Text>\r\n                      <Text variant=\"bodyMedium\" style={styles.progressLabel}>\r\n                        Total XP\r\n                      </Text>\r\n                    </View>\r\n                    <View style={styles.progressItem}>\r\n                      <Text variant=\"headlineMedium\" style={styles.progressValue}>\r\n                        {gamificationData.recentAchievements.length}\r\n                      </Text>\r\n                      <Text variant=\"bodyMedium\" style={styles.progressLabel}>\r\n                        Achievements\r\n                      </Text>\r\n                    </View>\r\n                  </View>\r\n                  <Button\r\n                    mode=\"outlined\"\r\n                    onPress={() => setShowGamificationDetails(true)}\r\n                    style={styles.detailsButton}\r\n                  >\r\n                    View Details\r\n                  </Button>\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Language Usage Stats */}\r\n            {Object.keys(languageStats).length > 0 && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Language Usage\r\n                  </Text>\r\n                  <View style={styles.languageStats}>\r\n                    {Object.entries(languageStats).map(([langCode, count]) => {\r\n                      const multiLangSvc = multiLanguageService.getInstance();\r\n                      const language = multiLangSvc.getLanguageByCode(langCode);\r\n                      return (\r\n                        <View key={langCode} style={styles.languageItem}>\r\n                          <Text style={styles.languageFlag}>\r\n                            {language?.flag || ''}\r\n                          </Text>\r\n                          <Text style={styles.languageName}>\r\n                            {language?.name || langCode}\r\n                          </Text>\r\n                          <Text style={styles.languageCount}>\r\n                            {count} scripts\r\n                          </Text>\r\n                        </View>\r\n                      );\r\n                    })}\r\n                  </View>\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Active Streaks */}\r\n            {gamificationData?.activeStreaks && gamificationData.activeStreaks.length > 0 && (\r\n              <Card style={styles.chartCard}>\r\n                <Card.Content>\r\n                  <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n                    Active Streaks\r\n                  </Text>\r\n                  {gamificationData.activeStreaks.map((streak, index) => (\r\n                    <View key={`${streak.streakType}-${index}`} style={styles.streakItem}>\r\n                      <View style={styles.streakInfo}>\r\n                        <Text variant=\"titleSmall\" style={styles.streakType}>\r\n                          {streak.streakType === 'daily' ? 'Daily Practice' : 'Weekly Practice'}\r\n                        </Text>\r\n                        <Text variant=\"bodyMedium\" style={styles.streakDescription}>\r\n                          {streak.currentStreak} {streak.streakType === 'daily' ? 'days' : 'weeks'} in a row\r\n                        </Text>\r\n                      </View>\r\n                      <View style={styles.streakBadge}>\r\n                        <Text style={styles.streakCount}>{streak.currentStreak}</Text>\r\n                      </View>\r\n                    </View>\r\n                  ))}\r\n                </Card.Content>\r\n              </Card>\r\n            )}\r\n          </View>\r\n        )}\r\n      </ScrollView>\r\n\r\n      {/* Modals */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showFilters}\r\n          onDismiss={() => setShowFilters(false)}\r\n          contentContainerStyle={styles.modalContent}\r\n        >\r\n          <FiltersComponent\r\n            currentFilters={filters}\r\n            onApplyFilters={handleApplyFilters}\r\n            onClose={() => setShowFilters(false)}\r\n          />\r\n        </Modal>\r\n\r\n        <Modal\r\n          visible={showExport}\r\n          onDismiss={() => setShowExport(false)}\r\n          contentContainerStyle={styles.modalContent}\r\n        >\r\n          <ExportOptions\r\n            sessions={sessions}\r\n            filters={filters}\r\n            onClose={() => setShowExport(false)}\r\n          />\r\n        </Modal>\r\n\r\n        <Modal\r\n          visible={showComparison}\r\n          onDismiss={() => setShowComparison(false)}\r\n          contentContainerStyle={styles.modalContent}\r\n        >\r\n          {comparison && (\r\n            <SessionComparison\r\n              comparison={comparison}\r\n              onClose={() => setShowComparison(false)}\r\n            />\r\n          )}\r\n        </Modal>\r\n\r\n        <GamificationPanel\r\n          visible={showGamificationDetails}\r\n          onDismiss={() => setShowGamificationDetails(false)}\r\n        />\r\n      </Portal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#6b7280',\r\n  },\r\n  headerSurface: {\r\n    elevation: 2,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n  },\r\n  headerTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  headerActions: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  activeFilters: {\r\n    paddingHorizontal: 16,\r\n    paddingBottom: 12,\r\n  },\r\n  filtersLabel: {\r\n    marginBottom: 8,\r\n    color: '#6b7280',\r\n  },\r\n  filterChips: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  selectionControls: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n    backgroundColor: '#f3f4f6',\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#e5e7eb',\r\n  },\r\n  selectionActions: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  tabs: {\r\n    margin: 16,\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    paddingHorizontal: 16,\r\n  },\r\n  statsCard: {\r\n    marginBottom: 16,\r\n  },\r\n  cardTitle: {\r\n    marginBottom: 16,\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  statsGrid: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  statItem: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  statValue: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n  },\r\n  statLabel: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    marginTop: 4,\r\n  },\r\n  chartCard: {\r\n    marginBottom: 16,\r\n  },\r\n  chart: {\r\n    borderRadius: 16,\r\n    marginTop: 8,\r\n  },\r\n  modalContent: {\r\n    backgroundColor: '#ffffff',\r\n    margin: 20,\r\n    borderRadius: 12,\r\n    maxHeight: '80%',\r\n  },\r\n  progressOverview: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginBottom: 16,\r\n  },\r\n  progressItem: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  progressValue: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n  },\r\n  progressLabel: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    marginTop: 4,\r\n  },\r\n  detailsButton: {\r\n    marginTop: 16,\r\n  },\r\n  languageStats: {\r\n    gap: 12,\r\n  },\r\n  languageItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    backgroundColor: '#f8fafc',\r\n    borderRadius: 8,\r\n  },\r\n  languageFlag: {\r\n    fontSize: 24,\r\n    marginRight: 12,\r\n  },\r\n  languageName: {\r\n    flex: 1,\r\n    fontWeight: '500',\r\n    color: '#1f2937',\r\n  },\r\n  languageCount: {\r\n    color: '#6b7280',\r\n    fontSize: 14,\r\n  },\r\n  streakItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    backgroundColor: '#f8fafc',\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n  },\r\n  streakInfo: {\r\n    flex: 1,\r\n  },\r\n  streakType: {\r\n    fontWeight: '600',\r\n    color: '#1f2937',\r\n  },\r\n  streakDescription: {\r\n    color: '#6b7280',\r\n    marginTop: 2,\r\n  },\r\n  streakBadge: {\r\n    backgroundColor: '#6366f1',\r\n    borderRadius: 20,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    minWidth: 40,\r\n    alignItems: 'center',\r\n  },\r\n  streakCount: {\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n    fontSize: 16,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\AuthScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":2,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"Image"},"fix":{"range":[53,60],"text":""},"desc":"Remove unused variable 'Image'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":2,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { View, StyleSheet, Image } from 'react-native';\r\nimport { Text, Button, Surface } from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { RootStackParamList } from '../types';\r\n\r\ntype AuthScreenNavigationProp = NativeStackNavigationProp<RootStackParamList, 'Auth'>;\r\n\r\nexport default function AuthScreen() {\r\n  const navigation = useNavigation<AuthScreenNavigationProp>();\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Surface style={styles.surface} elevation={2}>\r\n        <View style={styles.logoContainer}>\r\n          <Text variant=\"headlineLarge\" style={styles.logo}>\r\n             SpeakSync\r\n          </Text>\r\n          <Text variant=\"titleMedium\" style={styles.tagline}>\r\n            Your Professional Teleprompter\r\n          </Text>\r\n        </View>\r\n\r\n        <View style={styles.contentContainer}>\r\n          <Text variant=\"bodyLarge\" style={styles.description}>\r\n            Create, edit, and present your scripts with confidence. \r\n            Sync across all your devices with cloud backup.\r\n          </Text>\r\n\r\n          <View style={styles.featureList}>\r\n            <Text variant=\"bodyMedium\" style={styles.feature}>\r\n               Cloud synchronization across devices\r\n            </Text>\r\n            <Text variant=\"bodyMedium\" style={styles.feature}>\r\n               Rich text editing capabilities\r\n            </Text>\r\n            <Text variant=\"bodyMedium\" style={styles.feature}>\r\n               Professional teleprompter view\r\n            </Text>\r\n            <Text variant=\"bodyMedium\" style={styles.feature}>\r\n               Works offline with auto-sync\r\n            </Text>\r\n          </View>\r\n        </View>\r\n\r\n        <View style={styles.buttonContainer}>\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={() => navigation.navigate('SignUp')}\r\n            style={[styles.button, styles.primaryButton]}\r\n            labelStyle={styles.buttonLabel}\r\n          >\r\n            Get Started\r\n          </Button>\r\n          \r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={() => navigation.navigate('SignIn')}\r\n            style={[styles.button, styles.secondaryButton]}\r\n            labelStyle={styles.secondaryButtonLabel}\r\n          >\r\n            Already have an account? Sign In\r\n          </Button>\r\n        </View>\r\n      </Surface>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  surface: {\r\n    padding: 32,\r\n    borderRadius: 16,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  logoContainer: {\r\n    alignItems: 'center',\r\n    marginBottom: 32,\r\n  },\r\n  logo: {\r\n    color: '#6366f1',\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  tagline: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  contentContainer: {\r\n    marginBottom: 32,\r\n  },\r\n  description: {\r\n    color: '#374151',\r\n    textAlign: 'center',\r\n    lineHeight: 24,\r\n    marginBottom: 24,\r\n  },\r\n  featureList: {\r\n    gap: 8,\r\n  },\r\n  feature: {\r\n    color: '#6b7280',\r\n    lineHeight: 20,\r\n  },\r\n  buttonContainer: {\r\n    gap: 12,\r\n  },\r\n  button: {\r\n    paddingVertical: 8,\r\n  },\r\n  primaryButton: {\r\n    backgroundColor: '#6366f1',\r\n  },\r\n  buttonLabel: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  secondaryButton: {\r\n    borderColor: '#6366f1',\r\n  },\r\n  secondaryButtonLabel: {\r\n    color: '#6366f1',\r\n    fontSize: 14,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\FeatureDemo.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":138,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":138,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":237,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":237,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":237,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":237,"endColumn":22,"suggestions":[{"fix":{"range":[6847,6897],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":240,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":240,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":240,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":240,"endColumn":22,"suggestions":[{"fix":{"range":[6970,7020],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":250,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":250,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":22,"suggestions":[{"fix":{"range":[7279,7317],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":253,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":253,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":253,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":253,"endColumn":22,"suggestions":[{"fix":{"range":[7377,7413],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Test Component to verify new Pacing Meter and Filler Word Detection features\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport { Button, Text, Surface } from 'react-native-paper';\r\nimport { \r\n  PacingMeter, \r\n  SessionSummary, \r\n  FillerWordCue, \r\n  PacingSettings \r\n} from '../components';\r\nimport {\r\n  PacingMeterSettings,\r\n  PacingMeterState,\r\n  FillerWordSettings,\r\n  FillerWordDetection,\r\n  SessionSummaryReport\r\n} from '../types';\r\n\r\nexport default function FeatureDemo() {\r\n  // Demo state for Pacing Meter\r\n  const [pacingSettings] = useState<PacingMeterSettings>({\r\n    enabled: true,\r\n    targetWPM: 150,\r\n    toleranceRange: 20,\r\n    showVisualMeter: true,\r\n    showSessionSummary: true,\r\n    colorScheme: {\r\n      optimal: '#10B981',\r\n      acceptable: '#F59E0B',\r\n      poor: '#EF4444',\r\n    },\r\n  });\r\n\r\n  const [pacingState, setPacingState] = useState<PacingMeterState>({\r\n    currentWPM: 120,\r\n    targetWPM: 150,\r\n    isInOptimalRange: false,\r\n    sessionStartTime: Date.now(),\r\n    averageWPM: 115,\r\n    wpmHistory: [],\r\n    paceAnalysis: [],\r\n  });\r\n\r\n  const [showPacingMeter, setShowPacingMeter] = useState(true);\r\n\r\n  // Demo state for Filler Words\r\n  const [fillerSettings] = useState<FillerWordSettings>({\r\n    enabled: true,\r\n    fillerWords: ['um', 'uh', 'like', 'you know'],\r\n    visualCueType: 'icon',\r\n    iconType: 'warning',\r\n    cueColor: '#FF9800',\r\n    showInRealTime: true,\r\n    trackInSession: true,\r\n    sensitivity: 'medium',\r\n  });\r\n\r\n  const [activeFillers, setActiveFillers] = useState<FillerWordDetection[]>([]);\r\n  const [showPacingSettings, setShowPacingSettings] = useState(false);\r\n\r\n  // Demo state for Session Summary\r\n  const [sessionReport] = useState<SessionSummaryReport>({\r\n    sessionId: 'demo-session',\r\n    scriptId: 'demo-script',\r\n    startTime: Date.now() - 300000, // 5 minutes ago\r\n    endTime: Date.now(),\r\n    totalWords: 250,\r\n    averageWPM: 145,\r\n    targetWPM: 150,\r\n    optimalPercentage: 75,\r\n    segments: [\r\n      {\r\n        startWordIndex: 0,\r\n        endWordIndex: 50,\r\n        averageWPM: 120,\r\n        status: 'too-slow',\r\n        duration: 25000,\r\n      },\r\n      {\r\n        startWordIndex: 51,\r\n        endWordIndex: 150,\r\n        averageWPM: 155,\r\n        status: 'optimal',\r\n        duration: 38000,\r\n      },\r\n      {\r\n        startWordIndex: 151,\r\n        endWordIndex: 249,\r\n        averageWPM: 180,\r\n        status: 'too-fast',\r\n        duration: 33000,\r\n      },\r\n    ],\r\n    fillerWords: [\r\n      {\r\n        word: 'um',\r\n        timestamp: Date.now() - 240000,\r\n        wordIndex: 25,\r\n        confidence: 0.9,\r\n        detectionMethod: 'stt',\r\n        position: { start: 25, end: 25 },\r\n      },\r\n      {\r\n        word: 'uh',\r\n        timestamp: Date.now() - 180000,\r\n        wordIndex: 75,\r\n        confidence: 0.8,\r\n        detectionMethod: 'rule-based',\r\n        position: { start: 75, end: 75 },\r\n      },\r\n    ],\r\n    recommendations: [\r\n      'Try to maintain a more consistent pace throughout your delivery.',\r\n      'Practice with shorter segments to improve pacing control.',\r\n      'Good job keeping filler words to a minimum!',\r\n    ],\r\n  });\r\n\r\n  const [showSessionSummary, setShowSessionSummary] = useState(false);\r\n\r\n  // Demo functions\r\n  const simulateFillerWord = () => {\r\n    const newFiller: FillerWordDetection = {\r\n      word: 'um',\r\n      timestamp: Date.now(),\r\n      wordIndex: Math.floor(Math.random() * 100),\r\n      confidence: 0.8 + Math.random() * 0.2,\r\n      detectionMethod: 'stt',\r\n      position: { start: 50, end: 50 },\r\n    };\r\n\r\n    setActiveFillers(prev => [...prev, newFiller]);\r\n\r\n    // Remove after 3 seconds\r\n    setTimeout(() => {\r\n      setActiveFillers(prev => prev.filter(f => f.timestamp !== newFiller.timestamp));\r\n    }, 3000);\r\n  };\r\n\r\n  const simulatePaceChange = () => {\r\n    const newWPM = 80 + Math.random() * 120; // Random WPM between 80-200\r\n    const isOptimal = newWPM >= (pacingSettings.targetWPM - pacingSettings.toleranceRange) && \r\n                     newWPM <= (pacingSettings.targetWPM + pacingSettings.toleranceRange);\r\n\r\n    setPacingState(prev => ({\r\n      ...prev,\r\n      currentWPM: newWPM,\r\n      isInOptimalRange: isOptimal,\r\n      averageWPM: (prev.averageWPM + newWPM) / 2,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Surface style={styles.demoPanel}>\r\n        <Text variant=\"headlineSmall\" style={styles.title}>\r\n          Feature Demo: Pacing Meter & Filler Detection\r\n        </Text>\r\n\r\n        <View style={styles.buttonRow}>\r\n          <Button \r\n            mode=\"contained\" \r\n            onPress={simulatePaceChange}\r\n            style={styles.button}\r\n          >\r\n            Simulate Pace Change\r\n          </Button>\r\n          <Button \r\n            mode=\"contained\" \r\n            onPress={simulateFillerWord}\r\n            style={styles.button}\r\n          >\r\n            Simulate Filler Word\r\n          </Button>\r\n        </View>\r\n\r\n        <View style={styles.buttonRow}>\r\n          <Button \r\n            mode=\"outlined\" \r\n            onPress={() => setShowPacingSettings(true)}\r\n            style={styles.button}\r\n          >\r\n            Pacing Settings\r\n          </Button>\r\n          <Button \r\n            mode=\"outlined\" \r\n            onPress={() => setShowSessionSummary(true)}\r\n            style={styles.button}\r\n          >\r\n            Session Summary\r\n          </Button>\r\n        </View>\r\n\r\n        <Text variant=\"bodyMedium\" style={styles.instructions}>\r\n           The pacing meter shows real-time WPM with color-coded zones\r\n           Filler word cues appear when \"um\", \"uh\", etc. are detected\r\n           Session summary provides comprehensive analysis after each session\r\n        </Text>\r\n      </Surface>\r\n\r\n      {/* Pacing Meter Component */}\r\n      <PacingMeter\r\n        state={pacingState}\r\n        settings={pacingSettings}\r\n        isVisible={showPacingMeter}\r\n        onToggleVisibility={() => setShowPacingMeter(!showPacingMeter)}\r\n      />\r\n\r\n      {/* Filler Word Cues */}\r\n      {activeFillers.map((detection, index) => (\r\n        <FillerWordCue\r\n          key={`${detection.timestamp}-${index}`}\r\n          detection={detection}\r\n          settings={fillerSettings}\r\n          onDismiss={() => {\r\n            setActiveFillers(prev => \r\n              prev.filter(cue => cue.timestamp !== detection.timestamp)\r\n            );\r\n          }}\r\n          style={{\r\n            top: 200 + (index * 50),\r\n            right: 20,\r\n          }}\r\n        />\r\n      ))}\r\n\r\n      {/* Settings Modal */}\r\n      <PacingSettings\r\n        visible={showPacingSettings}\r\n        onDismiss={() => setShowPacingSettings(false)}\r\n        pacingSettings={pacingSettings}\r\n        fillerSettings={fillerSettings}\r\n        onPacingSettingsChange={(settings) => {\r\n          console.log('Pacing settings changed:', settings);\r\n        }}\r\n        onFillerSettingsChange={(settings) => {\r\n          console.log('Filler settings changed:', settings);\r\n        }}\r\n      />\r\n\r\n      {/* Session Summary Modal */}\r\n      <SessionSummary\r\n        report={sessionReport}\r\n        visible={showSessionSummary}\r\n        onDismiss={() => setShowSessionSummary(false)}\r\n        onSaveReport={(report) => {\r\n          console.log('Saving report:', report);\r\n        }}\r\n        onStartNewSession={() => {\r\n          console.log('Starting new session');\r\n        }}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  demoPanel: {\r\n    margin: 16,\r\n    padding: 20,\r\n    borderRadius: 12,\r\n    elevation: 2,\r\n  },\r\n  title: {\r\n    textAlign: 'center',\r\n    marginBottom: 20,\r\n    color: '#333',\r\n  },\r\n  buttonRow: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    marginBottom: 16,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n  },\r\n  instructions: {\r\n    textAlign: 'center',\r\n    color: '#666',\r\n    lineHeight: 20,\r\n    marginTop: 8,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\HomeScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[72,93],"text":""},"desc":"Remove unused variable 'TouchableOpacity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":74,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":74,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":19}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  FAB,\r\n  IconButton,\r\n  Searchbar,\r\n  Surface,\r\n  Banner,\r\n  Chip,\r\n} from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { RootStackParamList, Script } from '../types';\r\n\r\ntype HomeScreenNavigationProp = NativeStackNavigationProp<\r\n  RootStackParamList,\r\n  'Home'\r\n>;\r\n\r\nexport default function HomeScreen() {\r\n  const navigation = useNavigation<HomeScreenNavigationProp>();\r\n  const { scripts, deleteScript, syncState, syncScripts } = useScriptStore();\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n\r\n  // Filter out deleted scripts and apply search\r\n  const visibleScripts = scripts.filter(script => !script.isDeleted);\r\n  const filteredScripts = visibleScripts.filter((script) =>\r\n    script.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    script.content.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const handleAddScript = () => {\r\n    navigation.navigate('ScriptEditor', {});\r\n  };\r\n\r\n  const handleEditScript = (scriptId: string) => {\r\n    navigation.navigate('ScriptEditor', { scriptId });\r\n  };\r\n\r\n  const handleOpenTeleprompter = (scriptId: string) => {\r\n    navigation.navigate('Teleprompter', { scriptId });\r\n  };\r\n\r\n  const handleDeleteScript = (script: Script) => {\r\n    Alert.alert(\r\n      'Delete Script',\r\n      `Are you sure you want to delete \"${script.title}\"?`,\r\n      [\r\n        {\r\n          text: 'Cancel',\r\n          style: 'cancel',\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          style: 'destructive',\r\n          onPress: () => deleteScript(script.id),\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const handleManualSync = async () => {\r\n    try {\r\n      await syncScripts();\r\n    } catch (error) {\r\n      Alert.alert('Sync Failed', 'Unable to sync scripts. Please try again.');\r\n    }\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return new Date(date).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n\r\n  const getSyncStatusIcon = (syncStatus: Script['syncStatus']) => {\r\n    switch (syncStatus) {\r\n      case 'synced': return 'check-circle';\r\n      case 'pending': return 'clock-outline';\r\n      case 'conflict': return 'alert-circle';\r\n      case 'error': return 'close-circle';\r\n      default: return 'help-circle';\r\n    }\r\n  };\r\n\r\n  const getSyncStatusColor = (syncStatus: Script['syncStatus']) => {\r\n    switch (syncStatus) {\r\n      case 'synced': return '#10b981';\r\n      case 'pending': return '#f59e0b';\r\n      case 'conflict': return '#f97316';\r\n      case 'error': return '#ef4444';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  const renderScript = ({ item }: { item: Script }) => (\r\n    <Card style={styles.scriptCard} mode=\"elevated\">\r\n      <Card.Content>\r\n        <View style={styles.scriptHeader}>\r\n          <View style={styles.scriptTitleContainer}>\r\n            <Text variant=\"titleMedium\" style={styles.scriptTitle}>\r\n              {item.title}\r\n            </Text>\r\n            <View style={styles.scriptMetadata}>\r\n              <IconButton\r\n                icon={getSyncStatusIcon(item.syncStatus)}\r\n                size={16}\r\n                iconColor={getSyncStatusColor(item.syncStatus)}\r\n                style={styles.syncIcon}\r\n              />\r\n              {item.syncStatus !== 'synced' && (\r\n                <Chip \r\n                  mode=\"outlined\" \r\n                  compact \r\n                  style={[styles.statusChip, { borderColor: getSyncStatusColor(item.syncStatus) }]}\r\n                  textStyle={{ color: getSyncStatusColor(item.syncStatus), fontSize: 10 }}\r\n                >\r\n                  {item.syncStatus}\r\n                </Chip>\r\n              )}\r\n            </View>\r\n          </View>\r\n          <View style={styles.scriptActions}>\r\n            <IconButton\r\n              icon=\"play\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#10b981\"\r\n              size={20}\r\n              onPress={() => handleOpenTeleprompter(item.id)}\r\n            />\r\n            <IconButton\r\n              icon=\"pencil\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#6366f1\"\r\n              size={20}\r\n              onPress={() => handleEditScript(item.id)}\r\n            />\r\n            <IconButton\r\n              icon=\"delete\"\r\n              mode=\"contained\"\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#ef4444\"\r\n              size={20}\r\n              onPress={() => handleDeleteScript(item)}\r\n            />\r\n          </View>\r\n        </View>\r\n        <Text variant=\"bodyMedium\" style={styles.scriptPreview} numberOfLines={2}>\r\n          {item.content || 'No content'}\r\n        </Text>\r\n        <Text variant=\"bodySmall\" style={styles.scriptDate}>\r\n          Last updated: {formatDate(item.updatedAt)}\r\n        </Text>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n\r\n  const renderEmptyState = () => (\r\n    <Surface style={styles.emptyState}>\r\n      <Text variant=\"headlineSmall\" style={styles.emptyTitle}>\r\n        No scripts yet\r\n      </Text>\r\n      <Text variant=\"bodyMedium\" style={styles.emptySubtitle}>\r\n        Create your first script to get started with teleprompter practice\r\n      </Text>\r\n    </Surface>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Offline Banner */}\r\n      {!syncState.isOnline && (\r\n        <Banner\r\n          visible={true}\r\n          actions={[]}\r\n          icon=\"wifi-off\"\r\n          style={styles.offlineBanner}\r\n        >\r\n          You're offline. Changes will sync when connection is restored.\r\n        </Banner>\r\n      )}\r\n\r\n      {/* Sync Status Banner */}\r\n      {syncState.pendingOperations > 0 && syncState.isOnline && (\r\n        <Banner\r\n          visible={true}\r\n          actions={[\r\n            {\r\n              label: 'Sync Now',\r\n              onPress: handleManualSync,\r\n            },\r\n          ]}\r\n          icon=\"sync\"\r\n          style={styles.syncBanner}\r\n        >\r\n          {syncState.pendingOperations} changes waiting to sync\r\n        </Banner>\r\n      )}\r\n\r\n      {/* Sync Errors Banner */}\r\n      {syncState.syncErrors.length > 0 && (\r\n        <Banner\r\n          visible={true}\r\n          actions={[\r\n            {\r\n              label: 'View',\r\n              onPress: () => navigation.navigate('Profile'),\r\n            },\r\n          ]}\r\n          icon=\"alert-circle\"\r\n          style={styles.errorBanner}\r\n        >\r\n          Some changes failed to sync\r\n        </Banner>\r\n      )}\r\n\r\n      {/* Header with Analytics button */}\r\n      <Surface style={styles.headerSurface}>\r\n        <View style={styles.headerContainer}>\r\n          <Text variant=\"headlineSmall\" style={styles.headerTitle}>\r\n            My Scripts\r\n          </Text>\r\n          <IconButton\r\n            icon=\"chart-line\"\r\n            mode=\"contained\"\r\n            iconColor=\"#ffffff\"\r\n            containerColor=\"#6366f1\"\r\n            size={20}\r\n            onPress={() => navigation.navigate('Analytics')}\r\n          />\r\n        </View>\r\n      </Surface>\r\n\r\n      <Searchbar\r\n        placeholder=\"Search scripts...\"\r\n        onChangeText={setSearchQuery}\r\n        value={searchQuery}\r\n        style={styles.searchBar}\r\n      />\r\n      \r\n      {filteredScripts.length === 0 && searchQuery === '' ? (\r\n        renderEmptyState()\r\n      ) : (\r\n        <FlatList\r\n          data={filteredScripts}\r\n          renderItem={renderScript}\r\n          keyExtractor={(item) => item.id}\r\n          contentContainerStyle={styles.listContainer}\r\n          showsVerticalScrollIndicator={false}\r\n        />\r\n      )}\r\n      \r\n      <FAB\r\n        icon=\"plus\"\r\n        style={styles.fab}\r\n        onPress={handleAddScript}\r\n        label=\"New Script\"\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  offlineBanner: {\r\n    backgroundColor: '#fef3c7',\r\n  },\r\n  syncBanner: {\r\n    backgroundColor: '#dbeafe',\r\n  },\r\n  errorBanner: {\r\n    backgroundColor: '#fee2e2',\r\n  },\r\n  searchBar: {\r\n    margin: 16,\r\n    elevation: 2,\r\n  },\r\n  listContainer: {\r\n    padding: 16,\r\n    paddingBottom: 100,\r\n  },\r\n  scriptCard: {\r\n    marginBottom: 12,\r\n    elevation: 3,\r\n  },\r\n  scriptHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n    marginBottom: 8,\r\n  },\r\n  scriptTitleContainer: {\r\n    flex: 1,\r\n  },\r\n  scriptTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  scriptMetadata: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 8,\r\n  },\r\n  syncIcon: {\r\n    margin: 0,\r\n    padding: 0,\r\n  },\r\n  statusChip: {\r\n    height: 20,\r\n  },\r\n  scriptActions: {\r\n    flexDirection: 'row',\r\n    gap: 4,\r\n  },\r\n  scriptPreview: {\r\n    color: '#6b7280',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  scriptDate: {\r\n    color: '#9ca3af',\r\n    fontSize: 12,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    margin: 16,\r\n    padding: 32,\r\n    borderRadius: 12,\r\n    elevation: 2,\r\n  },\r\n  emptyTitle: {\r\n    color: '#1f2937',\r\n    marginBottom: 8,\r\n    textAlign: 'center',\r\n  },\r\n  emptySubtitle: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    lineHeight: 20,\r\n  },\r\n  fab: {\r\n    position: 'absolute',\r\n    margin: 16,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#6366f1',\r\n  },\r\n  headerSurface: {\r\n    elevation: 2,\r\n    backgroundColor: '#ffffff',\r\n    marginBottom: 8,\r\n  },\r\n  headerContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n  },\r\n  headerTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\ProfileScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Switch"},"fix":{"range":[145,156],"text":""},"desc":"Remove unused variable 'Switch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":9},{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[167,179],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'Modal' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Modal"},"fix":{"range":[212,222],"text":""},"desc":"Remove unused variable 'Modal'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Modal' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":8},{"ruleId":"no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":20,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigation"},"fix":{"range":[484,519],"text":""},"desc":"Remove unused variable 'navigation'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":20,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":40,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":40,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":57,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":57,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":66,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":66,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":19},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":72,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":72,"endColumn":31,"fix":{"range":[2112,2127],"text":"{return 'Never';}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":279,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":279,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":279,"endColumn":24,"suggestions":[{"fix":{"range":[8942,8989],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { View, StyleSheet, ScrollView, Alert } from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  List,\r\n  Switch,\r\n  Button,\r\n  Divider,\r\n  Surface,\r\n  Badge,\r\n  Portal,\r\n  Modal,\r\n} from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { FeedbackPanel, GamificationPanel } from '../components';\r\n\r\nexport default function ProfileScreen() {\r\n  const navigation = useNavigation();\r\n  const { authState, syncState, signOut, syncScripts, retryFailedOperations } = useScriptStore();\r\n  \r\n  // State for feedback and gamification modals\r\n  const [showFeedbackPanel, setShowFeedbackPanel] = useState(false);\r\n  const [showGamificationPanel, setShowGamificationPanel] = useState(false);\r\n\r\n  const handleSignOut = () => {\r\n    Alert.alert(\r\n      'Sign Out',\r\n      'Are you sure you want to sign out? Any unsynced changes will be lost.',\r\n      [\r\n        { text: 'Cancel', style: 'cancel' },\r\n        {\r\n          text: 'Sign Out',\r\n          style: 'destructive',\r\n          onPress: async () => {\r\n            try {\r\n              await signOut();\r\n              // Navigation will be handled by auth state listener\r\n            } catch (error) {\r\n              Alert.alert(\r\n                'Error',\r\n                'Failed to sign out. Please try again.',\r\n                [{ text: 'OK' }]\r\n              );\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const handleManualSync = async () => {\r\n    try {\r\n      await syncScripts();\r\n      Alert.alert('Success', 'Scripts synced successfully!');\r\n    } catch (error) {\r\n      Alert.alert('Sync Failed', 'Failed to sync scripts. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleRetryFailedOperations = async () => {\r\n    try {\r\n      await retryFailedOperations();\r\n      Alert.alert('Success', 'Retry completed!');\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to retry operations. Please try again.');\r\n    }\r\n  };\r\n\r\n  const formatLastSync = (date: Date | null) => {\r\n    if (!date) return 'Never';\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: '2-digit',\r\n    }).format(date);\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <Surface style={styles.header} elevation={2}>\r\n        <Text variant=\"headlineSmall\" style={styles.headerTitle}>\r\n          Profile & Settings\r\n        </Text>\r\n      </Surface>\r\n\r\n      {/* User Info */}\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <View style={styles.userInfo}>\r\n            <View style={styles.avatar}>\r\n              <Text variant=\"headlineMedium\" style={styles.avatarText}>\r\n                {authState.user?.displayName?.[0]?.toUpperCase() || \r\n                 authState.user?.email?.[0]?.toUpperCase() || '?'}\r\n              </Text>\r\n            </View>\r\n            <View style={styles.userDetails}>\r\n              <Text variant=\"titleMedium\" style={styles.userName}>\r\n                {authState.user?.displayName || 'User'}\r\n              </Text>\r\n              <Text variant=\"bodyMedium\" style={styles.userEmail}>\r\n                {authState.user?.email}\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Sync Status */}\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Sync Status\r\n          </Text>\r\n          \r\n          <List.Item\r\n            title=\"Connection Status\"\r\n            description={syncState.isOnline ? 'Online' : 'Offline'}\r\n            left={() => (\r\n              <List.Icon \r\n                icon={syncState.isOnline ? 'wifi' : 'wifi-off'} \r\n                color={syncState.isOnline ? '#10b981' : '#ef4444'}\r\n              />\r\n            )}\r\n            right={() => (\r\n              <Badge \r\n                style={[\r\n                  styles.statusBadge,\r\n                  { backgroundColor: syncState.isOnline ? '#10b981' : '#ef4444' }\r\n                ]}\r\n              >\r\n                {syncState.isOnline ? 'Online' : 'Offline'}\r\n              </Badge>\r\n            )}\r\n          />\r\n\r\n          <List.Item\r\n            title=\"Last Sync\"\r\n            description={formatLastSync(syncState.lastSyncAt)}\r\n            left={() => <List.Icon icon=\"sync\" />}\r\n            right={() => \r\n              syncState.isSyncing ? (\r\n                <Badge style={[styles.statusBadge, { backgroundColor: '#f59e0b' }]}>\r\n                  Syncing...\r\n                </Badge>\r\n              ) : null\r\n            }\r\n          />\r\n\r\n          {syncState.pendingOperations > 0 && (\r\n            <List.Item\r\n              title=\"Pending Operations\"\r\n              description={`${syncState.pendingOperations} changes waiting to sync`}\r\n              left={() => <List.Icon icon=\"clock-outline\" color=\"#f59e0b\" />}\r\n              right={() => (\r\n                <Badge style={[styles.statusBadge, { backgroundColor: '#f59e0b' }]}>\r\n                  {syncState.pendingOperations}\r\n                </Badge>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          {syncState.syncErrors.length > 0 && (\r\n            <List.Item\r\n              title=\"Sync Errors\"\r\n              description={`${syncState.syncErrors.length} failed operations`}\r\n              left={() => <List.Icon icon=\"alert-circle\" color=\"#ef4444\" />}\r\n              right={() => (\r\n                <Badge style={[styles.statusBadge, { backgroundColor: '#ef4444' }]}>\r\n                  {syncState.syncErrors.length}\r\n                </Badge>\r\n              )}\r\n            />\r\n          )}\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Sync Actions */}\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Sync Actions\r\n          </Text>\r\n          \r\n          <View style={styles.actionButtons}>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleManualSync}\r\n              disabled={syncState.isSyncing || !syncState.isOnline}\r\n              loading={syncState.isSyncing}\r\n              style={styles.actionButton}\r\n              icon=\"sync\"\r\n            >\r\n              Manual Sync\r\n            </Button>\r\n\r\n            {syncState.syncErrors.length > 0 && (\r\n              <Button\r\n                mode=\"outlined\"\r\n                onPress={handleRetryFailedOperations}\r\n                disabled={syncState.isSyncing}\r\n                style={styles.actionButton}\r\n                icon=\"refresh\"\r\n              >\r\n                Retry Failed Operations\r\n              </Button>\r\n            )}\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* App Info */}\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            About\r\n          </Text>\r\n          \r\n          <List.Item\r\n            title=\"Version\"\r\n            description=\"1.0.0\"\r\n            left={() => <List.Icon icon=\"information\" />}\r\n          />\r\n          \r\n          <List.Item\r\n            title=\"Storage\"\r\n            description=\"Local + Cloud Sync\"\r\n            left={() => <List.Icon icon=\"database\" />}\r\n          />\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Feedback & Support */}\r\n      <Card style={styles.card} mode=\"elevated\">\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n            Feedback & Support\r\n          </Text>\r\n          \r\n          <List.Item\r\n            title=\"Send Feedback\"\r\n            description=\"Report bugs or suggest features\"\r\n            left={() => <List.Icon icon=\"message-alert\" />}\r\n            right={() => <List.Icon icon=\"chevron-right\" />}\r\n            onPress={() => setShowFeedbackPanel(true)}\r\n          />\r\n          \r\n          <List.Item\r\n            title=\"View Progress\"\r\n            description=\"See achievements and stats\"\r\n            left={() => <List.Icon icon=\"trophy\" />}\r\n            right={() => <List.Icon icon=\"chevron-right\" />}\r\n            onPress={() => setShowGamificationPanel(true)}\r\n          />\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Sign Out */}\r\n      <View style={styles.signOutContainer}>\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={handleSignOut}\r\n          style={styles.signOutButton}\r\n          labelStyle={styles.signOutButtonLabel}\r\n          icon=\"logout\"\r\n        >\r\n          Sign Out\r\n        </Button>\r\n      </View>\r\n\r\n      {/* Feedback Panel Modal */}\r\n      <Portal>\r\n        <FeedbackPanel\r\n          visible={showFeedbackPanel}\r\n          onDismiss={() => setShowFeedbackPanel(false)}\r\n          onSubmitted={(feedbackId) => {\r\n            console.log('Feedback submitted:', feedbackId);\r\n            Alert.alert(\r\n              'Feedback Sent',\r\n              'Thank you for your feedback! We will review it and get back to you.',\r\n              [{ text: 'OK', onPress: () => setShowFeedbackPanel(false) }]\r\n            );\r\n          }}\r\n        />\r\n      </Portal>\r\n\r\n      {/* Gamification Panel Modal */}\r\n      <Portal>\r\n        <GamificationPanel\r\n          visible={showGamificationPanel}\r\n          onDismiss={() => setShowGamificationPanel(false)}\r\n        />\r\n      </Portal>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  header: {\r\n    padding: 20,\r\n    backgroundColor: '#6366f1',\r\n    marginBottom: 16,\r\n  },\r\n  headerTitle: {\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  card: {\r\n    margin: 16,\r\n    marginTop: 0,\r\n    elevation: 2,\r\n  },\r\n  userInfo: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 16,\r\n  },\r\n  avatar: {\r\n    width: 60,\r\n    height: 60,\r\n    borderRadius: 30,\r\n    backgroundColor: '#6366f1',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  avatarText: {\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n  },\r\n  userDetails: {\r\n    flex: 1,\r\n  },\r\n  userName: {\r\n    color: '#1f2937',\r\n    fontWeight: 'bold',\r\n  },\r\n  userEmail: {\r\n    color: '#6b7280',\r\n  },\r\n  sectionTitle: {\r\n    color: '#1f2937',\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  statusBadge: {\r\n    alignSelf: 'center',\r\n  },\r\n  actionButtons: {\r\n    gap: 12,\r\n    marginTop: 16,\r\n  },\r\n  actionButton: {\r\n    paddingVertical: 4,\r\n  },\r\n  signOutContainer: {\r\n    padding: 16,\r\n    paddingBottom: 32,\r\n  },\r\n  signOutButton: {\r\n    borderColor: '#ef4444',\r\n    paddingVertical: 8,\r\n  },\r\n  signOutButtonLabel: {\r\n    color: '#ef4444',\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: '#ffffff',\r\n    margin: 20,\r\n    borderRadius: 12,\r\n    padding: 20,\r\n    maxHeight: '80%',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\ScriptEditorScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'I18nManager' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"I18nManager"},"fix":{"range":[161,177],"text":""},"desc":"Remove unused variable 'I18nManager'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'I18nManager' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'multiLanguageService'. Either include it or remove the dependency array.","line":78,"column":6,"nodeType":"ArrayExpression","endLine":78,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [scriptId, getScriptById, multiLanguageService]","fix":{"range":[2719,2744],"text":"[scriptId, getScriptById, multiLanguageService]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":121,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":121,"endColumn":37,"fix":{"range":[3867,3874],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":136,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":136,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":136,"endColumn":20,"suggestions":[{"fix":{"range":[4325,4376],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":185,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":185,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":185,"endColumn":20,"suggestions":[{"fix":{"range":[5685,5721],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":223,"column":33,"nodeType":"MemberExpression","endLine":223,"endColumn":51}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  TextInput,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n  Alert,\r\n  I18nManager,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Button,\r\n  Card,\r\n  IconButton,\r\n  Surface,\r\n  Divider,\r\n  Chip,\r\n} from 'react-native-paper';\r\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { LanguageSelector } from '../components';\r\nimport MultiLanguageService from '../services/multiLanguageService';\r\nimport { RootStackParamList, LanguageOption, ExtendedScript } from '../types';\r\n\r\ntype ScriptEditorScreenNavigationProp = NativeStackNavigationProp<\r\n  RootStackParamList,\r\n  'ScriptEditor'\r\n>;\r\n\r\ntype ScriptEditorScreenRouteProp = RouteProp<\r\n  RootStackParamList,\r\n  'ScriptEditor'\r\n>;\r\n\r\nexport default function ScriptEditorScreen() {\r\n  const navigation = useNavigation<ScriptEditorScreenNavigationProp>();\r\n  const route = useRoute<ScriptEditorScreenRouteProp>();\r\n  const { scriptId } = route.params || {};\r\n  \r\n  const { addScript, updateScript, getScriptById } = useScriptStore();\r\n  const multiLanguageService = MultiLanguageService.getInstance();\r\n  \r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  const [selectedLanguage, setSelectedLanguage] = useState<LanguageOption | null>(null);\r\n  const [detectedLanguage, setDetectedLanguage] = useState<LanguageOption | null>(null);\r\n  const [languageConfidence, setLanguageConfidence] = useState<number | null>(null);\r\n  const [isDetectingLanguage, setIsDetectingLanguage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (scriptId) {\r\n      const script = getScriptById(scriptId);\r\n      if (script) {\r\n        setTitle(script.title);\r\n        setContent(script.content);\r\n        setIsEditing(true);\r\n        \r\n        // Load script language if it's an ExtendedScript\r\n        const extendedScript = script as ExtendedScript;\r\n        if (extendedScript.language) {\r\n          setSelectedLanguage(extendedScript.language);\r\n        }\r\n        if (extendedScript.detectedLanguage) {\r\n          setDetectedLanguage(extendedScript.detectedLanguage);\r\n          setLanguageConfidence(extendedScript.languageConfidence || null);\r\n        }\r\n      }\r\n    } else {\r\n      // Set default language for new scripts\r\n      const defaultLanguage = multiLanguageService.getDefaultLanguage();\r\n      setSelectedLanguage(defaultLanguage);\r\n    }\r\n  }, [scriptId, getScriptById]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = navigation.addListener('beforeRemove', (e) => {\r\n      if (!hasUnsavedChanges) {\r\n        return;\r\n      }\r\n\r\n      e.preventDefault();\r\n\r\n      Alert.alert(\r\n        'Discard changes?',\r\n        'You have unsaved changes. Are you sure you want to discard them?',\r\n        [\r\n          { text: 'Stay', style: 'cancel' },\r\n          {\r\n            text: 'Discard',\r\n            style: 'destructive',\r\n            onPress: () => navigation.dispatch(e.data.action),\r\n          },\r\n        ]\r\n      );\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation, hasUnsavedChanges]);\r\n\r\n  const handleTitleChange = (text: string) => {\r\n    setTitle(text);\r\n    setHasUnsavedChanges(true);\r\n  };\r\n\r\n  const handleContentChange = (text: string) => {\r\n    setContent(text);\r\n    setHasUnsavedChanges(true);\r\n    \r\n    // Auto-detect language if enabled and content is substantial\r\n    if (text.trim().length > 50 && !selectedLanguage) {\r\n      detectLanguageFromContent(text);\r\n    }\r\n  };\r\n\r\n  const detectLanguageFromContent = async (text: string) => {\r\n    if (isDetectingLanguage) return;\r\n    \r\n    setIsDetectingLanguage(true);\r\n    try {\r\n      const detected = await multiLanguageService.detectLanguage(text);\r\n      if (detected) {\r\n        setDetectedLanguage(detected);\r\n        setLanguageConfidence(0.85); // Mock confidence for now\r\n        \r\n        // Auto-select if no language is currently selected\r\n        if (!selectedLanguage) {\r\n          setSelectedLanguage(detected);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Language detection failed:', error);\r\n    } finally {\r\n      setIsDetectingLanguage(false);\r\n    }\r\n  };\r\n\r\n  const handleLanguageSelect = (language: LanguageOption) => {\r\n    setSelectedLanguage(language);\r\n    setHasUnsavedChanges(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!title.trim()) {\r\n      Alert.alert('Error', 'Please enter a title for your script.');\r\n      return;\r\n    }\r\n\r\n    if (!content.trim()) {\r\n      Alert.alert('Error', 'Please enter some content for your script.');\r\n      return;\r\n    }\r\n\r\n    if (!selectedLanguage) {\r\n      Alert.alert('Error', 'Please select a language for your script.');\r\n      return;\r\n    }\r\n\r\n    const scriptData = {\r\n      title: title.trim(),\r\n      content: content.trim(),\r\n      language: selectedLanguage,\r\n      detectedLanguage,\r\n      languageConfidence,\r\n      isMultilingual: false, // Could be enhanced to detect this\r\n      textDirection: selectedLanguage.rtl ? 'rtl' as const : 'ltr' as const,\r\n      characterSet: 'UTF-8'\r\n    };\r\n\r\n    try {\r\n      if (isEditing && scriptId) {\r\n        await updateScript(scriptId, scriptData);\r\n      } else {\r\n        await addScript(scriptData);\r\n      }\r\n\r\n      setHasUnsavedChanges(false);\r\n      navigation.goBack();\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to save script. Please try again.');\r\n      console.error('Save error:', error);\r\n    }\r\n  };\r\n\r\n  const handlePreview = () => {\r\n    if (!content.trim()) {\r\n      Alert.alert('Error', 'Please enter some content to preview.');\r\n      return;\r\n    }\r\n\r\n    if (hasUnsavedChanges) {\r\n      Alert.alert(\r\n        'Unsaved Changes',\r\n        'You have unsaved changes. Please save first before using the teleprompter.',\r\n        [\r\n          { text: 'Cancel', style: 'cancel' },\r\n          {\r\n            text: 'Save & Preview',\r\n            onPress: () => {\r\n              handleSave();\r\n              if (scriptId) {\r\n                navigation.navigate('Teleprompter', { scriptId });\r\n              }\r\n            },\r\n          },\r\n        ]\r\n      );\r\n    } else if (scriptId) {\r\n      navigation.navigate('Teleprompter', { scriptId });\r\n    }\r\n  };\r\n\r\n  const insertFormatting = (format: 'bold' | 'italic') => {\r\n    const formatTags = {\r\n      bold: ['**', '**'],\r\n      italic: ['*', '*'],\r\n    };\r\n    \r\n    const [openTag, closeTag] = formatTags[format];\r\n    const newContent = content + openTag + 'text' + closeTag;\r\n    setContent(newContent);\r\n    setHasUnsavedChanges(true);\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={styles.container}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n    >\r\n      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\r\n        <Surface style={styles.surface}>\r\n          <Card style={styles.titleCard} mode=\"elevated\">\r\n            <Card.Content>\r\n              <Text variant=\"labelLarge\" style={styles.label}>\r\n                Script Title\r\n              </Text>\r\n              <TextInput\r\n                style={[\r\n                  styles.titleInput,\r\n                  selectedLanguage?.rtl && styles.rtlText\r\n                ]}\r\n                value={title}\r\n                onChangeText={handleTitleChange}\r\n                placeholder=\"Enter script title...\"\r\n                placeholderTextColor=\"#9ca3af\"\r\n                multiline={false}\r\n              />\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          <LanguageSelector\r\n            selectedLanguage={selectedLanguage}\r\n            onLanguageSelect={handleLanguageSelect}\r\n            showDetectionInfo={!!detectedLanguage}\r\n            detectedLanguage={detectedLanguage}\r\n            confidence={languageConfidence || undefined}\r\n            title=\"Script Language\"\r\n            subtitle=\"Select the language of your script for optimal speech recognition\"\r\n          />\r\n\r\n          <Card style={styles.editorCard} mode=\"elevated\">\r\n            <Card.Content>\r\n              <View style={styles.editorHeader}>\r\n                <Text variant=\"labelLarge\" style={styles.label}>\r\n                  Script Content\r\n                </Text>\r\n                <View style={styles.formattingToolbar}>\r\n                  <IconButton\r\n                    icon=\"format-bold\"\r\n                    mode=\"contained\"\r\n                    size={20}\r\n                    onPress={() => insertFormatting('bold')}\r\n                    iconColor=\"#374151\"\r\n                    containerColor=\"#f3f4f6\"\r\n                  />\r\n                  <IconButton\r\n                    icon=\"format-italic\"\r\n                    mode=\"contained\"\r\n                    size={20}\r\n                    onPress={() => insertFormatting('italic')}\r\n                    iconColor=\"#374151\"\r\n                    containerColor=\"#f3f4f6\"\r\n                  />\r\n                  {selectedLanguage?.rtl && (\r\n                    <Chip\r\n                      mode=\"outlined\"\r\n                      compact\r\n                      style={styles.rtlIndicator}\r\n                      textStyle={styles.rtlText}\r\n                    >\r\n                      RTL\r\n                    </Chip>\r\n                  )}\r\n                </View>\r\n              </View>\r\n              \r\n              <Divider style={styles.divider} />\r\n              \r\n              <TextInput\r\n                style={[\r\n                  styles.contentInput,\r\n                  selectedLanguage?.rtl && styles.rtlText\r\n                ]}\r\n                value={content}\r\n                onChangeText={handleContentChange}\r\n                placeholder=\"Start writing your script here...\"\r\n                placeholderTextColor=\"#9ca3af\"\r\n                multiline={true}\r\n                textAlignVertical=\"top\"\r\n              />\r\n            </Card.Content>\r\n          </Card>\r\n\r\n          <View style={styles.actionButtons}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => navigation.goBack()}\r\n              style={[styles.button, styles.cancelButton]}\r\n              labelStyle={styles.cancelButtonText}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            \r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleSave}\r\n              style={[styles.button, styles.saveButton]}\r\n              disabled={!title.trim() || !content.trim() || !selectedLanguage}\r\n            >\r\n              {isEditing ? 'Update' : 'Save'}\r\n            </Button>\r\n          </View>\r\n\r\n          {scriptId && (\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handlePreview}\r\n              style={[styles.button, styles.previewButton]}\r\n              icon=\"play\"\r\n              disabled={!content.trim()}\r\n            >\r\n              Open in Teleprompter\r\n            </Button>\r\n          )}\r\n        </Surface>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  scrollView: {\r\n    flex: 1,\r\n  },\r\n  surface: {\r\n    padding: 16,\r\n    paddingBottom: 32,\r\n  },\r\n  titleCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  editorCard: {\r\n    marginBottom: 24,\r\n    elevation: 2,\r\n  },\r\n  label: {\r\n    color: '#374151',\r\n    marginBottom: 8,\r\n    fontWeight: '600',\r\n  },\r\n  titleInput: {\r\n    fontSize: 18,\r\n    color: '#1f2937',\r\n    padding: 12,\r\n    backgroundColor: '#f9fafb',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e7eb',\r\n    minHeight: 48,\r\n  },\r\n  editorHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  formattingToolbar: {\r\n    flexDirection: 'row',\r\n    gap: 4,\r\n  },\r\n  divider: {\r\n    marginBottom: 12,\r\n  },\r\n  contentInput: {\r\n    fontSize: 16,\r\n    color: '#1f2937',\r\n    padding: 12,\r\n    backgroundColor: '#f9fafb',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e7eb',\r\n    minHeight: 300,\r\n  },\r\n  rtlText: {\r\n    textAlign: 'right',\r\n    writingDirection: 'rtl',\r\n  },\r\n  rtlIndicator: {\r\n    marginLeft: 8,\r\n    backgroundColor: '#E3F2FD',\r\n  },\r\n  actionButtons: {\r\n    flexDirection: 'row',\r\n    gap: 12,\r\n    marginBottom: 16,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    paddingVertical: 4,\r\n  },\r\n  cancelButton: {\r\n    borderColor: '#6b7280',\r\n  },\r\n  cancelButtonText: {\r\n    color: '#6b7280',\r\n  },\r\n  saveButton: {\r\n    backgroundColor: '#6366f1',\r\n  },\r\n  previewButton: {\r\n    backgroundColor: '#10b981',\r\n    marginTop: 8,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\SessionDetailScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Divider"},"fix":{"range":[209,221],"text":""},"desc":"Remove unused variable 'Divider'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadSession'. Either include it or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [loadSession, sessionId]","fix":{"range":[1247,1258],"text":"[loadSession, sessionId]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":47,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":20,"suggestions":[{"fix":{"range":[1475,1522],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":197,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6555,6558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6555,6558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  ActivityIndicator,\r\n  Chip,\r\n  Surface,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport { LineChart } from 'react-native-chart-kit';\r\nimport { RouteProp } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { SessionReport, RootStackParamList } from '../types';\r\nimport { analyticsService } from '../services/analyticsService';\r\n\r\nconst { width: screenWidth } = Dimensions.get('window');\r\n\r\ntype SessionDetailScreenRouteProp = RouteProp<RootStackParamList, 'SessionDetail'>;\r\ntype SessionDetailScreenNavigationProp = NativeStackNavigationProp<RootStackParamList, 'SessionDetail'>;\r\n\r\ninterface SessionDetailScreenProps {\r\n  route: SessionDetailScreenRouteProp;\r\n  navigation: SessionDetailScreenNavigationProp;\r\n}\r\n\r\nexport default function SessionDetailScreen({ route }: SessionDetailScreenProps) {\r\n  const { sessionId } = route.params;\r\n  const [session, setSession] = useState<SessionReport | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadSession();\r\n  }, [sessionId]);\r\n\r\n  const loadSession = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const sessionData = await analyticsService.getSessionById(sessionId);\r\n      setSession(sessionData);\r\n    } catch (error) {\r\n      console.error('Error loading session:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDuration = (milliseconds: number) => {\r\n    const minutes = Math.floor(milliseconds / 60000);\r\n    const seconds = Math.floor((milliseconds % 60000) / 1000);\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleString();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Text style={styles.loadingText}>Loading session details...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (!session) {\r\n    return (\r\n      <View style={styles.errorContainer}>\r\n        <Text variant=\"titleMedium\">Session not found</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const chartConfig = {\r\n    backgroundColor: '#ffffff',\r\n    backgroundGradientFrom: '#ffffff',\r\n    backgroundGradientTo: '#ffffff',\r\n    decimalPlaces: 1,\r\n    color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n    labelColor: (opacity = 1) => `rgba(31, 41, 55, ${opacity})`,\r\n    style: {\r\n      borderRadius: 16,\r\n    },\r\n    propsForDots: {\r\n      r: '4',\r\n      strokeWidth: '2',\r\n      stroke: '#6366f1',\r\n    },\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      {/* Session Header */}\r\n      <Card style={styles.headerCard}>\r\n        <Card.Content>\r\n          <Text variant=\"headlineSmall\" style={styles.scriptTitle}>\r\n            {session.scriptTitle}\r\n          </Text>\r\n          <Text variant=\"bodyMedium\" style={styles.sessionDate}>\r\n            {formatDate(session.startTime)}\r\n          </Text>\r\n          \r\n          <View style={styles.quickStats}>\r\n            <View style={styles.statItem}>\r\n              <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                {formatDuration(session.totalDuration)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                Duration\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.statItem}>\r\n              <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                {session.averageWPM.toFixed(0)}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                Avg WPM\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.statItem}>\r\n              <Text variant=\"headlineMedium\" style={styles.statValue}>\r\n                {session.wordsSpoken}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.statLabel}>\r\n                Words Spoken\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* Performance Metrics */}\r\n      <Card style={styles.metricsCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Performance Metrics\r\n          </Text>\r\n          \r\n          <View style={styles.chipContainer}>\r\n            <Chip mode=\"outlined\" style={styles.chip}>\r\n              {session.scriptAdherence.accuracyScore.toFixed(1)}% Accuracy\r\n            </Chip>\r\n            <Chip mode=\"outlined\" style={styles.chip}>\r\n              {session.scriptAdherence.adherencePercentage.toFixed(1)}% Adherence\r\n            </Chip>\r\n            <Chip mode=\"outlined\" style={styles.chip}>\r\n              {session.fillerWordAnalysis.totalFillerWords} Filler Words\r\n            </Chip>\r\n            <Chip mode=\"outlined\" style={styles.chip}>\r\n              {session.fillerWordAnalysis.fillerRate.toFixed(1)} per minute\r\n            </Chip>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* WPM Over Time */}\r\n      {session.wpmHistory && session.wpmHistory.length > 0 && (\r\n        <Card style={styles.chartCard}>\r\n          <Card.Content>\r\n            <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n              Speaking Pace Over Time\r\n            </Text>\r\n            <LineChart\r\n              data={{\r\n                labels: session.wpmHistory.map((_, index) => `${index * 10}s`),\r\n                datasets: [{\r\n                  data: session.wpmHistory.map(point => point.wpm),\r\n                  color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,\r\n                  strokeWidth: 3,\r\n                }],\r\n              }}\r\n              width={screenWidth - 64}\r\n              height={220}\r\n              chartConfig={chartConfig}\r\n              bezier\r\n              style={styles.chart}\r\n            />\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Filler Words Details */}\r\n      {session.fillerWordAnalysis.fillerInstances && session.fillerWordAnalysis.fillerInstances.length > 0 && (\r\n        <Card style={styles.fillerCard}>\r\n          <Card.Content>\r\n            <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n              Filler Words Detected\r\n            </Text>\r\n            {session.fillerWordAnalysis.fillerInstances.slice(0, 10).map((instance: any, index: number) => (\r\n              <Surface key={index} style={styles.fillerInstance}>\r\n                <Text variant=\"bodyMedium\" style={styles.fillerWord}>\r\n                  \"{instance.word}\"\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.fillerTime}>\r\n                  at {Math.floor(instance.timestamp / 1000)}s\r\n                </Text>\r\n              </Surface>\r\n            ))}\r\n            {session.fillerWordAnalysis.fillerInstances.length > 10 && (\r\n              <Text variant=\"bodySmall\" style={styles.moreFillers}>\r\n                + {session.fillerWordAnalysis.fillerInstances.length - 10} more instances\r\n              </Text>\r\n            )}\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Script Adherence Analysis */}\r\n      <Card style={styles.adherenceCard}>\r\n        <Card.Content>\r\n          <Text variant=\"titleMedium\" style={styles.cardTitle}>\r\n            Script Adherence Analysis\r\n          </Text>\r\n          \r\n          <View style={styles.adherenceStats}>\r\n            <View style={styles.adherenceStat}>\r\n              <Text variant=\"titleMedium\" style={styles.adherenceValue}>\r\n                {session.scriptAdherence.wordsSpoken}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.adherenceLabel}>\r\n                Words Spoken\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.adherenceStat}>\r\n              <Text variant=\"titleMedium\" style={styles.adherenceValue}>\r\n                {session.scriptAdherence.skippedSections.length}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.adherenceLabel}>\r\n                Skipped Sections\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.adherenceStat}>\r\n              <Text variant=\"titleMedium\" style={styles.adherenceValue}>\r\n                {session.scriptAdherence.deviations.length}\r\n              </Text>\r\n              <Text variant=\"bodySmall\" style={styles.adherenceLabel}>\r\n                Deviations\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        </Card.Content>\r\n      </Card>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n    padding: 16,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#6b7280',\r\n  },\r\n  errorContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  headerCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  scriptTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  sessionDate: {\r\n    color: '#6b7280',\r\n    marginBottom: 16,\r\n  },\r\n  quickStats: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  statItem: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  statValue: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n    marginBottom: 4,\r\n  },\r\n  statLabel: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  metricsCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  chartCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  fillerCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  adherenceCard: {\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n  },\r\n  cardTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 16,\r\n  },\r\n  chipContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    gap: 8,\r\n  },\r\n  chip: {\r\n    marginBottom: 8,\r\n  },\r\n  chart: {\r\n    borderRadius: 16,\r\n    marginTop: 8,\r\n  },\r\n  fillerInstance: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    padding: 8,\r\n    marginBottom: 4,\r\n    borderRadius: 4,\r\n    elevation: 1,\r\n  },\r\n  fillerWord: {\r\n    fontWeight: 'bold',\r\n    color: '#ef4444',\r\n  },\r\n  fillerTime: {\r\n    color: '#6b7280',\r\n  },\r\n  moreFillers: {\r\n    textAlign: 'center',\r\n    color: '#6b7280',\r\n    fontStyle: 'italic',\r\n    marginTop: 8,\r\n  },\r\n  adherenceStats: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  adherenceStat: {\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  adherenceValue: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    marginBottom: 4,\r\n  },\r\n  adherenceLabel: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\SignInScreen.tsx","messages":[{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":53,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":53,"endColumn":33,"fix":{"range":[1636,1643],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":95,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":95,"endColumn":78,"fix":{"range":[2961,3004],"text":"{setErrors({ ...errors, email: undefined });}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":115,"column":38,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":115,"endColumn":84,"fix":{"range":[3636,3682],"text":"{setErrors({ ...errors, password: undefined });}"}}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":3,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  TextInput,\r\n  Button,\r\n  Surface,\r\n  IconButton,\r\n} from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { RootStackParamList } from '../types';\r\n\r\ntype SignInScreenNavigationProp = NativeStackNavigationProp<RootStackParamList, 'SignIn'>;\r\n\r\nexport default function SignInScreen() {\r\n  const navigation = useNavigation<SignInScreenNavigationProp>();\r\n  const { signIn, authState } = useScriptStore();\r\n  \r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [errors, setErrors] = useState<{ email?: string; password?: string }>({});\r\n\r\n  const validateForm = () => {\r\n    const newErrors: { email?: string; password?: string } = {};\r\n    \r\n    if (!email.trim()) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\r\n      newErrors.email = 'Please enter a valid email';\r\n    }\r\n    \r\n    if (!password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (password.length < 6) {\r\n      newErrors.password = 'Password must be at least 6 characters';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSignIn = async () => {\r\n    if (!validateForm()) return;\r\n    \r\n    try {\r\n      await signIn(email.trim(), password);\r\n      // Navigation will be handled by auth state listener\r\n    } catch (error) {\r\n      Alert.alert(\r\n        'Sign In Failed',\r\n        error instanceof Error ? error.message : 'Please try again',\r\n        [{ text: 'OK' }]\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={styles.container}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n    >\r\n      <ScrollView contentContainerStyle={styles.scrollContainer}>\r\n        <Surface style={styles.surface} elevation={2}>\r\n          <View style={styles.header}>\r\n            <IconButton\r\n              icon=\"arrow-left\"\r\n              size={24}\r\n              onPress={() => navigation.goBack()}\r\n              style={styles.backButton}\r\n            />\r\n            <Text variant=\"headlineSmall\" style={styles.title}>\r\n              Welcome Back\r\n            </Text>\r\n            <Text variant=\"bodyMedium\" style={styles.subtitle}>\r\n              Sign in to sync your scripts across devices\r\n            </Text>\r\n          </View>\r\n\r\n          <View style={styles.form}>\r\n            <TextInput\r\n              label=\"Email\"\r\n              value={email}\r\n              onChangeText={(text) => {\r\n                setEmail(text);\r\n                if (errors.email) setErrors({ ...errors, email: undefined });\r\n              }}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n              autoComplete=\"email\"\r\n              error={!!errors.email}\r\n            />\r\n            {errors.email && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.email}\r\n              </Text>\r\n            )}\r\n\r\n            <TextInput\r\n              label=\"Password\"\r\n              value={password}\r\n              onChangeText={(text) => {\r\n                setPassword(text);\r\n                if (errors.password) setErrors({ ...errors, password: undefined });\r\n              }}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              secureTextEntry={!showPassword}\r\n              autoComplete=\"password\"\r\n              error={!!errors.password}\r\n              right={\r\n                <TextInput.Icon\r\n                  icon={showPassword ? 'eye-off' : 'eye'}\r\n                  onPress={() => setShowPassword(!showPassword)}\r\n                />\r\n              }\r\n            />\r\n            {errors.password && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.password}\r\n              </Text>\r\n            )}\r\n\r\n            {authState.error && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {authState.error}\r\n              </Text>\r\n            )}\r\n\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleSignIn}\r\n              style={styles.signInButton}\r\n              loading={authState.isLoading}\r\n              disabled={authState.isLoading}\r\n            >\r\n              {authState.isLoading ? 'Signing In...' : 'Sign In'}\r\n            </Button>\r\n\r\n            <View style={styles.footer}>\r\n              <Text variant=\"bodyMedium\" style={styles.footerText}>\r\n                Don't have an account?{' '}\r\n              </Text>\r\n              <Button\r\n                mode=\"text\"\r\n                onPress={() => navigation.navigate('SignUp')}\r\n                compact\r\n                labelStyle={styles.linkText}\r\n              >\r\n                Sign Up\r\n              </Button>\r\n            </View>\r\n          </View>\r\n        </Surface>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  scrollContainer: {\r\n    flexGrow: 1,\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  surface: {\r\n    padding: 24,\r\n    borderRadius: 16,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    alignItems: 'center',\r\n    marginBottom: 32,\r\n  },\r\n  backButton: {\r\n    alignSelf: 'flex-start',\r\n    margin: 0,\r\n  },\r\n  title: {\r\n    color: '#1f2937',\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  form: {\r\n    gap: 16,\r\n  },\r\n  input: {\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  errorText: {\r\n    color: '#ef4444',\r\n    marginTop: -12,\r\n    marginBottom: 4,\r\n  },\r\n  signInButton: {\r\n    backgroundColor: '#6366f1',\r\n    paddingVertical: 8,\r\n    marginTop: 8,\r\n  },\r\n  footer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 16,\r\n  },\r\n  footerText: {\r\n    color: '#6b7280',\r\n  },\r\n  linkText: {\r\n    color: '#6366f1',\r\n    fontWeight: '600',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\SignUpScreen.tsx","messages":[{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":68,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":68,"endColumn":33,"fix":{"range":[2118,2125],"text":"{return;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":84,"column":9,"nodeType":"MemberExpression","endLine":84,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  TextInput,\r\n  Button,\r\n  Surface,\r\n  IconButton,\r\n} from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { RootStackParamList } from '../types';\r\n\r\ntype SignUpScreenNavigationProp = NativeStackNavigationProp<RootStackParamList, 'SignUp'>;\r\n\r\nexport default function SignUpScreen() {\r\n  const navigation = useNavigation<SignUpScreenNavigationProp>();\r\n  const { signUp, authState } = useScriptStore();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    displayName: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n    \r\n    if (!formData.displayName.trim()) {\r\n      newErrors.displayName = 'Display name is required';\r\n    }\r\n    \r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = 'Please enter a valid email';\r\n    }\r\n    \r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = 'Password must be at least 6 characters';\r\n    }\r\n    \r\n    if (!formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Please confirm your password';\r\n    } else if (formData.password !== formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Passwords do not match';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSignUp = async () => {\r\n    if (!validateForm()) return;\r\n    \r\n    try {\r\n      await signUp(formData.email.trim(), formData.password, formData.displayName.trim());\r\n      // Navigation will be handled by auth state listener\r\n    } catch (error) {\r\n      Alert.alert(\r\n        'Sign Up Failed',\r\n        error instanceof Error ? error.message : 'Please try again',\r\n        [{ text: 'OK' }]\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateFormData = (field: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    if (errors[field]) {\r\n      setErrors(prev => ({ ...prev, [field]: '' }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={styles.container}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n    >\r\n      <ScrollView contentContainerStyle={styles.scrollContainer}>\r\n        <Surface style={styles.surface} elevation={2}>\r\n          <View style={styles.header}>\r\n            <IconButton\r\n              icon=\"arrow-left\"\r\n              size={24}\r\n              onPress={() => navigation.goBack()}\r\n              style={styles.backButton}\r\n            />\r\n            <Text variant=\"headlineSmall\" style={styles.title}>\r\n              Create Account\r\n            </Text>\r\n            <Text variant=\"bodyMedium\" style={styles.subtitle}>\r\n              Join SpeakSync to sync your scripts across all devices\r\n            </Text>\r\n          </View>\r\n\r\n          <View style={styles.form}>\r\n            <TextInput\r\n              label=\"Display Name\"\r\n              value={formData.displayName}\r\n              onChangeText={(text) => updateFormData('displayName', text)}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              autoCapitalize=\"words\"\r\n              autoComplete=\"name\"\r\n              error={!!errors.displayName}\r\n            />\r\n            {errors.displayName && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.displayName}\r\n              </Text>\r\n            )}\r\n\r\n            <TextInput\r\n              label=\"Email\"\r\n              value={formData.email}\r\n              onChangeText={(text) => updateFormData('email', text)}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n              autoComplete=\"email\"\r\n              error={!!errors.email}\r\n            />\r\n            {errors.email && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.email}\r\n              </Text>\r\n            )}\r\n\r\n            <TextInput\r\n              label=\"Password\"\r\n              value={formData.password}\r\n              onChangeText={(text) => updateFormData('password', text)}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              secureTextEntry={!showPassword}\r\n              autoComplete=\"password-new\"\r\n              error={!!errors.password}\r\n              right={\r\n                <TextInput.Icon\r\n                  icon={showPassword ? 'eye-off' : 'eye'}\r\n                  onPress={() => setShowPassword(!showPassword)}\r\n                />\r\n              }\r\n            />\r\n            {errors.password && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.password}\r\n              </Text>\r\n            )}\r\n\r\n            <TextInput\r\n              label=\"Confirm Password\"\r\n              value={formData.confirmPassword}\r\n              onChangeText={(text) => updateFormData('confirmPassword', text)}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              secureTextEntry={!showConfirmPassword}\r\n              autoComplete=\"password-new\"\r\n              error={!!errors.confirmPassword}\r\n              right={\r\n                <TextInput.Icon\r\n                  icon={showConfirmPassword ? 'eye-off' : 'eye'}\r\n                  onPress={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                />\r\n              }\r\n            />\r\n            {errors.confirmPassword && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {errors.confirmPassword}\r\n              </Text>\r\n            )}\r\n\r\n            {authState.error && (\r\n              <Text variant=\"bodySmall\" style={styles.errorText}>\r\n                {authState.error}\r\n              </Text>\r\n            )}\r\n\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleSignUp}\r\n              style={styles.signUpButton}\r\n              loading={authState.isLoading}\r\n              disabled={authState.isLoading}\r\n            >\r\n              {authState.isLoading ? 'Creating Account...' : 'Create Account'}\r\n            </Button>\r\n\r\n            <View style={styles.footer}>\r\n              <Text variant=\"bodyMedium\" style={styles.footerText}>\r\n                Already have an account?{' '}\r\n              </Text>\r\n              <Button\r\n                mode=\"text\"\r\n                onPress={() => navigation.navigate('SignIn')}\r\n                compact\r\n                labelStyle={styles.linkText}\r\n              >\r\n                Sign In\r\n              </Button>\r\n            </View>\r\n          </View>\r\n        </Surface>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  scrollContainer: {\r\n    flexGrow: 1,\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  surface: {\r\n    padding: 24,\r\n    borderRadius: 16,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  header: {\r\n    alignItems: 'center',\r\n    marginBottom: 32,\r\n  },\r\n  backButton: {\r\n    alignSelf: 'flex-start',\r\n    margin: 0,\r\n  },\r\n  title: {\r\n    color: '#1f2937',\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n  },\r\n  form: {\r\n    gap: 16,\r\n  },\r\n  input: {\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  errorText: {\r\n    color: '#ef4444',\r\n    marginTop: -12,\r\n    marginBottom: 4,\r\n  },\r\n  signUpButton: {\r\n    backgroundColor: '#6366f1',\r\n    paddingVertical: 8,\r\n    marginTop: 8,\r\n  },\r\n  footer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 16,\r\n  },\r\n  footerText: {\r\n    color: '#6b7280',\r\n  },\r\n  linkText: {\r\n    color: '#6366f1',\r\n    fontWeight: '600',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\SubscriptionScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier"},"fix":{"range":[645,650],"text":""},"desc":"Remove unused variable 'tier'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'products' is assigned a value but never used.","line":83,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"products"},"fix":{"range":[1929,1937],"text":""},"desc":"Remove unused variable 'products'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'products' is assigned a value but never used.","line":83,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":83,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1963,1966],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1963,1966],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkSubscriptionStatus'. Either include it or remove the dependency array.","line":89,"column":6,"nodeType":"ArrayExpression","endLine":89,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [checkSubscriptionStatus]","fix":{"range":[2129,2131],"text":"[checkSubscriptionStatus]"}}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":97,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":20,"suggestions":[{"fix":{"range":[2380,2429],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":110,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":110,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":110,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":125,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":125,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":125,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":125,"endColumn":19}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  Card,\r\n  Button,\r\n  Surface,\r\n  ActivityIndicator,\r\n  Divider,\r\n} from 'react-native-paper';\r\nimport { useSubscriptionStore, SubscriptionTier } from '../store/subscriptionStore';\r\nimport RevenueCatService from '../services/revenueCatService';\r\n\r\ninterface PlanCardProps {\r\n  tier: SubscriptionTier;\r\n  title: string;\r\n  price: string;\r\n  features: string[];\r\n  isCurrentPlan: boolean;\r\n  onSubscribe: () => void;\r\n  loading: boolean;\r\n}\r\n\r\nconst PlanCard: React.FC<PlanCardProps> = ({\r\n  tier,\r\n  title,\r\n  price,\r\n  features,\r\n  isCurrentPlan,\r\n  onSubscribe,\r\n  loading,\r\n}) => (\r\n  <Card style={styles.planCard} mode=\"outlined\">\r\n    <Card.Content>\r\n      <Text variant=\"headlineSmall\" style={styles.planTitle}>\r\n        {title}\r\n      </Text>\r\n      <Text variant=\"headlineMedium\" style={styles.planPrice}>\r\n        {price}\r\n      </Text>\r\n      <Text variant=\"bodyMedium\" style={styles.planPeriod}>\r\n        per month\r\n      </Text>\r\n      \r\n      <Divider style={styles.divider} />\r\n      \r\n      {features.map((feature, index) => (\r\n        <Text key={index} variant=\"bodyMedium\" style={styles.feature}>\r\n           {feature}\r\n        </Text>\r\n      ))}\r\n    </Card.Content>\r\n    \r\n    <Card.Actions>\r\n      <Button\r\n        mode={isCurrentPlan ? \"outlined\" : \"contained\"}\r\n        onPress={onSubscribe}\r\n        disabled={isCurrentPlan || loading}\r\n        loading={loading}\r\n        style={styles.subscribeButton}\r\n      >\r\n        {isCurrentPlan ? \"Current Plan\" : \"Subscribe\"}\r\n      </Button>\r\n    </Card.Actions>\r\n  </Card>\r\n);\r\n\r\nexport default function SubscriptionScreen() {\r\n  const {\r\n    subscription,\r\n    isLoading,\r\n    error,\r\n    upgradeSubscription,\r\n    restorePurchases,\r\n    checkSubscriptionStatus,\r\n  } = useSubscriptionStore();\r\n\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [loadingPlan, setLoadingPlan] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    checkSubscriptionStatus();\r\n    loadProducts();\r\n  }, []);\r\n\r\n  const loadProducts = async () => {\r\n    try {\r\n      const revenueCatService = RevenueCatService.getInstance();\r\n      const productList = await revenueCatService.getProducts();\r\n      setProducts(productList);\r\n    } catch (error) {\r\n      console.error('Failed to load products:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubscribe = async (tier: SubscriptionTier) => {\r\n    setLoadingPlan(tier);\r\n    try {\r\n      const success = await upgradeSubscription(tier);\r\n      if (success) {\r\n        Alert.alert('Success', `Successfully subscribed to ${tier} plan!`);\r\n      } else {\r\n        Alert.alert('Error', 'Failed to subscribe. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to subscribe. Please try again.');\r\n    } finally {\r\n      setLoadingPlan(null);\r\n    }\r\n  };\r\n\r\n  const handleRestorePurchases = async () => {\r\n    try {\r\n      const success = await restorePurchases();\r\n      if (success) {\r\n        Alert.alert('Success', 'Purchases restored successfully!');\r\n      } else {\r\n        Alert.alert('Info', 'No purchases found to restore.');\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to restore purchases.');\r\n    }\r\n  };\r\n\r\n  const plans = [\r\n    {\r\n      tier: 'free' as SubscriptionTier,\r\n      title: 'Free',\r\n      price: '$0',\r\n      features: [\r\n        'Up to 10 minutes recording',\r\n        'Basic video quality',\r\n        'Watermark included',\r\n        '1GB cloud storage',\r\n        'MP4 export only',\r\n      ],\r\n    },\r\n    {\r\n      tier: 'pro' as SubscriptionTier,\r\n      title: 'Pro',\r\n      price: '$9.99',\r\n      features: [\r\n        'Up to 1 hour recording',\r\n        'High-quality video',\r\n        'No watermark',\r\n        'External display support',\r\n        'Bluetooth remote control',\r\n        '10GB cloud storage',\r\n        'Multiple export formats',\r\n      ],\r\n    },\r\n    {\r\n      tier: 'studio' as SubscriptionTier,\r\n      title: 'Studio',\r\n      price: '$19.99',\r\n      features: [\r\n        'Up to 2 hours recording',\r\n        '4K video quality',\r\n        'No watermark',\r\n        'External display support',\r\n        'Bluetooth remote control',\r\n        'Advanced analytics',\r\n        '100GB cloud storage',\r\n        'All export formats',\r\n      ],\r\n    },\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Text variant=\"bodyLarge\" style={styles.loadingText}>\r\n          Loading subscription information...\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={styles.container} showsVerticalScrollIndicator={false}>\r\n      <Surface style={styles.header} elevation={1}>\r\n        <Text variant=\"headlineMedium\" style={styles.headerTitle}>\r\n          Choose Your Plan\r\n        </Text>\r\n        <Text variant=\"bodyMedium\" style={styles.headerSubtitle}>\r\n          Unlock powerful features for professional teleprompter sessions\r\n        </Text>\r\n      </Surface>\r\n\r\n      {error && (\r\n        <Card style={styles.errorCard} mode=\"outlined\">\r\n          <Card.Content>\r\n            <Text variant=\"bodyMedium\" style={styles.errorText}>\r\n              {error}\r\n            </Text>\r\n          </Card.Content>\r\n        </Card>\r\n      )}\r\n\r\n      <View style={styles.currentPlanContainer}>\r\n        <Text variant=\"titleMedium\" style={styles.sectionTitle}>\r\n          Current Plan\r\n        </Text>\r\n        <Text variant=\"bodyLarge\" style={styles.currentPlan}>\r\n          {subscription?.tier?.toUpperCase() || 'FREE'}\r\n        </Text>\r\n        {subscription?.expiresAt && (\r\n          <Text variant=\"bodyMedium\" style={styles.expiryDate}>\r\n            Expires: {subscription.expiresAt.toLocaleDateString()}\r\n          </Text>\r\n        )}\r\n      </View>\r\n\r\n      <View style={styles.plansContainer}>\r\n        {plans.map((plan) => (\r\n          <PlanCard\r\n            key={plan.tier}\r\n            tier={plan.tier}\r\n            title={plan.title}\r\n            price={plan.price}\r\n            features={plan.features}\r\n            isCurrentPlan={subscription?.tier === plan.tier}\r\n            onSubscribe={() => handleSubscribe(plan.tier)}\r\n            loading={loadingPlan === plan.tier}\r\n          />\r\n        ))}\r\n      </View>\r\n\r\n      <View style={styles.actionsContainer}>\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={handleRestorePurchases}\r\n          style={styles.restoreButton}\r\n        >\r\n          Restore Purchases\r\n        </Button>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8fafc',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#6b7280',\r\n  },\r\n  header: {\r\n    padding: 24,\r\n    margin: 16,\r\n    borderRadius: 12,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  headerTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    textAlign: 'center',\r\n  },\r\n  headerSubtitle: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n  },\r\n  errorCard: {\r\n    margin: 16,\r\n    backgroundColor: '#fef2f2',\r\n    borderColor: '#fca5a5',\r\n  },\r\n  errorText: {\r\n    color: '#dc2626',\r\n  },\r\n  currentPlanContainer: {\r\n    padding: 16,\r\n    margin: 16,\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  sectionTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n  },\r\n  currentPlan: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n    marginTop: 8,\r\n  },\r\n  expiryDate: {\r\n    color: '#6b7280',\r\n    marginTop: 4,\r\n  },\r\n  plansContainer: {\r\n    padding: 16,\r\n  },\r\n  planCard: {\r\n    marginBottom: 16,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  planTitle: {\r\n    fontWeight: 'bold',\r\n    color: '#1f2937',\r\n    textAlign: 'center',\r\n  },\r\n  planPrice: {\r\n    fontWeight: 'bold',\r\n    color: '#6366f1',\r\n    textAlign: 'center',\r\n    marginTop: 8,\r\n  },\r\n  planPeriod: {\r\n    color: '#6b7280',\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  divider: {\r\n    marginVertical: 16,\r\n  },\r\n  feature: {\r\n    color: '#374151',\r\n    marginBottom: 8,\r\n  },\r\n  subscribeButton: {\r\n    flex: 1,\r\n    marginHorizontal: 8,\r\n  },\r\n  actionsContainer: {\r\n    padding: 16,\r\n    paddingBottom: 32,\r\n  },\r\n  restoreButton: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\TeamManagementScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":21,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[664,689],"text":""},"desc":"Remove unused variable 'theme'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":21,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadInitialData'. Either include it or remove the dependency array.","line":45,"column":6,"nodeType":"ArrayExpression","endLine":45,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadInitialData, user]","fix":{"range":[1768,1774],"text":"[loadInitialData, user]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUserRole'. Either include it or remove the dependency array.","line":51,"column":6,"nodeType":"ArrayExpression","endLine":51,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [currentTeam, loadUserRole, user]","fix":{"range":[1868,1887],"text":"[currentTeam, loadUserRole, user]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":54,"column":16,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":54,"endColumn":23,"fix":{"range":[1949,1956],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":64,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":20,"suggestions":[{"fix":{"range":[2200,2252],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":71,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":71,"endColumn":39,"fix":{"range":[2381,2388],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"fix":{"range":[2546,2595],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":82,"column":33,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":82,"endColumn":40,"fix":{"range":[2686,2693],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":108,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":20,"suggestions":[{"fix":{"range":[3334,3379],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":3,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport { \r\n  Appbar, \r\n  useTheme,\r\n  Portal,\r\n  Dialog,\r\n  Button,\r\n  TextInput,\r\n  ActivityIndicator,\r\n  Paragraph,\r\n  SegmentedButtons,\r\n} from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { TeamSelector, TeamMembers, SubscriptionManager } from '../components/team';\r\nimport { Team, TeamRole, Subscription } from '../types';\r\nimport { teamService, subscriptionService } from '../services';\r\n\r\nexport const TeamManagementScreen: React.FC = () => {\r\n  const theme = useTheme();\r\n  const navigation = useNavigation();\r\n  \r\n  // For now, using a placeholder user until store is properly set up\r\n  const user = { uid: 'placeholder-user-id', email: 'user@example.com' };\r\n  \r\n  const [currentTeam, setCurrentTeam] = useState<Team | null>(null);\r\n  const [currentUserRole, setCurrentUserRole] = useState<TeamRole | null>(null);\r\n  const [subscription, setSubscription] = useState<Subscription | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [createTeamDialogVisible, setCreateTeamDialogVisible] = useState(false);\r\n  const [newTeamName, setNewTeamName] = useState('');\r\n  const [newTeamDescription, setNewTeamDescription] = useState('');\r\n  const [creating, setCreating] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('teams');\r\n\r\n  const tabs = [\r\n    { value: 'teams', label: 'Teams', icon: 'account-group' },\r\n    { value: 'members', label: 'Members', icon: 'account-multiple' },\r\n    { value: 'subscription', label: 'Subscription', icon: 'credit-card' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (currentTeam && user) {\r\n      loadUserRole();\r\n    }\r\n  }, [currentTeam, user]);\r\n\r\n  const loadInitialData = async () => {\r\n    if (!user) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load subscription\r\n      const userSubscription = await subscriptionService.getSubscription(user.uid);\r\n      setSubscription(userSubscription);\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadUserRole = async () => {\r\n    if (!currentTeam || !user) return;\r\n    \r\n    try {\r\n      const role = await teamService.getUserRole(currentTeam.id, user.uid);\r\n      setCurrentUserRole(role);\r\n    } catch (error) {\r\n      console.error('Error loading user role:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreateTeam = async () => {\r\n    if (!user || !subscription) return;\r\n    \r\n    if (!newTeamName.trim()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setCreating(true);\r\n      \r\n      const teamId = await teamService.createTeam({\r\n        name: newTeamName.trim(),\r\n        description: newTeamDescription.trim() || undefined,\r\n        ownerId: user.uid,\r\n        subscriptionTier: subscription.tier,\r\n      });\r\n\r\n      const newTeam = await teamService.getTeam(teamId);\r\n      if (newTeam) {\r\n        setCurrentTeam(newTeam);\r\n        setCurrentUserRole('owner');\r\n      }\r\n\r\n      setCreateTeamDialogVisible(false);\r\n      setNewTeamName('');\r\n      setNewTeamDescription('');\r\n    } catch (error) {\r\n      console.error('Error creating team:', error);\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    switch (activeTab) {\r\n      case 'teams':\r\n        return (\r\n          <TeamSelector\r\n            currentTeam={currentTeam}\r\n            onTeamSelect={setCurrentTeam}\r\n            userId={user?.uid || ''}\r\n          />\r\n        );\r\n      case 'members':\r\n        return currentTeam && currentUserRole ? (\r\n          <TeamMembers\r\n            team={currentTeam}\r\n            currentUserId={user?.uid || ''}\r\n            currentUserRole={currentUserRole}\r\n          />\r\n        ) : (\r\n          <View style={[styles.emptyState, styles.centered]}>\r\n            <Paragraph style={styles.emptyText}>\r\n              Select a team to manage members\r\n            </Paragraph>\r\n          </View>\r\n        );\r\n      case 'subscription':\r\n        return (\r\n          <SubscriptionManager\r\n            userId={user?.uid || ''}\r\n            subscription={subscription}\r\n            onSubscriptionUpdate={setSubscription}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const canCreateTeam = subscription && subscription.features.maxTeams !== -1 \r\n    ? (subscription.usage.teamsUsed < subscription.features.maxTeams)\r\n    : true;\r\n\r\n  if (loading) {\r\n    return (\r\n      <SafeAreaView style={[styles.container, styles.centered]}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Paragraph style={styles.loadingText}>Loading team data...</Paragraph>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <Appbar.Header>\r\n        <Appbar.BackAction onPress={() => navigation.goBack()} />\r\n        <Appbar.Content title=\"Team Management\" />\r\n        {activeTab === 'teams' && canCreateTeam && (\r\n          <Appbar.Action\r\n            icon=\"plus\"\r\n            onPress={() => setCreateTeamDialogVisible(true)}\r\n          />\r\n        )}\r\n      </Appbar.Header>\r\n\r\n      <View style={styles.tabContainer}>\r\n        <SegmentedButtons\r\n          value={activeTab}\r\n          onValueChange={setActiveTab}\r\n          buttons={tabs}\r\n          style={styles.segmentedButtons}\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.content}>\r\n        {renderContent()}\r\n      </View>\r\n\r\n      <Portal>\r\n        <Dialog\r\n          visible={createTeamDialogVisible}\r\n          onDismiss={() => setCreateTeamDialogVisible(false)}\r\n        >\r\n          <Dialog.Title>Create New Team</Dialog.Title>\r\n          <Dialog.Content>\r\n            <TextInput\r\n              label=\"Team Name\"\r\n              value={newTeamName}\r\n              onChangeText={setNewTeamName}\r\n              mode=\"outlined\"\r\n              style={styles.input}\r\n              autoCapitalize=\"words\"\r\n            />\r\n            <TextInput\r\n              label=\"Description (Optional)\"\r\n              value={newTeamDescription}\r\n              onChangeText={setNewTeamDescription}\r\n              mode=\"outlined\"\r\n              multiline\r\n              numberOfLines={3}\r\n              style={styles.input}\r\n            />\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button onPress={() => setCreateTeamDialogVisible(false)}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={handleCreateTeam}\r\n              loading={creating}\r\n              disabled={creating || !newTeamName.trim()}\r\n            >\r\n              Create Team\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  centered: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  tabContainer: {\r\n    padding: 16,\r\n    backgroundColor: 'transparent',\r\n  },\r\n  segmentedButtons: {\r\n    marginBottom: 8,\r\n  },\r\n  content: {\r\n    flex: 1,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    padding: 32,\r\n  },\r\n  emptyText: {\r\n    textAlign: 'center',\r\n    opacity: 0.7,\r\n  },\r\n  input: {\r\n    marginBottom: 16,\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    opacity: 0.7,\r\n  },\r\n});\r\n\r\nexport default TeamManagementScreen;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\TeleprompterScreen.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[194,204],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":8},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptAnalysis' is defined but never used.","line":63,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptAnalysis"},"fix":{"range":[1675,1695],"text":""},"desc":"Remove unused variable 'scriptAnalysis'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scriptAnalysis' is defined but never used.","line":63,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":64,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[1694,1714],"text":""},"desc":"Remove unused variable 'settings'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":64,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":64,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1711,1714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1711,1714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onScrollUpdate' is defined but never used.","line":65,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":80,"suggestions":[{"messageId":"removeVar","data":{"varName":"onScrollUpdate"},"fix":{"range":[1714,1796],"text":""},"desc":"Remove unused variable 'onScrollUpdate'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onScrollUpdate' is defined but never used.","line":65,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'position' is defined but never used.","line":65,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"position"},"fix":{"range":[1739,1756],"text":""},"desc":"Remove unused variable 'position'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":65,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[1755,1773],"text":""},"desc":"Remove unused variable 'velocity'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":65,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[1773,1787],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1784,1787],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1784,1787],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onPaceChange' is defined but never used.","line":66,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"onPaceChange"},"fix":{"range":[1796,1840],"text":""},"desc":"Remove unused variable 'onPaceChange'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onPaceChange' is defined but never used.","line":66,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":66,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[1819,1831],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1828,1831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1828,1831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onScrollStateChange' is defined but never used.","line":67,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"onScrollStateChange"},"fix":{"range":[1840,1889],"text":""},"desc":"Remove unused variable 'onScrollStateChange'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onScrollStateChange' is defined but never used.","line":67,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":67,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1870,1880],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1877,1880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1877,1880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":81,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[2208,2226],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":81,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":81,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"word"},"fix":{"range":[2225,2239],"text":""},"desc":"Remove unused variable 'word'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":81,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":81,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[2239,2258],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":81,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":65},{"ruleId":"no-unused-vars","severity":2,"message":"'confidence' is defined but never used.","line":81,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"confidence"},"fix":{"range":[2258,2278],"text":""},"desc":"Remove unused variable 'confidence'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'confidence' is defined but never used.","line":81,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":85},{"ruleId":"no-unused-vars","severity":2,"message":"'position' is defined but never used.","line":84,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"position"},"fix":{"range":[2354,2370],"text":""},"desc":"Remove unused variable 'position'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'position' is defined but never used.","line":84,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":84,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":85,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"settings"},"fix":{"range":[2399,2412],"text":""},"desc":"Remove unused variable 'settings'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'settings' is defined but never used.","line":85,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2409,2412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2409,2412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'WordMatch' is defined but never used.","line":94,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"WordMatch"},"fix":{"range":[2573,2587],"text":""},"desc":"Remove unused variable 'WordMatch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WordMatch' is defined but never used.","line":94,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'width' is assigned a value but never used.","line":123,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"width"},"fix":{"range":[3188,3194],"text":""},"desc":"Remove unused variable 'width'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'width' is assigned a value but never used.","line":123,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'setScript' is assigned a value but never used.","line":161,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"setScript"},"fix":{"range":[4632,4643],"text":""},"desc":"Remove unused variable 'setScript'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setScript' is assigned a value but never used.","line":161,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'isPracticeMode' is assigned a value but never used.","line":182,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPracticeMode"},"fix":{"range":[5647,5661],"text":""},"desc":"Remove unused variable 'isPracticeMode'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isPracticeMode' is assigned a value but never used.","line":182,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsPracticeMode' is assigned a value but never used.","line":182,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsPracticeMode"},"fix":{"range":[5661,5680],"text":""},"desc":"Remove unused variable 'setIsPracticeMode'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setIsPracticeMode' is assigned a value but never used.","line":182,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'setSessionId' is assigned a value but never used.","line":300,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSessionId"},"fix":{"range":[9612,9626],"text":""},"desc":"Remove unused variable 'setSessionId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSessionId' is assigned a value but never used.","line":300,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":300,"endColumn":33},{"ruleId":"no-unused-vars","severity":2,"message":"'currentEmotion' is assigned a value but never used.","line":309,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":309,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentEmotion"},"fix":{"range":[9923,9937],"text":""},"desc":"Remove unused variable 'currentEmotion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'currentEmotion' is assigned a value but never used.","line":309,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":309,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'emotionIndicator' is assigned a value but never used.","line":310,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":310,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotionIndicator"},"fix":{"range":[10010,10026],"text":""},"desc":"Remove unused variable 'emotionIndicator'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emotionIndicator' is assigned a value but never used.","line":310,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":310,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'emotionSessionData' is assigned a value but never used.","line":317,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotionSessionData"},"fix":{"range":[10267,10285],"text":""},"desc":"Remove unused variable 'emotionSessionData'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emotionSessionData' is assigned a value but never used.","line":317,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":317,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'aiSuggestion' is assigned a value but never used.","line":320,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":320,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"aiSuggestion"},"fix":{"range":[10402,10414],"text":""},"desc":"Remove unused variable 'aiSuggestion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'aiSuggestion' is assigned a value but never used.","line":320,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":320,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'setAiPromptingSettings' is assigned a value but never used.","line":322,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":322,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"setAiPromptingSettings"},"fix":{"range":[10571,10595],"text":""},"desc":"Remove unused variable 'setAiPromptingSettings'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setAiPromptingSettings' is assigned a value but never used.","line":322,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":322,"endColumn":53},{"ruleId":"no-unused-vars","severity":2,"message":"'aiSessionData' is assigned a value but never used.","line":330,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":330,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"aiSessionData"},"fix":{"range":[10809,10822],"text":""},"desc":"Remove unused variable 'aiSessionData'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'aiSessionData' is assigned a value but never used.","line":330,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":330,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionXP' is assigned a value but never used.","line":339,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":339,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionXP"},"fix":{"range":[11284,11293],"text":""},"desc":"Remove unused variable 'sessionXP'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessionXP' is assigned a value but never used.","line":339,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":339,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionAchievements' is assigned a value but never used.","line":340,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":340,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionAchievements"},"fix":{"range":[11334,11353],"text":""},"desc":"Remove unused variable 'sessionAchievements'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessionAchievements' is assigned a value but never used.","line":340,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":340,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":348,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":348,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":351,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":351,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'startAutoScroll' and 'stopAutoScroll'. Either include them or remove the dependency array.","line":383,"column":6,"nodeType":"ArrayExpression","endLine":383,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [settings.isScrolling, settings.speed, startAutoScroll, stopAutoScroll]","fix":{"range":[12694,12732],"text":"[settings.isScrolling, settings.speed, startAutoScroll, stopAutoScroll]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'resetControlsTimeout'. Either include it or remove the dependency array.","line":390,"column":6,"nodeType":"ArrayExpression","endLine":390,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [isFullscreen, resetControlsTimeout, showControls]","fix":{"range":[12882,12910],"text":"[isFullscreen, resetControlsTimeout, showControls]"}}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":407,"column":29,"nodeType":"MemberExpression","endLine":407,"endColumn":54},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'state.totalHeight'. Either include it or remove the dependency array.","line":423,"column":6,"nodeType":"ArrayExpression","endLine":423,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [script.content, karaokeSettings, state.totalHeight]","fix":{"range":[14179,14213],"text":"[script.content, karaokeSettings, state.totalHeight]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":427,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":427,"endColumn":42,"fix":{"range":[14318,14325],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":435,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":435,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":435,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":435,"endColumn":24,"suggestions":[{"fix":{"range":[14680,14717],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":453,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":453,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":453,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":453,"endColumn":20,"suggestions":[{"fix":{"range":[15379,15473],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":457,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":457,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":457,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":457,"endColumn":20,"suggestions":[{"fix":{"range":[15644,15737],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":468,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":468,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[16058,16076],"text":""},"desc":"Remove unused variable 'velocity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":468,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":468,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":468,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":468,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[16076,16104],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":468,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":468,"endColumn":53},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'scrollState.isUserControlled'. Either include it or remove the dependency array.","line":492,"column":6,"nodeType":"ArrayExpression","endLine":492,"endColumn":70,"suggestions":[{"desc":"Update the dependencies array to be: [scriptAnalysis, adaptiveScrollSettings, isAdaptiveScrollActive, scrollState.isUserControlled]","fix":{"range":[16809,16873],"text":"[scriptAnalysis, adaptiveScrollSettings, isAdaptiveScrollActive, scrollState.isUserControlled]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":496,"column":42,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":496,"endColumn":49,"fix":{"range":[16996,17003],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":526,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":526,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":526,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":526,"endColumn":22,"suggestions":[{"fix":{"range":[18098,18184],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":547,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":547,"endColumn":21},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":562,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":562,"endColumn":46,"fix":{"range":[19198,19205],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":585,"column":38,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":585,"endColumn":45,"fix":{"range":[20070,20077],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":610,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":610,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":610,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":610,"endColumn":23,"suggestions":[{"fix":{"range":[21000,21041],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":625,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":625,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":625,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":625,"endColumn":20,"suggestions":[{"fix":{"range":[21491,21550],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":627,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":627,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":627,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":627,"endColumn":22,"suggestions":[{"fix":{"range":[21585,21646],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'humeService.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'humeService.current' to a variable inside the effect, and use that variable in the cleanup function.","line":636,"column":19,"nodeType":"Identifier","endLine":636,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":646,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":646,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":646,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":646,"endColumn":23,"suggestions":[{"fix":{"range":[22136,22179],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":660,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":660,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":660,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":660,"endColumn":20,"suggestions":[{"fix":{"range":[22589,22646],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":662,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":662,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":662,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":662,"endColumn":22,"suggestions":[{"fix":{"range":[22681,22744],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'geminiService.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'geminiService.current' to a variable inside the effect, and use that variable in the cleanup function.","line":672,"column":21,"nodeType":"Identifier","endLine":672,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'aiPromptingSettings'. Either include it or remove the dependency array.","line":674,"column":6,"nodeType":"ArrayExpression","endLine":674,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [aiPromptingSettings, aiPromptingSettings.enabled]","fix":{"range":[23000,23029],"text":"[aiPromptingSettings, aiPromptingSettings.enabled]"}}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":678,"column":59,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":678,"endColumn":66,"fix":{"range":[23158,23165],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":699,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":699,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'clearInterval' is not defined.","line":701,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":701,"endColumn":31},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":706,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":706,"endColumn":46,"fix":{"range":[24255,24262],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":724,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":724,"endColumn":39,"fix":{"range":[24946,24953],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":737,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":737,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":740,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":740,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":754,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":754,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":754,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":754,"endColumn":18,"suggestions":[{"fix":{"range":[25823,25865],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":757,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":757,"endColumn":46},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":770,"column":55,"nodeType":"MemberExpression","endLine":770,"endColumn":83},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'stopAutoScroll'. Either include it or remove the dependency array.","line":775,"column":6,"nodeType":"ArrayExpression","endLine":775,"endColumn":70,"suggestions":[{"desc":"Update the dependencies array to be: [stopAutoScroll, adaptiveScrollSettings.enabled, scriptAnalysis, settings.speed]","fix":{"range":[26666,26730],"text":"[stopAutoScroll, adaptiveScrollSettings.enabled, scriptAnalysis, settings.speed]"}}]},{"ruleId":"no-undef","severity":2,"message":"'clearInterval' is not defined.","line":779,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":779,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":786,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":786,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":786,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":786,"endColumn":18,"suggestions":[{"fix":{"range":[27042,27084],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":832,"column":21,"nodeType":"MemberExpression","endLine":832,"endColumn":58},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":859,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":859,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'resetKaraokeSession' is assigned a value but never used.","line":901,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":901,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"resetKaraokeSession"},"fix":{"range":[30268,30338],"text":""},"desc":"Remove unused variable 'resetKaraokeSession'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'resetKaraokeSession' is assigned a value but never used.","line":901,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":901,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":935,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":935,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":935,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":935,"endColumn":22,"suggestions":[{"fix":{"range":[31570,31628],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleSpeechStop' is assigned a value but never used.","line":1053,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1053,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSpeechStop"},"fix":{"range":[34718,34811],"text":""},"desc":"Remove unused variable 'handleSpeechStop'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSpeechStop' is assigned a value but never used.","line":1053,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":1053,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1064,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":1064,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1064,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1064,"endColumn":16,"suggestions":[{"fix":{"range":[35023,35064],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1113,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":1113,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1113,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1113,"endColumn":20,"suggestions":[{"fix":{"range":[36529,36577],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":1124,"column":11,"nodeType":"MemberExpression","endLine":1124,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1134,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1134,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37283,37286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37283,37286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":1225,"column":35,"nodeType":"MemberExpression","endLine":1225,"endColumn":63},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":1268,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":1268,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[41702,41712],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":1268,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":1268,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'layout' is defined but never used.","line":1268,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":1268,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"layout"},"fix":{"range":[41711,41719],"text":""},"desc":"Remove unused variable 'layout'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'layout' is defined but never used.","line":1268,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":1268,"endColumn":49},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":1816,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":1816,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[61283,61301],"text":""},"desc":"Remove unused variable 'velocity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":1816,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":1816,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":1816,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":1816,"endColumn":80,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[61301,61329],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":1816,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":1816,"endColumn":61},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1873,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1873,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1873,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1873,"endColumn":26,"suggestions":[{"fix":{"range":[63535,63581],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1904,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":1904,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1904,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1904,"endColumn":24,"suggestions":[{"fix":{"range":[64582,64629],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1952,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":1952,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1952,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1952,"endColumn":24,"suggestions":[{"fix":{"range":[65950,66011],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":1956,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":1956,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1956,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1956,"endColumn":24,"suggestions":[{"fix":{"range":[66159,66220],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":2006,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":2006,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":2006,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":2006,"endColumn":24,"suggestions":[{"fix":{"range":[67781,67830],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":110,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":7,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Dimensions,\r\n  StatusBar,\r\n  Text as RNText,\r\n  Animated,\r\n  Platform,\r\n  Alert,\r\n} from 'react-native';\r\nimport {\r\n  Text,\r\n  IconButton,\r\n  Surface,\r\n  Switch,\r\n  Menu,\r\n  Divider,\r\n  Portal,\r\n  Modal,\r\n  Button,\r\n  TextInput,\r\n} from 'react-native-paper';\r\nimport Slider from '@react-native-community/slider';\r\nimport { useRoute, RouteProp, useNavigation } from '@react-navigation/native';\r\nimport { useScriptStore } from '../store/scriptStore';\r\nimport { \r\n  SpeechRecognitionPanel, \r\n  KaraokeText, \r\n  KaraokeSettings, \r\n  AdaptiveScrollSettings as AdaptiveScrollSettingsModal, \r\n  PacingMeter, \r\n  SessionSummary, \r\n  FillerWordCue, \r\n  PacingSettings,\r\n  VideoRecordingPanel,\r\n  ExternalDisplayPanel,\r\n  BLERemotePanel,\r\n  LanguageSelector,\r\n  GamificationPanel\r\n} from '../components';\r\nimport { \r\n  speechRecognitionService, \r\n  karaokeService, \r\n  pacingMeterService, \r\n  fillerWordDetectionService,\r\n  multiLanguageService,\r\n  gamificationService \r\n} from '../services';\r\nimport HumeEmotionService from '../services/humeEmotionService';\r\nimport GeminiAiService from '../services/geminiAiService';\r\nimport EmotionIndicator from '../components/EmotionIndicator';\r\nimport AiSuggestionPanel from '../components/AiSuggestionPanel';\r\nimport { PerformanceOptimizer } from '../services/performanceOptimizer';\r\n\r\n// Initialize performance optimizer\r\nconst performanceOptimizer = PerformanceOptimizer.getInstance();\r\n\r\n// Import the adaptive scroll service - create temporary instance for now\r\nconst adaptiveScrollService = {\r\n  initialize: (\r\n    scriptAnalysis: any,\r\n    settings: any,\r\n    onScrollUpdate?: (position: number, velocity: number, metrics: any) => void,\r\n    onPaceChange?: (metrics: any) => void,\r\n    onScrollStateChange?: (state: any) => void\r\n  ) => {},\r\n  getScrollState: () => ({\r\n    currentPosition: 0,\r\n    velocity: 0,\r\n    isAutoScrolling: false,\r\n    lastUpdateTime: Date.now(),\r\n    targetPosition: 0,\r\n    acceleration: 0,\r\n    adaptiveSpeed: 1,\r\n    isUserControlled: false,\r\n    smoothingBuffer: []\r\n  }),\r\n  stop: () => {},\r\n  processWordTiming: (wordIndex: number, word: string, timestamp: number, confidence: number) => {},\r\n  start: () => {},\r\n  reset: () => {},\r\n  setUserScrollPosition: (position: number) => {},\r\n  updateSettings: (settings: any) => {},\r\n};\r\nimport { \r\n  RootStackParamList, \r\n  TeleprompterSettings, \r\n  TeleprompterState, \r\n  KaraokeState, \r\n  KaraokeHighlightSettings,\r\n  ScriptAnalysis,\r\n  WordMatch,\r\n  AdaptiveScrollSettings,\r\n  SpeechPaceMetrics,\r\n  ScrollState,\r\n  PacingMeterSettings,\r\n  PacingMeterState,\r\n  FillerWordSettings,\r\n  FillerWordState,\r\n  FillerWordDetection,\r\n  SessionSummaryReport,\r\n  LanguageOption\r\n} from '../types';\r\nimport { \r\n  EmotionAnalysis, \r\n  EmotionIndicatorState, \r\n  EmotionSessionData \r\n} from '../services/humeEmotionService';\r\nimport { \r\n  AiSuggestion, \r\n  AiPromptingSettings, \r\n  AiSessionData, \r\n  ScriptContext \r\n} from '../services/geminiAiService';\r\n\r\ntype TeleprompterScreenRouteProp = RouteProp<\r\n  RootStackParamList,\r\n  'Teleprompter'\r\n>;\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nconst FONT_FAMILIES = [\r\n  { label: 'System Default', value: Platform.OS === 'ios' ? 'System' : 'sans-serif' },\r\n  { label: 'Serif', value: Platform.OS === 'ios' ? 'Times New Roman' : 'serif' },\r\n  { label: 'Monospace', value: Platform.OS === 'ios' ? 'Courier New' : 'monospace' },\r\n  { label: 'Arial', value: 'Arial' },\r\n  { label: 'Helvetica', value: 'Helvetica' },\r\n];\r\n\r\nconst PRESET_COLORS = [\r\n  { label: 'White on Black', text: '#FFFFFF', background: '#000000' },\r\n  { label: 'Black on White', text: '#000000', background: '#FFFFFF' },\r\n  { label: 'Green on Black', text: '#00FF00', background: '#000000' },\r\n  { label: 'Yellow on Blue', text: '#FFFF00', background: '#000080' },\r\n  { label: 'White on Blue', text: '#FFFFFF', background: '#1E40AF' },\r\n  { label: 'Amber on Dark', text: '#FFC107', background: '#1A1A1A' },\r\n];\r\n\r\nconst DEFAULT_SETTINGS: TeleprompterSettings = {\r\n  speed: 50,\r\n  fontSize: 24,\r\n  fontFamily: Platform.OS === 'ios' ? 'System' : 'sans-serif',\r\n  textColor: '#FFFFFF',\r\n  backgroundColor: '#000000',\r\n  isScrolling: false,\r\n  isMirrored: false,\r\n  lineHeight: 1.5,\r\n  textAlign: 'center',\r\n  padding: 24,\r\n};\r\n\r\nexport default function TeleprompterScreen() {\r\n  const route = useRoute<TeleprompterScreenRouteProp>();\r\n  const navigation = useNavigation();\r\n  const { scriptId } = route.params;\r\n  const { getScriptById } = useScriptStore();\r\n  \r\n  const [script, setScript] = useState(getScriptById(scriptId));\r\n  const [settings, setSettings] = useState<TeleprompterSettings>(DEFAULT_SETTINGS);\r\n  const [state, setState] = useState<TeleprompterState>({\r\n    currentPosition: 0,\r\n    totalHeight: 0,\r\n    currentParagraph: 0,\r\n    totalParagraphs: 0,\r\n  });\r\n  \r\n  const [showControls, setShowControls] = useState(true);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [fontMenuVisible, setFontMenuVisible] = useState(false);\r\n  const [colorMenuVisible, setColorMenuVisible] = useState(false);\r\n  const [customColorModal, setCustomColorModal] = useState(false);\r\n  const [customTextColor, setCustomTextColor] = useState('#FFFFFF');\r\n  const [customBackgroundColor, setCustomBackgroundColor] = useState('#000000');\r\n  \r\n  // Speech recognition state\r\n  const [showSpeechPanel, setShowSpeechPanel] = useState(false);\r\n  const [practiceTranscript, setPracticeTranscript] = useState('');\r\n  const [isPracticeMode, setIsPracticeMode] = useState(false);\r\n  \r\n  // Karaoke highlighting state\r\n  const [karaokeState, setKaraokeState] = useState<KaraokeState>({\r\n    currentWordIndex: 0,\r\n    highlightedWords: [],\r\n    matchedWords: [],\r\n    scriptWords: [],\r\n    isActive: false,\r\n    currentSentence: 0,\r\n    totalSentences: 0,\r\n    accuracy: 0,\r\n    wordsPerMinute: 0,\r\n    sessionStartTime: Date.now(),\r\n  });\r\n  const [karaokeSettings, setKaraokeSettings] = useState<KaraokeHighlightSettings>({\r\n    enabled: true,\r\n    highlightColor: '#FFD700',\r\n    highlightBackgroundColor: 'rgba(255, 215, 0, 0.3)',\r\n    autoScroll: true,\r\n    scrollOffset: 100,\r\n    matchThreshold: 0.7,\r\n    highlightDuration: 1500,\r\n    animationDuration: 200,\r\n    fadeOutDelay: 500,\r\n  });\r\n  const [showKaraokeSettings, setShowKaraokeSettings] = useState(false);\r\n  const [showAdaptiveScrollSettings, setShowAdaptiveScrollSettings] = useState(false);\r\n  const [scriptAnalysis, setScriptAnalysis] = useState<ScriptAnalysis | null>(null);\r\n  \r\n  // Adaptive scrolling state\r\n  const [adaptiveScrollSettings, setAdaptiveScrollSettings] = useState<AdaptiveScrollSettings>({\r\n    enabled: true,\r\n    baseScrollSpeed: 50,\r\n    responsiveness: 0.7,\r\n    smoothingFactor: 0.8,\r\n    pauseThreshold: 2.0,\r\n    accelerationLimit: 3.0,\r\n    decelerationLimit: 0.1,\r\n    lookAheadWords: 5,\r\n    bufferZone: 100,\r\n  });\r\n  const [speechPaceMetrics, setSpeechPaceMetrics] = useState<SpeechPaceMetrics>({\r\n    currentWPM: 0,\r\n    averageWPM: 0,\r\n    instantaneousWPM: 0,\r\n    timeSinceLastWord: 0,\r\n    speechDuration: 0,\r\n    totalWordsSpoken: 0,\r\n    isPaused: false,\r\n    isAccelerating: false,\r\n    paceTrend: 'stable',\r\n    confidenceLevel: 1.0,\r\n  });\r\n  const [scrollState, setScrollState] = useState<ScrollState>({\r\n    currentPosition: 0,\r\n    targetPosition: 0,\r\n    velocity: 0,\r\n    acceleration: 0,\r\n    adaptiveSpeed: 50,\r\n    isUserControlled: false,\r\n    lastUpdateTime: Date.now(),\r\n    smoothingBuffer: [],  // For smoothing the scroll movement\r\n  });\r\n  const [isAdaptiveScrollActive, setIsAdaptiveScrollActive] = useState(false);\r\n  \r\n  // Pacing meter state\r\n  const [pacingMeterSettings, setPacingMeterSettings] = useState<PacingMeterSettings>({\r\n    enabled: true,\r\n    targetWPM: 150,\r\n    toleranceRange: 20,\r\n    showVisualMeter: true,\r\n    showSessionSummary: true,\r\n    colorScheme: {\r\n      optimal: '#10B981',\r\n      acceptable: '#F59E0B',\r\n      poor: '#EF4444',\r\n    },\r\n  });\r\n  const [pacingMeterState, setPacingMeterState] = useState<PacingMeterState>({\r\n    currentWPM: 0,\r\n    targetWPM: 150,\r\n    isInOptimalRange: false,\r\n    sessionStartTime: Date.now(),\r\n    averageWPM: 0,\r\n    wpmHistory: [],\r\n    paceAnalysis: [],\r\n  });\r\n  const [showPacingMeter, setShowPacingMeter] = useState(true);\r\n  const [showPacingSettings, setShowPacingSettings] = useState(false);\r\n  \r\n  // Filler word detection state\r\n  const [fillerWordSettings, setFillerWordSettings] = useState<FillerWordSettings>({\r\n    enabled: true,\r\n    fillerWords: ['um', 'uh', 'like', 'you know', 'so', 'actually', 'basically', 'literally'],\r\n    visualCueType: 'icon',\r\n    iconType: 'warning',\r\n    cueColor: '#FF9800',\r\n    showInRealTime: true,\r\n    trackInSession: true,\r\n    sensitivity: 'medium',\r\n  });\r\n  const [fillerWordState, setFillerWordState] = useState<FillerWordState>({\r\n    detectedFillers: [],\r\n    totalFillerCount: 0,\r\n    fillerRate: 0,\r\n    sessionStartTime: Date.now(),\r\n    commonFillers: {},\r\n  });\r\n  const [activeFillerCues, setActiveFillerCues] = useState<FillerWordDetection[]>([]);\r\n  \r\n  // Session summary state\r\n  const [sessionReport, setSessionReport] = useState<SessionSummaryReport | null>(null);\r\n  const [showSessionSummary, setShowSessionSummary] = useState(false);\r\n  \r\n  // Video recording state\r\n  const [showVideoRecording, setShowVideoRecording] = useState(false);\r\n  const [isVideoRecording, setIsVideoRecording] = useState(false);\r\n  const [sessionId, setSessionId] = useState(() => `session_${Date.now()}`);\r\n  \r\n  // External display state\r\n  const [showExternalDisplay, setShowExternalDisplay] = useState(false);\r\n  \r\n  // BLE remote control state\r\n  const [showBLERemote, setShowBLERemote] = useState(false);\r\n  \r\n  // Hume emotion analysis state\r\n  const [currentEmotion, setCurrentEmotion] = useState<EmotionAnalysis | null>(null);\r\n  const [emotionIndicator, setEmotionIndicator] = useState<EmotionIndicatorState>({\r\n    emoji: '',\r\n    color: '#9CA3AF',\r\n    confidence: 0,\r\n    description: 'Neutral',\r\n  });\r\n  const [showEmotionIndicator, setShowEmotionIndicator] = useState(true);\r\n  const [emotionSessionData, setEmotionSessionData] = useState<EmotionSessionData | null>(null);\r\n  \r\n  // Gemini AI suggestion state\r\n  const [aiSuggestion, setAiSuggestion] = useState<AiSuggestion | null>(null);\r\n  const [showAiSuggestions, setShowAiSuggestions] = useState(false);\r\n  const [aiPromptingSettings, setAiPromptingSettings] = useState<AiPromptingSettings>({\r\n    enabled: true,\r\n    pauseThreshold: 3,\r\n    deviationThreshold: 0.7,\r\n    suggestionDisplay: 'subtle',\r\n    autoTrigger: true,\r\n    businessTierOnly: true,\r\n  });\r\n  const [aiSessionData, setAiSessionData] = useState<AiSessionData | null>(null);\r\n  const [lastTranscriptTime, setLastTranscriptTime] = useState<number>(Date.now());\r\n  \r\n  // Multi-language state\r\n  const [selectedLanguage, setSelectedLanguage] = useState(script?.language?.code || 'en');\r\n  const [showLanguageSelector, setShowLanguageSelector] = useState(false);\r\n  \r\n  // Gamification state\r\n  const [showGamificationPanel, setShowGamificationPanel] = useState(false);\r\n  const [sessionXP, setSessionXP] = useState(0);\r\n  const [sessionAchievements, setSessionAchievements] = useState<string[]>([]);\r\n  \r\n  // Service instances\r\n  const humeService = useRef(HumeEmotionService.getInstance());\r\n  const geminiService = useRef(GeminiAiService.getInstance());\r\n  \r\n  const scrollViewRef = useRef<ScrollView>(null);\r\n  const scrollPositionRef = useRef(0);\r\n  const scrollIntervalRef = useRef<NodeJS.Timeout | null>(null);\r\n  const paragraphRefs = useRef<{ [key: number]: number }>({});\r\n  const fadeAnim = useRef(new Animated.Value(1)).current;\r\n  const controlsTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Parse paragraphs from script content\r\n  const paragraphs = script?.content.split(/\\n\\s*\\n/).filter(p => p.trim()) || [];\r\n\r\n  useEffect(() => {\r\n    if (!script) {\r\n      navigation.goBack();\r\n      return;\r\n    }\r\n    \r\n    // Initialize performance monitoring for teleprompter session\r\n    performanceOptimizer.initMemoryMonitoring();\r\n    \r\n    setState(prev => ({ ...prev, totalParagraphs: paragraphs.length }));\r\n\r\n    // Cleanup performance monitoring on unmount\r\n    return () => {\r\n      performanceOptimizer.cleanup();\r\n    };\r\n  }, [script, navigation, paragraphs.length]);\r\n\r\n  useEffect(() => {\r\n    if (settings.isScrolling) {\r\n      startAutoScroll();\r\n    } else {\r\n      stopAutoScroll();\r\n    }\r\n\r\n    return () => {\r\n      stopAutoScroll();\r\n    };\r\n  }, [settings.isScrolling, settings.speed]);\r\n\r\n  // Auto-hide controls in fullscreen\r\n  useEffect(() => {\r\n    if (isFullscreen && showControls) {\r\n      resetControlsTimeout();\r\n    }\r\n  }, [isFullscreen, showControls]);\r\n\r\n  // Initialize karaoke service when script changes\r\n  useEffect(() => {\r\n    if (script?.content && karaokeSettings.enabled) {\r\n      karaokeService.initialize(\r\n        script.content,\r\n        karaokeSettings,\r\n        (newState) => setKaraokeState(newState),\r\n        (wordIndices) => {\r\n          // Update highlighted words - this triggers re-render of KaraokeText\r\n          setKaraokeState((prev: KaraokeState) => ({ ...prev, highlightedWords: wordIndices }));\r\n        },\r\n        (wordIndex) => {\r\n          // Auto-scroll to highlighted word\r\n          if (karaokeSettings.autoScroll && scrollViewRef.current) {\r\n            const analysis = karaokeService.getScriptAnalysis();\r\n            if (analysis && analysis.words[wordIndex]) {\r\n              // Estimate scroll position based on word index\r\n              const estimatedY = (wordIndex / analysis.totalWords) * state.totalHeight;\r\n              const targetY = Math.max(0, estimatedY - karaokeSettings.scrollOffset);\r\n              \r\n              scrollViewRef.current.scrollTo({\r\n                y: targetY,\r\n                animated: true,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      );\r\n      \r\n      setScriptAnalysis(karaokeService.getScriptAnalysis());\r\n    }\r\n  }, [script?.content, karaokeSettings]);\r\n\r\n  // Set up speech recognition for karaoke\r\n  useEffect(() => {\r\n    if (!karaokeSettings.enabled) return;\r\n\r\n    const unsubscribeWordListener = speechRecognitionService.onWordRecognized(\r\n      (word, confidence, timestamp) => {\r\n        if (karaokeState.isActive) {\r\n          const match = karaokeService.processSpokenWord(word, confidence, timestamp);\r\n          if (match) {\r\n            // Successful match - update UI with instant feedback\r\n            console.log('Karaoke match:', match);\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    return unsubscribeWordListener;\r\n  }, [karaokeSettings.enabled, karaokeState.isActive]);\r\n\r\n  // Multi-language integration effect\r\n  useEffect(() => {\r\n    if (selectedLanguage && script?.language?.code !== selectedLanguage) {\r\n      // Get the language option for the selected language\r\n      const multiLangService = multiLanguageService.getInstance();\r\n      const languageOption = multiLangService.getLanguageByCode(selectedLanguage);\r\n      if (languageOption) {\r\n        // Get the Deepgram model for this language\r\n        const deepgramModel = multiLangService.getDeepgramModel(languageOption);\r\n        console.log('Switching to Deepgram model:', deepgramModel, 'for language:', selectedLanguage);\r\n        \r\n        // Note: Speech recognition service would need to be updated to support language switching\r\n        // For now, we'll log the language change\r\n        console.log('Language changed from', script?.language?.code || 'en', 'to', selectedLanguage);\r\n      }\r\n    }\r\n  }, [selectedLanguage, script?.language?.code]);\r\n\r\n  // Initialize adaptive scrolling service\r\n  useEffect(() => {\r\n    if (scriptAnalysis && adaptiveScrollSettings.enabled) {\r\n      adaptiveScrollService.initialize(\r\n        scriptAnalysis,\r\n        adaptiveScrollSettings,\r\n        (position: number, velocity: number, metrics: SpeechPaceMetrics) => {\r\n          // Update scroll position from adaptive service\r\n          if (!scrollState.isUserControlled && isAdaptiveScrollActive) {\r\n            scrollViewRef.current?.scrollTo({\r\n              y: position,\r\n              animated: false,\r\n            });\r\n            setScrollState(adaptiveScrollService.getScrollState());\r\n          }\r\n        },\r\n        (metrics: SpeechPaceMetrics) => {\r\n          // Update pace metrics in UI\r\n          setSpeechPaceMetrics(metrics);\r\n        },\r\n        (state: ScrollState) => {\r\n          // Update scroll state in UI\r\n          setScrollState(state);\r\n        }\r\n      );\r\n    }\r\n\r\n    return () => {\r\n      adaptiveScrollService.stop();\r\n    };\r\n  }, [scriptAnalysis, adaptiveScrollSettings, isAdaptiveScrollActive]);\r\n\r\n  // Set up speech recognition for adaptive scrolling\r\n  useEffect(() => {\r\n    if (!adaptiveScrollSettings.enabled) return;\r\n\r\n    const unsubscribeWordListener = speechRecognitionService.onWordRecognized(\r\n      (word, confidence, timestamp) => {\r\n        if (isAdaptiveScrollActive && scriptAnalysis) {\r\n          // Find word index in script\r\n          const wordIndex = scriptAnalysis.words.findIndex(w => \r\n            w.word.toLowerCase().trim() === word.toLowerCase().trim()\r\n          );\r\n          \r\n          if (wordIndex >= 0) {\r\n            // Feed word timing to adaptive scroll service\r\n            adaptiveScrollService.processWordTiming(wordIndex, word, timestamp, confidence);\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    return unsubscribeWordListener;\r\n  }, [adaptiveScrollSettings.enabled, isAdaptiveScrollActive, scriptAnalysis]);\r\n\r\n  // Initialize pacing meter service\r\n  useEffect(() => {\r\n    if (scriptAnalysis && pacingMeterSettings.enabled) {\r\n      pacingMeterService.initialize(\r\n        scriptAnalysis,\r\n        pacingMeterSettings,\r\n        (newState) => setPacingMeterState(newState),\r\n        (isOptimal, currentWPM) => {\r\n          // Handle pace change notifications\r\n          console.log(`Pace change: ${currentWPM} WPM - ${isOptimal ? 'Optimal' : 'Off-pace'}`);\r\n        }\r\n      );\r\n    }\r\n\r\n    return () => {\r\n      pacingMeterService.reset();\r\n    };\r\n  }, [scriptAnalysis, pacingMeterSettings]);\r\n\r\n  // Initialize filler word detection service\r\n  useEffect(() => {\r\n    if (scriptAnalysis && fillerWordSettings.enabled) {\r\n      fillerWordDetectionService.initialize(\r\n        scriptAnalysis,\r\n        fillerWordSettings,\r\n        (detection) => {\r\n          // Handle filler word detection\r\n          setActiveFillerCues(prev => [...prev, detection]);\r\n          \r\n          // Auto-remove after 3 seconds\r\n          setTimeout(() => {\r\n            setActiveFillerCues(prev => prev.filter(cue => cue.timestamp !== detection.timestamp));\r\n          }, 3000);\r\n        },\r\n        (newState) => setFillerWordState(newState)\r\n      );\r\n    }\r\n\r\n    return () => {\r\n      fillerWordDetectionService.reset();\r\n    };\r\n  }, [scriptAnalysis, fillerWordSettings]);\r\n\r\n  // Set up speech recognition for pacing meter\r\n  useEffect(() => {\r\n    if (!pacingMeterSettings.enabled) return;\r\n\r\n    const unsubscribeWordListener = speechRecognitionService.onWordRecognized(\r\n      (word, confidence, timestamp) => {\r\n        if (scriptAnalysis && pacingMeterState.sessionStartTime) {\r\n          // Find word index in script\r\n          const wordIndex = scriptAnalysis.words.findIndex(w => \r\n            w.word.toLowerCase().trim() === word.toLowerCase().trim()\r\n          );\r\n          \r\n          if (wordIndex >= 0) {\r\n            // Feed word timing to pacing meter service\r\n            pacingMeterService.processWordTiming(wordIndex, word, timestamp, confidence);\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    return unsubscribeWordListener;\r\n  }, [pacingMeterSettings.enabled, scriptAnalysis, pacingMeterState.sessionStartTime]);\r\n\r\n  // Set up speech recognition for filler word detection\r\n  useEffect(() => {\r\n    if (!fillerWordSettings.enabled) return;\r\n\r\n    const unsubscribeWordListener = speechRecognitionService.onWordRecognized(\r\n      (word, confidence, timestamp) => {\r\n        if (scriptAnalysis && fillerWordState.sessionStartTime) {\r\n          // Find word index in script\r\n          const wordIndex = scriptAnalysis.words.findIndex(w => \r\n            w.word.toLowerCase().trim() === word.toLowerCase().trim()\r\n          );\r\n          \r\n          // Feed word to filler word detection service\r\n          fillerWordDetectionService.processSTTWord(word, confidence, timestamp, wordIndex);\r\n        }\r\n      }\r\n    );\r\n\r\n    return unsubscribeWordListener;\r\n  }, [fillerWordSettings.enabled, scriptAnalysis, fillerWordState.sessionStartTime]);\r\n\r\n  // Initialize Hume emotion analysis service\r\n  useEffect(() => {\r\n    const initializeHumeService = async () => {\r\n      try {\r\n        const apiKey = HumeEmotionService.getApiKey();\r\n        if (!apiKey) {\r\n          console.warn('[Hume] API key not found');\r\n          return;\r\n        }\r\n        \r\n        await humeService.current.initialize(apiKey);\r\n        \r\n        // Set up emotion listeners\r\n        humeService.current.addEmotionListener((emotion: EmotionAnalysis) => {\r\n          setCurrentEmotion(emotion);\r\n        });\r\n        \r\n        humeService.current.addIndicatorListener((indicator: EmotionIndicatorState) => {\r\n          setEmotionIndicator(indicator);\r\n        });\r\n        \r\n        console.log('[Hume] Emotion analysis service initialized');\r\n      } catch (error) {\r\n        console.error('[Hume] Failed to initialize service:', error);\r\n      }\r\n    };\r\n    \r\n    initializeHumeService();\r\n    \r\n    return () => {\r\n      // Cleanup listeners on unmount\r\n      humeService.current.removeEmotionListener(setCurrentEmotion);\r\n      humeService.current.removeIndicatorListener(setEmotionIndicator);\r\n    };\r\n  }, []);\r\n\r\n  // Initialize Gemini AI service\r\n  useEffect(() => {\r\n    const initializeGeminiService = async () => {\r\n      try {\r\n        const apiKey = GeminiAiService.getApiKey();\r\n        if (!apiKey) {\r\n          console.warn('[Gemini] API key not found');\r\n          return;\r\n        }\r\n        \r\n        await geminiService.current.initialize(apiKey);\r\n        \r\n        // Update settings\r\n        geminiService.current.updateSettings(aiPromptingSettings);\r\n        \r\n        // Set up suggestion listener\r\n        geminiService.current.addSuggestionListener((suggestion: AiSuggestion) => {\r\n          setAiSuggestion(suggestion);\r\n        });\r\n        \r\n        console.log('[Gemini] AI prompting service initialized');\r\n      } catch (error) {\r\n        console.error('[Gemini] Failed to initialize service:', error);\r\n      }\r\n    };\r\n    \r\n    if (aiPromptingSettings.enabled) {\r\n      initializeGeminiService();\r\n    }\r\n    \r\n    return () => {\r\n      // Cleanup listeners on unmount\r\n      geminiService.current.removeSuggestionListener(setAiSuggestion);\r\n    };\r\n  }, [aiPromptingSettings.enabled]);\r\n\r\n  // Monitor transcript for AI suggestions\r\n  useEffect(() => {\r\n    if (!aiPromptingSettings.enabled || !script?.content) return;\r\n    \r\n    const checkForAiTriggers = () => {\r\n      const now = Date.now();\r\n      const timeSinceLastTranscript = now - lastTranscriptTime;\r\n      \r\n      // Trigger AI suggestion if user pauses for extended period\r\n      if (timeSinceLastTranscript > aiPromptingSettings.pauseThreshold * 1000) {\r\n        const context: ScriptContext = {\r\n          fullScript: script.content,\r\n          currentPosition: state.currentParagraph,\r\n          recentTranscript: practiceTranscript,\r\n          pauseDuration: timeSinceLastTranscript,\r\n          isDeviation: false, // TODO: Implement deviation detection\r\n          userRequestedHelp: false,\r\n        };\r\n        \r\n        geminiService.current.generateSuggestion(context);\r\n      }\r\n    };\r\n    \r\n    const intervalId = setInterval(checkForAiTriggers, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [aiPromptingSettings, script?.content, lastTranscriptTime, practiceTranscript, state.currentParagraph]);\r\n\r\n  // Set up speech recognition for transcript monitoring\r\n  useEffect(() => {\r\n    if (!aiPromptingSettings.enabled) return;\r\n\r\n    // Use the existing speech recognition subscription to monitor transcript changes\r\n    const unsubscribeStateListener = speechRecognitionService.subscribe(\r\n      (state) => {\r\n        if (state.transcript && state.transcript !== practiceTranscript) {\r\n          setLastTranscriptTime(Date.now());\r\n          // TODO: Implement deviation detection by comparing transcript to script\r\n          // This would involve text similarity analysis\r\n        }\r\n      }\r\n    );\r\n\r\n    return unsubscribeStateListener;\r\n  }, [aiPromptingSettings.enabled, practiceTranscript]);\r\n\r\n  // Set up audio recording for Hume emotion analysis\r\n  useEffect(() => {\r\n    if (!showEmotionIndicator) return;\r\n    \r\n    // TODO: Implement audio recording and chunking\r\n    // This would involve using expo-audio or react-native-audio-recorder-player\r\n    // to capture audio and send chunks to Hume service\r\n    \r\n    return () => {\r\n      // Cleanup audio recording\r\n    };\r\n  }, [showEmotionIndicator]);\r\n\r\n  const resetControlsTimeout = useCallback(() => {\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current);\r\n    }\r\n    \r\n    controlsTimeoutRef.current = setTimeout(() => {\r\n      if (isFullscreen) {\r\n        setShowControls(false);\r\n      }\r\n    }, 3000);\r\n  }, [isFullscreen]);\r\n\r\n  const startAutoScroll = useCallback(() => {\r\n    stopAutoScroll();\r\n    \r\n    if (adaptiveScrollSettings.enabled && scriptAnalysis) {\r\n      // Use adaptive scrolling\r\n      setIsAdaptiveScrollActive(true);\r\n      adaptiveScrollService.start();\r\n      console.log('Adaptive scrolling started');\r\n    } else {\r\n      // Use traditional fixed-speed scrolling\r\n      scrollIntervalRef.current = setInterval(() => {\r\n        const scrollSpeed = (settings.speed / 100) * 2; // Normalized speed\r\n        scrollPositionRef.current += scrollSpeed;\r\n        \r\n        scrollViewRef.current?.scrollTo({\r\n          y: scrollPositionRef.current,\r\n          animated: false,\r\n        });\r\n        \r\n        // Update current paragraph based on scroll position\r\n        const currentParagraph = Object.keys(paragraphRefs.current)\r\n          .map(Number)\r\n          .reverse()\r\n          .find(index => scrollPositionRef.current >= paragraphRefs.current[index]) || 0;\r\n        \r\n        setState(prev => ({ ...prev, currentParagraph, currentPosition: scrollPositionRef.current }));\r\n      }, 50);\r\n    }\r\n  }, [settings.speed, adaptiveScrollSettings.enabled, scriptAnalysis]);\r\n\r\n  const stopAutoScroll = useCallback(() => {\r\n    if (scrollIntervalRef.current) {\r\n      clearInterval(scrollIntervalRef.current);\r\n      scrollIntervalRef.current = null;\r\n    }\r\n    \r\n    if (isAdaptiveScrollActive) {\r\n      adaptiveScrollService.stop();\r\n      setIsAdaptiveScrollActive(false);\r\n      console.log('Adaptive scrolling stopped');\r\n    }\r\n  }, [isAdaptiveScrollActive]);\r\n\r\n  const handleScrollToggle = () => {\r\n    setSettings(prev => ({ ...prev, isScrolling: !prev.isScrolling }));\r\n    if (isFullscreen) {\r\n      resetControlsTimeout();\r\n    }\r\n  };\r\n\r\n  const handleSettingChange = <K extends keyof TeleprompterSettings>(\r\n    key: K,\r\n    value: TeleprompterSettings[K]\r\n  ) => {\r\n    setSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const resetScroll = () => {\r\n    scrollPositionRef.current = 0;\r\n    scrollViewRef.current?.scrollTo({ y: 0, animated: true });\r\n    setSettings(prev => ({ ...prev, isScrolling: false }));\r\n    setState(prev => ({ ...prev, currentPosition: 0, currentParagraph: 0 }));\r\n    \r\n    // Reset adaptive scrolling state\r\n    adaptiveScrollService.reset();\r\n    setIsAdaptiveScrollActive(false);\r\n    setSpeechPaceMetrics({\r\n      currentWPM: 0,\r\n      averageWPM: 0,\r\n      instantaneousWPM: 0,\r\n      timeSinceLastWord: 0,\r\n      speechDuration: 0,\r\n      totalWordsSpoken: 0,\r\n      isPaused: false,\r\n      isAccelerating: false,\r\n      paceTrend: 'stable',\r\n      confidenceLevel: 1.0,\r\n    });\r\n    \r\n    if (isFullscreen) {\r\n      resetControlsTimeout();\r\n    }\r\n  };\r\n\r\n  const jumpToParagraph = (paragraphIndex: number) => {\r\n    const targetY = paragraphRefs.current[paragraphIndex] || 0;\r\n    scrollPositionRef.current = targetY;\r\n    scrollViewRef.current?.scrollTo({ y: targetY, animated: true });\r\n    setState(prev => ({ ...prev, currentPosition: targetY, currentParagraph: paragraphIndex }));\r\n    if (isFullscreen) {\r\n      resetControlsTimeout();\r\n    }\r\n  };\r\n\r\n  const jumpToNextParagraph = () => {\r\n    const nextIndex = Math.min(state.currentParagraph + 1, paragraphs.length - 1);\r\n    jumpToParagraph(nextIndex);\r\n  };\r\n\r\n  const jumpToPrevParagraph = () => {\r\n    const prevIndex = Math.max(state.currentParagraph - 1, 0);\r\n    jumpToParagraph(prevIndex);\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(!isFullscreen);\r\n    if (!isFullscreen) {\r\n      setShowControls(true);\r\n      resetControlsTimeout();\r\n    } else {\r\n      setShowControls(true);\r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleControls = () => {\r\n    setShowControls(!showControls);\r\n    if (isFullscreen && !showControls) {\r\n      resetControlsTimeout();\r\n    }\r\n  };\r\n\r\n  const applyColorPreset = (preset: typeof PRESET_COLORS[0]) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      textColor: preset.text,\r\n      backgroundColor: preset.background,\r\n    }));\r\n    setColorMenuVisible(false);\r\n  };\r\n\r\n  const applyCustomColors = () => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      textColor: customTextColor,\r\n      backgroundColor: customBackgroundColor,\r\n    }));\r\n    setCustomColorModal(false);\r\n  };\r\n\r\n  const startKaraokeSession = () => {\r\n    if (karaokeSettings.enabled) {\r\n      karaokeService.start();\r\n      setKaraokeState((prev: KaraokeState) => ({ ...prev, isActive: true }));\r\n    }\r\n  };\r\n\r\n  const stopKaraokeSession = () => {\r\n    karaokeService.stop();\r\n    setKaraokeState((prev: KaraokeState) => ({ ...prev, isActive: false }));\r\n  };\r\n\r\n  const resetKaraokeSession = () => {\r\n    karaokeService.reset();\r\n  };\r\n\r\n  // Pacing meter handlers\r\n  const startPacingSession = () => {\r\n    if (pacingMeterSettings.enabled && scriptAnalysis) {\r\n      pacingMeterService.startSession();\r\n      // Update state will be handled by the service callback\r\n    }\r\n  };\r\n\r\n  const stopPacingSession = () => {\r\n    const report = pacingMeterService.endSession();\r\n    if (report) {\r\n      // Merge with filler word data\r\n      const fillerState = fillerWordDetectionService.getState();\r\n      const completeReport: SessionSummaryReport = {\r\n        ...report,\r\n        fillerWords: fillerState.detectedFillers,\r\n      };\r\n      \r\n      setSessionReport(completeReport);\r\n      \r\n      // Update gamification data with session results\r\n      const gamificationSvc = gamificationService.getInstance();\r\n      gamificationSvc.updateProgressFromSession(completeReport).then(() => {\r\n        // Get XP and achievements earned this session\r\n        gamificationSvc.getGamificationData().then(data => {\r\n          setSessionXP(data.weeklyXP); // This would be the XP earned this session\r\n          // Check for new achievements (simplified)\r\n          setSessionAchievements(data.recentAchievements.map(a => a.id));\r\n        });\r\n      }).catch(error => {\r\n        console.error('Error updating gamification data:', error);\r\n      });\r\n      \r\n      if (pacingMeterSettings.showSessionSummary) {\r\n        setShowSessionSummary(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetPacingSession = () => {\r\n    pacingMeterService.reset();\r\n    setPacingMeterState({\r\n      currentWPM: 0,\r\n      targetWPM: pacingMeterSettings.targetWPM,\r\n      isInOptimalRange: false,\r\n      sessionStartTime: Date.now(),\r\n      averageWPM: 0,\r\n      wpmHistory: [],\r\n      paceAnalysis: [],\r\n    });\r\n  };\r\n\r\n  // Filler word handlers\r\n  const startFillerDetectionSession = () => {\r\n    if (fillerWordSettings.enabled && scriptAnalysis) {\r\n      fillerWordDetectionService.startSession();\r\n      // Update state will be handled by the service callback\r\n    }\r\n  };\r\n\r\n  const stopFillerDetectionSession = () => {\r\n    fillerWordDetectionService.endSession();\r\n  };\r\n\r\n  const resetFillerDetectionSession = () => {\r\n    fillerWordDetectionService.reset();\r\n    setFillerWordState({\r\n      detectedFillers: [],\r\n      totalFillerCount: 0,\r\n      fillerRate: 0,\r\n      sessionStartTime: Date.now(),\r\n      commonFillers: {},\r\n    });\r\n    setActiveFillerCues([]);\r\n  };\r\n\r\n  // Session management\r\n  const startAnalysisSession = () => {\r\n    startPacingSession();\r\n    startFillerDetectionSession();\r\n    \r\n    // Start Hume emotion analysis session\r\n    if (showEmotionIndicator) {\r\n      humeService.current.startEmotionSession(sessionId);\r\n    }\r\n    \r\n    // Start Gemini AI session\r\n    if (aiPromptingSettings.enabled) {\r\n      geminiService.current.startAiSession(sessionId);\r\n    }\r\n  };\r\n\r\n  const stopAnalysisSession = () => {\r\n    stopPacingSession();\r\n    stopFillerDetectionSession();\r\n    \r\n    // End Hume emotion analysis session\r\n    const emotionData = humeService.current.endEmotionSession();\r\n    if (emotionData) {\r\n      setEmotionSessionData(emotionData);\r\n    }\r\n    \r\n    // End Gemini AI session\r\n    const aiData = geminiService.current.endAiSession();\r\n    if (aiData) {\r\n      setAiSessionData(aiData);\r\n    }\r\n  };\r\n\r\n  const resetAnalysisSession = () => {\r\n    resetPacingSession();\r\n    resetFillerDetectionSession();\r\n    \r\n    // Reset emotion and AI states\r\n    setCurrentEmotion(null);\r\n    setEmotionIndicator({\r\n      emoji: '',\r\n      color: '#9CA3AF',\r\n      confidence: 0,\r\n      description: 'Neutral',\r\n    });\r\n    setAiSuggestion(null);\r\n    setEmotionSessionData(null);\r\n    setAiSessionData(null);\r\n  };\r\n\r\n  // Settings handlers\r\n  const handlePacingSettingsChange = (newSettings: PacingMeterSettings) => {\r\n    setPacingMeterSettings(newSettings);\r\n    pacingMeterService.updateSettings(newSettings);\r\n  };\r\n\r\n  const handleFillerSettingsChange = (newSettings: FillerWordSettings) => {\r\n    setFillerWordSettings(newSettings);\r\n    fillerWordDetectionService.updateSettings(newSettings);\r\n  };\r\n\r\n  // Speech recognition handlers\r\n  const handleSpeechStart = () => {\r\n    setShowSpeechPanel(true);\r\n    if (karaokeSettings.enabled) {\r\n      startKaraokeSession();\r\n    }\r\n    if (pacingMeterSettings.enabled || fillerWordSettings.enabled) {\r\n      startAnalysisSession();\r\n    }\r\n  };\r\n\r\n  const handleSpeechStop = () => {\r\n    stopKaraokeSession();\r\n    stopAnalysisSession();\r\n  };\r\n\r\n  // Video recording handlers\r\n  const handleVideoRecordingStateChange = (isRecording: boolean) => {\r\n    setIsVideoRecording(isRecording);\r\n  };\r\n\r\n  const handleVideoRecorded = (videoUri: string) => {\r\n    console.log('Video recorded:', videoUri);\r\n    // Handle video export, saving, etc.\r\n  };\r\n\r\n  const handleScrollSync = (timestamp: number, scrollPosition: number) => {\r\n    // Synchronize scroll position with video timestamp for analytics\r\n    if (scrollViewRef.current) {\r\n      scrollViewRef.current.scrollTo({ y: scrollPosition, animated: false });\r\n    }\r\n  };\r\n\r\n  // External display handlers\r\n  const handleExternalDisplayToggle = () => {\r\n    setShowExternalDisplay(!showExternalDisplay);\r\n  };\r\n\r\n  // BLE remote control handlers\r\n  const handleBLERemoteToggle = () => {\r\n    setShowBLERemote(!showBLERemote);\r\n  };\r\n\r\n  const handleRemoteCommand = (command: string) => {\r\n    switch (command) {\r\n      case 'PLAY_PAUSE':\r\n        handleScrollToggle();\r\n        break;\r\n      case 'SCROLL_UP':\r\n        if (scrollViewRef.current) {\r\n          scrollViewRef.current.scrollTo({ \r\n            y: Math.max(0, scrollPositionRef.current - 100), \r\n            animated: true \r\n          });\r\n        }\r\n        break;\r\n      case 'SCROLL_DOWN':\r\n        if (scrollViewRef.current) {\r\n          scrollViewRef.current.scrollTo({ \r\n            y: scrollPositionRef.current + 100, \r\n            animated: true \r\n          });\r\n        }\r\n        break;\r\n      case 'SPEED_UP':\r\n        handleSettingChange('speed', Math.min(100, settings.speed + 5));\r\n        break;\r\n      case 'SPEED_DOWN':\r\n        handleSettingChange('speed', Math.max(10, settings.speed - 5));\r\n        break;\r\n      default:\r\n        console.log('Unknown remote command:', command);\r\n    }\r\n  };\r\n\r\n  const renderFormattedText = (text: string, paragraphIndex: number) => {\r\n    // Simple markdown-like formatting\r\n    const parts = text.split(/(\\*\\*.*?\\*\\*|\\*.*?\\*)/g);\r\n    \r\n    return (\r\n      <View\r\n        onLayout={(event) => {\r\n          paragraphRefs.current[paragraphIndex] = event.nativeEvent.layout.y;\r\n        }}\r\n        style={styles.paragraphContainer}\r\n      >\r\n        {parts.map((part, index) => {\r\n          const baseStyle = {\r\n            fontSize: settings.fontSize,\r\n            color: settings.textColor,\r\n            fontFamily: settings.fontFamily,\r\n            lineHeight: settings.fontSize * settings.lineHeight,\r\n            textAlign: settings.textAlign as any,\r\n          };\r\n\r\n          if (part.startsWith('**') && part.endsWith('**')) {\r\n            // Bold text\r\n            return (\r\n              <RNText key={`${paragraphIndex}-${index}`} style={[styles.scriptText, baseStyle, { fontWeight: 'bold' }]}>\r\n                {part.slice(2, -2)}\r\n              </RNText>\r\n            );\r\n          } else if (part.startsWith('*') && part.endsWith('*')) {\r\n            // Italic text\r\n            return (\r\n              <RNText key={`${paragraphIndex}-${index}`} style={[styles.scriptText, baseStyle, { fontStyle: 'italic' }]}>\r\n                {part.slice(1, -1)}\r\n              </RNText>\r\n            );\r\n          } else {\r\n            // Normal text\r\n            return (\r\n              <RNText key={`${paragraphIndex}-${index}`} style={[styles.scriptText, baseStyle]}>\r\n                {part}\r\n              </RNText>\r\n            );\r\n          }\r\n        })}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  if (!script) {\r\n    return null;\r\n  }\r\n\r\n  const containerStyle = [\r\n    styles.container,\r\n    { backgroundColor: settings.backgroundColor },\r\n    settings.isMirrored && styles.mirrored,\r\n  ];\r\n\r\n  const contentContainerStyle = [\r\n    styles.contentContainer,\r\n    { paddingHorizontal: settings.padding },\r\n    isFullscreen && { paddingVertical: height * 0.2 },\r\n  ];\r\n\r\n  return (\r\n    <View style={containerStyle}>\r\n      <StatusBar \r\n        hidden={isFullscreen} \r\n        barStyle={settings.backgroundColor === '#000000' ? 'light-content' : 'dark-content'} \r\n      />\r\n      \r\n      {!isFullscreen && (\r\n        <Surface style={styles.header} elevation={4}>\r\n          <IconButton\r\n            icon=\"arrow-left\"\r\n            size={24}\r\n            onPress={() => navigation.goBack()}\r\n            iconColor=\"#ffffff\"\r\n          />\r\n          <Text variant=\"titleMedium\" style={styles.headerTitle}>\r\n            {script.title}\r\n          </Text>\r\n          <IconButton\r\n            icon=\"cog\"\r\n            size={24}\r\n            onPress={() => setShowSettings(true)}\r\n            iconColor=\"#ffffff\"\r\n          />\r\n        </Surface>\r\n      )}\r\n\r\n      <View style={styles.teleprompterContainer}>\r\n        <ScrollView\r\n          ref={scrollViewRef}\r\n          style={styles.scrollView}\r\n          contentContainerStyle={contentContainerStyle}\r\n          onScroll={(event) => {\r\n            const { y } = event.nativeEvent.contentOffset;\r\n            scrollPositionRef.current = y;\r\n            \r\n            // If adaptive scrolling is active, notify the service about manual scroll\r\n            if (isAdaptiveScrollActive) {\r\n              adaptiveScrollService.setUserScrollPosition(y);\r\n            }\r\n            \r\n            // Update current paragraph based on scroll position\r\n            const currentParagraph = Object.keys(paragraphRefs.current)\r\n              .map(Number)\r\n              .reverse()\r\n              .find(index => y >= paragraphRefs.current[index]) || 0;\r\n            \r\n            setState(prev => ({ \r\n              ...prev, \r\n              currentParagraph,\r\n              currentPosition: y,\r\n              totalHeight: event.nativeEvent.contentSize.height,\r\n            }));\r\n          }}\r\n          onLayout={(event) => {\r\n            setState(prev => ({ \r\n              ...prev, \r\n              totalHeight: event.nativeEvent.layout.height,\r\n            }));\r\n          }}\r\n          scrollEventThrottle={16}\r\n          showsVerticalScrollIndicator={false}\r\n          onTouchStart={() => {\r\n            if (isFullscreen) {\r\n              setShowControls(true);\r\n              resetControlsTimeout();\r\n            }\r\n          }}\r\n          onTouchEnd={() => {\r\n            if (isFullscreen) {\r\n              resetControlsTimeout();\r\n            }\r\n          }}\r\n          onScrollBeginDrag={() => {\r\n            // User started manual scrolling - this will be handled by main onScroll\r\n          }}\r\n          onScrollEndDrag={() => {\r\n            // User finished manual scrolling - adaptive scroll will resume automatically\r\n          }}\r\n        >\r\n          <View style={styles.textContainer}>\r\n            {karaokeSettings.enabled ? (\r\n              <KaraokeText\r\n                content={script?.content || ''}\r\n                karaokeState={karaokeState}\r\n                scriptAnalysis={scriptAnalysis}\r\n                settings={karaokeSettings}\r\n                teleprompterSettings={settings}\r\n                onWordLayout={(wordIndex, layout) => {\r\n                  // Store word layout for precise scrolling\r\n                }}\r\n                onScrollRequest={(y) => {\r\n                  scrollViewRef.current?.scrollTo({ y, animated: true });\r\n                }}\r\n              />\r\n            ) : (\r\n              <>\r\n                {paragraphs.map((paragraph, index) => \r\n                  renderFormattedText(paragraph, index)\r\n                )}\r\n              </>\r\n            )}\r\n          </View>\r\n          \r\n          {/* Add extra space at the bottom for complete scrolling */}\r\n          <View style={{ height: height * 0.8 }} />\r\n        </ScrollView>\r\n\r\n        {/* Progress indicator */}\r\n        {isFullscreen && (\r\n          <View style={styles.progressContainer}>\r\n            <View \r\n              style={[\r\n                styles.progressBar, \r\n                { \r\n                  width: `${(state.currentPosition / Math.max(state.totalHeight - height, 1)) * 100}%`,\r\n                  backgroundColor: settings.textColor,\r\n                }\r\n              ]} \r\n            />\r\n          </View>\r\n        )}\r\n\r\n        {isFullscreen && (\r\n          <Animated.View style={[styles.fullscreenOverlay, { opacity: fadeAnim }]}>\r\n            <IconButton\r\n              icon={showControls ? 'eye-off' : 'eye'}\r\n              size={20}\r\n              onPress={toggleControls}\r\n              style={styles.toggleButton}\r\n              iconColor={settings.textColor}\r\n              containerColor={`${settings.backgroundColor}80`}\r\n            />\r\n            <Text style={[styles.paragraphIndicator, { color: settings.textColor }]}>\r\n              {state.currentParagraph + 1} / {state.totalParagraphs}\r\n            </Text>\r\n          </Animated.View>\r\n        )}\r\n      </View>\r\n\r\n      {showControls && (\r\n        <Surface style={styles.controls} elevation={4}>\r\n          <View style={styles.controlRow}>\r\n            <IconButton\r\n              icon={settings.isScrolling ? 'pause' : 'play'}\r\n              size={32}\r\n              mode=\"contained\"\r\n              onPress={handleScrollToggle}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={settings.isScrolling ? '#ef4444' : '#10b981'}\r\n            />\r\n            \r\n            <IconButton\r\n              icon=\"restart\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={resetScroll}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#6366f1\"\r\n            />\r\n            \r\n            <IconButton\r\n              icon=\"skip-previous\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={jumpToPrevParagraph}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#8b5cf6\"\r\n              disabled={state.currentParagraph === 0}\r\n            />\r\n            \r\n            <IconButton\r\n              icon=\"skip-next\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={jumpToNextParagraph}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#8b5cf6\"\r\n              disabled={state.currentParagraph >= paragraphs.length - 1}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"microphone\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={handleSpeechStart}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#f59e0b\"\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"karaoke\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowKaraokeSettings(true)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={karaokeSettings.enabled ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"speedometer\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowPacingSettings(true)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={pacingMeterSettings.enabled ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"alert-circle\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowSettings(true)} // Will add dedicated filler settings later\r\n              iconColor=\"#ffffff\"\r\n              containerColor={fillerWordSettings.enabled ? \"#F59E0B\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"emoticon-happy\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowEmotionIndicator(!showEmotionIndicator)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={showEmotionIndicator ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"brain\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowAiSuggestions(!showAiSuggestions)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={showAiSuggestions ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"video\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowVideoRecording(!showVideoRecording)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={isVideoRecording ? \"#EF4444\" : showVideoRecording ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"monitor\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={handleExternalDisplayToggle}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={showExternalDisplay ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"bluetooth\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={handleBLERemoteToggle}\r\n              iconColor=\"#ffffff\"\r\n              containerColor={showBLERemote ? \"#10B981\" : \"#6B7280\"}\r\n            />\r\n\r\n            <IconButton\r\n              icon={isFullscreen ? 'fullscreen-exit' : 'fullscreen'}\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={toggleFullscreen}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#374151\"\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"translate\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowLanguageSelector(true)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#8B5CF6\"\r\n            />\r\n\r\n            <IconButton\r\n              icon=\"trophy\"\r\n              size={24}\r\n              mode=\"contained\"\r\n              onPress={() => setShowGamificationPanel(true)}\r\n              iconColor=\"#ffffff\"\r\n              containerColor=\"#F59E0B\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.sliderContainer}>\r\n            <View style={styles.sliderRow}>\r\n              <Text variant=\"labelMedium\" style={styles.sliderLabel}>\r\n                Speed: {settings.speed}%\r\n              </Text>\r\n              <Slider\r\n                style={styles.slider}\r\n                minimumValue={10}\r\n                maximumValue={200}\r\n                value={settings.speed}\r\n                onValueChange={(value) => handleSettingChange('speed', value)}\r\n                step={10}\r\n                minimumTrackTintColor=\"#6366f1\"\r\n                maximumTrackTintColor=\"#e5e7eb\"\r\n              />\r\n            </View>\r\n            \r\n            <View style={styles.sliderRow}>\r\n              <Text variant=\"labelMedium\" style={styles.sliderLabel}>\r\n                Font Size: {settings.fontSize}px\r\n              </Text>\r\n              <Slider\r\n                style={styles.slider}\r\n                minimumValue={12}\r\n                maximumValue={72}\r\n                value={settings.fontSize}\r\n                onValueChange={(value) => handleSettingChange('fontSize', value)}\r\n                step={2}\r\n                minimumTrackTintColor=\"#6366f1\"\r\n                maximumTrackTintColor=\"#e5e7eb\"\r\n              />\r\n            </View>\r\n\r\n            <View style={styles.switchRow}>\r\n              <Text variant=\"labelMedium\" style={styles.sliderLabel}>\r\n                Mirror Text\r\n              </Text>\r\n              <Switch\r\n                value={settings.isMirrored}\r\n                onValueChange={(value) => handleSettingChange('isMirrored', value)}\r\n                color=\"#6366f1\"\r\n              />\r\n            </View>\r\n          </View>\r\n\r\n          {/* Speech Pace Metrics Display */}\r\n          {isAdaptiveScrollActive && (\r\n            <View style={styles.metricsContainer}>\r\n              <Text variant=\"labelMedium\" style={styles.metricsTitle}>\r\n                Speech Pace Metrics\r\n              </Text>\r\n              <View style={styles.metricsRow}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Current WPM: {speechPaceMetrics.currentWPM.toFixed(0)}\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Average WPM: {speechPaceMetrics.averageWPM.toFixed(0)}\r\n                </Text>\r\n              </View>\r\n              <View style={styles.metricsRow}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Pace: {speechPaceMetrics.paceTrend}\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Confidence: {Math.round(speechPaceMetrics.confidenceLevel * 100)}%\r\n                </Text>\r\n              </View>\r\n              <View style={styles.metricsRow}>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  Scroll Speed: {scrollState.adaptiveSpeed.toFixed(0)}\r\n                </Text>\r\n                <Text variant=\"bodySmall\" style={styles.metricLabel}>\r\n                  {speechPaceMetrics.isPaused ? 'Paused' : 'Speaking'}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          )}\r\n        </Surface>\r\n      )}\r\n\r\n      {/* Settings Modal */}\r\n      <Portal>\r\n        <Modal\r\n          visible={showSettings}\r\n          onDismiss={() => setShowSettings(false)}\r\n          contentContainerStyle={styles.settingsModal}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Teleprompter Settings\r\n          </Text>\r\n\r\n          {/* Font Family Selection */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>Font Family</Text>\r\n            <Menu\r\n              visible={fontMenuVisible}\r\n              onDismiss={() => setFontMenuVisible(false)}\r\n              anchor={\r\n                <Button\r\n                  mode=\"outlined\"\r\n                  onPress={() => setFontMenuVisible(true)}\r\n                  style={styles.settingButton}\r\n                >\r\n                  {FONT_FAMILIES.find(f => f.value === settings.fontFamily)?.label || 'Custom'}\r\n                </Button>\r\n              }\r\n            >\r\n              {FONT_FAMILIES.map((font) => (\r\n                <Menu.Item\r\n                  key={font.value}\r\n                  onPress={() => {\r\n                    handleSettingChange('fontFamily', font.value);\r\n                    setFontMenuVisible(false);\r\n                  }}\r\n                  title={font.label}\r\n                />\r\n              ))}\r\n            </Menu>\r\n          </View>\r\n\r\n          {/* Color Presets */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>Color Scheme</Text>\r\n            <Menu\r\n              visible={colorMenuVisible}\r\n              onDismiss={() => setColorMenuVisible(false)}\r\n              anchor={\r\n                <Button\r\n                  mode=\"outlined\"\r\n                  onPress={() => setColorMenuVisible(true)}\r\n                  style={styles.settingButton}\r\n                >\r\n                  Choose Color Scheme\r\n                </Button>\r\n              }\r\n            >\r\n              {PRESET_COLORS.map((preset, index) => (\r\n                <Menu.Item\r\n                  key={index}\r\n                  onPress={() => applyColorPreset(preset)}\r\n                  title={preset.label}\r\n                />\r\n              ))}\r\n              <Divider />\r\n              <Menu.Item\r\n                onPress={() => {\r\n                  setColorMenuVisible(false);\r\n                  setCustomColorModal(true);\r\n                }}\r\n                title=\"Custom Colors...\"\r\n              />\r\n            </Menu>\r\n          </View>\r\n\r\n          {/* Text Alignment */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>Text Alignment</Text>\r\n            <View style={styles.alignmentButtons}>\r\n              {(['left', 'center', 'right'] as const).map((align) => (\r\n                <Button\r\n                  key={align}\r\n                  mode={settings.textAlign === align ? 'contained' : 'outlined'}\r\n                  onPress={() => handleSettingChange('textAlign', align)}\r\n                  style={styles.alignmentButton}\r\n                  compact\r\n                >\r\n                  {align.charAt(0).toUpperCase() + align.slice(1)}\r\n                </Button>\r\n              ))}\r\n            </View>\r\n          </View>\r\n\r\n          {/* Line Height */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Line Height: {settings.lineHeight.toFixed(1)}\r\n            </Text>\r\n            <Slider\r\n              style={styles.modalSlider}\r\n              minimumValue={1.0}\r\n              maximumValue={3.0}\r\n              value={settings.lineHeight}\r\n              onValueChange={(value) => handleSettingChange('lineHeight', value)}\r\n              step={0.1}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n            />\r\n          </View>\r\n\r\n          {/* Padding */}\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>\r\n              Padding: {settings.padding}px\r\n            </Text>\r\n            <Slider\r\n              style={styles.modalSlider}\r\n              minimumValue={8}\r\n              maximumValue={64}\r\n              value={settings.padding}\r\n              onValueChange={(value) => handleSettingChange('padding', value)}\r\n              step={8}\r\n              minimumTrackTintColor=\"#6366f1\"\r\n              maximumTrackTintColor=\"#e5e7eb\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.modalButtons}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => setSettings(DEFAULT_SETTINGS)}\r\n              style={styles.modalButton}\r\n            >\r\n              Reset to Default\r\n            </Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={() => setShowSettings(false)}\r\n              style={styles.modalButton}\r\n            >\r\n              Done\r\n            </Button>\r\n          </View>\r\n        </Modal>\r\n\r\n        {/* Custom Color Modal */}\r\n        <Modal\r\n          visible={customColorModal}\r\n          onDismiss={() => setCustomColorModal(false)}\r\n          contentContainerStyle={styles.settingsModal}\r\n        >\r\n          <Text variant=\"headlineSmall\" style={styles.modalTitle}>\r\n            Custom Colors\r\n          </Text>\r\n\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>Text Color</Text>\r\n            <TextInput\r\n              value={customTextColor}\r\n              onChangeText={setCustomTextColor}\r\n              placeholder=\"#FFFFFF\"\r\n              style={styles.colorInput}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.settingGroup}>\r\n            <Text variant=\"titleMedium\" style={styles.settingTitle}>Background Color</Text>\r\n            <TextInput\r\n              value={customBackgroundColor}\r\n              onChangeText={setCustomBackgroundColor}\r\n              placeholder=\"#000000\"\r\n              style={styles.colorInput}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.colorPreview}>\r\n            <View\r\n              style={[\r\n                styles.colorPreviewBox,\r\n                {\r\n                  backgroundColor: customBackgroundColor,\r\n                  borderColor: customTextColor,\r\n                },\r\n              ]}\r\n            >\r\n              <Text style={{ color: customTextColor, fontSize: 16 }}>\r\n                Preview Text\r\n              </Text>\r\n            </View>\r\n          </View>\r\n\r\n          <View style={styles.modalButtons}>\r\n            <Button\r\n              mode=\"outlined\"\r\n              onPress={() => setCustomColorModal(false)}\r\n              style={styles.modalButton}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={applyCustomColors}\r\n              style={styles.modalButton}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </View>\r\n        </Modal>\r\n\r\n        {/* Karaoke Settings Panel */}\r\n        <KaraokeSettings\r\n          visible={showKaraokeSettings}\r\n          settings={karaokeSettings}\r\n          onClose={() => setShowKaraokeSettings(false)}\r\n          onSave={(newSettings) => {\r\n            setKaraokeSettings(newSettings);\r\n            \r\n            // If karaoke was enabled/disabled, restart the service\r\n            if (newSettings.enabled !== karaokeSettings.enabled) {\r\n              if (newSettings.enabled && script?.content) {\r\n                karaokeService.initialize(\r\n                  script.content,\r\n                  newSettings,\r\n                  (newState) => setKaraokeState(newState),\r\n                  (wordIndices) => {\r\n                    setKaraokeState((prev: KaraokeState) => ({ ...prev, highlightedWords: wordIndices }));\r\n                  }\r\n                );\r\n              } else {\r\n                karaokeService.stop();\r\n              }\r\n            } else {\r\n              karaokeService.updateSettings(newSettings);\r\n            }\r\n          }}\r\n          onReset={() => {\r\n            const defaultSettings: KaraokeHighlightSettings = {\r\n              enabled: true,\r\n              highlightColor: '#FFD700',\r\n              highlightBackgroundColor: 'rgba(255, 215, 0, 0.3)',\r\n              autoScroll: true,\r\n              scrollOffset: 100,\r\n              matchThreshold: 0.7,\r\n              highlightDuration: 1500,\r\n              animationDuration: 200,\r\n              fadeOutDelay: 500,\r\n            };\r\n            setKaraokeSettings(defaultSettings);\r\n          }}\r\n        />\r\n\r\n        {/* Adaptive Scroll Settings Panel */}\r\n        <AdaptiveScrollSettingsModal\r\n          visible={showAdaptiveScrollSettings}\r\n          settings={adaptiveScrollSettings}\r\n          onClose={() => setShowAdaptiveScrollSettings(false)}\r\n          onSave={(newSettings) => {\r\n            setAdaptiveScrollSettings(newSettings);\r\n            \r\n            // Update the adaptive scroll service settings\r\n            adaptiveScrollService.updateSettings(newSettings);\r\n            \r\n            // If adaptive scrolling was enabled/disabled, restart if needed\r\n            if (newSettings.enabled !== adaptiveScrollSettings.enabled) {\r\n              if (newSettings.enabled && scriptAnalysis && isAdaptiveScrollActive) {              adaptiveScrollService.initialize(\r\n                scriptAnalysis,\r\n                newSettings,\r\n                (position: number, velocity: number, metrics: SpeechPaceMetrics) => {\r\n                  if (!scrollState.isUserControlled && isAdaptiveScrollActive) {\r\n                    scrollViewRef.current?.scrollTo({\r\n                      y: position,\r\n                      animated: false,\r\n                    });\r\n                    setScrollState(adaptiveScrollService.getScrollState());\r\n                  }\r\n                },\r\n                (metrics: SpeechPaceMetrics) => setSpeechPaceMetrics(metrics),\r\n                (state: ScrollState) => setScrollState(state)\r\n                );\r\n              } else if (!newSettings.enabled) {\r\n                adaptiveScrollService.stop();\r\n                setIsAdaptiveScrollActive(false);\r\n              }\r\n            }\r\n          }}\r\n          onReset={() => {\r\n            const defaultSettings: AdaptiveScrollSettings = {\r\n              enabled: true,\r\n              baseScrollSpeed: 50,\r\n              responsiveness: 0.7,\r\n              smoothingFactor: 0.8,\r\n              pauseThreshold: 2.0,\r\n              accelerationLimit: 3.0,\r\n              decelerationLimit: 0.1,\r\n              lookAheadWords: 5,\r\n              bufferZone: 100,\r\n            };\r\n            setAdaptiveScrollSettings(defaultSettings);\r\n            adaptiveScrollService.updateSettings(defaultSettings);\r\n          }}\r\n        />\r\n\r\n        {/* Pacing Settings Panel */}\r\n        <PacingSettings\r\n          visible={showPacingSettings}\r\n          onDismiss={() => setShowPacingSettings(false)}\r\n          pacingSettings={pacingMeterSettings}\r\n          fillerSettings={fillerWordSettings}\r\n          onPacingSettingsChange={(newSettings: PacingMeterSettings) => {\r\n            handlePacingSettingsChange(newSettings);\r\n          }}\r\n          onFillerSettingsChange={(newSettings: FillerWordSettings) => {\r\n            handleFillerSettingsChange(newSettings);\r\n          }}\r\n        />\r\n\r\n        {/* Session Summary Modal */}\r\n        {sessionReport && (\r\n          <SessionSummary\r\n            report={sessionReport}\r\n            visible={showSessionSummary}\r\n            onDismiss={() => setShowSessionSummary(false)}\r\n            onSaveReport={(report) => {\r\n              // Could save to local storage or sync service\r\n              console.log('Saving session report:', report);\r\n            }}\r\n            onStartNewSession={() => {\r\n              resetAnalysisSession();\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Language Selection Modal */}\r\n        <Modal\r\n          visible={showLanguageSelector}\r\n          onDismiss={() => setShowLanguageSelector(false)}\r\n          contentContainerStyle={styles.modalContainer}\r\n        >\r\n          <LanguageSelector\r\n            selectedLanguage={script?.language || null}\r\n            onLanguageSelect={(language: LanguageOption) => {\r\n              setSelectedLanguage(language.code);\r\n              setShowLanguageSelector(false);\r\n            }}\r\n            showFlags={true}\r\n            title=\"Select Script Language\"\r\n          />\r\n        </Modal>\r\n\r\n        {/* Gamification Panel Modal */}\r\n        <GamificationPanel\r\n          visible={showGamificationPanel}\r\n          onDismiss={() => setShowGamificationPanel(false)}\r\n          onShare={(shareData) => {\r\n            // Handle social sharing\r\n            console.log('Sharing achievement:', shareData);\r\n          }}\r\n        />\r\n      </Portal>\r\n\r\n      {/* Speech Recognition Panel */}\r\n      <SpeechRecognitionPanel\r\n        visible={showSpeechPanel}\r\n        onDismiss={() => setShowSpeechPanel(false)}\r\n        onTranscriptUpdate={setPracticeTranscript}\r\n        currentScript={script?.content || ''}\r\n        settings={{\r\n          backgroundColor: '#ffffff',\r\n          textColor: '#374151',\r\n        }}\r\n      />\r\n\r\n      {/* Pacing Meter */}\r\n      <PacingMeter\r\n        state={pacingMeterState}\r\n        settings={pacingMeterSettings}\r\n        isVisible={showPacingMeter}\r\n        onToggleVisibility={() => setShowPacingMeter(!showPacingMeter)}\r\n      />\r\n\r\n      {/* Emotion Indicator */}\r\n      {showEmotionIndicator && (\r\n        <EmotionIndicator\r\n          visible={showEmotionIndicator}\r\n          position=\"top-right\"\r\n          onEmotionChange={(emotion) => {\r\n            setCurrentEmotion(emotion);\r\n          }}\r\n          style={{\r\n            position: 'absolute',\r\n            top: 60,\r\n            right: 20,\r\n            zIndex: 1000,\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* AI Suggestion Panel */}\r\n      {showAiSuggestions && (\r\n        <AiSuggestionPanel\r\n          visible={showAiSuggestions}\r\n          position=\"bottom\"\r\n          onSuggestionAccept={(suggestion) => {\r\n            console.log('User accepted AI suggestion:', suggestion.text);\r\n            // TODO: Update user acceptance metrics in Gemini service\r\n          }}\r\n          onSuggestionReject={(suggestion) => {\r\n            console.log('User rejected AI suggestion:', suggestion.text);\r\n            // TODO: Update user rejection metrics in Gemini service\r\n          }}\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: 120,\r\n            left: 20,\r\n            right: 20,\r\n            zIndex: 1000,\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Filler Word Cues */}\r\n      {activeFillerCues.map((detection, index) => (\r\n        <FillerWordCue\r\n          key={`${detection.timestamp}-${index}`}\r\n          detection={detection}\r\n          settings={fillerWordSettings}\r\n          onDismiss={() => {\r\n            setActiveFillerCues(prev => \r\n              prev.filter(cue => cue.timestamp !== detection.timestamp)\r\n            );\r\n          }}\r\n          style={{\r\n            top: 100 + (index * 50), // Stack them vertically\r\n            right: 20,\r\n          }}\r\n        />\r\n      ))}\r\n\r\n      {/* Video Recording Panel */}\r\n      {showVideoRecording && (\r\n        <VideoRecordingPanel\r\n          sessionId={sessionId}\r\n          isActive={showVideoRecording}\r\n          onRecordingStateChange={handleVideoRecordingStateChange}\r\n          onVideoRecorded={handleVideoRecorded}\r\n          onScrollSync={handleScrollSync}\r\n        />\r\n      )}\r\n\r\n      {/* External Display Panel */}\r\n      {showExternalDisplay && (\r\n        <ExternalDisplayPanel\r\n          scriptContent={script?.content || ''}\r\n          currentPosition={scrollPositionRef.current}\r\n          highlightedWords={karaokeState.highlightedWords}\r\n          isActive={showExternalDisplay}\r\n          onDisplayOptionsChange={(options) => {\r\n            console.log('Display options changed:', options);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* BLE Remote Control Panel */}\r\n      {showBLERemote && (\r\n        <BLERemotePanel\r\n          isActive={showBLERemote}\r\n          onRemoteAction={(action) => {\r\n            handleRemoteCommand(action);\r\n          }}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#000000',\r\n  },\r\n  mirrored: {\r\n    transform: [{ scaleX: -1 }],\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    backgroundColor: '#6366f1',\r\n    paddingHorizontal: 8,\r\n    paddingVertical: 4,\r\n  },\r\n  headerTitle: {\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n    flex: 1,\r\n    textAlign: 'center',\r\n  },\r\n  teleprompterContainer: {\r\n    flex: 1,\r\n    position: 'relative',\r\n  },\r\n  scrollView: {\r\n    flex: 1,\r\n  },\r\n  contentContainer: {\r\n    paddingVertical: 32,\r\n  },\r\n  textContainer: {\r\n    alignItems: 'center',\r\n  },\r\n  paragraphContainer: {\r\n    marginBottom: 24,\r\n    paddingHorizontal: 8,\r\n  },\r\n  scriptText: {\r\n    lineHeight: 36,\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  progressContainer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    height: 4,\r\n    backgroundColor: 'rgba(255,255,255,0.2)',\r\n  },\r\n  progressBar: {\r\n    height: '100%',\r\n    backgroundColor: '#6366f1',\r\n  },\r\n  fullscreenOverlay: {\r\n    position: 'absolute',\r\n    top: 16,\r\n    right: 16,\r\n    alignItems: 'flex-end',\r\n    gap: 8,\r\n  },\r\n  toggleButton: {\r\n    zIndex: 10,\r\n  },\r\n  paragraphIndicator: {\r\n    fontSize: 14,\r\n    fontWeight: 'bold',\r\n    backgroundColor: 'rgba(0,0,0,0.5)',\r\n    paddingHorizontal: 8,\r\n    paddingVertical: 4,\r\n    borderRadius: 4,\r\n  },\r\n  controls: {\r\n    backgroundColor: '#ffffff',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderTopLeftRadius: 16,\r\n    borderTopRightRadius: 16,\r\n  },\r\n  controlRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    gap: 16,\r\n    marginBottom: 16,\r\n  },\r\n  sliderContainer: {\r\n    gap: 12,\r\n  },\r\n  sliderRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 12,\r\n  },\r\n  switchRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingVertical: 8,\r\n  },\r\n  sliderLabel: {\r\n    minWidth: 100,\r\n    color: '#374151',\r\n    fontWeight: '500',\r\n  },\r\n  slider: {\r\n    flex: 1,\r\n    height: 40,\r\n  },\r\n  settingsModal: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    margin: 20,\r\n    borderRadius: 8,\r\n    maxHeight: height * 0.8,\r\n  },\r\n  modalTitle: {\r\n    textAlign: 'center',\r\n    marginBottom: 20,\r\n    color: '#374151',\r\n  },\r\n  settingGroup: {\r\n    marginBottom: 20,\r\n  },\r\n  settingTitle: {\r\n    marginBottom: 8,\r\n    color: '#374151',\r\n  },\r\n  settingButton: {\r\n    marginBottom: 8,\r\n  },\r\n  alignmentButtons: {\r\n    flexDirection: 'row',\r\n    gap: 8,\r\n  },\r\n  alignmentButton: {\r\n    flex: 1,\r\n  },\r\n  modalSlider: {\r\n    width: '100%',\r\n    height: 40,\r\n  },\r\n  modalButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    gap: 12,\r\n    marginTop: 20,\r\n  },\r\n  modalButton: {\r\n    flex: 1,\r\n  },\r\n  colorInput: {\r\n    marginBottom: 8,\r\n  },\r\n  colorPreview: {\r\n    alignItems: 'center',\r\n    marginVertical: 16,\r\n  },\r\n  colorPreviewBox: {\r\n    width: 120,\r\n    height: 60,\r\n    borderWidth: 2,\r\n    borderRadius: 8,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  metricsContainer: {\r\n    backgroundColor: '#f9fafb',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginTop: 12,\r\n  },\r\n  metricsTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    marginBottom: 12,\r\n    color: '#374151',\r\n  },\r\n  metricsRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 8,\r\n  },\r\n  metricLabel: {\r\n    color: '#374151',\r\n    fontWeight: '400',\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: '#ffffff',\r\n    margin: 20,\r\n    borderRadius: 12,\r\n    padding: 20,\r\n    maxHeight: '80%',\r\n  },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\screens\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\__tests__\\analyticsService.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'SessionReport' is defined but never used.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"SessionReport"},"fix":{"range":[253,267],"text":""},"desc":"Remove unused variable 'SessionReport'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SessionReport' is defined but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":20,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":5},{"ruleId":"no-unused-vars","severity":2,"message":"'mockCollection' is assigned a value but never used.","line":24,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockCollection"},"fix":{"range":[426,502],"text":""},"desc":"Remove unused variable 'mockCollection'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockCollection' is assigned a value but never used.","line":24,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":24,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'mockDoc' is assigned a value but never used.","line":25,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockDoc"},"fix":{"range":[504,559],"text":""},"desc":"Remove unused variable 'mockDoc'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockDoc' is assigned a value but never used.","line":25,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":25,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":26,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":27,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":30,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'mockQuery' is assigned a value but never used.","line":31,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockQuery"},"fix":{"range":[912,973],"text":""},"desc":"Remove unused variable 'mockQuery'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockQuery' is assigned a value but never used.","line":31,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":31,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'mockWhere' is assigned a value but never used.","line":32,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockWhere"},"fix":{"range":[975,1036],"text":""},"desc":"Remove unused variable 'mockWhere'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockWhere' is assigned a value but never used.","line":32,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":32,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'mockOrderBy' is assigned a value but never used.","line":33,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockOrderBy"},"fix":{"range":[1038,1105],"text":""},"desc":"Remove unused variable 'mockOrderBy'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockOrderBy' is assigned a value but never used.","line":33,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":33,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'mockLimit' is assigned a value but never used.","line":34,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockLimit"},"fix":{"range":[1107,1168],"text":""},"desc":"Remove unused variable 'mockLimit'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mockLimit' is assigned a value but never used.","line":34,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":34,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":35,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":37,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":38,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":39,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1406,1409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1406,1409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":43,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":44,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1634,1637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1634,1637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":50,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":51,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":52,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":62,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":65,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":71,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":101,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":102,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":103,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":110,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":131,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":137,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":138,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":138,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":174,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":174,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":182,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5549,5552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5549,5552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":186,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":186,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":187,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":187,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":188,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":195,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":195,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":198,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":198,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":203,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":203,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":226,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":226,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7037,7040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7037,7040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":238,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":238,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":242,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":242,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":243,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":243,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7747,7750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7747,7750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":262,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":262,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":263,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":263,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":270,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":270,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8230,8233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8230,8233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":279,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":282,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":282,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":285,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":285,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":291,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":291,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":292,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":292,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":297,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":297,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":300,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":300,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":303,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":303,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":309,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":309,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":310,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":310,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":329,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":329,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":339,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10235,10238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10235,10238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":343,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":343,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":344,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":344,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":345,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":345,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":346,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":346,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":349,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":349,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":352,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":352,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":358,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":358,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":359,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":359,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11790,11793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11790,11793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":388,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":388,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11847,11850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11847,11850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":392,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":392,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":393,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":393,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":394,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":394,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":395,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":395,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":398,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":398,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":401,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":401,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":407,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":407,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":408,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":408,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":422,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":422,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":423,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":423,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[13096,13103],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":423,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":423,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":432,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":432,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13316,13319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13316,13319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":438,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":438,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":439,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":439,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":442,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":442,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":453,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":453,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":454,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":454,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[13947,13954],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":454,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":454,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":463,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14167,14170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14167,14170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":470,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":470,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":471,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":471,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":474,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":474,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":477,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":477,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":483,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":483,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":484,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":484,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":496,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":496,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":497,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":498,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":504,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":504,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":512,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":19}],"suppressedMessages":[],"errorCount":109,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { analyticsService } from '../analyticsService';\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  serverTimestamp,\r\n} from 'firebase/firestore';\r\nimport { SessionReport, AnalyticsFilters } from '../../types';\r\n\r\n// Mock Firebase Firestore\r\njest.mock('firebase/firestore');\r\njest.mock('../firebase', () => ({\r\n  db: {},\r\n}));\r\n\r\nconst mockCollection = collection as jest.MockedFunction<typeof collection>;\r\nconst mockDoc = doc as jest.MockedFunction<typeof doc>;\r\nconst mockAddDoc = addDoc as jest.MockedFunction<typeof addDoc>;\r\nconst mockUpdateDoc = updateDoc as jest.MockedFunction<typeof updateDoc>;\r\nconst mockDeleteDoc = deleteDoc as jest.MockedFunction<typeof deleteDoc>;\r\nconst mockGetDoc = getDoc as jest.MockedFunction<typeof getDoc>;\r\nconst mockGetDocs = getDocs as jest.MockedFunction<typeof getDocs>;\r\nconst mockQuery = query as jest.MockedFunction<typeof query>;\r\nconst mockWhere = where as jest.MockedFunction<typeof where>;\r\nconst mockOrderBy = orderBy as jest.MockedFunction<typeof orderBy>;\r\nconst mockLimit = limit as jest.MockedFunction<typeof limit>;\r\nconst mockServerTimestamp = serverTimestamp as jest.MockedFunction<typeof serverTimestamp>;\r\n\r\ndescribe('AnalyticsService', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockServerTimestamp.mockReturnValue(new Date() as any);\r\n  });\r\n\r\n  describe('createSession', () => {\r\n    it('should create a new session successfully', async () => {\r\n      const mockSessionRef = { id: 'new-session-id' };\r\n      mockAddDoc.mockResolvedValue(mockSessionRef as any);\r\n\r\n      const sessionId = await analyticsService.createSession('script-123', 'user-456', 150);\r\n\r\n      expect(mockAddDoc).toHaveBeenCalledWith(\r\n        expect.anything(),\r\n        expect.objectContaining({\r\n          scriptId: 'script-123',\r\n          userId: 'user-456',\r\n          targetWPM: 150,\r\n          status: 'active',\r\n        })\r\n      );\r\n      expect(sessionId).toBe('new-session-id');\r\n    });\r\n\r\n    it('should handle creation error', async () => {\r\n      mockAddDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.createSession('script-123', 'user-456', 150)\r\n      ).rejects.toThrow('Failed to create session');\r\n    });\r\n  });\r\n\r\n  describe('endSession', () => {\r\n    it('should end session successfully', async () => {\r\n      mockUpdateDoc.mockResolvedValue(undefined);\r\n\r\n      const metrics = {\r\n        totalDuration: 120000,\r\n        totalWords: 200,\r\n        wordsSpoken: 195,\r\n        averageWPM: 145,\r\n        paceAnalysis: [],\r\n        fillerWordAnalysis: {\r\n          totalFillerWords: 3,\r\n          fillerRate: 1.5,\r\n          uniqueFillers: { um: 2, uh: 1 },\r\n          fillerInstances: [],\r\n          improvementSuggestions: [],\r\n        },\r\n        scriptAdherence: {\r\n          totalScriptWords: 200,\r\n          wordsSpoken: 195,\r\n          adherencePercentage: 97.5,\r\n          skippedSections: [],\r\n          deviations: [],\r\n          accuracyScore: 97.5,\r\n        },\r\n        wpmHistory: [],\r\n      };\r\n\r\n      await analyticsService.endSession('session-123', metrics);\r\n\r\n      expect(mockUpdateDoc).toHaveBeenCalledWith(\r\n        expect.anything(),\r\n        expect.objectContaining({\r\n          ...metrics,\r\n          status: 'completed',\r\n        })\r\n      );\r\n    });\r\n\r\n    it('should handle end session error', async () => {\r\n      mockUpdateDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      const metrics = {\r\n        totalDuration: 120000,\r\n        totalWords: 200,\r\n        wordsSpoken: 195,\r\n        averageWPM: 145,\r\n        paceAnalysis: [],\r\n        fillerWordAnalysis: {},\r\n        scriptAdherence: {\r\n          totalScriptWords: 200,\r\n          wordsSpoken: 195,\r\n          adherencePercentage: 97.5,\r\n          skippedSections: [],\r\n          deviations: [],\r\n          accuracyScore: 97.5,\r\n        },\r\n        wpmHistory: [],\r\n      };\r\n\r\n      await expect(\r\n        analyticsService.endSession('session-123', metrics)\r\n      ).rejects.toThrow('Failed to end session');\r\n    });\r\n  });\r\n\r\n  describe('getSessions', () => {\r\n    it('should get sessions successfully', async () => {\r\n      const mockSessionData = {\r\n        id: 'session-123',\r\n        scriptId: 'script-456',\r\n        scriptTitle: 'Test Script',\r\n        userId: 'user-789',\r\n        startTime: { toDate: () => new Date('2024-01-01') },\r\n        endTime: { toDate: () => new Date('2024-01-01') },\r\n        totalDuration: 60000,\r\n        totalWords: 100,\r\n        wordsSpoken: 95,\r\n        averageWPM: 150,\r\n        targetWPM: 140,\r\n        paceAnalysis: [],\r\n        fillerWordAnalysis: {\r\n          totalFillerWords: 2,\r\n          fillerRate: 2,\r\n          uniqueFillers: { um: 2 },\r\n          fillerInstances: [],\r\n          improvementSuggestions: [],\r\n        },\r\n        scriptAdherence: {\r\n          totalScriptWords: 100,\r\n          wordsSpoken: 95,\r\n          adherencePercentage: 95,\r\n          skippedSections: [],\r\n          deviations: [],\r\n          accuracyScore: 95,\r\n        },\r\n        wpmHistory: [],\r\n        pauseAnalysis: [],\r\n        createdAt: { toDate: () => new Date('2024-01-01') },\r\n        status: 'completed',\r\n      };\r\n\r\n      const mockQuerySnapshot = {\r\n        forEach: jest.fn((callback) => {\r\n          callback({\r\n            id: 'session-123',\r\n            data: () => mockSessionData,\r\n          });\r\n        }),\r\n      };\r\n\r\n      mockGetDocs.mockResolvedValue(mockQuerySnapshot as any);\r\n\r\n      const sessions = await analyticsService.getSessions('user-789');\r\n\r\n      expect(mockGetDocs).toHaveBeenCalled();\r\n      expect(sessions).toHaveLength(1);\r\n      expect(sessions[0]).toMatchObject({\r\n        id: 'session-123',\r\n        scriptId: 'script-456',\r\n        userId: 'user-789',\r\n      });\r\n    });\r\n\r\n    it('should handle get sessions error', async () => {\r\n      mockGetDocs.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.getSessions('user-789')\r\n      ).rejects.toThrow('Failed to get sessions');\r\n    });\r\n\r\n    it('should apply filters correctly', async () => {\r\n      const filters: AnalyticsFilters = {\r\n        dateRange: {\r\n          start: new Date('2024-01-01'),\r\n          end: new Date('2024-01-31'),\r\n        },\r\n        wpmRange: {\r\n          min: 100,\r\n          max: 200,\r\n        },\r\n        scriptIds: ['script-1', 'script-2'],\r\n      };\r\n\r\n      const mockSessionData = {\r\n        id: 'session-123',\r\n        scriptId: 'script-1',\r\n        startTime: { toDate: () => new Date('2024-01-15') },\r\n        endTime: { toDate: () => new Date('2024-01-15') },\r\n        averageWPM: 150,\r\n        status: 'completed',\r\n      };\r\n\r\n      const mockQuerySnapshot = {\r\n        forEach: jest.fn((callback) => {\r\n          callback({\r\n            id: 'session-123',\r\n            data: () => mockSessionData,\r\n          });\r\n        }),\r\n      };\r\n\r\n      mockGetDocs.mockResolvedValue(mockQuerySnapshot as any);\r\n\r\n      const sessions = await analyticsService.getSessions('user-789', filters);\r\n\r\n      expect(sessions).toHaveLength(1);\r\n    });\r\n  });\r\n\r\n  describe('getSessionById', () => {\r\n    it('should get session by ID successfully', async () => {\r\n      const mockSessionData = {\r\n        scriptId: 'script-456',\r\n        scriptTitle: 'Test Script',\r\n        userId: 'user-789',\r\n        startTime: { toDate: () => new Date() },\r\n        endTime: { toDate: () => new Date() },\r\n        createdAt: { toDate: () => new Date() },\r\n      };\r\n\r\n      const mockDocSnapshot = {\r\n        exists: () => true,\r\n        data: () => mockSessionData,\r\n      };\r\n\r\n      mockGetDoc.mockResolvedValue(mockDocSnapshot as any);\r\n\r\n      const session = await analyticsService.getSessionById('session-123');\r\n\r\n      expect(mockGetDoc).toHaveBeenCalled();\r\n      expect(session).toMatchObject({\r\n        id: 'session-123',\r\n        scriptId: 'script-456',\r\n        userId: 'user-789',\r\n      });\r\n    });\r\n\r\n    it('should return null for non-existent session', async () => {\r\n      const mockDocSnapshot = {\r\n        exists: () => false,\r\n      };\r\n\r\n      mockGetDoc.mockResolvedValue(mockDocSnapshot as any);\r\n\r\n      const session = await analyticsService.getSessionById('non-existent');\r\n\r\n      expect(session).toBeNull();\r\n    });\r\n\r\n    it('should handle get session by ID error', async () => {\r\n      mockGetDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.getSessionById('session-123')\r\n      ).rejects.toThrow('Failed to get session');\r\n    });\r\n  });\r\n\r\n  describe('deleteSession', () => {\r\n    it('should delete session successfully', async () => {\r\n      mockDeleteDoc.mockResolvedValue(undefined);\r\n\r\n      await analyticsService.deleteSession('session-123');\r\n\r\n      expect(mockDeleteDoc).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should handle delete session error', async () => {\r\n      mockDeleteDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.deleteSession('session-123')\r\n      ).rejects.toThrow('Failed to delete session');\r\n    });\r\n  });\r\n\r\n  describe('getAnalyticsSummary', () => {\r\n    it('should calculate analytics summary correctly', async () => {\r\n      const mockSessions = [\r\n        {\r\n          totalDuration: 60000,\r\n          averageWPM: 150,\r\n          fillerWordAnalysis: { fillerRate: 2 },\r\n          scriptAdherence: { adherencePercentage: 95 },\r\n          createdAt: { toDate: () => new Date('2024-01-01') },\r\n        },\r\n        {\r\n          totalDuration: 120000,\r\n          averageWPM: 160,\r\n          fillerWordAnalysis: { fillerRate: 1 },\r\n          scriptAdherence: { adherencePercentage: 98 },\r\n          createdAt: { toDate: () => new Date('2024-01-02') },\r\n        },\r\n      ];\r\n\r\n      const mockQuerySnapshot = {\r\n        forEach: jest.fn((callback) => {\r\n          mockSessions.forEach((session, index) => {\r\n            callback({\r\n              id: `session-${index}`,\r\n              data: () => ({ ...session, status: 'completed' }),\r\n            });\r\n          });\r\n        }),\r\n      };\r\n\r\n      mockGetDocs.mockResolvedValue(mockQuerySnapshot as any);\r\n\r\n      const summary = await analyticsService.getAnalyticsSummary('user-789');\r\n\r\n      expect(summary.totalSessions).toBe(2);\r\n      expect(summary.totalPracticeTime).toBe(180000); // 60s + 120s\r\n      expect(summary.averageSessionDuration).toBe(90000); // (60s + 120s) / 2\r\n      expect(summary.averageWPM).toBe(155); // (150 + 160) / 2\r\n    });\r\n\r\n    it('should handle analytics summary error', async () => {\r\n      mockGetDocs.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.getAnalyticsSummary('user-789')\r\n      ).rejects.toThrow('Failed to get analytics summary');\r\n    });\r\n  });\r\n\r\n  describe('compareSessions', () => {\r\n    it('should compare sessions correctly', async () => {\r\n      const mockSession1 = {\r\n        id: 'session-1',\r\n        averageWPM: 140,\r\n        fillerWordAnalysis: { fillerRate: 3 },\r\n        scriptAdherence: { adherencePercentage: 90 },\r\n        createdAt: { toDate: () => new Date('2024-01-01') },\r\n      };\r\n\r\n      const mockSession2 = {\r\n        id: 'session-2',\r\n        averageWPM: 160,\r\n        fillerWordAnalysis: { fillerRate: 1 },\r\n        scriptAdherence: { adherencePercentage: 95 },\r\n        createdAt: { toDate: () => new Date('2024-01-02') },\r\n      };\r\n\r\n      const mockDocSnapshot1 = {\r\n        exists: () => true,\r\n        data: () => mockSession1,\r\n      };\r\n\r\n      const mockDocSnapshot2 = {\r\n        exists: () => true,\r\n        data: () => mockSession2,\r\n      };\r\n\r\n      mockGetDoc\r\n        .mockResolvedValueOnce(mockDocSnapshot1 as any)\r\n        .mockResolvedValueOnce(mockDocSnapshot2 as any);\r\n\r\n      const comparison = await analyticsService.compareSessions(['session-1', 'session-2']);\r\n\r\n      expect(comparison.sessions).toHaveLength(2);\r\n      expect(comparison.metrics.wpmProgress).toBe(20); // 160 - 140\r\n      expect(comparison.metrics.fillerWordImprovement).toBe(2); // 3 - 1\r\n      expect(comparison.metrics.adherenceImprovement).toBe(5); // 95 - 90\r\n    });\r\n\r\n    it('should handle compare sessions error', async () => {\r\n      mockGetDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.compareSessions(['session-1', 'session-2'])\r\n      ).rejects.toThrow('Failed to compare sessions');\r\n    });\r\n  });\r\n\r\n  describe('exportSessions', () => {\r\n    it('should export sessions in CSV format', async () => {\r\n      const mockSessions = [\r\n        {\r\n          id: 'session-1',\r\n          scriptTitle: 'Test Script',\r\n          startTime: { toDate: () => new Date('2024-01-01') },\r\n          endTime: { toDate: () => new Date('2024-01-01') },\r\n          totalDuration: 60000,\r\n          averageWPM: 150,\r\n          status: 'completed',\r\n        },\r\n      ];\r\n\r\n      const mockQuerySnapshot = {\r\n        forEach: jest.fn((callback) => {\r\n          mockSessions.forEach((session, index) => {\r\n            callback({\r\n              id: session.id,\r\n              data: () => session,\r\n            });\r\n          });\r\n        }),\r\n      };\r\n\r\n      mockGetDocs.mockResolvedValue(mockQuerySnapshot as any);\r\n\r\n      const result = await analyticsService.exportSessions('user-789', {\r\n        format: 'csv',\r\n      });\r\n\r\n      expect(result).toContain('Session ID,Script Title,Start Time');\r\n      expect(result).toContain('session-1,Test Script');\r\n    });\r\n\r\n    it('should export sessions in JSON format', async () => {\r\n      const mockSessions = [\r\n        {\r\n          id: 'session-1',\r\n          scriptTitle: 'Test Script',\r\n          averageWPM: 150,\r\n          status: 'completed',\r\n        },\r\n      ];\r\n\r\n      const mockQuerySnapshot = {\r\n        forEach: jest.fn((callback) => {\r\n          mockSessions.forEach((session, index) => {\r\n            callback({\r\n              id: session.id,\r\n              data: () => session,\r\n            });\r\n          });\r\n        }),\r\n      };\r\n\r\n      mockGetDocs.mockResolvedValue(mockQuerySnapshot as any);\r\n\r\n      const result = await analyticsService.exportSessions('user-789', {\r\n        format: 'json',\r\n      });\r\n\r\n      const exportedData = JSON.parse(result);\r\n      expect(exportedData).toHaveLength(1);\r\n      expect(exportedData[0].id).toBe('session-1');\r\n    });\r\n\r\n    it('should handle export error', async () => {\r\n      mockGetDocs.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      await expect(\r\n        analyticsService.exportSessions('user-789', { format: 'csv' })\r\n      ).rejects.toThrow('Failed to export sessions');\r\n    });\r\n  });\r\n\r\n  describe('updateSessionMetrics', () => {\r\n    it('should update session metrics successfully', async () => {\r\n      mockUpdateDoc.mockResolvedValue(undefined);\r\n\r\n      const realTimeMetrics = {\r\n        currentWPM: 155,\r\n        currentWordIndex: 50,\r\n        fillerWordCount: 2,\r\n        currentTime: Date.now(),\r\n      };\r\n\r\n      await analyticsService.updateSessionMetrics('session-123', realTimeMetrics);\r\n\r\n      expect(mockUpdateDoc).toHaveBeenCalledWith(\r\n        expect.anything(),\r\n        expect.objectContaining({\r\n          realTimeMetrics,\r\n        })\r\n      );\r\n    });\r\n\r\n    it('should handle update metrics error gracefully', async () => {\r\n      mockUpdateDoc.mockRejectedValue(new Error('Firestore error'));\r\n\r\n      const realTimeMetrics = {\r\n        currentWPM: 155,\r\n      };\r\n\r\n      // Should not throw error for real-time updates\r\n      await expect(\r\n        analyticsService.updateSessionMetrics('session-123', realTimeMetrics)\r\n      ).resolves.toBeUndefined();\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\adaptiveScrollService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'position' is defined but never used.","line":27,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"position"},"fix":{"range":[887,904],"text":""},"desc":"Remove unused variable 'position'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":27,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[903,921],"text":""},"desc":"Remove unused variable 'velocity'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":27,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":91,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[921,949],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":28,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[987,1013],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":29,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1058,1076],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":38,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'position' is defined but never used.","line":50,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"position"},"fix":{"range":[1708,1725],"text":""},"desc":"Remove unused variable 'position'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":50,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[1724,1742],"text":""},"desc":"Remove unused variable 'velocity'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":50,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":85,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[1742,1770],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":51,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[1802,1828],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":52,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1867,1885],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":63,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":16,"suggestions":[{"fix":{"range":[2214,2298],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":75,"column":49,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":75,"endColumn":56,"fix":{"range":[2581,2588],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":107,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":16,"suggestions":[{"fix":{"range":[3587,3734],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":114,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":114,"endColumn":31,"fix":{"range":[3837,3844],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":117,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":117,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":121,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":121,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":121,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":121,"endColumn":16,"suggestions":[{"fix":{"range":[3999,4041],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'cancelAnimationFrame' is not defined.","line":131,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":136,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":140,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":140,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":140,"endColumn":16,"suggestions":[{"fix":{"range":[4430,4472],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":147,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":147,"endColumn":38,"fix":{"range":[4640,4647],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":169,"column":40,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":169,"endColumn":47,"fix":{"range":[5460,5467],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":213,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":213,"endColumn":38,"fix":{"range":[6886,6895],"text":"{return 0;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":233,"column":36,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":233,"endColumn":43,"fix":{"range":[7479,7486],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":290,"column":27,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":290,"endColumn":34,"fix":{"range":[9273,9280],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'requestAnimationFrame' is not defined.","line":299,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":299,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'requestAnimationFrame' is not defined.","line":302,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":302,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":408,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":408,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":413,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":413,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":415,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":415,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":415,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":415,"endColumn":18,"suggestions":[{"fix":{"range":[13682,13719],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":425,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":425,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":425,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":425,"endColumn":16,"suggestions":[{"fix":{"range":[14024,14086],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":450,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":450,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":468,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":468,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":472,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":472,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":472,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":472,"endColumn":16,"suggestions":[{"fix":{"range":[15190,15233],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":480,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":480,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":483,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":483,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":483,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":483,"endColumn":20,"suggestions":[{"fix":{"range":[15563,15622],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":544,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":544,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":544,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":544,"endColumn":16,"suggestions":[{"fix":{"range":[16873,16922],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":37,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":7,"fixableWarningCount":0,"source":"import { \r\n  AdaptiveScrollSettings, \r\n  SpeechPaceMetrics, \r\n  WordTiming, \r\n  ScrollState,\r\n  ScriptAnalysis \r\n} from '../types';\r\n\r\n/**\r\n * Advanced Adaptive Scrolling Service\r\n * Dynamically adjusts scroll speed based on real-time speech pace analysis\r\n * with sophisticated smoothing algorithms for natural scrolling experience\r\n */\r\nexport class AdaptiveScrollService {\r\n  private settings: AdaptiveScrollSettings = this.getDefaultSettings();\r\n  private paceMetrics: SpeechPaceMetrics = this.getInitialMetrics();\r\n  private scrollState: ScrollState = this.getInitialScrollState();\r\n  private wordTimings: WordTiming[] = [];\r\n  private scriptAnalysis: ScriptAnalysis | null = null;\r\n  \r\n  // Performance optimization\r\n  private animationFrameId: number | null = null;\r\n  private lastFrameTime = 0;\r\n  private isActive = false;\r\n  \r\n  // Event callbacks\r\n  private onScrollUpdate?: (position: number, velocity: number, metrics: SpeechPaceMetrics) => void;\r\n  private onPaceChange?: (metrics: SpeechPaceMetrics) => void;\r\n  private onScrollStateChange?: (state: ScrollState) => void;\r\n\r\n  // Smoothing algorithms\r\n  private velocityBuffer: number[] = [];\r\n  private wpmBuffer: number[] = [];\r\n  private confidenceBuffer: number[] = [];\r\n  \r\n  // Advanced timing analysis\r\n  private speechSegments: Array<{ start: number; end: number; wpm: number }> = [];\r\n  private pauseDetectionTimer: NodeJS.Timeout | null = null;\r\n  \r\n  constructor() {\r\n    this.initializePerformanceOptimizations();\r\n  }\r\n\r\n  /**\r\n   * Initialize adaptive scrolling with script and settings\r\n   */\r\n  public initialize(\r\n    scriptAnalysis: ScriptAnalysis,\r\n    settings: Partial<AdaptiveScrollSettings> = {},\r\n    onScrollUpdate?: (position: number, velocity: number, metrics: SpeechPaceMetrics) => void,\r\n    onPaceChange?: (metrics: SpeechPaceMetrics) => void,\r\n    onScrollStateChange?: (state: ScrollState) => void\r\n  ): void {\r\n    this.scriptAnalysis = scriptAnalysis;\r\n    this.settings = { ...this.getDefaultSettings(), ...settings };\r\n    this.onScrollUpdate = onScrollUpdate;\r\n    this.onPaceChange = onPaceChange;\r\n    this.onScrollStateChange = onScrollStateChange;\r\n    \r\n    // Reset all state\r\n    this.reset();\r\n    \r\n    console.log('Adaptive scroll initialized with', scriptAnalysis.totalWords, 'words');\r\n  }\r\n\r\n  /**\r\n   * Process word timing from speech recognition with ultra-low latency\r\n   */\r\n  public processWordTiming(\r\n    wordIndex: number,\r\n    word: string,\r\n    timestamp: number,\r\n    confidence: number = 1.0\r\n  ): void {\r\n    if (!this.isActive || !this.scriptAnalysis) return;\r\n\r\n    const wordTiming: WordTiming = {\r\n      wordIndex,\r\n      word,\r\n      timestamp,\r\n      confidence,\r\n      cumulativeWPM: 0,\r\n      instantWPM: 0,\r\n    };\r\n\r\n    // Calculate instantaneous WPM from recent words\r\n    const recentTimings = this.getRecentWordTimings(5); // Last 5 words\r\n    if (recentTimings.length >= 2) {\r\n      const timeDiff = (timestamp - recentTimings[0].timestamp) / 1000; // seconds\r\n      const wordCount = recentTimings.length;\r\n      wordTiming.instantWPM = timeDiff > 0 ? (wordCount / timeDiff) * 60 : 0;\r\n    }\r\n\r\n    // Calculate cumulative WPM\r\n    if (this.wordTimings.length > 0) {\r\n      const totalTime = (timestamp - this.wordTimings[0].timestamp) / 1000;\r\n      wordTiming.cumulativeWPM = totalTime > 0 ? (this.wordTimings.length / totalTime) * 60 : 0;\r\n    }\r\n\r\n    this.wordTimings.push(wordTiming);\r\n    this.updatePaceMetrics();\r\n    this.updateScrollTarget(wordIndex);\r\n    \r\n    // Reset pause detection\r\n    this.resetPauseDetection();\r\n    \r\n    console.log(`Word ${wordIndex}: \"${word}\" - Instant WPM: ${wordTiming.instantWPM.toFixed(1)}, Cumulative: ${wordTiming.cumulativeWPM.toFixed(1)}`);\r\n  }\r\n\r\n  /**\r\n   * Start adaptive scrolling\r\n   */\r\n  public start(): void {\r\n    if (this.isActive) return;\r\n    \r\n    this.isActive = true;\r\n    this.lastFrameTime = performance.now();\r\n    this.startAnimationLoop();\r\n    this.startPauseDetection();\r\n    \r\n    console.log('Adaptive scrolling started');\r\n  }\r\n\r\n  /**\r\n   * Stop adaptive scrolling\r\n   */\r\n  public stop(): void {\r\n    this.isActive = false;\r\n    \r\n    if (this.animationFrameId) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n      this.animationFrameId = null;\r\n    }\r\n    \r\n    if (this.pauseDetectionTimer) {\r\n      clearTimeout(this.pauseDetectionTimer);\r\n      this.pauseDetectionTimer = null;\r\n    }\r\n    \r\n    console.log('Adaptive scrolling stopped');\r\n  }\r\n\r\n  /**\r\n   * Update scroll target based on current word position\r\n   */\r\n  private updateScrollTarget(wordIndex: number): void {\r\n    if (!this.scriptAnalysis) return;\r\n\r\n    // Calculate target scroll position for current word\r\n    const progressRatio = wordIndex / Math.max(this.scriptAnalysis.totalWords - 1, 1);\r\n    const estimatedHeight = this.scrollState.currentPosition / Math.max(progressRatio, 0.01);\r\n    \r\n    // Look ahead based on current pace\r\n    const lookAheadIndex = Math.min(\r\n      wordIndex + this.settings.lookAheadWords,\r\n      this.scriptAnalysis.totalWords - 1\r\n    );\r\n    \r\n    const targetProgressRatio = lookAheadIndex / Math.max(this.scriptAnalysis.totalWords - 1, 1);\r\n    this.scrollState.targetPosition = estimatedHeight * targetProgressRatio + this.settings.bufferZone;\r\n  }\r\n\r\n  /**\r\n   * Advanced pace metrics calculation\r\n   */\r\n  private updatePaceMetrics(): void {\r\n    const now = Date.now();\r\n    \r\n    if (this.wordTimings.length === 0) return;\r\n\r\n    // Calculate current metrics\r\n    const recentTimings = this.getRecentWordTimings(10);\r\n    const instantTimings = this.getRecentWordTimings(3);\r\n    \r\n    // Current WPM (last 10 words)\r\n    this.paceMetrics.currentWPM = this.calculateWPM(recentTimings);\r\n    \r\n    // Average WPM (all words)\r\n    this.paceMetrics.averageWPM = this.calculateWPM(this.wordTimings);\r\n    \r\n    // Instantaneous WPM (last 3 words)\r\n    this.paceMetrics.instantaneousWPM = this.calculateWPM(instantTimings);\r\n    \r\n    // Time since last word\r\n    const lastTiming = this.wordTimings[this.wordTimings.length - 1];\r\n    this.paceMetrics.timeSinceLastWord = (now - lastTiming.timestamp) / 1000;\r\n    \r\n    // Speech duration\r\n    if (this.wordTimings.length > 1) {\r\n      this.paceMetrics.speechDuration = (lastTiming.timestamp - this.wordTimings[0].timestamp) / 1000;\r\n    }\r\n    \r\n    // Total words spoken\r\n    this.paceMetrics.totalWordsSpoken = this.wordTimings.length;\r\n    \r\n    // Pace trend analysis\r\n    this.analyzePaceTrend();\r\n    \r\n    // Confidence level based on recent word confidence\r\n    this.updateConfidenceLevel();\r\n    \r\n    // Update smoothing buffers\r\n    this.updateSmoothingBuffers();\r\n    \r\n    // Notify listeners\r\n    this.onPaceChange?.(this.paceMetrics);\r\n  }\r\n\r\n  /**\r\n   * Calculate WPM from word timings\r\n   */\r\n  private calculateWPM(timings: WordTiming[]): number {\r\n    if (timings.length < 2) return 0;\r\n    \r\n    const firstTiming = timings[0];\r\n    const lastTiming = timings[timings.length - 1];\r\n    const duration = (lastTiming.timestamp - firstTiming.timestamp) / 1000; // seconds\r\n    \r\n    return duration > 0 ? (timings.length / duration) * 60 : 0;\r\n  }\r\n\r\n  /**\r\n   * Get recent word timings within specified count\r\n   */\r\n  private getRecentWordTimings(count: number): WordTiming[] {\r\n    return this.wordTimings.slice(-count);\r\n  }\r\n\r\n  /**\r\n   * Analyze pace trend for intelligent adaptation\r\n   */\r\n  private analyzePaceTrend(): void {\r\n    if (this.wpmBuffer.length < 3) return;\r\n    \r\n    const recent = this.wpmBuffer.slice(-3);\r\n    const trend = recent[2] - recent[0];\r\n    const threshold = this.paceMetrics.averageWPM * 0.1; // 10% threshold\r\n    \r\n    if (trend > threshold) {\r\n      this.paceMetrics.paceTrend = 'increasing';\r\n      this.paceMetrics.isAccelerating = true;\r\n    } else if (trend < -threshold) {\r\n      this.paceMetrics.paceTrend = 'decreasing';\r\n      this.paceMetrics.isAccelerating = false;\r\n    } else {\r\n      this.paceMetrics.paceTrend = 'stable';\r\n      this.paceMetrics.isAccelerating = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update confidence level based on speech recognition confidence\r\n   */\r\n  private updateConfidenceLevel(): void {\r\n    const recentTimings = this.getRecentWordTimings(5);\r\n    const avgConfidence = recentTimings.reduce((sum, t) => sum + t.confidence, 0) / recentTimings.length;\r\n    this.paceMetrics.confidenceLevel = avgConfidence || 0;\r\n  }\r\n\r\n  /**\r\n   * Update smoothing buffers for noise reduction\r\n   */\r\n  private updateSmoothingBuffers(): void {\r\n    const bufferSize = 10;\r\n    \r\n    // WPM buffer\r\n    this.wpmBuffer.push(this.paceMetrics.currentWPM);\r\n    if (this.wpmBuffer.length > bufferSize) {\r\n      this.wpmBuffer.shift();\r\n    }\r\n    \r\n    // Velocity buffer\r\n    this.velocityBuffer.push(this.scrollState.velocity);\r\n    if (this.velocityBuffer.length > bufferSize) {\r\n      this.velocityBuffer.shift();\r\n    }\r\n    \r\n    // Confidence buffer\r\n    this.confidenceBuffer.push(this.paceMetrics.confidenceLevel);\r\n    if (this.confidenceBuffer.length > bufferSize) {\r\n      this.confidenceBuffer.shift();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sophisticated animation loop with smoothing\r\n   */\r\n  private startAnimationLoop(): void {\r\n    const animate = (currentTime: number) => {\r\n      if (!this.isActive) return;\r\n      \r\n      const deltaTime = currentTime - this.lastFrameTime;\r\n      this.lastFrameTime = currentTime;\r\n      \r\n      this.updateScrollPhysics(deltaTime);\r\n      this.onScrollUpdate?.(this.scrollState.currentPosition, this.scrollState.velocity, this.paceMetrics);\r\n      this.onScrollStateChange?.(this.scrollState);\r\n      \r\n      this.animationFrameId = requestAnimationFrame(animate);\r\n    };\r\n    \r\n    this.animationFrameId = requestAnimationFrame(animate);\r\n  }\r\n\r\n  /**\r\n   * Advanced scroll physics with smoothing\r\n   */\r\n  private updateScrollPhysics(deltaTime: number): void {\r\n    const dt = Math.min(deltaTime / 1000, 0.1); // Cap at 100ms to prevent large jumps\r\n    \r\n    // Calculate target velocity based on current pace\r\n    const targetVelocity = this.calculateTargetVelocity();\r\n    \r\n    // Apply smoothing to velocity changes\r\n    const smoothedTargetVelocity = this.applySmoothingToVelocity(targetVelocity);\r\n    \r\n    // Update velocity with responsive damping\r\n    const velocityDiff = smoothedTargetVelocity - this.scrollState.velocity;\r\n    const responsiveness = this.settings.responsiveness * this.paceMetrics.confidenceLevel;\r\n    this.scrollState.velocity += velocityDiff * responsiveness * dt;\r\n    \r\n    // Apply velocity limits\r\n    this.scrollState.velocity = Math.max(\r\n      this.scrollState.velocity,\r\n      this.settings.baseScrollSpeed * this.settings.decelerationLimit\r\n    );\r\n    this.scrollState.velocity = Math.min(\r\n      this.scrollState.velocity,\r\n      this.settings.baseScrollSpeed * this.settings.accelerationLimit\r\n    );\r\n    \r\n    // Update position\r\n    const positionDelta = this.scrollState.velocity * dt;\r\n    this.scrollState.currentPosition += positionDelta;\r\n    \r\n    // Ensure we don't scroll past target\r\n    if (this.scrollState.targetPosition > this.scrollState.currentPosition) {\r\n      const distanceToTarget = this.scrollState.targetPosition - this.scrollState.currentPosition;\r\n      if (distanceToTarget < this.settings.bufferZone && this.scrollState.velocity > 0) {\r\n        // Slow down as we approach target\r\n        this.scrollState.velocity *= 0.8;\r\n      }\r\n    }\r\n    \r\n    // Update smoothing buffer for position\r\n    this.scrollState.smoothingBuffer.push(this.scrollState.currentPosition);\r\n    if (this.scrollState.smoothingBuffer.length > 5) {\r\n      this.scrollState.smoothingBuffer.shift();\r\n    }\r\n    \r\n    this.scrollState.lastUpdateTime = Date.now();\r\n  }\r\n\r\n  /**\r\n   * Calculate target velocity based on speech pace\r\n   */\r\n  private calculateTargetVelocity(): number {\r\n    if (this.paceMetrics.isPaused) {\r\n      return this.settings.baseScrollSpeed * 0.1; // Very slow when paused\r\n    }\r\n    \r\n    if (this.wpmBuffer.length === 0) {\r\n      return this.settings.baseScrollSpeed;\r\n    }\r\n    \r\n    // Use smoothed WPM for stable velocity calculation\r\n    const smoothedWPM = this.wpmBuffer.reduce((sum, wpm) => sum + wpm, 0) / this.wpmBuffer.length;\r\n    \r\n    // Normalize WPM to velocity multiplier\r\n    const averageReadingWPM = 150; // Average reading speed\r\n    const paceMultiplier = Math.max(smoothedWPM / averageReadingWPM, 0.1);\r\n    \r\n    // Apply acceleration/deceleration based on trend\r\n    let trendMultiplier = 1;\r\n    if (this.paceMetrics.paceTrend === 'increasing') {\r\n      trendMultiplier = 1.2;\r\n    } else if (this.paceMetrics.paceTrend === 'decreasing') {\r\n      trendMultiplier = 0.8;\r\n    }\r\n    \r\n    return this.settings.baseScrollSpeed * paceMultiplier * trendMultiplier;\r\n  }\r\n\r\n  /**\r\n   * Apply sophisticated smoothing to velocity changes\r\n   */\r\n  private applySmoothingToVelocity(targetVelocity: number): number {\r\n    if (this.velocityBuffer.length === 0) {\r\n      return targetVelocity;\r\n    }\r\n    \r\n    // Exponential moving average for smoothing\r\n    const alpha = this.settings.smoothingFactor;\r\n    const previousVelocity = this.velocityBuffer[this.velocityBuffer.length - 1];\r\n    \r\n    return alpha * targetVelocity + (1 - alpha) * previousVelocity;\r\n  }\r\n\r\n  /**\r\n   * Pause detection system\r\n   */\r\n  private startPauseDetection(): void {\r\n    this.resetPauseDetection();\r\n  }\r\n\r\n  private resetPauseDetection(): void {\r\n    if (this.pauseDetectionTimer) {\r\n      clearTimeout(this.pauseDetectionTimer);\r\n    }\r\n    \r\n    this.paceMetrics.isPaused = false;\r\n    \r\n    this.pauseDetectionTimer = setTimeout(() => {\r\n      this.paceMetrics.isPaused = true;\r\n      console.log('Speech pause detected');\r\n      this.onPaceChange?.(this.paceMetrics);\r\n    }, this.settings.pauseThreshold * 1000);\r\n  }\r\n\r\n  /**\r\n   * Update settings and recalculate if needed\r\n   */\r\n  public updateSettings(newSettings: Partial<AdaptiveScrollSettings>): void {\r\n    this.settings = { ...this.settings, ...newSettings };\r\n    console.log('Adaptive scroll settings updated:', newSettings);\r\n  }\r\n\r\n  /**\r\n   * Get current pace metrics\r\n   */\r\n  public getPaceMetrics(): SpeechPaceMetrics {\r\n    return { ...this.paceMetrics };\r\n  }\r\n\r\n  /**\r\n   * Get current scroll state\r\n   */\r\n  public getScrollState(): ScrollState {\r\n    return { ...this.scrollState };\r\n  }\r\n\r\n  /**\r\n   * Manual scroll override (user interaction)\r\n   */\r\n  public setUserScrollPosition(position: number): void {\r\n    this.scrollState.currentPosition = position;\r\n    this.scrollState.isUserControlled = true;\r\n    \r\n    // Resume adaptive control after a delay\r\n    setTimeout(() => {\r\n      this.scrollState.isUserControlled = false;\r\n    }, 2000);\r\n  }\r\n\r\n  /**\r\n   * Reset all state\r\n   */\r\n  public reset(): void {\r\n    this.wordTimings = [];\r\n    this.paceMetrics = this.getInitialMetrics();\r\n    this.scrollState = this.getInitialScrollState();\r\n    this.velocityBuffer = [];\r\n    this.wpmBuffer = [];\r\n    this.confidenceBuffer = [];\r\n    this.speechSegments = [];\r\n    \r\n    if (this.pauseDetectionTimer) {\r\n      clearTimeout(this.pauseDetectionTimer);\r\n      this.pauseDetectionTimer = null;\r\n    }\r\n    \r\n    console.log('Adaptive scroll state reset');\r\n  }\r\n\r\n  /**\r\n   * Performance optimizations\r\n   */\r\n  private initializePerformanceOptimizations(): void {\r\n    // Limit word timing history to prevent memory issues\r\n    setInterval(() => {\r\n      if (this.wordTimings.length > 1000) {\r\n        this.wordTimings = this.wordTimings.slice(-500); // Keep most recent 500\r\n        console.log('Word timing history trimmed for performance');\r\n      }\r\n    }, 30000); // Every 30 seconds\r\n  }\r\n\r\n  /**\r\n   * Get default settings\r\n   */\r\n  private getDefaultSettings(): AdaptiveScrollSettings {\r\n    return {\r\n      enabled: true,\r\n      baseScrollSpeed: 50,\r\n      responsiveness: 0.7,\r\n      smoothingFactor: 0.8,\r\n      pauseThreshold: 2.0,\r\n      accelerationLimit: 3.0,\r\n      decelerationLimit: 0.1,\r\n      lookAheadWords: 5,\r\n      bufferZone: 100,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get initial pace metrics\r\n   */\r\n  private getInitialMetrics(): SpeechPaceMetrics {\r\n    return {\r\n      currentWPM: 0,\r\n      averageWPM: 0,\r\n      instantaneousWPM: 0,\r\n      timeSinceLastWord: 0,\r\n      speechDuration: 0,\r\n      totalWordsSpoken: 0,\r\n      isPaused: false,\r\n      isAccelerating: false,\r\n      paceTrend: 'stable',\r\n      confidenceLevel: 1.0,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get initial scroll state\r\n   */\r\n  private getInitialScrollState(): ScrollState {\r\n    return {\r\n      currentPosition: 0,\r\n      targetPosition: 0,\r\n      velocity: 0,\r\n      acceleration: 0,\r\n      adaptiveSpeed: 50,\r\n      isUserControlled: false,\r\n      lastUpdateTime: Date.now(),\r\n      smoothingBuffer: [],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Cleanup resources\r\n   */\r\n  public destroy(): void {\r\n    this.stop();\r\n    console.log('Adaptive scroll service destroyed');\r\n  }\r\n}\r\n\r\nexport const adaptiveScrollService = new AdaptiveScrollService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\analyticsService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'startAfter' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"startAfter"},"fix":{"range":[134,149],"text":""},"desc":"Remove unused variable 'startAfter'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'startAfter' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'Timestamp' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"Timestamp"},"fix":{"range":[184,198],"text":""},"desc":"Remove unused variable 'Timestamp'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Timestamp' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'FillerWordInstance' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"FillerWordInstance"},"fix":{"range":[399,422],"text":""},"desc":"Remove unused variable 'FillerWordInstance'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FillerWordInstance' is defined but never used.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":52,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":52,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":52,"endColumn":20,"suggestions":[{"fix":{"range":[1039,1087],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1398,1401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1398,1401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1509,1512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1509,1512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":81,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":20,"suggestions":[{"fix":{"range":[1827,1873],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":103,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":103,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":103,"endColumn":20,"suggestions":[{"fix":{"range":[2391,2447],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"prefer-const","severity":2,"message":"'q' is never reassigned. Use 'const' instead.","line":114,"column":11,"nodeType":"Identifier","messageId":"useConst","endLine":114,"endColumn":12,"fix":{"range":[2668,2880],"text":"const q = query(\r\n        collection(db, 'sessions'),\r\n        where('userId', '==', userId),\r\n        where('status', '==', 'completed'),\r\n        orderBy('startTime', 'desc'),\r\n        limit(limitCount)\r\n      );"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":143,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":143,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":143,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":143,"endColumn":20,"suggestions":[{"fix":{"range":[3573,3621],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":165,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":165,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":165,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":165,"endColumn":20,"suggestions":[{"fix":{"range":[4255,4302],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":174,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":174,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":20,"suggestions":[{"fix":{"range":[4522,4570],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":253,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":253,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":253,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":253,"endColumn":20,"suggestions":[{"fix":{"range":[7756,7813],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":322,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":322,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":322,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":322,"endColumn":20,"suggestions":[{"fix":{"range":[10346,10396],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":338,"column":38,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":338,"endColumn":57,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[10826,10827],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":354,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":354,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":354,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":354,"endColumn":20,"suggestions":[{"fix":{"range":[11341,11391],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'session' is defined but never used.","line":362,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":362,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"session"},"fix":{"range":[11552,11581],"text":""},"desc":"Remove unused variable 'session'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":384,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":384,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":384,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":384,"endColumn":22,"suggestions":[{"fix":{"range":[12180,12234],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":392,"column":19,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":392,"endColumn":31,"fix":{"range":[12421,12433],"text":"{return true;}"}},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":409,"column":55,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":409,"endColumn":68,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[12933,12934],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":410,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":410,"endColumn":41,"fix":{"range":[12979,12992],"text":"{return false;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":432,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":432,"endColumn":41,"fix":{"range":[13639,13650],"text":"{return 100;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":445,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":445,"endColumn":41,"fix":{"range":[14264,14273],"text":"{return 0;}"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":458,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14878,14881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14878,14881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":464,"column":12,"nodeType":"MemberExpression","endLine":464,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":465,"column":9,"nodeType":"MemberExpression","endLine":465,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":475,"column":7,"nodeType":"MemberExpression","endLine":475,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":476,"column":7,"nodeType":"MemberExpression","endLine":476,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":477,"column":7,"nodeType":"MemberExpression","endLine":477,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":478,"column":7,"nodeType":"MemberExpression","endLine":478,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":479,"column":7,"nodeType":"MemberExpression","endLine":479,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":482,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":482,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15642,15645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15642,15645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":504,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":504,"endColumn":46,"fix":{"range":[16505,16521],"text":"{return insights;}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'sessions' is defined but never used.","line":607,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":607,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessions"},"fix":{"range":[20382,20408],"text":""},"desc":"Remove unused variable 'sessions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessions' is defined but never used.","line":607,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":607,"endColumn":31},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":607,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":607,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[20407,20440],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":607,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":607,"endColumn":57},{"ruleId":"no-unused-vars","severity":2,"message":"'sessions' is defined but never used.","line":613,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":613,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessions"},"fix":{"range":[20637,20662],"text":""},"desc":"Remove unused variable 'sessions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessions' is defined but never used.","line":613,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":613,"endColumn":33}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":6,"fixableWarningCount":0,"source":"import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  startAfter,\r\n  onSnapshot,\r\n  serverTimestamp,\r\n  Timestamp,\r\n  Unsubscribe,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport {\r\n  SessionReport,\r\n  AnalyticsFilters,\r\n  AnalyticsSummary,\r\n  ComparisonAnalytics,\r\n  AnalyticsExportOptions,\r\n  FillerWordInstance,\r\n  ScriptAdherenceMetrics,\r\n  PaceAnalysisSegment,\r\n  WPMDataPoint,\r\n} from '../types';\r\n\r\nclass AnalyticsService {\r\n  // Session Management\r\n  async createSession(\r\n    scriptId: string,\r\n    userId: string,\r\n    targetWPM: number = 150\r\n  ): Promise<string> {\r\n    try {\r\n      const sessionData = {\r\n        scriptId,\r\n        userId,\r\n        startTime: serverTimestamp(),\r\n        targetWPM,\r\n        status: 'active',\r\n        createdAt: serverTimestamp(),\r\n      };\r\n\r\n      const sessionRef = await addDoc(collection(db, 'sessions'), sessionData);\r\n      return sessionRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating session:', error);\r\n      throw new Error('Failed to create session');\r\n    }\r\n  }\r\n\r\n  async endSession(\r\n    sessionId: string,\r\n    metrics: {\r\n      totalDuration: number;\r\n      totalWords: number;\r\n      wordsSpoken: number;\r\n      averageWPM: number;\r\n      paceAnalysis: PaceAnalysisSegment[];\r\n      fillerWordAnalysis: any;\r\n      scriptAdherence: ScriptAdherenceMetrics;\r\n      wpmHistory: WPMDataPoint[];\r\n      pauseAnalysis?: any[];\r\n    }\r\n  ): Promise<void> {\r\n    try {\r\n      const sessionRef = doc(db, 'sessions', sessionId);\r\n      \r\n      await updateDoc(sessionRef, {\r\n        ...metrics,\r\n        endTime: serverTimestamp(),\r\n        status: 'completed',\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error ending session:', error);\r\n      throw new Error('Failed to end session');\r\n    }\r\n  }\r\n\r\n  async updateSessionMetrics(\r\n    sessionId: string,\r\n    realTimeMetrics: {\r\n      currentWPM?: number;\r\n      currentWordIndex?: number;\r\n      fillerWordCount?: number;\r\n      currentTime?: number;\r\n    }\r\n  ): Promise<void> {\r\n    try {\r\n      const sessionRef = doc(db, 'sessions', sessionId);\r\n      \r\n      await updateDoc(sessionRef, {\r\n        realTimeMetrics,\r\n        lastUpdated: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating session metrics:', error);\r\n      // Don't throw error for real-time updates\r\n    }\r\n  }\r\n\r\n  async getSessions(\r\n    userId: string,\r\n    filters?: AnalyticsFilters,\r\n    limitCount: number = 50\r\n  ): Promise<SessionReport[]> {\r\n    try {\r\n      let q = query(\r\n        collection(db, 'sessions'),\r\n        where('userId', '==', userId),\r\n        where('status', '==', 'completed'),\r\n        orderBy('startTime', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const querySnapshot = await getDocs(q);\r\n      const sessions: SessionReport[] = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        const session: SessionReport = {\r\n          id: doc.id,\r\n          ...data,\r\n          startTime: data.startTime?.toDate() || new Date(),\r\n          endTime: data.endTime?.toDate() || new Date(),\r\n          createdAt: data.createdAt?.toDate() || new Date(),\r\n        } as SessionReport;\r\n\r\n        // Apply client-side filters if provided\r\n        if (this.sessionMatchesFilters(session, filters)) {\r\n          sessions.push(session);\r\n        }\r\n      });\r\n\r\n      return sessions;\r\n    } catch (error) {\r\n      console.error('Error getting sessions:', error);\r\n      throw new Error('Failed to get sessions');\r\n    }\r\n  }\r\n\r\n  async getSessionById(sessionId: string): Promise<SessionReport | null> {\r\n    try {\r\n      const sessionDoc = await getDoc(doc(db, 'sessions', sessionId));\r\n      \r\n      if (!sessionDoc.exists()) {\r\n        return null;\r\n      }\r\n\r\n      const data = sessionDoc.data();\r\n      return {\r\n        id: sessionDoc.id,\r\n        ...data,\r\n        startTime: data.startTime?.toDate() || new Date(),\r\n        endTime: data.endTime?.toDate() || new Date(),\r\n        createdAt: data.createdAt?.toDate() || new Date(),\r\n      } as SessionReport;\r\n    } catch (error) {\r\n      console.error('Error getting session:', error);\r\n      throw new Error('Failed to get session');\r\n    }\r\n  }\r\n\r\n  async deleteSession(sessionId: string): Promise<void> {\r\n    try {\r\n      await deleteDoc(doc(db, 'sessions', sessionId));\r\n    } catch (error) {\r\n      console.error('Error deleting session:', error);\r\n      throw new Error('Failed to delete session');\r\n    }\r\n  }\r\n\r\n  // Analytics Calculations\r\n  async getAnalyticsSummary(\r\n    userId: string,\r\n    filters?: AnalyticsFilters\r\n  ): Promise<AnalyticsSummary> {\r\n    try {\r\n      const sessions = await this.getSessions(userId, filters, 1000);\r\n      \r\n      if (sessions.length === 0) {\r\n        return this.getEmptyAnalyticsSummary();\r\n      }\r\n\r\n      const totalPracticeTime = sessions.reduce((sum, session) => sum + session.totalDuration, 0);\r\n      const totalSessions = sessions.length;\r\n      const averageSessionDuration = totalPracticeTime / totalSessions;\r\n      const averageWPM = sessions.reduce((sum, session) => sum + session.averageWPM, 0) / totalSessions;\r\n\r\n      // Calculate improvement trends\r\n      const recentSessions = sessions.slice(0, Math.min(10, sessions.length));\r\n      const olderSessions = sessions.slice(-Math.min(10, sessions.length));\r\n      \r\n      const recentAvgWPM = recentSessions.reduce((sum, s) => sum + s.averageWPM, 0) / recentSessions.length;\r\n      const olderAvgWPM = olderSessions.reduce((sum, s) => sum + s.averageWPM, 0) / olderSessions.length;\r\n      const improvementTrend = ((recentAvgWPM - olderAvgWPM) / olderAvgWPM) * 100;\r\n\r\n      // Calculate filler word trend\r\n      const recentFillerRate = recentSessions.reduce((sum, s) => sum + s.fillerWordAnalysis.fillerRate, 0) / recentSessions.length;\r\n      const olderFillerRate = olderSessions.reduce((sum, s) => sum + s.fillerWordAnalysis.fillerRate, 0) / olderSessions.length;\r\n      const fillerWordTrend = ((olderFillerRate - recentFillerRate) / olderFillerRate) * 100; // Improvement is reduction\r\n\r\n      // Find most practiced script\r\n      const scriptCounts: { [scriptId: string]: { count: number; title: string } } = {};\r\n      sessions.forEach(session => {\r\n        if (!scriptCounts[session.scriptId]) {\r\n          scriptCounts[session.scriptId] = { count: 0, title: session.scriptTitle };\r\n        }\r\n        scriptCounts[session.scriptId].count++;\r\n      });\r\n\r\n      const mostPracticedEntry = Object.entries(scriptCounts)\r\n        .sort(([, a], [, b]) => b.count - a.count)[0];\r\n\r\n      const mostPracticedScript = mostPracticedEntry\r\n        ? {\r\n            id: mostPracticedEntry[0],\r\n            title: mostPracticedEntry[1].title,\r\n            sessionCount: mostPracticedEntry[1].count,\r\n          }\r\n        : { id: '', title: 'No scripts', sessionCount: 0 };\r\n\r\n      // Calculate performance metrics\r\n      const consistency = this.calculateConsistency(sessions);\r\n      const accuracy = sessions.reduce((sum, s) => sum + s.scriptAdherence.accuracyScore, 0) / sessions.length;\r\n      const fluency = this.calculateFluency(sessions);\r\n\r\n      // Generate weekly stats\r\n      const weeklyStats = this.generateWeeklyStats(sessions);\r\n\r\n      return {\r\n        totalSessions,\r\n        totalPracticeTime,\r\n        averageSessionDuration,\r\n        averageWPM,\r\n        improvementTrend,\r\n        fillerWordTrend,\r\n        mostPracticedScript,\r\n        performanceMetrics: {\r\n          consistency,\r\n          accuracy,\r\n          fluency,\r\n        },\r\n        weeklyStats,\r\n      };\r\n    } catch (error) {\r\n      console.error('Error getting analytics summary:', error);\r\n      throw new Error('Failed to get analytics summary');\r\n    }\r\n  }\r\n\r\n  async compareSessions(sessionIds: string[]): Promise<ComparisonAnalytics> {\r\n    try {\r\n      const sessions = await Promise.all(\r\n        sessionIds.map(id => this.getSessionById(id))\r\n      );\r\n\r\n      const validSessions = sessions.filter(session => session !== null) as SessionReport[];\r\n\r\n      if (validSessions.length < 2) {\r\n        throw new Error('Need at least 2 sessions for comparison');\r\n      }\r\n\r\n      // Sort by date\r\n      validSessions.sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\r\n\r\n      const firstSession = validSessions[0];\r\n      const lastSession = validSessions[validSessions.length - 1];\r\n\r\n      // Calculate progress metrics\r\n      const wpmProgress = ((lastSession.averageWPM - firstSession.averageWPM) / firstSession.averageWPM) * 100;\r\n      const fillerWordImprovement = ((firstSession.fillerWordAnalysis.fillerRate - lastSession.fillerWordAnalysis.fillerRate) / firstSession.fillerWordAnalysis.fillerRate) * 100;\r\n      const adherenceImprovement = ((lastSession.scriptAdherence.adherencePercentage - firstSession.scriptAdherence.adherencePercentage) / firstSession.scriptAdherence.adherencePercentage) * 100;\r\n      const consistencyScore = this.calculateConsistency(validSessions);\r\n\r\n      // Generate trend data\r\n      const wpmTrend = validSessions.map(session => ({\r\n        date: session.startTime,\r\n        value: session.averageWPM,\r\n        sessionId: session.id,\r\n      }));\r\n\r\n      const fillerWordsTrend = validSessions.map(session => ({\r\n        date: session.startTime,\r\n        value: session.fillerWordAnalysis.fillerRate,\r\n        sessionId: session.id,\r\n      }));\r\n\r\n      const adherenceTrend = validSessions.map(session => ({\r\n        date: session.startTime,\r\n        value: session.scriptAdherence.adherencePercentage,\r\n        sessionId: session.id,\r\n      }));\r\n\r\n      // Generate insights and recommendations\r\n      const insights = this.generateInsights(validSessions);\r\n      const recommendations = this.generateRecommendations(validSessions);\r\n\r\n      return {\r\n        sessions: validSessions,\r\n        metrics: {\r\n          wpmProgress,\r\n          fillerWordImprovement,\r\n          adherenceImprovement,\r\n          consistencyScore,\r\n        },\r\n        trends: {\r\n          wpm: wpmTrend,\r\n          fillerWords: fillerWordsTrend,\r\n          adherence: adherenceTrend,\r\n        },\r\n        insights,\r\n        recommendations,\r\n      };\r\n    } catch (error) {\r\n      console.error('Error comparing sessions:', error);\r\n      throw new Error('Failed to compare sessions');\r\n    }\r\n  }\r\n\r\n  // Export functionality\r\n  async exportSessions(\r\n    userId: string,\r\n    options: AnalyticsExportOptions\r\n  ): Promise<string> {\r\n    try {\r\n      const sessions = await this.getSessions(userId, {\r\n        dateRange: options.dateRange,\r\n      });\r\n\r\n      const filteredSessions = options.sessionIds\r\n        ? sessions.filter(session => options.sessionIds!.includes(session.id))\r\n        : sessions;\r\n\r\n      switch (options.format) {\r\n        case 'csv':\r\n          return this.generateCSV(filteredSessions);\r\n        case 'json':\r\n          return JSON.stringify(filteredSessions, null, 2);\r\n        case 'pdf':\r\n          return this.generatePDF(filteredSessions, options);\r\n        case 'excel':\r\n          return this.generateExcel(filteredSessions);\r\n        default:\r\n          throw new Error('Unsupported export format');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error exporting sessions:', error);\r\n      throw new Error('Failed to export sessions');\r\n    }\r\n  }\r\n\r\n  // Real-time subscriptions\r\n  subscribeToSession(\r\n    sessionId: string,\r\n    callback: (session: SessionReport | null) => void\r\n  ): Unsubscribe {\r\n    return onSnapshot(\r\n      doc(db, 'sessions', sessionId),\r\n      (doc) => {\r\n        if (!doc.exists()) {\r\n          callback(null);\r\n          return;\r\n        }\r\n\r\n        const data = doc.data();\r\n        const session: SessionReport = {\r\n          id: doc.id,\r\n          ...data,\r\n          startTime: data.startTime?.toDate() || new Date(),\r\n          endTime: data.endTime?.toDate() || new Date(),\r\n          createdAt: data.createdAt?.toDate() || new Date(),\r\n        } as SessionReport;\r\n\r\n        callback(session);\r\n      },\r\n      (error) => {\r\n        console.error('Error subscribing to session:', error);\r\n        callback(null);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Utility methods\r\n  private sessionMatchesFilters(session: SessionReport, filters?: AnalyticsFilters): boolean {\r\n    if (!filters) return true;\r\n\r\n    // Date range filter\r\n    if (filters.dateRange) {\r\n      const sessionDate = session.startTime;\r\n      if (sessionDate < filters.dateRange.start || sessionDate > filters.dateRange.end) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Script IDs filter\r\n    if (filters.scriptIds && !filters.scriptIds.includes(session.scriptId)) {\r\n      return false;\r\n    }\r\n\r\n    // Tags filter\r\n    if (filters.tags && session.tags) {\r\n      const hasMatchingTag = filters.tags.some(tag => session.tags!.includes(tag));\r\n      if (!hasMatchingTag) return false;\r\n    }\r\n\r\n    // Duration filters\r\n    if (filters.minDuration && session.totalDuration < filters.minDuration) {\r\n      return false;\r\n    }\r\n    if (filters.maxDuration && session.totalDuration > filters.maxDuration) {\r\n      return false;\r\n    }\r\n\r\n    // WPM range filter\r\n    if (filters.wpmRange && filters.wpmRange.min !== undefined && filters.wpmRange.max !== undefined) {\r\n      if (session.averageWPM < filters.wpmRange.min || session.averageWPM > filters.wpmRange.max) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private calculateConsistency(sessions: SessionReport[]): number {\r\n    if (sessions.length < 2) return 100;\r\n\r\n    const wpmValues = sessions.map(session => session.averageWPM);\r\n    const mean = wpmValues.reduce((sum, wpm) => sum + wpm, 0) / wpmValues.length;\r\n    const variance = wpmValues.reduce((sum, wpm) => sum + Math.pow(wpm - mean, 2), 0) / wpmValues.length;\r\n    const standardDeviation = Math.sqrt(variance);\r\n    const coefficientOfVariation = standardDeviation / mean;\r\n\r\n    // Convert to 0-100 scale (lower variation = higher consistency)\r\n    return Math.max(0, 100 - (coefficientOfVariation * 100));\r\n  }\r\n\r\n  private calculateFluency(sessions: SessionReport[]): number {\r\n    if (sessions.length === 0) return 0;\r\n\r\n    const avgFillerRate = sessions.reduce((sum, s) => sum + s.fillerWordAnalysis.fillerRate, 0) / sessions.length;\r\n    const avgPauseCount = sessions.reduce((sum, s) => sum + (s.pauseAnalysis?.length || 0), 0) / sessions.length;\r\n    \r\n    // Calculate fluency based on filler words and pauses (lower is better)\r\n    const fillerScore = Math.max(0, 100 - (avgFillerRate * 10));\r\n    const pauseScore = Math.max(0, 100 - (avgPauseCount * 2));\r\n    \r\n    return (fillerScore + pauseScore) / 2;\r\n  }\r\n\r\n  private generateWeeklyStats(sessions: SessionReport[]) {\r\n    const weeklyData: { [week: string]: any } = {};\r\n\r\n    sessions.forEach(session => {\r\n      const date = new Date(session.startTime);\r\n      const week = this.getISOWeek(date);\r\n\r\n      if (!weeklyData[week]) {\r\n        weeklyData[week] = {\r\n          week,\r\n          sessionCount: 0,\r\n          totalDuration: 0,\r\n          wpmSum: 0,\r\n          fillerRateSum: 0,\r\n          adherenceSum: 0,\r\n        };\r\n      }\r\n\r\n      weeklyData[week].sessionCount++;\r\n      weeklyData[week].totalDuration += session.totalDuration;\r\n      weeklyData[week].wpmSum += session.averageWPM;\r\n      weeklyData[week].fillerRateSum += session.fillerWordAnalysis.fillerRate;\r\n      weeklyData[week].adherenceSum += session.scriptAdherence.adherencePercentage;\r\n    });\r\n\r\n    return Object.values(weeklyData).map((week: any) => ({\r\n      week: week.week,\r\n      sessionCount: week.sessionCount,\r\n      totalDuration: week.totalDuration,\r\n      averageWPM: week.wpmSum / week.sessionCount,\r\n      fillerWordRate: week.fillerRateSum / week.sessionCount,\r\n      adherenceScore: week.adherenceSum / week.sessionCount,\r\n    }));\r\n  }\r\n\r\n  private getISOWeek(date: Date): string {\r\n    const d = new Date(date);\r\n    d.setHours(0, 0, 0, 0);\r\n    d.setDate(d.getDate() + 3 - (d.getDay() + 6) % 7);\r\n    const week1 = new Date(d.getFullYear(), 0, 4);\r\n    const weekNumber = 1 + Math.round(((d.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\r\n    return `${d.getFullYear()}-W${weekNumber.toString().padStart(2, '0')}`;\r\n  }\r\n\r\n  private generateInsights(sessions: SessionReport[]): string[] {\r\n    const insights: string[] = [];\r\n\r\n    if (sessions.length < 2) return insights;\r\n\r\n    const firstSession = sessions[0];\r\n    const lastSession = sessions[sessions.length - 1];\r\n\r\n    // WPM insights\r\n    const wpmImprovement = lastSession.averageWPM - firstSession.averageWPM;\r\n    if (wpmImprovement > 10) {\r\n      insights.push(`Your speaking pace has improved by ${wpmImprovement.toFixed(1)} WPM over time!`);\r\n    } else if (wpmImprovement < -10) {\r\n      insights.push(`Your speaking pace has decreased by ${Math.abs(wpmImprovement).toFixed(1)} WPM. Consider practicing more regularly.`);\r\n    }\r\n\r\n    // Filler words insights\r\n    const fillerImprovement = firstSession.fillerWordAnalysis.fillerRate - lastSession.fillerWordAnalysis.fillerRate;\r\n    if (fillerImprovement > 0.5) {\r\n      insights.push(`Great progress! You've reduced filler words by ${fillerImprovement.toFixed(1)} per minute.`);\r\n    }\r\n\r\n    // Consistency insights\r\n    const consistency = this.calculateConsistency(sessions);\r\n    if (consistency > 80) {\r\n      insights.push(`Excellent consistency! Your performance is very stable across sessions.`);\r\n    } else if (consistency < 50) {\r\n      insights.push(`Your performance varies significantly between sessions. Try practicing more regularly.`);\r\n    }\r\n\r\n    return insights;\r\n  }\r\n\r\n  private generateRecommendations(sessions: SessionReport[]): string[] {\r\n    const recommendations: string[] = [];\r\n\r\n    const avgWPM = sessions.reduce((sum, s) => sum + s.averageWPM, 0) / sessions.length;\r\n    const avgFillerRate = sessions.reduce((sum, s) => sum + s.fillerWordAnalysis.fillerRate, 0) / sessions.length;\r\n    const avgAdherence = sessions.reduce((sum, s) => sum + s.scriptAdherence.adherencePercentage, 0) / sessions.length;\r\n\r\n    // WPM recommendations\r\n    if (avgWPM < 120) {\r\n      recommendations.push('Consider practicing at a slightly faster pace to improve your speaking rhythm.');\r\n    } else if (avgWPM > 180) {\r\n      recommendations.push('Try slowing down slightly to improve clarity and audience comprehension.');\r\n    }\r\n\r\n    // Filler words recommendations\r\n    if (avgFillerRate > 3) {\r\n      recommendations.push('Focus on reducing filler words by practicing with intentional pauses instead.');\r\n    }\r\n\r\n    // Script adherence recommendations\r\n    if (avgAdherence < 70) {\r\n      recommendations.push('Practice reading your scripts more closely to improve message delivery.');\r\n    }\r\n\r\n    // General recommendations\r\n    if (sessions.length < 5) {\r\n      recommendations.push('Regular practice leads to better results. Try to practice at least 3 times per week.');\r\n    }\r\n\r\n    return recommendations;\r\n  }\r\n\r\n  private getEmptyAnalyticsSummary(): AnalyticsSummary {\r\n    return {\r\n      totalSessions: 0,\r\n      totalPracticeTime: 0,\r\n      averageSessionDuration: 0,\r\n      averageWPM: 0,\r\n      improvementTrend: 0,\r\n      fillerWordTrend: 0,\r\n      mostPracticedScript: { id: '', title: 'No scripts', sessionCount: 0 },\r\n      performanceMetrics: { consistency: 0, accuracy: 0, fluency: 0 },\r\n      weeklyStats: [],\r\n    };\r\n  }\r\n\r\n  // Export format generators\r\n  private generateCSV(sessions: SessionReport[]): string {\r\n    const headers = [\r\n      'Date',\r\n      'Script Title',\r\n      'Duration (min)',\r\n      'Average WPM',\r\n      'Words Spoken',\r\n      'Script Adherence (%)',\r\n      'Filler Words',\r\n      'Filler Rate (per min)',\r\n    ];\r\n\r\n    const rows = sessions.map(session => [\r\n      session.startTime.toISOString().split('T')[0],\r\n      session.scriptTitle,\r\n      (session.totalDuration / 60000).toFixed(2),\r\n      session.averageWPM.toFixed(1),\r\n      session.wordsSpoken,\r\n      session.scriptAdherence.adherencePercentage.toFixed(1),\r\n      session.fillerWordAnalysis.totalFillerWords,\r\n      session.fillerWordAnalysis.fillerRate.toFixed(2),\r\n    ]);\r\n\r\n    return [headers, ...rows].map(row => row.join(',')).join('\\n');\r\n  }\r\n\r\n  private generatePDF(sessions: SessionReport[], options: AnalyticsExportOptions): string {\r\n    // This would integrate with a PDF generation library\r\n    // For now, return a placeholder\r\n    return 'PDF generation would be implemented here';\r\n  }\r\n\r\n  private generateExcel(sessions: SessionReport[]): string {\r\n    // This would integrate with an Excel generation library\r\n    // For now, return a placeholder\r\n    return 'Excel generation would be implemented here';\r\n  }\r\n}\r\n\r\nexport const analyticsService = new AnalyticsService();\r\nexport default analyticsService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\authService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'user' is defined but never used.","line":15,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"user"},"fix":{"range":[436,453],"text":""},"desc":"Remove unused variable 'user'."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":53,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":53,"endColumn":35},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":61,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":61,"endColumn":35},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":89,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":89,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'user' is defined but never used.","line":127,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"user"},"fix":{"range":[3732,3749],"text":""},"desc":"Remove unused variable 'user'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4209,4212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4209,4212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut as firebaseSignOut,\r\n  onAuthStateChanged,\r\n  updateProfile,\r\n  User as FirebaseUser\r\n} from 'firebase/auth';\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\r\nimport { auth, db } from './firebase';\r\nimport { User } from '../types';\r\n\r\nexport class AuthService {\r\n  private static instance: AuthService;\r\n  private authStateListeners: ((user: User | null) => void)[] = [];\r\n  private currentUser: User | null = null;\r\n\r\n  static getInstance(): AuthService {\r\n    if (!AuthService.instance) {\r\n      AuthService.instance = new AuthService();\r\n    }\r\n    return AuthService.instance;\r\n  }\r\n\r\n  constructor() {\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    // Listen for auth state changes\r\n    onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        const user = await this.createUserFromFirebase(firebaseUser);\r\n        this.currentUser = user;\r\n        this.notifyAuthStateListeners(user);\r\n      } else {\r\n        this.currentUser = null;\r\n        this.notifyAuthStateListeners(null);\r\n      }\r\n    });\r\n  }\r\n\r\n  private async createUserFromFirebase(firebaseUser: FirebaseUser): Promise<User> {\r\n    // Check if user document exists in Firestore\r\n    const userDoc = await getDoc(doc(db, 'users', firebaseUser.uid));\r\n    \r\n    let userData: User;\r\n    \r\n    if (userDoc.exists()) {\r\n      const data = userDoc.data();\r\n      userData = {\r\n        uid: firebaseUser.uid,\r\n        email: firebaseUser.email!,\r\n        displayName: data.displayName || firebaseUser.displayName || undefined,\r\n        createdAt: data.createdAt?.toDate() || new Date()\r\n      };\r\n    } else {\r\n      // Create new user document\r\n      userData = {\r\n        uid: firebaseUser.uid,\r\n        email: firebaseUser.email!,\r\n        displayName: firebaseUser.displayName || undefined,\r\n        createdAt: new Date()\r\n      };\r\n      \r\n      await setDoc(doc(db, 'users', firebaseUser.uid), {\r\n        email: userData.email,\r\n        displayName: userData.displayName,\r\n        createdAt: userData.createdAt\r\n      });\r\n    }\r\n    \r\n    return userData;\r\n  }\r\n\r\n  async signUp(email: string, password: string, displayName?: string): Promise<User> {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const firebaseUser = userCredential.user;\r\n      \r\n      // Update profile with display name if provided\r\n      if (displayName) {\r\n        await updateProfile(firebaseUser, { displayName });\r\n      }\r\n      \r\n      // Create user document in Firestore\r\n      const userData: User = {\r\n        uid: firebaseUser.uid,\r\n        email: firebaseUser.email!,\r\n        displayName: displayName || firebaseUser.displayName || undefined,\r\n        createdAt: new Date()\r\n      };\r\n      \r\n      await setDoc(doc(db, 'users', firebaseUser.uid), {\r\n        email: userData.email,\r\n        displayName: userData.displayName,\r\n        createdAt: userData.createdAt\r\n      });\r\n      \r\n      return userData;\r\n    } catch (error) {\r\n      throw this.handleAuthError(error);\r\n    }\r\n  }\r\n\r\n  async signIn(email: string, password: string): Promise<User> {\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      return await this.createUserFromFirebase(userCredential.user);\r\n    } catch (error) {\r\n      throw this.handleAuthError(error);\r\n    }\r\n  }\r\n\r\n  async signOut(): Promise<void> {\r\n    try {\r\n      await firebaseSignOut(auth);\r\n    } catch (error) {\r\n      throw this.handleAuthError(error);\r\n    }\r\n  }\r\n\r\n  getCurrentUser(): User | null {\r\n    return this.currentUser;\r\n  }\r\n\r\n  addAuthStateListener(listener: (user: User | null) => void): () => void {\r\n    this.authStateListeners.push(listener);\r\n    \r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.authStateListeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.authStateListeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  private notifyAuthStateListeners(user: User | null) {\r\n    this.authStateListeners.forEach(listener => listener(user));\r\n  }\r\n\r\n  private handleAuthError(error: any): Error {\r\n    let message = 'An unexpected error occurred';\r\n    \r\n    if (error.code) {\r\n      switch (error.code) {\r\n        case 'auth/email-already-in-use':\r\n          message = 'This email is already registered';\r\n          break;\r\n        case 'auth/invalid-email':\r\n          message = 'Invalid email address';\r\n          break;\r\n        case 'auth/weak-password':\r\n          message = 'Password should be at least 6 characters';\r\n          break;\r\n        case 'auth/user-not-found':\r\n          message = 'No account found with this email';\r\n          break;\r\n        case 'auth/wrong-password':\r\n          message = 'Incorrect password';\r\n          break;\r\n        case 'auth/too-many-requests':\r\n          message = 'Too many failed attempts. Please try again later';\r\n          break;\r\n        case 'auth/network-request-failed':\r\n          message = 'Network error. Please check your connection';\r\n          break;\r\n        default:\r\n          message = error.message || 'Authentication failed';\r\n      }\r\n    }\r\n    \r\n    return new Error(message);\r\n  }\r\n}\r\n\r\nexport const authService = AuthService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\bleRemoteService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":55,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1449,1470],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'command' is defined but never used.","line":56,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"command"},"fix":{"range":[1523,1545],"text":""},"desc":"Remove unused variable 'command'."}]},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":58,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":115,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":115,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":115,"endColumn":20,"suggestions":[{"fix":{"range":[3205,3270],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":140,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":140,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":140,"endColumn":20,"suggestions":[{"fix":{"range":[4091,4156],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":153,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":153,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":153,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":153,"endColumn":20,"suggestions":[{"fix":{"range":[4498,4556],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":224,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":224,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":229,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":229,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":229,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":229,"endColumn":20,"suggestions":[{"fix":{"range":[7678,7732],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":243,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":243,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":251,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":251,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":20,"suggestions":[{"fix":{"range":[8273,8326],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":274,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":274,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":274,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":274,"endColumn":20,"suggestions":[{"fix":{"range":[8933,8990],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":300,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":300,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":300,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":300,"endColumn":20,"suggestions":[{"fix":{"range":[9696,9753],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":324,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":324,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":324,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":324,"endColumn":19,"suggestions":[{"fix":{"range":[10444,10507],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12602,12605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12602,12605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":407,"column":7,"nodeType":"MemberExpression","endLine":407,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":417,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":417,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13611,13614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13611,13614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":429,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":429,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13998,14001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13998,14001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":437,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":437,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14219,14222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14219,14222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":452,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":452,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14634,14637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14634,14637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":453,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":453,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":453,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":453,"endColumn":18,"suggestions":[{"fix":{"range":[14652,14691],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":458,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14844,14847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14844,14847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":472,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":472,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15329,15332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15329,15332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":490,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":490,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[16063,16084],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":494,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":494,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[16175,16196],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'command' is defined but never used.","line":498,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":498,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"command"},"fix":{"range":[16321,16343],"text":""},"desc":"Remove unused variable 'command'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'command' is defined but never used.","line":502,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":502,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"command"},"fix":{"range":[16448,16470],"text":""},"desc":"Remove unused variable 'command'."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Platform, PermissionsAndroid, NativeModules, DeviceEventEmitter } from 'react-native';\r\nimport { PerformanceOptimizer } from './performanceOptimizer';\r\n\r\nexport interface BLEDevice {\r\n  id: string;\r\n  name: string;\r\n  type: 'presentation_remote' | 'foot_pedal' | 'keyboard' | 'generic_hid';\r\n  manufacturer?: string;\r\n  model?: string;\r\n  batteryLevel?: number;\r\n  isConnected: boolean;\r\n  supportedButtons: string[];\r\n  rssi?: number; // Signal strength\r\n}\r\n\r\nexport interface BLERemoteState {\r\n  isScanning: boolean;\r\n  hasPermission: boolean;\r\n  isBluetoothEnabled: boolean;\r\n  discoveredDevices: BLEDevice[];\r\n  connectedDevices: BLEDevice[];\r\n  error: string | null;\r\n  lastCommand: RemoteCommand | null;\r\n}\r\n\r\nexport interface RemoteCommand {\r\n  deviceId: string;\r\n  button: string;\r\n  action: 'press' | 'release' | 'hold';\r\n  timestamp: number;\r\n}\r\n\r\nexport interface ButtonMapping {\r\n  button: string;\r\n  action: TeleprompterAction;\r\n  holdAction?: TeleprompterAction;\r\n  holdDuration?: number; // ms\r\n}\r\n\r\nexport type TeleprompterAction = \r\n  | 'play_pause'\r\n  | 'scroll_up'\r\n  | 'scroll_down'\r\n  | 'speed_increase'\r\n  | 'speed_decrease'\r\n  | 'next_marker'\r\n  | 'previous_marker'\r\n  | 'reset_position'\r\n  | 'toggle_speech_recognition'\r\n  | 'toggle_karaoke';\r\n\r\nclass BLERemoteService {\r\n  private static instance: BLERemoteService;\r\n  private performanceOptimizer = PerformanceOptimizer.getInstance();\r\n  private listeners: Array<(state: BLERemoteState) => void> = [];\r\n  private commandListeners: Array<(command: RemoteCommand) => void> = [];\r\n  private buttonMappings: Map<string, ButtonMapping> = new Map();\r\n  private scanTimeout: NodeJS.Timeout | null = null;\r\n  \r\n  private currentState: BLERemoteState = {\r\n    isScanning: false,\r\n    hasPermission: false,\r\n    isBluetoothEnabled: false,\r\n    discoveredDevices: [],\r\n    connectedDevices: [],\r\n    error: null,\r\n    lastCommand: null,\r\n  };\r\n\r\n  static getInstance(): BLERemoteService {\r\n    if (!BLERemoteService.instance) {\r\n      BLERemoteService.instance = new BLERemoteService();\r\n    }\r\n    return BLERemoteService.instance;\r\n  }\r\n\r\n  // Initialize BLE service and permissions\r\n  async initialize(): Promise<boolean> {\r\n    try {\r\n      // Request Bluetooth permissions\r\n      const hasPermission = await this.requestBluetoothPermissions();\r\n      if (!hasPermission) {\r\n        this.updateState({ \r\n          hasPermission: false,\r\n          error: 'Bluetooth permissions not granted'\r\n        });\r\n        return false;\r\n      }\r\n\r\n      // Check if Bluetooth is enabled\r\n      const isEnabled = await this.checkBluetoothEnabled();\r\n      this.updateState({ \r\n        hasPermission: true,\r\n        isBluetoothEnabled: isEnabled\r\n      });\r\n\r\n      if (!isEnabled) {\r\n        this.updateState({ error: 'Bluetooth is not enabled' });\r\n        return false;\r\n      }\r\n\r\n      // Initialize native BLE module\r\n      if (NativeModules.BLERemoteModule) {\r\n        await NativeModules.BLERemoteModule.initialize();\r\n      }\r\n\r\n      // Set up event listeners\r\n      this.setupEventListeners();\r\n\r\n      // Load default button mappings\r\n      this.loadDefaultButtonMappings();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to initialize BLE remote service:', error);\r\n      this.updateState({ error: 'Failed to initialize Bluetooth' });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Request Bluetooth permissions (Android requires special handling)\r\n  private async requestBluetoothPermissions(): Promise<boolean> {\r\n    try {\r\n      if (Platform.OS === 'android') {\r\n        // Android 12+ requires additional permissions\r\n        const permissions = [\r\n          PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\r\n        ];\r\n\r\n        const granted = await PermissionsAndroid.requestMultiple(permissions);\r\n        \r\n        return Object.values(granted).every(\r\n          permission => permission === PermissionsAndroid.RESULTS.GRANTED\r\n        );\r\n      } else {\r\n        // iOS handles Bluetooth permissions automatically\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to request Bluetooth permissions:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Check if Bluetooth is enabled\r\n  private async checkBluetoothEnabled(): Promise<boolean> {\r\n    try {\r\n      if (NativeModules.BLERemoteModule?.isBluetoothEnabled) {\r\n        return await NativeModules.BLERemoteModule.isBluetoothEnabled();\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to check Bluetooth status:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Set up event listeners for BLE events\r\n  private setupEventListeners(): void {\r\n    DeviceEventEmitter.addListener('BLEDeviceDiscovered', this.handleDeviceDiscovered.bind(this));\r\n    DeviceEventEmitter.addListener('BLEDeviceConnected', this.handleDeviceConnected.bind(this));\r\n    DeviceEventEmitter.addListener('BLEDeviceDisconnected', this.handleDeviceDisconnected.bind(this));\r\n    DeviceEventEmitter.addListener('BLERemoteCommand', this.handleRemoteCommand.bind(this));\r\n    DeviceEventEmitter.addListener('BLEError', this.handleBLEError.bind(this));\r\n  }\r\n\r\n  // Load default button mappings for common remote types\r\n  private loadDefaultButtonMappings(): void {\r\n    // Presentation remote mappings\r\n    this.setButtonMapping('up_arrow', { button: 'up_arrow', action: 'scroll_up' });\r\n    this.setButtonMapping('down_arrow', { button: 'down_arrow', action: 'scroll_down' });\r\n    this.setButtonMapping('space', { button: 'space', action: 'play_pause' });\r\n    this.setButtonMapping('right_arrow', { button: 'right_arrow', action: 'next_marker' });\r\n    this.setButtonMapping('left_arrow', { button: 'left_arrow', action: 'previous_marker' });\r\n    \r\n    // Foot pedal mappings\r\n    this.setButtonMapping('pedal_left', { \r\n      button: 'pedal_left', \r\n      action: 'scroll_up',\r\n      holdAction: 'speed_increase',\r\n      holdDuration: 1000\r\n    });\r\n    this.setButtonMapping('pedal_right', { \r\n      button: 'pedal_right', \r\n      action: 'scroll_down',\r\n      holdAction: 'speed_decrease',\r\n      holdDuration: 1000\r\n    });\r\n    this.setButtonMapping('pedal_center', { button: 'pedal_center', action: 'play_pause' });\r\n\r\n    // Generic HID mappings\r\n    this.setButtonMapping('button_a', { button: 'button_a', action: 'play_pause' });\r\n    this.setButtonMapping('button_b', { button: 'button_b', action: 'reset_position' });\r\n    this.setButtonMapping('dpad_up', { button: 'dpad_up', action: 'scroll_up' });\r\n    this.setButtonMapping('dpad_down', { button: 'dpad_down', action: 'scroll_down' });\r\n  }\r\n\r\n  // Start scanning for BLE devices\r\n  async startScanning(duration: number = 10000): Promise<void> {\r\n    try {\r\n      if (!this.currentState.hasPermission || !this.currentState.isBluetoothEnabled) {\r\n        throw new Error('Bluetooth not available');\r\n      }\r\n\r\n      this.updateState({ \r\n        isScanning: true, \r\n        error: null,\r\n        discoveredDevices: [] // Clear previous results\r\n      });\r\n\r\n      // Start BLE scan with HID device filter\r\n      if (NativeModules.BLERemoteModule?.startScan) {\r\n        await NativeModules.BLERemoteModule.startScan({\r\n          serviceUUIDs: [\r\n            '00001812-0000-1000-8000-00805f9b34fb', // HID Service UUID\r\n            '0000180f-0000-1000-8000-00805f9b34fb', // Battery Service UUID\r\n          ],\r\n          scanMode: 'balanced', // balanced, low_power, low_latency\r\n          allowDuplicates: false,\r\n        });\r\n      }\r\n\r\n      // Auto-stop scanning after duration\r\n      this.scanTimeout = setTimeout(() => {\r\n        this.stopScanning();\r\n      }, duration);\r\n\r\n    } catch (error) {\r\n      console.error('Failed to start BLE scanning:', error);\r\n      this.updateState({ \r\n        isScanning: false,\r\n        error: 'Failed to start scanning for devices'\r\n      });\r\n    }\r\n  }\r\n\r\n  // Stop scanning for BLE devices\r\n  async stopScanning(): Promise<void> {\r\n    try {\r\n      this.updateState({ isScanning: false });\r\n\r\n      if (this.scanTimeout) {\r\n        clearTimeout(this.scanTimeout);\r\n        this.scanTimeout = null;\r\n      }\r\n\r\n      if (NativeModules.BLERemoteModule?.stopScan) {\r\n        await NativeModules.BLERemoteModule.stopScan();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to stop BLE scanning:', error);\r\n    }\r\n  }\r\n\r\n  // Connect to a BLE device\r\n  async connectToDevice(deviceId: string): Promise<boolean> {\r\n    try {\r\n      this.updateState({ error: null });\r\n\r\n      if (NativeModules.BLERemoteModule?.connect) {\r\n        const success = await NativeModules.BLERemoteModule.connect(deviceId);\r\n        \r\n        if (success) {\r\n          // Device connection will be handled by event listener\r\n          return true;\r\n        } else {\r\n          this.updateState({ error: 'Failed to connect to device' });\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to connect to BLE device:', error);\r\n      this.updateState({ error: 'Connection failed' });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Disconnect from a BLE device\r\n  async disconnectFromDevice(deviceId: string): Promise<boolean> {\r\n    try {\r\n      if (NativeModules.BLERemoteModule?.disconnect) {\r\n        const success = await NativeModules.BLERemoteModule.disconnect(deviceId);\r\n        \r\n        if (success) {\r\n          // Remove from connected devices\r\n          this.updateState({\r\n            connectedDevices: this.currentState.connectedDevices.filter(\r\n              device => device.id !== deviceId\r\n            )\r\n          });\r\n        }\r\n\r\n        return success;\r\n      }\r\n\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to disconnect BLE device:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Set custom button mapping\r\n  setButtonMapping(buttonId: string, mapping: ButtonMapping): void {\r\n    this.buttonMappings.set(buttonId, mapping);\r\n  }\r\n\r\n  // Get button mapping\r\n  getButtonMapping(buttonId: string): ButtonMapping | undefined {\r\n    return this.buttonMappings.get(buttonId);\r\n  }\r\n\r\n  // Get all button mappings\r\n  getAllButtonMappings(): Map<string, ButtonMapping> {\r\n    return new Map(this.buttonMappings);\r\n  }\r\n\r\n  // Process remote command and execute corresponding action\r\n  private processRemoteCommand(command: RemoteCommand): void {\r\n    const mapping = this.buttonMappings.get(command.button);\r\n    if (!mapping) {\r\n      console.warn(`No mapping found for button: ${command.button}`);\r\n      return;\r\n    }\r\n\r\n    let action: TeleprompterAction;\r\n\r\n    // Check if this is a hold action\r\n    if (command.action === 'hold' && mapping.holdAction) {\r\n      action = mapping.holdAction;\r\n    } else if (command.action === 'press') {\r\n      action = mapping.action;\r\n    } else {\r\n      return; // Ignore release events unless specifically mapped\r\n    }\r\n\r\n    // Execute the teleprompter action\r\n    this.executeTeleprompterAction(action, command);\r\n\r\n    // Update state with last command\r\n    this.updateState({ lastCommand: command });\r\n  }\r\n\r\n  // Execute teleprompter action\r\n  private executeTeleprompterAction(action: TeleprompterAction, command: RemoteCommand): void {\r\n    // Emit the action for the teleprompter to handle\r\n    DeviceEventEmitter.emit('TeleprompterRemoteAction', {\r\n      action,\r\n      deviceId: command.deviceId,\r\n      timestamp: command.timestamp,\r\n    });\r\n\r\n    // Show visual feedback\r\n    this.showRemoteCommandFeedback(action, command.deviceId);\r\n  }\r\n\r\n  // Show visual feedback for remote command\r\n  private showRemoteCommandFeedback(action: TeleprompterAction, deviceId: string): void {\r\n    DeviceEventEmitter.emit('RemoteCommandFeedback', {\r\n      action,\r\n      deviceId,\r\n      message: this.getActionDisplayName(action),\r\n      timestamp: Date.now(),\r\n    });\r\n  }\r\n\r\n  // Get display name for action\r\n  private getActionDisplayName(action: TeleprompterAction): string {\r\n    switch (action) {\r\n      case 'play_pause': return 'Play/Pause';\r\n      case 'scroll_up': return 'Scroll Up';\r\n      case 'scroll_down': return 'Scroll Down';\r\n      case 'speed_increase': return 'Speed Up';\r\n      case 'speed_decrease': return 'Speed Down';\r\n      case 'next_marker': return 'Next Section';\r\n      case 'previous_marker': return 'Previous Section';\r\n      case 'reset_position': return 'Reset Position';\r\n      case 'toggle_speech_recognition': return 'Toggle Speech';\r\n      case 'toggle_karaoke': return 'Toggle Karaoke';\r\n      default: return 'Unknown Action';\r\n    }\r\n  }\r\n\r\n  // Event handlers\r\n  private handleDeviceDiscovered(deviceInfo: any): void {\r\n    const device: BLEDevice = {\r\n      id: deviceInfo.id,\r\n      name: deviceInfo.name || 'Unknown Device',\r\n      type: this.detectDeviceType(deviceInfo),\r\n      manufacturer: deviceInfo.manufacturer,\r\n      model: deviceInfo.model,\r\n      isConnected: false,\r\n      supportedButtons: this.getSupportedButtons(deviceInfo),\r\n      rssi: deviceInfo.rssi,\r\n    };\r\n\r\n    // Add to discovered devices if not already present\r\n    const existingIndex = this.currentState.discoveredDevices.findIndex(\r\n      d => d.id === device.id\r\n    );\r\n\r\n    if (existingIndex >= 0) {\r\n      // Update existing device\r\n      const updatedDevices = [...this.currentState.discoveredDevices];\r\n      updatedDevices[existingIndex] = device;\r\n      this.updateState({ discoveredDevices: updatedDevices });\r\n    } else {\r\n      // Add new device\r\n      this.updateState({\r\n        discoveredDevices: [...this.currentState.discoveredDevices, device]\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleDeviceConnected(deviceInfo: any): void {\r\n    const device = this.currentState.discoveredDevices.find(d => d.id === deviceInfo.id);\r\n    if (device) {\r\n      device.isConnected = true;\r\n      device.batteryLevel = deviceInfo.batteryLevel;\r\n\r\n      this.updateState({\r\n        connectedDevices: [...this.currentState.connectedDevices, device]\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleDeviceDisconnected(deviceInfo: any): void {\r\n    this.updateState({\r\n      connectedDevices: this.currentState.connectedDevices.filter(\r\n        device => device.id !== deviceInfo.id\r\n      )\r\n    });\r\n  }\r\n\r\n  private handleRemoteCommand(commandData: any): void {\r\n    const command: RemoteCommand = {\r\n      deviceId: commandData.deviceId,\r\n      button: commandData.button,\r\n      action: commandData.action,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    // Process the command\r\n    this.processRemoteCommand(command);\r\n\r\n    // Notify command listeners\r\n    this.commandListeners.forEach(listener => listener(command));\r\n  }\r\n\r\n  private handleBLEError(errorInfo: any): void {\r\n    console.error('BLE Error:', errorInfo);\r\n    this.updateState({ error: errorInfo.message || 'Bluetooth error occurred' });\r\n  }\r\n\r\n  // Utility methods\r\n  private detectDeviceType(deviceInfo: any): BLEDevice['type'] {\r\n    const name = deviceInfo.name?.toLowerCase() || '';\r\n    \r\n    if (name.includes('presenter') || name.includes('remote') || name.includes('clicker')) {\r\n      return 'presentation_remote';\r\n    } else if (name.includes('pedal') || name.includes('foot')) {\r\n      return 'foot_pedal';\r\n    } else if (name.includes('keyboard')) {\r\n      return 'keyboard';\r\n    } else {\r\n      return 'generic_hid';\r\n    }\r\n  }\r\n\r\n  private getSupportedButtons(deviceInfo: any): string[] {\r\n    // This would be determined by the device's HID descriptor\r\n    // For now, return common buttons based on device type\r\n    const type = this.detectDeviceType(deviceInfo);\r\n    \r\n    switch (type) {\r\n      case 'presentation_remote':\r\n        return ['up_arrow', 'down_arrow', 'left_arrow', 'right_arrow', 'space', 'escape'];\r\n      case 'foot_pedal':\r\n        return ['pedal_left', 'pedal_right', 'pedal_center'];\r\n      case 'keyboard':\r\n        return ['space', 'enter', 'escape', 'up_arrow', 'down_arrow', 'left_arrow', 'right_arrow'];\r\n      default:\r\n        return ['button_a', 'button_b', 'dpad_up', 'dpad_down', 'dpad_left', 'dpad_right'];\r\n    }\r\n  }\r\n\r\n  // State management\r\n  addListener(listener: (state: BLERemoteState) => void): void {\r\n    this.listeners.push(listener);\r\n  }\r\n\r\n  removeListener(listener: (state: BLERemoteState) => void): void {\r\n    this.listeners = this.listeners.filter(l => l !== listener);\r\n  }\r\n\r\n  addCommandListener(listener: (command: RemoteCommand) => void): void {\r\n    this.commandListeners.push(listener);\r\n  }\r\n\r\n  removeCommandListener(listener: (command: RemoteCommand) => void): void {\r\n    this.commandListeners = this.commandListeners.filter(l => l !== listener);\r\n  }\r\n\r\n  private updateState(updates: Partial<BLERemoteState>): void {\r\n    this.currentState = { ...this.currentState, ...updates };\r\n    this.listeners.forEach(listener => listener(this.currentState));\r\n  }\r\n\r\n  getCurrentState(): BLERemoteState {\r\n    return { ...this.currentState };\r\n  }\r\n\r\n  // Cleanup\r\n  cleanup(): void {\r\n    this.stopScanning();\r\n    \r\n    // Disconnect all devices\r\n    this.currentState.connectedDevices.forEach(device => {\r\n      this.disconnectFromDevice(device.id);\r\n    });\r\n\r\n    // Clear listeners\r\n    DeviceEventEmitter.removeAllListeners('BLEDeviceDiscovered');\r\n    DeviceEventEmitter.removeAllListeners('BLEDeviceConnected');\r\n    DeviceEventEmitter.removeAllListeners('BLEDeviceDisconnected');\r\n    DeviceEventEmitter.removeAllListeners('BLERemoteCommand');\r\n    DeviceEventEmitter.removeAllListeners('BLEError');\r\n  }\r\n}\r\n\r\nexport const bleRemoteService = BLERemoteService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\externalDisplayService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":39,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1092,1119],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":73,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2064,2135],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":87,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":19,"suggestions":[{"fix":{"range":[2636,2702],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":100,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":100,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":100,"endColumn":19,"suggestions":[{"fix":{"range":[3117,3187],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":137,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":137,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":137,"endColumn":20,"suggestions":[{"fix":{"range":[4660,4713],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":166,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":166,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":166,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":166,"endColumn":19,"suggestions":[{"fix":{"range":[5656,5710],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":187,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":187,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":187,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":187,"endColumn":19,"suggestions":[{"fix":{"range":[6318,6375],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":216,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":216,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":216,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":216,"endColumn":19,"suggestions":[{"fix":{"range":[7203,7261],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":245,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":245,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":245,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":245,"endColumn":19,"suggestions":[{"fix":{"range":[8085,8140],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":270,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":270,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":270,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":270,"endColumn":20,"suggestions":[{"fix":{"range":[8788,8842],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":306,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":306,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":20,"suggestions":[{"fix":{"range":[9909,9966],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":335,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":20,"suggestions":[{"fix":{"range":[10710,10770],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":356,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":356,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":356,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":356,"endColumn":20,"suggestions":[{"fix":{"range":[11345,11399],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":372,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":372,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":372,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":372,"endColumn":20,"suggestions":[{"fix":{"range":[11824,11875],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":386,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":386,"endColumn":35,"fix":{"range":[12228,12235],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":402,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":402,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":402,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":402,"endColumn":20,"suggestions":[{"fix":{"range":[12902,12960],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":445,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":445,"endColumn":35,"fix":{"range":[14147,14154],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":463,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":463,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":463,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":463,"endColumn":20,"suggestions":[{"fix":{"range":[14854,14908],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'displayInfo' is defined but never used.","line":469,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":469,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayInfo"},"fix":{"range":[15060,15076],"text":""},"desc":"Remove unused variable 'displayInfo'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'displayInfo' is defined but never used.","line":469,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":469,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":469,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":469,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15073,15076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15073,15076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":473,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":473,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15202,15205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15202,15205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionInfo' is defined but never used.","line":487,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":487,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionInfo"},"fix":{"range":[15579,15595],"text":""},"desc":"Remove unused variable 'sessionInfo'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessionInfo' is defined but never used.","line":487,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":487,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":487,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15592,15595],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15592,15595],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionInfo' is defined but never used.","line":491,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":491,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionInfo"},"fix":{"range":[15691,15707],"text":""},"desc":"Remove unused variable 'sessionInfo'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessionInfo' is defined but never used.","line":491,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":491,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":491,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":491,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15704,15707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15704,15707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":499,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":499,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15883,15886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15883,15886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":508,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":508,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[16147,16174],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":512,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":512,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[16265,16292],"text":""},"desc":"Remove unused variable 'state'."}]}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { Platform, NativeModules, DeviceEventEmitter } from 'react-native';\r\nimport { PerformanceOptimizer } from './performanceOptimizer';\r\n\r\nexport interface ExternalDisplayState {\r\n  isConnected: boolean;\r\n  displayCount: number;\r\n  currentDisplay: ExternalDisplay | null;\r\n  availableDisplays: ExternalDisplay[];\r\n  isMirroring: boolean;\r\n  isWirelessCasting: boolean;\r\n  error: string | null;\r\n}\r\n\r\nexport interface ExternalDisplay {\r\n  id: string;\r\n  name: string;\r\n  type: 'wired' | 'wireless';\r\n  technology: 'hdmi' | 'usb-c' | 'lightning' | 'chromecast' | 'airplay';\r\n  resolution: {\r\n    width: number;\r\n    height: number;\r\n  };\r\n  isAvailable: boolean;\r\n}\r\n\r\nexport interface TeleprompterDisplayOptions {\r\n  mirrorHorizontally: boolean;\r\n  fontSize: number;\r\n  backgroundColor: string;\r\n  textColor: string;\r\n  scrollSpeed: number;\r\n  showControls: boolean;\r\n  enableSpeechTracking: boolean;\r\n}\r\n\r\nclass ExternalDisplayService {\r\n  private static instance: ExternalDisplayService;\r\n  private performanceOptimizer = PerformanceOptimizer.getInstance();\r\n  private listeners: Array<(state: ExternalDisplayState) => void> = [];\r\n  private currentState: ExternalDisplayState = {\r\n    isConnected: false,\r\n    displayCount: 0,\r\n    currentDisplay: null,\r\n    availableDisplays: [],\r\n    isMirroring: false,\r\n    isWirelessCasting: false,\r\n    error: null,\r\n  };\r\n\r\n  static getInstance(): ExternalDisplayService {\r\n    if (!ExternalDisplayService.instance) {\r\n      ExternalDisplayService.instance = new ExternalDisplayService();\r\n    }\r\n    return ExternalDisplayService.instance;\r\n  }\r\n\r\n  // Initialize external display monitoring\r\n  async initialize(): Promise<void> {\r\n    try {\r\n      if (Platform.OS === 'ios') {\r\n        await this.initializeIOS();\r\n      } else if (Platform.OS === 'android') {\r\n        await this.initializeAndroid();\r\n      }\r\n\r\n      // Set up display change listeners\r\n      this.setupDisplayListeners();\r\n      \r\n      // Initial scan for available displays\r\n      await this.scanForDisplays();\r\n\r\n    } catch (error) {\r\n      console.error('Failed to initialize external display service:', error);\r\n      this.updateState({ error: 'Failed to initialize external display support' });\r\n    }\r\n  }\r\n\r\n  // iOS-specific initialization using UIScene/Multi-Window API\r\n  private async initializeIOS(): Promise<void> {\r\n    // This would require a native iOS module\r\n    try {\r\n      // Check if UIScene multiple window support is available (iOS 13+)\r\n      if (NativeModules.ExternalDisplayModule) {\r\n        await NativeModules.ExternalDisplayModule.initialize();\r\n      }\r\n    } catch (error) {\r\n      console.warn('iOS external display module not available:', error);\r\n    }\r\n  }\r\n\r\n  // Android-specific initialization using Presentation API\r\n  private async initializeAndroid(): Promise<void> {\r\n    // This would require a native Android module\r\n    try {\r\n      // Initialize Android Presentation API for secondary displays\r\n      if (NativeModules.ExternalDisplayModule) {\r\n        await NativeModules.ExternalDisplayModule.initialize();\r\n      }\r\n    } catch (error) {\r\n      console.warn('Android external display module not available:', error);\r\n    }\r\n  }\r\n\r\n  // Set up listeners for display connection/disconnection events\r\n  private setupDisplayListeners(): void {\r\n    if (Platform.OS === 'ios') {\r\n      // iOS screen connection events\r\n      DeviceEventEmitter.addListener('ExternalDisplayConnected', this.handleDisplayConnected.bind(this));\r\n      DeviceEventEmitter.addListener('ExternalDisplayDisconnected', this.handleDisplayDisconnected.bind(this));\r\n    } else if (Platform.OS === 'android') {\r\n      // Android display events\r\n      DeviceEventEmitter.addListener('DisplayAdded', this.handleDisplayConnected.bind(this));\r\n      DeviceEventEmitter.addListener('DisplayRemoved', this.handleDisplayDisconnected.bind(this));\r\n    }\r\n\r\n    // Wireless casting events\r\n    DeviceEventEmitter.addListener('CastSessionStarted', this.handleCastStarted.bind(this));\r\n    DeviceEventEmitter.addListener('CastSessionEnded', this.handleCastEnded.bind(this));\r\n  }\r\n\r\n  // Scan for available external displays\r\n  async scanForDisplays(): Promise<ExternalDisplay[]> {\r\n    try {\r\n      const wiredDisplays = await this.scanWiredDisplays();\r\n      const wirelessDisplays = await this.scanWirelessDisplays();\r\n      \r\n      const allDisplays = [...wiredDisplays, ...wirelessDisplays];\r\n      \r\n      this.updateState({ \r\n        availableDisplays: allDisplays,\r\n        displayCount: allDisplays.length,\r\n        isConnected: allDisplays.length > 0,\r\n      });\r\n\r\n      return allDisplays;\r\n    } catch (error) {\r\n      console.error('Failed to scan for displays:', error);\r\n      this.updateState({ error: 'Failed to scan for external displays' });\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Scan for wired displays (HDMI, USB-C, Lightning)\r\n  private async scanWiredDisplays(): Promise<ExternalDisplay[]> {\r\n    const displays: ExternalDisplay[] = [];\r\n\r\n    try {\r\n      if (NativeModules.ExternalDisplayModule?.getWiredDisplays) {\r\n        const nativeDisplays = await NativeModules.ExternalDisplayModule.getWiredDisplays();\r\n        \r\n        for (const display of nativeDisplays) {\r\n          displays.push({\r\n            id: display.id,\r\n            name: display.name || 'External Display',\r\n            type: 'wired',\r\n            technology: this.detectWiredTechnology(display),\r\n            resolution: {\r\n              width: display.width || 1920,\r\n              height: display.height || 1080,\r\n            },\r\n            isAvailable: true,\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to scan wired displays:', error);\r\n    }\r\n\r\n    return displays;\r\n  }\r\n\r\n  // Scan for wireless displays (Chromecast, AirPlay)\r\n  private async scanWirelessDisplays(): Promise<ExternalDisplay[]> {\r\n    const displays: ExternalDisplay[] = [];\r\n\r\n    try {\r\n      // Scan for Chromecast devices\r\n      const chromecastDisplays = await this.scanChromecastDevices();\r\n      displays.push(...chromecastDisplays);\r\n\r\n      // Scan for AirPlay devices (iOS only)\r\n      if (Platform.OS === 'ios') {\r\n        const airplayDisplays = await this.scanAirPlayDevices();\r\n        displays.push(...airplayDisplays);\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to scan wireless displays:', error);\r\n    }\r\n\r\n    return displays;\r\n  }\r\n\r\n  // Scan for Chromecast devices using Google Cast SDK\r\n  private async scanChromecastDevices(): Promise<ExternalDisplay[]> {\r\n    const displays: ExternalDisplay[] = [];\r\n\r\n    try {\r\n      if (NativeModules.GoogleCastModule?.discoverDevices) {\r\n        const devices = await NativeModules.GoogleCastModule.discoverDevices();\r\n        \r\n        for (const device of devices) {\r\n          displays.push({\r\n            id: device.deviceId,\r\n            name: device.friendlyName,\r\n            type: 'wireless',\r\n            technology: 'chromecast',\r\n            resolution: {\r\n              width: 1920, // Standard Cast resolution\r\n              height: 1080,\r\n            },\r\n            isAvailable: device.isAvailable,\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to scan Chromecast devices:', error);\r\n    }\r\n\r\n    return displays;\r\n  }\r\n\r\n  // Scan for AirPlay devices (iOS only)\r\n  private async scanAirPlayDevices(): Promise<ExternalDisplay[]> {\r\n    const displays: ExternalDisplay[] = [];\r\n\r\n    try {\r\n      if (Platform.OS === 'ios' && NativeModules.AirPlayModule?.discoverDevices) {\r\n        const devices = await NativeModules.AirPlayModule.discoverDevices();\r\n        \r\n        for (const device of devices) {\r\n          displays.push({\r\n            id: device.deviceId,\r\n            name: device.name,\r\n            type: 'wireless',\r\n            technology: 'airplay',\r\n            resolution: {\r\n              width: device.width || 1920,\r\n              height: device.height || 1080,\r\n            },\r\n            isAvailable: device.isAvailable,\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to scan AirPlay devices:', error);\r\n    }\r\n\r\n    return displays;\r\n  }\r\n\r\n  // Connect to an external display\r\n  async connectToDisplay(\r\n    displayId: string,\r\n    options: TeleprompterDisplayOptions\r\n  ): Promise<boolean> {\r\n    try {\r\n      const display = this.currentState.availableDisplays.find(d => d.id === displayId);\r\n      if (!display) {\r\n        throw new Error('Display not found');\r\n      }\r\n\r\n      this.updateState({ error: null });\r\n\r\n      if (display.type === 'wired') {\r\n        return await this.connectWiredDisplay(display, options);\r\n      } else {\r\n        return await this.connectWirelessDisplay(display, options);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to connect to display:', error);\r\n      this.updateState({ error: 'Failed to connect to external display' });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Connect to wired display using native presentation API\r\n  private async connectWiredDisplay(\r\n    display: ExternalDisplay,\r\n    options: TeleprompterDisplayOptions\r\n  ): Promise<boolean> {\r\n    try {\r\n      if (NativeModules.ExternalDisplayModule?.connectWiredDisplay) {\r\n        const success = await NativeModules.ExternalDisplayModule.connectWiredDisplay(\r\n          display.id,\r\n          {\r\n            mirrorHorizontally: options.mirrorHorizontally,\r\n            fontSize: options.fontSize,\r\n            backgroundColor: options.backgroundColor,\r\n            textColor: options.textColor,\r\n            showControls: options.showControls,\r\n          }\r\n        );\r\n\r\n        if (success) {\r\n          this.updateState({\r\n            currentDisplay: display,\r\n            isMirroring: true,\r\n            isWirelessCasting: false,\r\n          });\r\n        }\r\n\r\n        return success;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to connect wired display:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Connect to wireless display using Cast/AirPlay\r\n  private async connectWirelessDisplay(\r\n    display: ExternalDisplay,\r\n    options: TeleprompterDisplayOptions\r\n  ): Promise<boolean> {\r\n    try {\r\n      let success = false;\r\n\r\n      if (display.technology === 'chromecast') {\r\n        success = await this.connectChromecast(display, options);\r\n      } else if (display.technology === 'airplay') {\r\n        success = await this.connectAirPlay(display, options);\r\n      }\r\n\r\n      if (success) {\r\n        this.updateState({\r\n          currentDisplay: display,\r\n          isMirroring: false,\r\n          isWirelessCasting: true,\r\n        });\r\n      }\r\n\r\n      return success;\r\n    } catch (error) {\r\n      console.error('Failed to connect wireless display:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Connect to Chromecast device\r\n  private async connectChromecast(\r\n    display: ExternalDisplay,\r\n    options: TeleprompterDisplayOptions\r\n  ): Promise<boolean> {\r\n    try {\r\n      if (NativeModules.GoogleCastModule?.connect) {\r\n        return await NativeModules.GoogleCastModule.connect(display.id, {\r\n          appId: 'your-cast-app-id', // Custom receiver app for SpeakSync\r\n          sessionData: {\r\n            teleprompterOptions: options,\r\n          },\r\n        });\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to connect Chromecast:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Connect to AirPlay device\r\n  private async connectAirPlay(\r\n    display: ExternalDisplay,\r\n    options: TeleprompterDisplayOptions\r\n  ): Promise<boolean> {\r\n    try {\r\n      if (Platform.OS === 'ios' && NativeModules.AirPlayModule?.connect) {\r\n        return await NativeModules.AirPlayModule.connect(display.id, options);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Failed to connect AirPlay:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Update content on external display\r\n  async updateDisplayContent(\r\n    scriptContent: string,\r\n    currentPosition: number,\r\n    highlightedWords?: number[]\r\n  ): Promise<void> {\r\n    try {\r\n      const { currentDisplay, isMirroring, isWirelessCasting } = this.currentState;\r\n      \r\n      if (!currentDisplay) return;\r\n\r\n      if (isMirroring && NativeModules.ExternalDisplayModule?.updateContent) {\r\n        await NativeModules.ExternalDisplayModule.updateContent({\r\n          content: scriptContent,\r\n          position: currentPosition,\r\n          highlightedWords,\r\n        });\r\n      } else if (isWirelessCasting) {\r\n        if (currentDisplay.technology === 'chromecast') {\r\n          await this.updateChromecastContent(scriptContent, currentPosition, highlightedWords);\r\n        } else if (currentDisplay.technology === 'airplay') {\r\n          await this.updateAirPlayContent(scriptContent, currentPosition, highlightedWords);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to update display content:', error);\r\n    }\r\n  }\r\n\r\n  // Update Chromecast content\r\n  private async updateChromecastContent(\r\n    scriptContent: string,\r\n    currentPosition: number,\r\n    highlightedWords?: number[]\r\n  ): Promise<void> {\r\n    if (NativeModules.GoogleCastModule?.sendMessage) {\r\n      await NativeModules.GoogleCastModule.sendMessage({\r\n        type: 'UPDATE_CONTENT',\r\n        data: {\r\n          content: scriptContent,\r\n          position: currentPosition,\r\n          highlightedWords,\r\n          timestamp: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Update AirPlay content\r\n  private async updateAirPlayContent(\r\n    scriptContent: string,\r\n    currentPosition: number,\r\n    highlightedWords?: number[]\r\n  ): Promise<void> {\r\n    if (Platform.OS === 'ios' && NativeModules.AirPlayModule?.updateContent) {\r\n      await NativeModules.AirPlayModule.updateContent({\r\n        content: scriptContent,\r\n        position: currentPosition,\r\n        highlightedWords,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Disconnect from current display\r\n  async disconnect(): Promise<void> {\r\n    try {\r\n      const { currentDisplay, isMirroring, isWirelessCasting } = this.currentState;\r\n      \r\n      if (!currentDisplay) return;\r\n\r\n      if (isMirroring && NativeModules.ExternalDisplayModule?.disconnect) {\r\n        await NativeModules.ExternalDisplayModule.disconnect();\r\n      } else if (isWirelessCasting) {\r\n        if (currentDisplay.technology === 'chromecast' && NativeModules.GoogleCastModule?.disconnect) {\r\n          await NativeModules.GoogleCastModule.disconnect();\r\n        } else if (currentDisplay.technology === 'airplay' && NativeModules.AirPlayModule?.disconnect) {\r\n          await NativeModules.AirPlayModule.disconnect();\r\n        }\r\n      }\r\n\r\n      this.updateState({\r\n        currentDisplay: null,\r\n        isMirroring: false,\r\n        isWirelessCasting: false,\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to disconnect display:', error);\r\n      this.updateState({ error: 'Failed to disconnect from external display' });\r\n    }\r\n  }\r\n\r\n  // Event handlers\r\n  private handleDisplayConnected(displayInfo: any): void {\r\n    this.scanForDisplays(); // Refresh available displays\r\n  }\r\n\r\n  private handleDisplayDisconnected(displayInfo: any): void {\r\n    const { currentDisplay } = this.currentState;\r\n    \r\n    if (currentDisplay && currentDisplay.id === displayInfo.id) {\r\n      this.updateState({\r\n        currentDisplay: null,\r\n        isMirroring: false,\r\n        isWirelessCasting: false,\r\n      });\r\n    }\r\n    \r\n    this.scanForDisplays(); // Refresh available displays\r\n  }\r\n\r\n  private handleCastStarted(sessionInfo: any): void {\r\n    this.updateState({ isWirelessCasting: true });\r\n  }\r\n\r\n  private handleCastEnded(sessionInfo: any): void {\r\n    this.updateState({\r\n      currentDisplay: null,\r\n      isWirelessCasting: false,\r\n    });\r\n  }\r\n\r\n  // Utility methods\r\n  private detectWiredTechnology(display: any): 'hdmi' | 'usb-c' | 'lightning' {\r\n    if (Platform.OS === 'ios') {\r\n      return 'lightning'; // or USB-C for newer devices\r\n    } else {\r\n      return display.type === 'usb' ? 'usb-c' : 'hdmi';\r\n    }\r\n  }\r\n\r\n  // State management\r\n  addListener(listener: (state: ExternalDisplayState) => void): void {\r\n    this.listeners.push(listener);\r\n  }\r\n\r\n  removeListener(listener: (state: ExternalDisplayState) => void): void {\r\n    this.listeners = this.listeners.filter(l => l !== listener);\r\n  }\r\n\r\n  private updateState(updates: Partial<ExternalDisplayState>): void {\r\n    this.currentState = { ...this.currentState, ...updates };\r\n    this.listeners.forEach(listener => listener(this.currentState));\r\n  }\r\n\r\n  getCurrentState(): ExternalDisplayState {\r\n    return { ...this.currentState };\r\n  }\r\n}\r\n\r\nexport const externalDisplayService = ExternalDisplayService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\feedbackService.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":142,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":142,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":142,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":142,"endColumn":20,"suggestions":[{"fix":{"range":[4205,4263],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'ErrorUtils' is not defined.","line":148,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":148,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'ErrorUtils' is not defined.","line":149,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":149,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4874,4877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4874,4877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":166,"column":40,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":166,"endColumn":47,"fix":{"range":[4938,4945],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":227,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":227,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":227,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":227,"endColumn":20,"suggestions":[{"fix":{"range":[6886,6945],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":236,"column":13,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":238,"endColumn":6},{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":248,"column":13,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":250,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":323,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":323,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":323,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":323,"endColumn":20,"suggestions":[{"fix":{"range":[9740,9803],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":335,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":384,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":384,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":384,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":384,"endColumn":20,"suggestions":[{"fix":{"range":[11477,11540],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":414,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":414,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12438,12441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12438,12441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":427,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":427,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":427,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":427,"endColumn":22,"suggestions":[{"fix":{"range":[12776,12845],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":484,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":484,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14358,14361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14358,14361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":486,"column":21,"nodeType":"MemberExpression","endLine":486,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":487,"column":7,"nodeType":"MemberExpression","endLine":487,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":487,"column":24,"nodeType":"MemberExpression","endLine":487,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":497,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":497,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":497,"endColumn":20,"suggestions":[{"fix":{"range":[14778,14831],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":505,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":505,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":505,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":505,"endColumn":20,"suggestions":[{"fix":{"range":[15029,15080],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":513,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":513,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":513,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":513,"endColumn":20,"suggestions":[{"fix":{"range":[15296,15353],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\r\n * Feedback Service for SpeakSync\r\n * Handles user feedback, bug reports, feature requests, and diagnostic information\r\n */\r\n\r\nimport {\r\n  FeedbackSubmission,\r\n  FeedbackAttachment,\r\n  DiagnosticInfo,\r\n  UserContactInfo,\r\n  FeedbackSettings,\r\n  FeedbackCategory,\r\n  ErrorInfo,\r\n  UserAction,\r\n  PerformanceInfo\r\n} from '../types';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Platform } from 'react-native';\r\nimport NetInfo from '@react-native-community/netinfo';\r\n\r\nconst STORAGE_KEYS = {\r\n  FEEDBACK_SETTINGS: '@speaksync/feedback_settings',\r\n  PENDING_FEEDBACK: '@speaksync/pending_feedback',\r\n  USER_ACTIONS: '@speaksync/user_actions',\r\n  ERROR_LOGS: '@speaksync/error_logs'\r\n};\r\n\r\nconst DEFAULT_CATEGORIES: FeedbackCategory[] = [\r\n  {\r\n    id: 'bug_report',\r\n    name: 'Bug Report',\r\n    description: 'Report issues or unexpected behavior',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: false,\r\n    suggestedActions: ['Take screenshot', 'Describe steps to reproduce', 'Include device info']\r\n  },\r\n  {\r\n    id: 'feature_request',\r\n    name: 'Feature Request',\r\n    description: 'Suggest new features or improvements',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: false,\r\n    suggestedActions: ['Describe the feature', 'Explain the use case', 'Compare with existing solutions']\r\n  },\r\n  {\r\n    id: 'ui_ux',\r\n    name: 'UI/UX Feedback',\r\n    description: 'Feedback about user interface and experience',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: true,\r\n    suggestedActions: ['Take screenshot', 'Describe the issue', 'Suggest improvements']\r\n  },\r\n  {\r\n    id: 'performance',\r\n    name: 'Performance Issue',\r\n    description: 'Report slow performance or crashes',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: false,\r\n    suggestedActions: ['Include device specs', 'Describe when it happens', 'Close other apps']\r\n  },\r\n  {\r\n    id: 'content',\r\n    name: 'Content Feedback',\r\n    description: 'Feedback about content, help docs, or tutorials',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: false,\r\n    suggestedActions: ['Specify the content', 'Suggest improvements', 'Rate helpfulness']\r\n  },\r\n  {\r\n    id: 'general',\r\n    name: 'General Feedback',\r\n    description: 'Any other feedback or suggestions',\r\n    icon: '',\r\n    isDefault: true,\r\n    requiresAttachment: false,\r\n    suggestedActions: ['Be specific', 'Provide context', 'Suggest alternatives']\r\n  }\r\n];\r\n\r\nclass FeedbackService {\r\n  private static instance: FeedbackService;\r\n  private settings: FeedbackSettings;\r\n  private userActions: UserAction[] = [];\r\n  private errorLogs: ErrorInfo[] = [];\r\n  private pendingFeedback: FeedbackSubmission[] = [];\r\n\r\n  private constructor() {\r\n    this.settings = {\r\n      enableAutoSubmission: false,\r\n      includeDiagnostics: true,\r\n      allowScreenshots: true,\r\n      shareUsageData: false,\r\n      contactPreferences: {\r\n        preferredContactMethod: 'in_app',\r\n        allowFollowUp: true,\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\r\n      },\r\n      categories: DEFAULT_CATEGORIES\r\n    };\r\n    this.loadSettings();\r\n    this.initializeErrorTracking();\r\n  }\r\n\r\n  static getInstance(): FeedbackService {\r\n    if (!FeedbackService.instance) {\r\n      FeedbackService.instance = new FeedbackService();\r\n    }\r\n    return FeedbackService.instance;\r\n  }\r\n\r\n  // Initialization\r\n  private async loadSettings(): Promise<void> {\r\n    try {\r\n      const [settings, actions, errors, pending] = await Promise.all([\r\n        AsyncStorage.getItem(STORAGE_KEYS.FEEDBACK_SETTINGS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.USER_ACTIONS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.ERROR_LOGS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.PENDING_FEEDBACK)\r\n      ]);\r\n\r\n      if (settings) {\r\n        this.settings = { ...this.settings, ...JSON.parse(settings) };\r\n      }\r\n\r\n      if (actions) {\r\n        this.userActions = JSON.parse(actions);\r\n      }\r\n\r\n      if (errors) {\r\n        this.errorLogs = JSON.parse(errors);\r\n      }\r\n\r\n      if (pending) {\r\n        this.pendingFeedback = JSON.parse(pending);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load feedback settings:', error);\r\n    }\r\n  }\r\n\r\n  private initializeErrorTracking(): void {\r\n    // Set up global error handler\r\n    const originalHandler = ErrorUtils.getGlobalHandler();\r\n    ErrorUtils.setGlobalHandler((error, isFatal) => {\r\n      this.logError({\r\n        message: error.message,\r\n        stack: error.stack,\r\n        timestamp: Date.now(),\r\n        context: 'global',\r\n        userAction: 'unknown'\r\n      });\r\n      \r\n      if (originalHandler) {\r\n        originalHandler(error, isFatal);\r\n      }\r\n    });\r\n  }\r\n\r\n  // User Action Tracking\r\n  async trackUserAction(action: string, screen: string, data?: { [key: string]: any }): Promise<void> {\r\n    if (!this.settings.shareUsageData) return;\r\n\r\n    const userAction: UserAction = {\r\n      action,\r\n      screen,\r\n      timestamp: Date.now(),\r\n      data\r\n    };\r\n\r\n    this.userActions.push(userAction);\r\n\r\n    // Keep only last 100 actions\r\n    if (this.userActions.length > 100) {\r\n      this.userActions = this.userActions.slice(-100);\r\n    }\r\n\r\n    await this.saveUserActions();\r\n  }\r\n\r\n  // Error Logging\r\n  async logError(errorInfo: ErrorInfo): Promise<void> {\r\n    this.errorLogs.push(errorInfo);\r\n\r\n    // Keep only last 50 errors\r\n    if (this.errorLogs.length > 50) {\r\n      this.errorLogs = this.errorLogs.slice(-50);\r\n    }\r\n\r\n    await this.saveErrorLogs();\r\n\r\n    // Auto-submit critical errors if enabled\r\n    if (this.settings.enableAutoSubmission && errorInfo.message.includes('crash')) {\r\n      await this.submitAutomaticBugReport(errorInfo);\r\n    }\r\n  }\r\n\r\n  // Diagnostic Information\r\n  async collectDiagnosticInfo(): Promise<DiagnosticInfo> {\r\n    try {\r\n      const networkState = await NetInfo.fetch();\r\n      \r\n      const performanceInfo = await this.getPerformanceInfo();\r\n      const recentActions = this.userActions.slice(-10); // Last 10 actions\r\n      const lastError = this.errorLogs.length > 0 ? this.errorLogs[this.errorLogs.length - 1] : undefined;\r\n\r\n      return {\r\n        appVersion: '1.0.0', // Would get from app config\r\n        buildNumber: '1',\r\n        platform: Platform.OS as 'ios' | 'android',\r\n        osVersion: Platform.Version.toString(),\r\n        deviceModel: Platform.OS === 'ios' ? 'iPhone' : 'Android Device',\r\n        deviceId: Math.random().toString(36).substring(2, 10), // Anonymized random ID\r\n        memoryUsage: 100, // Mock value\r\n        diskSpace: 1000, // Mock value\r\n        networkStatus: networkState.isConnected ? \r\n          (networkState.type === 'wifi' ? 'online' : 'poor') : 'offline',\r\n        lastError,\r\n        recentActions,\r\n        performance: performanceInfo\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to collect diagnostic info:', error);\r\n      return this.getBasicDiagnosticInfo();\r\n    }\r\n  }\r\n\r\n  private async getMemoryUsage(): Promise<{ used: number; total: number }> {\r\n    try {\r\n      // This would need a native module to get real memory info\r\n      return { used: 100, total: 1000 }; // Mock values in MB\r\n    } catch {\r\n      return { used: 0, total: 0 };\r\n    }\r\n  }\r\n\r\n  private async getDiskSpace(): Promise<{ free: number; total: number }> {\r\n    try {\r\n      // Mock values since we removed DeviceInfo dependency\r\n      return { \r\n        free: 1000, // MB\r\n        total: 4000 // MB\r\n      };\r\n    } catch {\r\n      return { free: 0, total: 0 };\r\n    }\r\n  }\r\n\r\n  private async getPerformanceInfo(): Promise<PerformanceInfo> {\r\n    return {\r\n      averageFPS: 60, // Would need performance monitoring\r\n      memoryLeaks: false,\r\n      crashCount: this.errorLogs.filter(e => e.message.includes('crash')).length,\r\n      slowOperations: [],\r\n      renderTimes: []\r\n    };\r\n  }\r\n\r\n  private getBasicDiagnosticInfo(): DiagnosticInfo {\r\n    return {\r\n      appVersion: '1.0.0',\r\n      buildNumber: '1',\r\n      platform: Platform.OS as 'ios' | 'android',\r\n      osVersion: Platform.Version.toString(),\r\n      deviceModel: 'Unknown',\r\n      deviceId: 'unknown',\r\n      memoryUsage: 0,\r\n      diskSpace: 0,\r\n      networkStatus: 'offline' as const,\r\n      recentActions: [],\r\n      performance: {\r\n        averageFPS: 0,\r\n        memoryLeaks: false,\r\n        crashCount: 0,\r\n        slowOperations: [],\r\n        renderTimes: []\r\n      }\r\n    };\r\n  }\r\n\r\n  // Feedback Submission\r\n  async submitFeedback(\r\n    type: FeedbackSubmission['type'],\r\n    category: string,\r\n    title: string,\r\n    description: string,\r\n    priority: FeedbackSubmission['priority'] = 'medium',\r\n    attachments: FeedbackAttachment[] = [],\r\n    userContact?: Partial<UserContactInfo>\r\n  ): Promise<string> {\r\n    \r\n    const feedbackId = `feedback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    \r\n    const submission: FeedbackSubmission = {\r\n      id: feedbackId,\r\n      type,\r\n      category: category as FeedbackSubmission['category'],\r\n      title,\r\n      description,\r\n      priority,\r\n      attachments,\r\n      diagnostics: this.settings.includeDiagnostics ? await this.collectDiagnosticInfo() : undefined,\r\n      userContact: userContact ? { ...this.settings.contactPreferences, ...userContact } : undefined,\r\n      status: 'submitted',\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n      isAnonymous: !userContact?.email\r\n    };\r\n\r\n    // Add to pending submissions\r\n    this.pendingFeedback.push(submission);\r\n    await this.savePendingFeedback();\r\n\r\n    // Try to submit immediately\r\n    try {\r\n      await this.uploadFeedback(submission);\r\n      submission.status = 'reviewing';\r\n    } catch (error) {\r\n      console.error('Failed to submit feedback immediately:', error);\r\n      // Will retry later\r\n    }\r\n\r\n    return feedbackId;\r\n  }\r\n\r\n  private async uploadFeedback(submission: FeedbackSubmission): Promise<void> {\r\n    // This would integrate with your backend API\r\n    const endpoint = 'https://api.speaksync.app/feedback';\r\n    \r\n    try {\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(submission)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      // Remove from pending after successful upload\r\n      this.pendingFeedback = this.pendingFeedback.filter(f => f.id !== submission.id);\r\n      await this.savePendingFeedback();\r\n      \r\n    } catch (error) {\r\n      throw new Error(`Failed to upload feedback: ${(error as Error).message}`);\r\n    }\r\n  }\r\n\r\n  // Automatic Bug Report\r\n  private async submitAutomaticBugReport(errorInfo: ErrorInfo): Promise<void> {\r\n    const title = `Auto-reported: ${errorInfo.message.substring(0, 50)}...`;\r\n    const description = `\r\nAutomatic bug report generated from error:\r\n\r\nContext: ${errorInfo.context}\r\nUser Action: ${errorInfo.userAction}\r\nTimestamp: ${new Date(errorInfo.timestamp).toISOString()}\r\n\r\nError Details:\r\n${errorInfo.message}\r\n\r\nStack Trace:\r\n${errorInfo.stack || 'Not available'}\r\n    `;\r\n\r\n    try {\r\n      await this.submitFeedback(\r\n        'bug_report',\r\n        'performance',\r\n        title,\r\n        description.trim(),\r\n        'high',\r\n        [],\r\n        { allowFollowUp: false, preferredContactMethod: 'none' }\r\n      );\r\n    } catch (error) {\r\n      console.error('Failed to submit automatic bug report:', error);\r\n    }\r\n  }\r\n\r\n  // Attachment Handling\r\n  async addScreenshot(uri: string, description?: string): Promise<FeedbackAttachment> {\r\n    const attachment: FeedbackAttachment = {\r\n      id: `screenshot_${Date.now()}`,\r\n      type: 'screenshot',\r\n      filename: `screenshot_${Date.now()}.png`,\r\n      size: 0, // Would need to get actual file size\r\n      localPath: uri,\r\n      description\r\n    };\r\n\r\n    return attachment;\r\n  }\r\n\r\n  async addLogFile(logs: string[], description?: string): Promise<FeedbackAttachment> {\r\n    const content = logs.join('\\n');\r\n    const attachment: FeedbackAttachment = {\r\n      id: `logs_${Date.now()}`,\r\n      type: 'log_file',\r\n      filename: `logs_${Date.now()}.txt`,\r\n      size: content.length,\r\n      description\r\n    };\r\n\r\n    // Store logs content in the attachment for now\r\n    // In a real implementation, you'd save to a temporary file\r\n    (attachment as any).content = content;\r\n\r\n    return attachment;\r\n  }\r\n\r\n  // Retry Pending Submissions\r\n  async retryPendingSubmissions(): Promise<void> {\r\n    const failed: FeedbackSubmission[] = [];\r\n\r\n    for (const submission of this.pendingFeedback) {\r\n      try {\r\n        await this.uploadFeedback(submission);\r\n      } catch (error) {\r\n        console.error(`Failed to retry submission ${submission.id}:`, error);\r\n        failed.push(submission);\r\n      }\r\n    }\r\n\r\n    this.pendingFeedback = failed;\r\n    await this.savePendingFeedback();\r\n  }\r\n\r\n  // Settings Management\r\n  async updateSettings(settings: Partial<FeedbackSettings>): Promise<void> {\r\n    this.settings = { ...this.settings, ...settings };\r\n    await AsyncStorage.setItem(STORAGE_KEYS.FEEDBACK_SETTINGS, JSON.stringify(this.settings));\r\n  }\r\n\r\n  getSettings(): FeedbackSettings {\r\n    return this.settings;\r\n  }\r\n\r\n  getCategories(): FeedbackCategory[] {\r\n    return this.settings.categories;\r\n  }\r\n\r\n  getCategoryById(id: string): FeedbackCategory | null {\r\n    return this.settings.categories.find(c => c.id === id) || null;\r\n  }\r\n\r\n  // Data Access\r\n  getPendingFeedback(): FeedbackSubmission[] {\r\n    return this.pendingFeedback;\r\n  }\r\n\r\n  getRecentErrors(): ErrorInfo[] {\r\n    return this.errorLogs.slice(-10);\r\n  }\r\n\r\n  getRecentActions(): UserAction[] {\r\n    return this.userActions.slice(-20);\r\n  }\r\n\r\n  // Analytics\r\n  getFeedbackStats(): {\r\n    totalSubmitted: number;\r\n    byType: { [key: string]: number };\r\n    byCategory: { [key: string]: number };\r\n    byPriority: { [key: string]: number };\r\n  } {\r\n    const submitted = this.pendingFeedback.filter(f => f.status !== 'submitted');\r\n    \r\n    return {\r\n      totalSubmitted: submitted.length,\r\n      byType: this.groupBy(submitted, 'type'),\r\n      byCategory: this.groupBy(submitted, 'category'),\r\n      byPriority: this.groupBy(submitted, 'priority')\r\n    };\r\n  }\r\n\r\n  private groupBy(array: any[], key: string): { [key: string]: number } {\r\n    return array.reduce((result, item) => {\r\n      const group = item[key];\r\n      result[group] = (result[group] || 0) + 1;\r\n      return result;\r\n    }, {});\r\n  }\r\n\r\n  // Storage\r\n  private async saveUserActions(): Promise<void> {\r\n    try {\r\n      await AsyncStorage.setItem(STORAGE_KEYS.USER_ACTIONS, JSON.stringify(this.userActions));\r\n    } catch (error) {\r\n      console.error('Failed to save user actions:', error);\r\n    }\r\n  }\r\n\r\n  private async saveErrorLogs(): Promise<void> {\r\n    try {\r\n      await AsyncStorage.setItem(STORAGE_KEYS.ERROR_LOGS, JSON.stringify(this.errorLogs));\r\n    } catch (error) {\r\n      console.error('Failed to save error logs:', error);\r\n    }\r\n  }\r\n\r\n  private async savePendingFeedback(): Promise<void> {\r\n    try {\r\n      await AsyncStorage.setItem(STORAGE_KEYS.PENDING_FEEDBACK, JSON.stringify(this.pendingFeedback));\r\n    } catch (error) {\r\n      console.error('Failed to save pending feedback:', error);\r\n    }\r\n  }\r\n\r\n  // Cleanup\r\n  async clearOldData(): Promise<void> {\r\n    const thirtyDaysAgo = Date.now() - (30 * 24 * 60 * 60 * 1000);\r\n    \r\n    // Clear old user actions\r\n    this.userActions = this.userActions.filter(action => action.timestamp > thirtyDaysAgo);\r\n    \r\n    // Clear old error logs\r\n    this.errorLogs = this.errorLogs.filter(error => error.timestamp > thirtyDaysAgo);\r\n    \r\n    // Save cleaned data\r\n    await Promise.all([\r\n      this.saveUserActions(),\r\n      this.saveErrorLogs()\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default FeedbackService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\fillerWordDetectionService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'detection' is defined but never used.","line":20,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"detection"},"fix":{"range":[614,644],"text":""},"desc":"Remove unused variable 'detection'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":21,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[683,705],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'detection' is defined but never used.","line":33,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"detection"},"fix":{"range":[976,1006],"text":""},"desc":"Remove unused variable 'detection'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":34,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1039,1061],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":42,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":16,"suggestions":[{"fix":{"range":[1313,1417],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":49,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":49,"endColumn":31,"fix":{"range":[1538,1545],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":57,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":16,"suggestions":[{"fix":{"range":[1749,1802],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":65,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":65,"endColumn":32,"fix":{"range":[1951,1958],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":16,"suggestions":[{"fix":{"range":[1998,2049],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":69,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":69,"endColumn":16,"suggestions":[{"fix":{"range":[2055,2123],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":16,"suggestions":[{"fix":{"range":[2129,2205],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":82,"column":51,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":82,"endColumn":63,"fix":{"range":[2480,2492],"text":"{return null;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":113,"column":51,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":113,"endColumn":61,"fix":{"range":[3263,3273],"text":"{return [];}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":180,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":180,"endColumn":38,"fix":{"range":[5278,5290],"text":"{return true;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'for' condition.","line":200,"column":44,"nodeType":"ForStatement","messageId":"missingCurlyAfterCondition","endLine":200,"endColumn":61,"fix":{"range":[5954,5971],"text":"{matrix[0][i] = i;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":200,"column":44,"nodeType":"MemberExpression","endLine":200,"endColumn":56},{"ruleId":"curly","severity":2,"message":"Expected { after 'for' condition.","line":201,"column":44,"nodeType":"ForStatement","messageId":"missingCurlyAfterCondition","endLine":201,"endColumn":61,"fix":{"range":[6016,6033],"text":"{matrix[j][0] = j;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":201,"column":44,"nodeType":"MemberExpression","endLine":201,"endColumn":53},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":206,"column":9,"nodeType":"MemberExpression","endLine":206,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":206,"column":9,"nodeType":"MemberExpression","endLine":206,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":207,"column":11,"nodeType":"MemberExpression","endLine":207,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":208,"column":11,"nodeType":"MemberExpression","endLine":208,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":261,"column":5,"nodeType":"MemberExpression","endLine":261,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":262,"column":8,"nodeType":"MemberExpression","endLine":262,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":271,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":271,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":271,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":271,"endColumn":16,"suggestions":[{"fix":{"range":[7852,7935],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":318,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":318,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":318,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":318,"endColumn":16,"suggestions":[{"fix":{"range":[9266,9320],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":341,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":341,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":341,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":341,"endColumn":16,"suggestions":[{"fix":{"range":[9705,9748],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":391,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":391,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":391,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":391,"endColumn":16,"suggestions":[{"fix":{"range":[10830,10885],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":7,"fixableWarningCount":0,"source":"import { \r\n  FillerWordSettings, \r\n  FillerWordState, \r\n  FillerWordDetection,\r\n  ScriptAnalysis \r\n} from '../types';\r\n\r\n/**\r\n * Filler Word Detection Service\r\n * Detects and tracks filler words using STT output and rule-based processing\r\n * Provides real-time visual cues and session analysis\r\n */\r\nexport class FillerWordDetectionService {\r\n  private settings: FillerWordSettings = this.getDefaultSettings();\r\n  private state: FillerWordState = this.getInitialState();\r\n  private scriptAnalysis: ScriptAnalysis | null = null;\r\n  private isActive = false;\r\n  \r\n  // Event callbacks\r\n  private onFillerDetected?: (detection: FillerWordDetection) => void;\r\n  private onStateUpdate?: (state: FillerWordState) => void;\r\n  \r\n  constructor() {\r\n    this.reset();\r\n  }\r\n\r\n  /**\r\n   * Initialize filler word detection with script and settings\r\n   */\r\n  public initialize(\r\n    scriptAnalysis: ScriptAnalysis,\r\n    settings: Partial<FillerWordSettings> = {},\r\n    onFillerDetected?: (detection: FillerWordDetection) => void,\r\n    onStateUpdate?: (state: FillerWordState) => void\r\n  ): void {\r\n    this.scriptAnalysis = scriptAnalysis;\r\n    this.settings = { ...this.getDefaultSettings(), ...settings };\r\n    this.onFillerDetected = onFillerDetected;\r\n    this.onStateUpdate = onStateUpdate;\r\n    \r\n    this.reset();\r\n    console.log('Filler word detection initialized with', this.settings.fillerWords.length, 'filler words');\r\n  }\r\n\r\n  /**\r\n   * Start filler word detection session\r\n   */\r\n  public startSession(): void {\r\n    if (this.isActive) return;\r\n    \r\n    this.isActive = true;\r\n    this.state.sessionStartTime = Date.now();\r\n    this.state.detectedFillers = [];\r\n    this.state.totalFillerCount = 0;\r\n    this.state.commonFillers = {};\r\n    \r\n    console.log('Filler word detection session started');\r\n    this.notifyStateUpdate();\r\n  }\r\n\r\n  /**\r\n   * End filler word detection session\r\n   */\r\n  public endSession(): void {\r\n    if (!this.isActive) return;\r\n    \r\n    this.isActive = false;\r\n    console.log('Filler word detection session ended');\r\n    console.log('Total fillers detected:', this.state.totalFillerCount);\r\n    console.log('Filler rate:', this.state.fillerRate.toFixed(2), 'per minute');\r\n  }\r\n\r\n  /**\r\n   * Process word from STT for filler detection\r\n   */\r\n  public processSTTWord(\r\n    word: string,\r\n    confidence: number,\r\n    timestamp: number,\r\n    wordIndex?: number\r\n  ): FillerWordDetection | null {\r\n    if (!this.isActive || !this.settings.enabled) return null;\r\n\r\n    const normalizedWord = this.normalizeWord(word);\r\n    \r\n    // Check if word is a filler using STT-based detection\r\n    const isFillerBySTT = this.isFillerWordSTT(normalizedWord, confidence);\r\n    \r\n    if (isFillerBySTT) {\r\n      const detection = this.createFillerDetection(\r\n        word,\r\n        timestamp,\r\n        wordIndex || -1,\r\n        confidence,\r\n        'stt'\r\n      );\r\n      \r\n      this.addFillerDetection(detection);\r\n      return detection;\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Process transcript text for rule-based filler detection\r\n   */\r\n  public processTranscriptText(\r\n    text: string,\r\n    timestamp: number,\r\n    startWordIndex: number = 0\r\n  ): FillerWordDetection[] {\r\n    if (!this.isActive || !this.settings.enabled) return [];\r\n\r\n    const detections: FillerWordDetection[] = [];\r\n    const words = text.split(/\\s+/);\r\n    \r\n    words.forEach((word, index) => {\r\n      const normalizedWord = this.normalizeWord(word);\r\n      \r\n      if (this.isFillerWordRuleBased(normalizedWord)) {\r\n        const detection = this.createFillerDetection(\r\n          word,\r\n          timestamp + (index * 200), // Estimate timing\r\n          startWordIndex + index,\r\n          0.8, // Rule-based confidence\r\n          'rule-based'\r\n        );\r\n        \r\n        detections.push(detection);\r\n        this.addFillerDetection(detection);\r\n      }\r\n    });\r\n    \r\n    return detections;\r\n  }\r\n\r\n  /**\r\n   * Check if word is filler using STT confidence and patterns\r\n   */\r\n  private isFillerWordSTT(word: string, confidence: number): boolean {\r\n    // Lower confidence threshold for known fillers\r\n    const fillerConfidenceThreshold = this.getConfidenceThreshold();\r\n    \r\n    if (confidence < fillerConfidenceThreshold) {\r\n      return false;\r\n    }\r\n    \r\n    // Check against known filler words\r\n    return this.settings.fillerWords.some(filler => \r\n      this.fuzzyMatchFiller(word, filler)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Check if word is filler using rule-based detection\r\n   */\r\n  private isFillerWordRuleBased(word: string): boolean {\r\n    // Exact match against filler word list\r\n    if (this.settings.fillerWords.includes(word)) {\r\n      return true;\r\n    }\r\n    \r\n    // Pattern-based detection\r\n    const fillerPatterns = [\r\n      /^(um+|uh+|er+|ah+)$/i,           // Vocal hesitations\r\n      /^(like|you know|so|well)$/i,      // Common fillers\r\n      /^(basically|actually|literally)$/i, // Overused words\r\n      /^(kinda|sorta|gonna|wanna)$/i,    // Informal contractions\r\n    ];\r\n    \r\n    return fillerPatterns.some(pattern => pattern.test(word));\r\n  }\r\n\r\n  /**\r\n   * Fuzzy match for filler words (handles variations)\r\n   */\r\n  private fuzzyMatchFiller(word: string, filler: string): boolean {\r\n    // Exact match\r\n    if (word === filler) return true;\r\n    \r\n    // Handle elongated versions (e.g., \"umm\", \"uhhh\")\r\n    if (filler.length <= 3 && word.startsWith(filler)) {\r\n      const extraChars = word.slice(filler.length);\r\n      return extraChars.length <= 3 && /^[aeiou]*$/.test(extraChars);\r\n    }\r\n    \r\n    // Levenshtein distance for typos\r\n    return this.levenshteinDistance(word, filler) <= 1;\r\n  }\r\n\r\n  /**\r\n   * Calculate Levenshtein distance for fuzzy matching\r\n   */\r\n  private levenshteinDistance(str1: string, str2: string): number {\r\n    const matrix = Array(str2.length + 1).fill(null).map(() => \r\n      Array(str1.length + 1).fill(null)\r\n    );\r\n    \r\n    for (let i = 0; i <= str1.length; i++) matrix[0][i] = i;\r\n    for (let j = 0; j <= str2.length; j++) matrix[j][0] = j;\r\n    \r\n    for (let j = 1; j <= str2.length; j++) {\r\n      for (let i = 1; i <= str1.length; i++) {\r\n        const substitutionCost = str1[i - 1] === str2[j - 1] ? 0 : 1;\r\n        matrix[j][i] = Math.min(\r\n          matrix[j][i - 1] + 1,     // deletion\r\n          matrix[j - 1][i] + 1,     // insertion\r\n          matrix[j - 1][i - 1] + substitutionCost // substitution\r\n        );\r\n      }\r\n    }\r\n    \r\n    return matrix[str2.length][str1.length];\r\n  }\r\n\r\n  /**\r\n   * Get confidence threshold based on sensitivity setting\r\n   */\r\n  private getConfidenceThreshold(): number {\r\n    switch (this.settings.sensitivity) {\r\n      case 'low': return 0.8;\r\n      case 'medium': return 0.6;\r\n      case 'high': return 0.4;\r\n      default: return 0.6;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create filler detection object\r\n   */\r\n  private createFillerDetection(\r\n    word: string,\r\n    timestamp: number,\r\n    wordIndex: number,\r\n    confidence: number,\r\n    method: 'stt' | 'rule-based'\r\n  ): FillerWordDetection {\r\n    return {\r\n      word,\r\n      timestamp,\r\n      wordIndex,\r\n      confidence,\r\n      detectionMethod: method,\r\n      position: {\r\n        start: 0,\r\n        end: word.length,\r\n      },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Add filler detection to state and update metrics\r\n   */\r\n  private addFillerDetection(detection: FillerWordDetection): void {\r\n    this.state.detectedFillers.push(detection);\r\n    this.state.totalFillerCount++;\r\n    \r\n    // Update common fillers count\r\n    const normalizedWord = this.normalizeWord(detection.word);\r\n    this.state.commonFillers[normalizedWord] = \r\n      (this.state.commonFillers[normalizedWord] || 0) + 1;\r\n    \r\n    // Update filler rate\r\n    this.updateFillerRate();\r\n    \r\n    // Notify listeners\r\n    this.onFillerDetected?.(detection);\r\n    this.notifyStateUpdate();\r\n    \r\n    console.log(`Filler detected: \"${detection.word}\" (${detection.detectionMethod})`);\r\n  }\r\n\r\n  /**\r\n   * Update filler rate (fillers per minute)\r\n   */\r\n  private updateFillerRate(): void {\r\n    const sessionDuration = (Date.now() - this.state.sessionStartTime) / 1000 / 60; // minutes\r\n    if (sessionDuration > 0) {\r\n      this.state.fillerRate = this.state.totalFillerCount / sessionDuration;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Normalize word for comparison\r\n   */\r\n  private normalizeWord(word: string): string {\r\n    return word.toLowerCase()\r\n      .replace(/[^\\w\\s]/g, '') // Remove punctuation\r\n      .trim();\r\n  }\r\n\r\n  /**\r\n   * Get filler words detected in the last N seconds\r\n   */\r\n  public getRecentFillers(seconds: number = 10): FillerWordDetection[] {\r\n    const cutoffTime = Date.now() - (seconds * 1000);\r\n    return this.state.detectedFillers.filter(\r\n      detection => detection.timestamp >= cutoffTime\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get most common filler words\r\n   */\r\n  public getMostCommonFillers(limit: number = 5): Array<{word: string, count: number}> {\r\n    return Object.entries(this.state.commonFillers)\r\n      .sort(([,a], [,b]) => b - a)\r\n      .slice(0, limit)\r\n      .map(([word, count]) => ({ word, count }));\r\n  }\r\n\r\n  /**\r\n   * Update settings\r\n   */\r\n  public updateSettings(newSettings: Partial<FillerWordSettings>): void {\r\n    this.settings = { ...this.settings, ...newSettings };\r\n    console.log('Filler word detection settings updated');\r\n  }\r\n\r\n  /**\r\n   * Get current state\r\n   */\r\n  public getState(): FillerWordState {\r\n    return { ...this.state };\r\n  }\r\n\r\n  /**\r\n   * Get current settings\r\n   */\r\n  public getSettings(): FillerWordSettings {\r\n    return { ...this.settings };\r\n  }\r\n\r\n  /**\r\n   * Reset state\r\n   */\r\n  public reset(): void {\r\n    this.state = this.getInitialState();\r\n    this.isActive = false;\r\n    console.log('Filler word detection reset');\r\n  }\r\n\r\n  /**\r\n   * Notify state update\r\n   */\r\n  private notifyStateUpdate(): void {\r\n    this.onStateUpdate?.(this.getState());\r\n  }\r\n\r\n  /**\r\n   * Default settings\r\n   */\r\n  private getDefaultSettings(): FillerWordSettings {\r\n    return {\r\n      enabled: true,\r\n      fillerWords: [\r\n        'um', 'uh', 'er', 'ah', 'hmm',\r\n        'like', 'you know', 'so', 'well', 'basically',\r\n        'actually', 'literally', 'totally', 'really',\r\n        'kinda', 'sorta', 'gonna', 'wanna',\r\n        'right', 'okay', 'alright', 'yeah'\r\n      ],\r\n      visualCueType: 'highlight',\r\n      iconType: 'warning',\r\n      cueColor: '#F59E0B',\r\n      showInRealTime: true,\r\n      trackInSession: true,\r\n      sensitivity: 'medium',\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initial state\r\n   */\r\n  private getInitialState(): FillerWordState {\r\n    return {\r\n      detectedFillers: [],\r\n      totalFillerCount: 0,\r\n      fillerRate: 0,\r\n      sessionStartTime: Date.now(),\r\n      commonFillers: {},\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Cleanup resources\r\n   */\r\n  public destroy(): void {\r\n    this.isActive = false;\r\n    console.log('Filler word detection service destroyed');\r\n  }\r\n}\r\n\r\nexport const fillerWordDetectionService = new FillerWordDetectionService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\firebase.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'connectAuthEmulator' is defined but never used.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"connectAuthEmulator"},"fix":{"range":[63,84],"text":""},"desc":"Remove unused variable 'connectAuthEmulator'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'connectAuthEmulator' is defined but never used.","line":2,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":38},{"ruleId":"no-unused-vars","severity":2,"message":"'connectFirestoreEmulator' is defined but never used.","line":3,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"connectFirestoreEmulator"},"fix":{"range":[131,157],"text":""},"desc":"Remove unused variable 'connectFirestoreEmulator'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'connectFirestoreEmulator' is defined but never used.","line":3,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'__DEV__' is not defined.","line":26,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":12}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { initializeApp } from 'firebase/app';\r\nimport { getAuth, connectAuthEmulator } from 'firebase/auth';\r\nimport { getFirestore, connectFirestoreEmulator } from 'firebase/firestore';\r\nimport Constants from 'expo-constants';\r\n\r\n// Firebase configuration using Expo Constants\r\nconst firebaseConfig = {\r\n  apiKey: Constants.expoConfig?.extra?.firebaseApiKey || \"AIzaSyB17iE1vMzqfyTMhjTnues5mq5R5BRLBe8\",\r\n  authDomain: Constants.expoConfig?.extra?.firebaseAuthDomain || \"speaksyncmobile.firebaseapp.com\",\r\n  projectId: Constants.expoConfig?.extra?.firebaseProjectId || \"speaksyncmobile\",\r\n  storageBucket: Constants.expoConfig?.extra?.firebaseStorageBucket || \"speaksyncmobile.appspot.com\",\r\n  messagingSenderId: Constants.expoConfig?.extra?.firebaseMessagingSenderId || \"738419715683\",\r\n  appId: Constants.expoConfig?.extra?.firebaseAppId || \"1:738419715683:web:your_app_id_here\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Firebase Auth\r\nexport const auth = getAuth(app);\r\n\r\n// Initialize Cloud Firestore\r\nexport const db = getFirestore(app);\r\n\r\n// For development - connect to emulators\r\nif (__DEV__) {\r\n  // Uncomment these lines when using Firebase emulators\r\n  // connectAuthEmulator(auth, 'http://localhost:9099');\r\n  // connectFirestoreEmulator(db, 'localhost', 8080);\r\n}\r\n\r\nexport default app;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\gamificationService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'ProgressStats' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProgressStats"},"fix":{"range":[174,192],"text":""},"desc":"Remove unused variable 'ProgressStats'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProgressStats' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'AchievementRequirement' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"AchievementRequirement"},"fix":{"range":[232,259],"text":""},"desc":"Remove unused variable 'AchievementRequirement'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AchievementRequirement' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'analyticsService' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"analyticsService"},"fix":{"range":[429,483],"text":""},"desc":"Remove unused variable 'analyticsService'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analyticsService' is defined but never used.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":259,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":259,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":259,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":259,"endColumn":20,"suggestions":[{"fix":{"range":[6924,6982],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":303,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":303,"endColumn":36,"fix":{"range":[8122,8129],"text":"{return;}"}},{"ruleId":"prefer-const","severity":2,"message":"'baseXP' is never reassigned. Use 'const' instead.","line":363,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":363,"endColumn":15,"fix":{"range":[10169,10185],"text":"const baseXP = 20;"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":377,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":377,"endColumn":36,"fix":{"range":[10809,10816],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":479,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":479,"endColumn":42,"fix":{"range":[14226,14239],"text":"{return false;}"}},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":491,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":491,"endColumn":125,"suggestions":[{"messageId":"addBrackets","fix":{"range":[14543,14701],"text":"{ const fillerRate = (sessionReport.fillerWords.length / ((sessionReport.endTime - sessionReport.startTime) / 60000));\r\n        return fillerRate <= req.target; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":495,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":495,"endColumn":82,"suggestions":[{"messageId":"addBrackets","fix":{"range":[14746,14898],"text":"{ const dailyStreak = this.userStreaks.find(s => s.streakType === 'daily');\r\n        return dailyStreak ? dailyStreak.currentStreak >= req.target : false; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":575,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":575,"endColumn":38,"fix":{"range":[17292,17301],"text":"{continue;}"}},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":586,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":586,"endColumn":81,"suggestions":[{"messageId":"addBrackets","fix":{"range":[17648,17810],"text":"{ const consistencyImprovement = this.calculateConsistencyImprovement();\r\n          goal.current = Math.max(goal.current, consistencyImprovement);\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":629,"column":32,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":629,"endColumn":45},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":629,"column":68,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":629,"endColumn":81},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":673,"column":22,"nodeType":"MemberExpression","endLine":673,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":734,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":734,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":734,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":734,"endColumn":20,"suggestions":[{"fix":{"range":[22660,22722],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":5,"fixableWarningCount":0,"source":"/**\r\n * Gamification Service for SpeakSync\r\n * Handles achievements, streaks, progress tracking, and XP system\r\n */\r\n\r\nimport {\r\n  UserProgress,\r\n  Achievement,\r\n  UserStreak,\r\n  ProgressStats,\r\n  ProgressTrend,\r\n  ProgressDataPoint,\r\n  AchievementRequirement,\r\n  SocialShare,\r\n  WeeklyGoal,\r\n  GamificationData,\r\n  SessionSummaryReport\r\n} from '../types';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { analyticsService } from './analyticsService';\r\n\r\nconst STORAGE_KEYS = {\r\n  USER_PROGRESS: '@speaksync/user_progress',\r\n  ACHIEVEMENTS: '@speaksync/achievements',\r\n  STREAKS: '@speaksync/streaks',\r\n  WEEKLY_GOALS: '@speaksync/weekly_goals',\r\n  GAMIFICATION_SETTINGS: '@speaksync/gamification_settings'\r\n};\r\n\r\n// Predefined achievements\r\nconst ACHIEVEMENTS: Achievement[] = [\r\n  {\r\n    id: 'first_session',\r\n    name: 'First Steps',\r\n    description: 'Complete your first practice session',\r\n    icon: '',\r\n    category: 'sessions',\r\n    requirement: { type: 'sessions_count', target: 1 },\r\n    isSecret: false,\r\n    rarity: 'common',\r\n    points: 50\r\n  },\r\n  {\r\n    id: 'sessions_10',\r\n    name: 'Getting Started',\r\n    description: 'Complete 10 practice sessions',\r\n    icon: '',\r\n    category: 'sessions',\r\n    requirement: { type: 'sessions_count', target: 10 },\r\n    isSecret: false,\r\n    rarity: 'common',\r\n    points: 200\r\n  },\r\n  {\r\n    id: 'sessions_50',\r\n    name: 'Dedicated Speaker',\r\n    description: 'Complete 50 practice sessions',\r\n    icon: '',\r\n    category: 'sessions',\r\n    requirement: { type: 'sessions_count', target: 50 },\r\n    isSecret: false,\r\n    rarity: 'rare',\r\n    points: 750\r\n  },\r\n  {\r\n    id: 'sessions_100',\r\n    name: 'Master Speaker',\r\n    description: 'Complete 100 practice sessions',\r\n    icon: '',\r\n    category: 'sessions',\r\n    requirement: { type: 'sessions_count', target: 100 },\r\n    isSecret: false,\r\n    rarity: 'epic',\r\n    points: 1500\r\n  },\r\n  {\r\n    id: 'wpm_150',\r\n    name: 'Speed Demon',\r\n    description: 'Achieve 150 WPM in a session',\r\n    icon: '',\r\n    category: 'performance',\r\n    requirement: { type: 'wpm_target', target: 150 },\r\n    isSecret: false,\r\n    rarity: 'rare',\r\n    points: 500\r\n  },\r\n  {\r\n    id: 'wpm_200',\r\n    name: 'Lightning Speaker',\r\n    description: 'Achieve 200 WPM in a session',\r\n    icon: '',\r\n    category: 'performance',\r\n    requirement: { type: 'wpm_target', target: 200 },\r\n    isSecret: false,\r\n    rarity: 'epic',\r\n    points: 1000\r\n  },\r\n  {\r\n    id: 'filler_crusher',\r\n    name: 'Filler Word Crusher',\r\n    description: 'Achieve less than 2 filler words per minute',\r\n    icon: '',\r\n    category: 'performance',\r\n    requirement: { type: 'filler_reduction', target: 2 },\r\n    isSecret: false,\r\n    rarity: 'rare',\r\n    points: 600\r\n  },\r\n  {\r\n    id: 'streak_7',\r\n    name: 'Weekly Warrior',\r\n    description: 'Practice for 7 days in a row',\r\n    icon: '',\r\n    category: 'consistency',\r\n    requirement: { type: 'streak_days', target: 7 },\r\n    isSecret: false,\r\n    rarity: 'rare',\r\n    points: 800\r\n  },\r\n  {\r\n    id: 'streak_30',\r\n    name: 'Monthly Master',\r\n    description: 'Practice for 30 days in a row',\r\n    icon: '',\r\n    category: 'consistency',\r\n    requirement: { type: 'streak_days', target: 30 },\r\n    isSecret: false,\r\n    rarity: 'legendary',\r\n    points: 2500\r\n  },\r\n  {\r\n    id: 'first_bilingual',\r\n    name: 'Bilingual Speaker',\r\n    description: 'Practice in at least 2 different languages',\r\n    icon: '',\r\n    category: 'language',\r\n    requirement: { type: 'languages_used', target: 2 },\r\n    isSecret: false,\r\n    rarity: 'rare',\r\n    points: 700\r\n  },\r\n  {\r\n    id: 'polyglot',\r\n    name: 'Polyglot Master',\r\n    description: 'Practice in 5 different languages',\r\n    icon: '',\r\n    category: 'language',\r\n    requirement: { type: 'languages_used', target: 5 },\r\n    isSecret: false,\r\n    rarity: 'legendary',\r\n    points: 2000\r\n  },\r\n  {\r\n    id: 'master_pacer',\r\n    name: 'Master Pacer',\r\n    description: 'Maintain consistent pacing (>85% adherence) for 10 sessions',\r\n    icon: '',\r\n    category: 'consistency',\r\n    requirement: { \r\n      type: 'consistency_score', \r\n      target: 85,\r\n      conditions: { sessions_count: 10 }\r\n    },\r\n    isSecret: false,\r\n    rarity: 'epic',\r\n    points: 1200\r\n  },\r\n  {\r\n    id: 'marathon_speaker',\r\n    name: 'Marathon Speaker',\r\n    description: 'Complete a 60-minute practice session',\r\n    icon: '',\r\n    category: 'milestones',\r\n    requirement: { \r\n      type: 'total_time', \r\n      target: 60,\r\n      timeframe: 'daily',\r\n      conditions: { single_session: true }\r\n    },\r\n    isSecret: false,\r\n    rarity: 'epic',\r\n    points: 1000\r\n  }\r\n];\r\n\r\ninterface GamificationSettings {\r\n  enableAchievements: boolean;\r\n  enableStreaks: boolean;\r\n  enableXP: boolean;\r\n  enableWeeklyGoals: boolean;\r\n  showProgressGraphs: boolean;\r\n  allowSocialSharing: boolean;\r\n}\r\n\r\nclass GamificationService {\r\n  private static instance: GamificationService;\r\n  private userProgress: UserProgress | null = null;\r\n  private userAchievements: Achievement[] = [];\r\n  private userStreaks: UserStreak[] = [];\r\n  private weeklyGoals: WeeklyGoal[] = [];\r\n  private settings: GamificationSettings;\r\n\r\n  private constructor() {\r\n    this.settings = {\r\n      enableAchievements: true,\r\n      enableStreaks: true,\r\n      enableXP: true,\r\n      enableWeeklyGoals: true,\r\n      showProgressGraphs: true,\r\n      allowSocialSharing: true\r\n    };\r\n    this.loadGamificationData();\r\n  }\r\n\r\n  static getInstance(): GamificationService {\r\n    if (!GamificationService.instance) {\r\n      GamificationService.instance = new GamificationService();\r\n    }\r\n    return GamificationService.instance;\r\n  }\r\n\r\n  // Initialization\r\n  private async loadGamificationData(): Promise<void> {\r\n    try {\r\n      const [progress, achievements, streaks, goals, settings] = await Promise.all([\r\n        AsyncStorage.getItem(STORAGE_KEYS.USER_PROGRESS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.ACHIEVEMENTS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.STREAKS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.WEEKLY_GOALS),\r\n        AsyncStorage.getItem(STORAGE_KEYS.GAMIFICATION_SETTINGS)\r\n      ]);\r\n\r\n      if (progress) {\r\n        this.userProgress = JSON.parse(progress);\r\n      } else {\r\n        this.userProgress = this.createDefaultProgress();\r\n      }\r\n\r\n      if (achievements) {\r\n        this.userAchievements = JSON.parse(achievements);\r\n      }\r\n\r\n      if (streaks) {\r\n        this.userStreaks = JSON.parse(streaks);\r\n      } else {\r\n        this.userStreaks = [this.createDefaultStreak('daily'), this.createDefaultStreak('weekly')];\r\n      }\r\n\r\n      if (goals) {\r\n        this.weeklyGoals = JSON.parse(goals);\r\n      } else {\r\n        this.weeklyGoals = this.generateWeeklyGoals();\r\n      }\r\n\r\n      if (settings) {\r\n        this.settings = { ...this.settings, ...JSON.parse(settings) };\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load gamification data:', error);\r\n      this.initializeDefaults();\r\n    }\r\n  }\r\n\r\n  private createDefaultProgress(): UserProgress {\r\n    return {\r\n      level: 1,\r\n      totalXP: 0,\r\n      xpToNextLevel: 100,\r\n      totalSessions: 0,\r\n      totalTimeMinutes: 0,\r\n      achievements: [],\r\n      streaks: [],\r\n      stats: {\r\n        averageWPM: 0,\r\n        bestWPM: 0,\r\n        fillerWordRate: 0,\r\n        consistencyScore: 0,\r\n        languagesUsed: [],\r\n        improvementTrends: []\r\n      }\r\n    };\r\n  }\r\n\r\n  private createDefaultStreak(type: 'daily' | 'weekly'): UserStreak {\r\n    return {\r\n      currentStreak: 0,\r\n      longestStreak: 0,\r\n      lastPracticeDate: new Date(),\r\n      streakType: type,\r\n      isActive: false\r\n    };\r\n  }\r\n\r\n  private initializeDefaults(): void {\r\n    this.userProgress = this.createDefaultProgress();\r\n    this.userAchievements = [];\r\n    this.userStreaks = [this.createDefaultStreak('daily'), this.createDefaultStreak('weekly')];\r\n    this.weeklyGoals = this.generateWeeklyGoals();\r\n  }\r\n\r\n  // Progress Management\r\n  async updateProgressFromSession(sessionReport: SessionSummaryReport): Promise<void> {\r\n    if (!this.userProgress) return;\r\n\r\n    const sessionDuration = sessionReport.endTime - sessionReport.startTime;\r\n    const sessionWPM = sessionReport.averageWPM;\r\n    const fillerRate = (sessionReport.fillerWords.length / (sessionDuration / 60000)); // per minute\r\n\r\n    // Update basic stats\r\n    this.userProgress.totalSessions += 1;\r\n    this.userProgress.totalTimeMinutes += Math.round(sessionDuration / 60000); // Convert to minutes\r\n\r\n    // Update performance stats\r\n    this.userProgress.stats.averageWPM = this.calculateNewAverage(\r\n      this.userProgress.stats.averageWPM,\r\n      sessionWPM,\r\n      this.userProgress.totalSessions\r\n    );\r\n\r\n    if (sessionWPM > this.userProgress.stats.bestWPM) {\r\n      this.userProgress.stats.bestWPM = sessionWPM;\r\n    }\r\n\r\n    this.userProgress.stats.fillerWordRate = this.calculateNewAverage(\r\n      this.userProgress.stats.fillerWordRate,\r\n      fillerRate,\r\n      this.userProgress.totalSessions\r\n    );\r\n\r\n    // Calculate consistency score based on optimal percentage\r\n    const adherence = sessionReport.optimalPercentage;\r\n    this.userProgress.stats.consistencyScore = this.calculateNewAverage(\r\n      this.userProgress.stats.consistencyScore,\r\n      adherence,\r\n      this.userProgress.totalSessions\r\n    );\r\n\r\n    // Track language usage - would need to be added to SessionSummaryReport\r\n    // For now, we'll skip this until the type is extended\r\n\r\n    // Award XP\r\n    const xpEarned = this.calculateXPFromSession(sessionReport);\r\n    await this.awardXP(xpEarned);\r\n\r\n    // Update streaks\r\n    await this.updateStreaks();\r\n\r\n    // Check for new achievements\r\n    await this.checkAndUnlockAchievements(sessionReport);\r\n\r\n    // Update weekly goals\r\n    await this.updateWeeklyGoals(sessionReport);\r\n\r\n    // Save progress\r\n    await this.saveProgress();\r\n  }\r\n\r\n  private calculateNewAverage(currentAvg: number, newValue: number, count: number): number {\r\n    return ((currentAvg * (count - 1)) + newValue) / count;\r\n  }\r\n\r\n  private calculateXPFromSession(sessionReport: SessionSummaryReport): number {\r\n    let baseXP = 20; // Base XP for completing a session\r\n    \r\n    // Bonus XP for performance\r\n    const wpmBonus = Math.floor(sessionReport.averageWPM / 10) * 2;\r\n    const adherenceBonus = Math.floor(sessionReport.optimalPercentage / 10) * 3;\r\n    const durationBonus = Math.floor((sessionReport.endTime - sessionReport.startTime) / 60000) * 5;\r\n    \r\n    // Penalty for high filler words\r\n    const fillerPenalty = sessionReport.fillerWords.length * 2;\r\n    \r\n    return Math.max(10, baseXP + wpmBonus + adherenceBonus + durationBonus - fillerPenalty);\r\n  }\r\n\r\n  async awardXP(amount: number): Promise<void> {\r\n    if (!this.userProgress) return;\r\n\r\n    this.userProgress.totalXP += amount;\r\n    \r\n    // Check for level up\r\n    while (this.userProgress.totalXP >= this.userProgress.xpToNextLevel) {\r\n      this.userProgress.level += 1;\r\n      this.userProgress.totalXP -= this.userProgress.xpToNextLevel;\r\n      this.userProgress.xpToNextLevel = this.calculateXPForLevel(this.userProgress.level + 1);\r\n      \r\n      // Award achievement for level milestones\r\n      if (this.userProgress.level % 5 === 0) {\r\n        // Could add level-based achievements here\r\n      }\r\n    }\r\n  }\r\n\r\n  private calculateXPForLevel(level: number): number {\r\n    return 100 + (level - 1) * 50; // Increasing XP requirement\r\n  }\r\n\r\n  // Streak Management\r\n  private async updateStreaks(): Promise<void> {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    for (const streak of this.userStreaks) {\r\n      const lastPractice = new Date(streak.lastPracticeDate);\r\n      lastPractice.setHours(0, 0, 0, 0);\r\n\r\n      const daysDiff = Math.floor((today.getTime() - lastPractice.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n      if (streak.streakType === 'daily') {\r\n        if (daysDiff === 0) {\r\n          // Same day, no change\r\n          continue;\r\n        } else if (daysDiff === 1) {\r\n          // Consecutive day\r\n          streak.currentStreak += 1;\r\n          streak.isActive = true;\r\n        } else {\r\n          // Streak broken\r\n          if (streak.currentStreak > streak.longestStreak) {\r\n            streak.longestStreak = streak.currentStreak;\r\n          }\r\n          streak.currentStreak = 1;\r\n          streak.isActive = false;\r\n        }\r\n      } else if (streak.streakType === 'weekly') {\r\n        // Weekly streak logic (simplified)\r\n        const weeksDiff = Math.floor(daysDiff / 7);\r\n        if (weeksDiff === 0) {\r\n          continue;\r\n        } else if (weeksDiff === 1) {\r\n          streak.currentStreak += 1;\r\n          streak.isActive = true;\r\n        } else {\r\n          if (streak.currentStreak > streak.longestStreak) {\r\n            streak.longestStreak = streak.currentStreak;\r\n          }\r\n          streak.currentStreak = 1;\r\n          streak.isActive = false;\r\n        }\r\n      }\r\n\r\n      streak.lastPracticeDate = today;\r\n    }\r\n\r\n    await AsyncStorage.setItem(STORAGE_KEYS.STREAKS, JSON.stringify(this.userStreaks));\r\n  }\r\n\r\n  // Achievement System\r\n  private async checkAndUnlockAchievements(sessionReport: SessionSummaryReport): Promise<Achievement[]> {\r\n    const newAchievements: Achievement[] = [];\r\n\r\n    for (const achievement of ACHIEVEMENTS) {\r\n      if (this.userAchievements.find(a => a.id === achievement.id)) {\r\n        continue; // Already unlocked\r\n      }\r\n\r\n      if (await this.isAchievementUnlocked(achievement, sessionReport)) {\r\n        const unlockedAchievement = {\r\n          ...achievement,\r\n          unlockedAt: new Date()\r\n        };\r\n        \r\n        this.userAchievements.push(unlockedAchievement);\r\n        newAchievements.push(unlockedAchievement);\r\n        \r\n        // Award XP for achievement\r\n        await this.awardXP(achievement.points);\r\n      }\r\n    }\r\n\r\n    if (newAchievements.length > 0) {\r\n      await AsyncStorage.setItem(STORAGE_KEYS.ACHIEVEMENTS, JSON.stringify(this.userAchievements));\r\n    }\r\n\r\n    return newAchievements;\r\n  }\r\n\r\n  private async isAchievementUnlocked(achievement: Achievement, sessionReport: SessionSummaryReport): Promise<boolean> {\r\n    if (!this.userProgress) return false;\r\n\r\n    const req = achievement.requirement;\r\n\r\n    switch (req.type) {\r\n      case 'sessions_count':\r\n        return this.userProgress.totalSessions >= req.target;\r\n      \r\n      case 'wpm_target':\r\n        return sessionReport.averageWPM >= req.target;\r\n      \r\n      case 'filler_reduction':\r\n        const fillerRate = (sessionReport.fillerWords.length / ((sessionReport.endTime - sessionReport.startTime) / 60000));\r\n        return fillerRate <= req.target;\r\n      \r\n      case 'streak_days':\r\n        const dailyStreak = this.userStreaks.find(s => s.streakType === 'daily');\r\n        return dailyStreak ? dailyStreak.currentStreak >= req.target : false;\r\n      \r\n      case 'languages_used':\r\n        return this.userProgress.stats.languagesUsed.length >= req.target;\r\n      \r\n      case 'total_time':\r\n        if (req.conditions?.single_session) {\r\n          return ((sessionReport.endTime - sessionReport.startTime) / 60000) >= req.target;\r\n        }\r\n        return this.userProgress.totalTimeMinutes >= req.target;\r\n      \r\n      case 'consistency_score':\r\n        if (req.conditions?.sessions_count) {\r\n          // Check last N sessions for consistency\r\n          return this.userProgress.stats.consistencyScore >= req.target &&\r\n                 this.userProgress.totalSessions >= req.conditions.sessions_count;\r\n        }\r\n        return this.userProgress.stats.consistencyScore >= req.target;\r\n      \r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  // Weekly Goals\r\n  private generateWeeklyGoals(): WeeklyGoal[] {\r\n    const weekStart = this.getWeekStart(new Date());\r\n    \r\n    return [\r\n      {\r\n        id: 'sessions_goal',\r\n        type: 'sessions',\r\n        target: 5,\r\n        current: 0,\r\n        description: 'Complete 5 practice sessions this week',\r\n        xpReward: 100,\r\n        isCompleted: false,\r\n        weekStart\r\n      },\r\n      {\r\n        id: 'time_goal',\r\n        type: 'time',\r\n        target: 120, // 2 hours\r\n        current: 0,\r\n        description: 'Practice for 2 hours this week',\r\n        xpReward: 150,\r\n        isCompleted: false,\r\n        weekStart\r\n      },\r\n      {\r\n        id: 'improvement_goal',\r\n        type: 'improvement',\r\n        target: 5, // 5% improvement in consistency\r\n        current: 0,\r\n        description: 'Improve your consistency by 5%',\r\n        xpReward: 200,\r\n        isCompleted: false,\r\n        weekStart\r\n      }\r\n    ];\r\n  }\r\n\r\n  private getWeekStart(date: Date): Date {\r\n    const d = new Date(date);\r\n    const day = d.getDay();\r\n    const diff = d.getDate() - day;\r\n    return new Date(d.setDate(diff));\r\n  }\r\n\r\n  private async updateWeeklyGoals(sessionReport: SessionSummaryReport): Promise<void> {\r\n    const currentWeek = this.getWeekStart(new Date());\r\n    \r\n    // Check if we need new goals for this week\r\n    if (this.weeklyGoals.length === 0 || this.weeklyGoals[0].weekStart < currentWeek) {\r\n      this.weeklyGoals = this.generateWeeklyGoals();\r\n    }\r\n\r\n    // Update goal progress\r\n    for (const goal of this.weeklyGoals) {\r\n      if (goal.isCompleted) continue;\r\n\r\n      switch (goal.type) {\r\n        case 'sessions':\r\n          goal.current += 1;\r\n          break;\r\n        case 'time':\r\n          goal.current += Math.round((sessionReport.endTime - sessionReport.startTime) / 60000);\r\n          break;\r\n        case 'improvement':\r\n          // Calculate improvement based on recent performance\r\n          const consistencyImprovement = this.calculateConsistencyImprovement();\r\n          goal.current = Math.max(goal.current, consistencyImprovement);\r\n          break;\r\n      }\r\n\r\n      if (goal.current >= goal.target && !goal.isCompleted) {\r\n        goal.isCompleted = true;\r\n        await this.awardXP(goal.xpReward);\r\n      }\r\n    }\r\n\r\n    await AsyncStorage.setItem(STORAGE_KEYS.WEEKLY_GOALS, JSON.stringify(this.weeklyGoals));\r\n  }\r\n\r\n  private calculateConsistencyImprovement(): number {\r\n    // Simplified calculation - would need historical data\r\n    return Math.random() * 10; // Mock improvement percentage\r\n  }\r\n\r\n  // Data Access\r\n  async getUserProgress(): Promise<UserProgress | null> {\r\n    return this.userProgress;\r\n  }\r\n\r\n  async getAchievements(): Promise<Achievement[]> {\r\n    return this.userAchievements;\r\n  }\r\n\r\n  async getStreaks(): Promise<UserStreak[]> {\r\n    return this.userStreaks;\r\n  }\r\n\r\n  async getWeeklyGoals(): Promise<WeeklyGoal[]> {\r\n    return this.weeklyGoals;\r\n  }\r\n\r\n  async getGamificationData(): Promise<GamificationData> {\r\n    if (!this.userProgress) {\r\n      this.userProgress = this.createDefaultProgress();\r\n    }\r\n\r\n    const recentAchievements = this.userAchievements\r\n      .filter(a => a.unlockedAt)\r\n      .sort((a, b) => new Date(b.unlockedAt!).getTime() - new Date(a.unlockedAt!).getTime())\r\n      .slice(0, 5);\r\n\r\n    const activeStreaks = this.userStreaks.filter(s => s.isActive);\r\n\r\n    return {\r\n      currentLevel: this.userProgress.level,\r\n      totalXP: this.userProgress.totalXP,\r\n      weeklyXP: this.calculateWeeklyXP(),\r\n      monthlyXP: this.calculateMonthlyXP(),\r\n      recentAchievements,\r\n      activeStreaks,\r\n      weeklyGoals: this.weeklyGoals\r\n    };\r\n  }\r\n\r\n  private calculateWeeklyXP(): number {\r\n    // Would need to track XP gains with timestamps\r\n    return Math.floor(Math.random() * 500); // Mock weekly XP\r\n  }\r\n\r\n  private calculateMonthlyXP(): number {\r\n    // Would need to track XP gains with timestamps\r\n    return Math.floor(Math.random() * 2000); // Mock monthly XP\r\n  }\r\n\r\n  // Social Sharing\r\n  async generateSocialShare(achievementId: string, platform: SocialShare['platform']): Promise<SocialShare> {\r\n    const achievement = this.userAchievements.find(a => a.id === achievementId);\r\n    if (!achievement) {\r\n      throw new Error('Achievement not found');\r\n    }\r\n\r\n    const messages = {\r\n      twitter: `Just unlocked \"${achievement.name}\" ${achievement.icon} in @SpeakSync! ${achievement.description} #PublicSpeaking #Achievement`,\r\n      linkedin: `Excited to share that I've unlocked the \"${achievement.name}\" achievement in SpeakSync! ${achievement.description}`,\r\n      facebook: ` Just achieved \"${achievement.name}\" in my public speaking practice with SpeakSync! ${achievement.description}`,\r\n      instagram: `${achievement.icon} New achievement unlocked: \"${achievement.name}\"! ${achievement.description} #SpeakSync #PublicSpeaking`,\r\n      clipboard: `I just unlocked the \"${achievement.name}\" achievement in SpeakSync! ${achievement.description}`\r\n    };\r\n\r\n    return {\r\n      platform,\r\n      achievementId,\r\n      customMessage: messages[platform],\r\n      includeStats: true,\r\n      imageUrl: `https://api.speaksync.app/achievements/${achievementId}/share.png` // Mock URL\r\n    };\r\n  }\r\n\r\n  // Progress Trends\r\n  async getProgressTrends(): Promise<ProgressTrend[]> {\r\n    // This would integrate with analytics service to get historical data\r\n    const mockTrends: ProgressTrend[] = [\r\n      {\r\n        metric: 'wpm',\r\n        timeframe: 'month',\r\n        data: this.generateMockTrendData(30),\r\n        trend: 'improving',\r\n        changePercent: 15.5\r\n      },\r\n      {\r\n        metric: 'filler_rate',\r\n        timeframe: 'month',\r\n        data: this.generateMockTrendData(30),\r\n        trend: 'improving',\r\n        changePercent: -12.3\r\n      },\r\n      {\r\n        metric: 'consistency',\r\n        timeframe: 'month',\r\n        data: this.generateMockTrendData(30),\r\n        trend: 'stable',\r\n        changePercent: 2.1\r\n      }\r\n    ];\r\n\r\n    return mockTrends;\r\n  }\r\n\r\n  private generateMockTrendData(days: number): ProgressDataPoint[] {\r\n    const data: ProgressDataPoint[] = [];\r\n    const now = Date.now();\r\n    \r\n    for (let i = days - 1; i >= 0; i--) {\r\n      data.push({\r\n        timestamp: now - (i * 24 * 60 * 60 * 1000),\r\n        value: Math.random() * 100 + Math.random() * 20,\r\n        sessionCount: Math.floor(Math.random() * 3)\r\n      });\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  // Save/Load\r\n  private async saveProgress(): Promise<void> {\r\n    try {\r\n      await Promise.all([\r\n        AsyncStorage.setItem(STORAGE_KEYS.USER_PROGRESS, JSON.stringify(this.userProgress)),\r\n        AsyncStorage.setItem(STORAGE_KEYS.ACHIEVEMENTS, JSON.stringify(this.userAchievements)),\r\n        AsyncStorage.setItem(STORAGE_KEYS.STREAKS, JSON.stringify(this.userStreaks)),\r\n        AsyncStorage.setItem(STORAGE_KEYS.WEEKLY_GOALS, JSON.stringify(this.weeklyGoals))\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Failed to save gamification progress:', error);\r\n    }\r\n  }\r\n\r\n  // Settings\r\n  async updateSettings(settings: Partial<GamificationSettings>): Promise<void> {\r\n    this.settings = { ...this.settings, ...settings };\r\n    await AsyncStorage.setItem(STORAGE_KEYS.GAMIFICATION_SETTINGS, JSON.stringify(this.settings));\r\n  }\r\n\r\n  getSettings(): GamificationSettings {\r\n    return this.settings;\r\n  }\r\n}\r\n\r\nexport default GamificationService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\geminiAiService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'suggestion' is defined but never used.","line":46,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"suggestion"},"fix":{"range":[1380,1404],"text":""},"desc":"Remove unused variable 'suggestion'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":79,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":18,"suggestions":[{"fix":{"range":[2359,2418],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":81,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":20,"suggestions":[{"fix":{"range":[2449,2506],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":113,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":16,"suggestions":[{"fix":{"range":[3618,3677],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":117,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":117,"endColumn":43,"fix":{"range":[3758,3770],"text":"{return null;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":126,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":126,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":126,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":126,"endColumn":16,"suggestions":[{"fix":{"range":[3973,4042],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":167,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":20,"suggestions":[{"fix":{"range":[5306,5370],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":195,"column":36,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":195,"endColumn":58,"fix":{"range":[6917,6939],"text":"{return 'continuation';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":196,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":196,"endColumn":48,"fix":{"range":[6970,6988],"text":"{return 'rephrase';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":197,"column":63,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":197,"endColumn":84,"fix":{"range":[7052,7073],"text":"{return 'next_phrase';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":206,"column":36,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":206,"endColumn":54,"fix":{"range":[7408,7426],"text":"{confidence += 0.2;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":209,"column":37,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":209,"endColumn":55,"fix":{"range":[7539,7557],"text":"{confidence -= 0.1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":213,"column":45,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":213,"endColumn":63,"fix":{"range":[7728,7746],"text":"{confidence += 0.1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":214,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":214,"endColumn":48,"fix":{"range":[7777,7795],"text":"{confidence -= 0.2;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":220,"column":36,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":220,"endColumn":82,"fix":{"range":[7958,8004],"text":"{return 'User explicitly requested assistance';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":221,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":221,"endColumn":78,"fix":{"range":[8035,8083],"text":"{return 'Detected deviation from script content';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":222,"column":63,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":222,"endColumn":124,"fix":{"range":[8147,8208],"text":"{return `Extended pause detected (${context.pauseDuration}s)`;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":227,"column":79,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":227,"endColumn":86,"fix":{"range":[8390,8397],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":243,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":243,"endColumn":38,"fix":{"range":[9046,9053],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":256,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":256,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":256,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":256,"endColumn":16,"suggestions":[{"fix":{"range":[9537,9596],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'suggestion' is defined but never used.","line":264,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"suggestion"},"fix":{"range":[9747,9771],"text":""},"desc":"Remove unused variable 'suggestion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'suggestion' is defined but never used.","line":268,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":268,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"suggestion"},"fix":{"range":[9882,9906],"text":""},"desc":"Remove unused variable 'suggestion'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":277,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":277,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":277,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":277,"endColumn":22,"suggestions":[{"fix":{"range":[10219,10284],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":308,"column":33,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":308,"endColumn":46,"fix":{"range":[11289,11302],"text":"{return false;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":309,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":309,"endColumn":36,"fix":{"range":[11327,11339],"text":"{return true;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":310,"column":51,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":310,"endColumn":63,"fix":{"range":[11391,11403],"text":"{return true;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":311,"column":85,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":311,"endColumn":97,"fix":{"range":[11489,11501],"text":"{return true;}"}},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":318,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":318,"endColumn":19}],"suppressedMessages":[],"errorCount":28,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":17,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI, GenerativeModel, ChatSession } from '@google/generative-ai';\r\n\r\nexport interface ScriptContext {\r\n  fullScript: string;\r\n  currentPosition: number;\r\n  recentTranscript: string;\r\n  pauseDuration: number;\r\n  isDeviation: boolean;\r\n  userRequestedHelp: boolean;\r\n}\r\n\r\nexport interface AiSuggestion {\r\n  type: 'next_phrase' | 'transition' | 'rephrase' | 'continuation';\r\n  text: string;\r\n  confidence: number;\r\n  reasoning: string;\r\n  timestamp: number;\r\n}\r\n\r\nexport interface AiPromptingSettings {\r\n  enabled: boolean;\r\n  pauseThreshold: number; // seconds before triggering\r\n  deviationThreshold: number; // similarity threshold for deviation detection\r\n  suggestionDisplay: 'subtle' | 'prominent' | 'floating';\r\n  autoTrigger: boolean;\r\n  businessTierOnly: boolean;\r\n}\r\n\r\nexport interface AiSessionData {\r\n  sessionId: string;\r\n  startTime: number;\r\n  suggestions: AiSuggestion[];\r\n  userAcceptanceRate: number;\r\n  averageResponseTime: number;\r\n  totalPauses: number;\r\n  totalDeviations: number;\r\n}\r\n\r\nclass GeminiAiService {\r\n  private static instance: GeminiAiService;\r\n  private genAI: GoogleGenerativeAI | null = null;\r\n  private model: GenerativeModel | null = null;\r\n  private chatSession: ChatSession | null = null;\r\n  private isInitialized = false;\r\n  private currentSession: AiSessionData | null = null;\r\n  private suggestionListeners: Array<(suggestion: AiSuggestion) => void> = [];\r\n  private settings: AiPromptingSettings = {\r\n    enabled: true,\r\n    pauseThreshold: 3, // 3 seconds\r\n    deviationThreshold: 0.7, // 70% similarity\r\n    suggestionDisplay: 'subtle',\r\n    autoTrigger: true,\r\n    businessTierOnly: true,\r\n  };\r\n\r\n  static getInstance(): GeminiAiService {\r\n    if (!GeminiAiService.instance) {\r\n      GeminiAiService.instance = new GeminiAiService();\r\n    }\r\n    return GeminiAiService.instance;\r\n  }\r\n\r\n  async initialize(apiKey: string): Promise<void> {\r\n    try {\r\n      this.genAI = new GoogleGenerativeAI(apiKey);\r\n      \r\n      // Use Gemini 1.5 Flash for low latency\r\n      this.model = this.genAI.getGenerativeModel({ \r\n        model: \"gemini-1.5-flash\",\r\n        generationConfig: {\r\n          temperature: 0.7,\r\n          topK: 40,\r\n          topP: 0.95,\r\n          maxOutputTokens: 150, // Keep responses concise for low latency\r\n        },\r\n      });\r\n\r\n      this.isInitialized = true;\r\n      console.log('[GeminiAI] Service initialized successfully');\r\n    } catch (error) {\r\n      console.error('[GeminiAI] Failed to initialize:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  startAiSession(sessionId: string): void {\r\n    this.currentSession = {\r\n      sessionId,\r\n      startTime: Date.now(),\r\n      suggestions: [],\r\n      userAcceptanceRate: 0,\r\n      averageResponseTime: 0,\r\n      totalPauses: 0,\r\n      totalDeviations: 0,\r\n    };\r\n\r\n    // Start new chat session for context continuity\r\n    if (this.model) {\r\n      this.chatSession = this.model.startChat({\r\n        history: [\r\n          {\r\n            role: \"user\",\r\n            parts: [{ text: \"You are an AI assistant helping with teleprompter presentations. Your role is to provide subtle, helpful suggestions when the presenter pauses, deviates from script, or requests help. Keep responses very concise (1-2 sentences max) and contextually relevant.\" }],\r\n          },\r\n          {\r\n            role: \"model\",\r\n            parts: [{ text: \"I understand. I'll provide concise, contextual suggestions to help with your teleprompter presentation. I'll focus on natural transitions, next phrases, and helpful rephrasing when needed.\" }],\r\n          },\r\n        ],\r\n      });\r\n    }\r\n\r\n    console.log(`[GeminiAI] Started AI session: ${sessionId}`);\r\n  }\r\n\r\n  endAiSession(): AiSessionData | null {\r\n    if (!this.currentSession) return null;\r\n\r\n    // Calculate final statistics\r\n    this.calculateSessionStatistics();\r\n\r\n    const sessionData = { ...this.currentSession };\r\n    this.currentSession = null;\r\n    this.chatSession = null;\r\n\r\n    console.log(`[GeminiAI] Ended AI session: ${sessionData.sessionId}`);\r\n    return sessionData;\r\n  }\r\n\r\n  async generateSuggestion(context: ScriptContext): Promise<AiSuggestion | null> {\r\n    if (!this.isInitialized || !this.settings.enabled || !this.chatSession) {\r\n      return null;\r\n    }\r\n\r\n    // Check if business tier is required\r\n    if (this.settings.businessTierOnly) {\r\n      // TODO: Integrate with subscription service to check tier\r\n      // For now, assume access is granted\r\n    }\r\n\r\n    const startTime = Date.now();\r\n\r\n    try {\r\n      const prompt = this.buildContextualPrompt(context);\r\n      const result = await this.chatSession.sendMessage(prompt);\r\n      const response = result.response.text();\r\n\r\n      const suggestion: AiSuggestion = {\r\n        type: this.determineSuggestionType(context),\r\n        text: response.trim(),\r\n        confidence: this.calculateConfidence(context, response),\r\n        reasoning: this.generateReasoning(context),\r\n        timestamp: Date.now(),\r\n      };\r\n\r\n      // Add to current session\r\n      if (this.currentSession) {\r\n        this.currentSession.suggestions.push(suggestion);\r\n        this.updateSessionMetrics(startTime);\r\n      }\r\n\r\n      // Notify listeners\r\n      this.notifySuggestionListeners(suggestion);\r\n\r\n      return suggestion;\r\n    } catch (error) {\r\n      console.error('[GeminiAI] Error generating suggestion:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private buildContextualPrompt(context: ScriptContext): string {\r\n    const { fullScript, currentPosition, recentTranscript, pauseDuration, isDeviation, userRequestedHelp } = context;\r\n\r\n    // Extract surrounding context (100 characters before and after current position)\r\n    const beforeContext = fullScript.substring(Math.max(0, currentPosition - 100), currentPosition);\r\n    const afterContext = fullScript.substring(currentPosition, Math.min(fullScript.length, currentPosition + 100));\r\n\r\n    let prompt = '';\r\n\r\n    if (userRequestedHelp) {\r\n      prompt = `User requested help. Script context: \"${beforeContext}[CURRENT]${afterContext}\". Recent speech: \"${recentTranscript}\". Provide a helpful suggestion.`;\r\n    } else if (isDeviation) {\r\n      prompt = `User deviated from script. Expected: \"${afterContext.substring(0, 50)}\". Actually said: \"${recentTranscript}\". Suggest how to get back on track naturally.`;\r\n    } else if (pauseDuration > this.settings.pauseThreshold) {\r\n      prompt = `User paused for ${pauseDuration}s. Next in script: \"${afterContext.substring(0, 50)}\". Suggest the next phrase or a natural continuation.`;\r\n    } else {\r\n      prompt = `General help request. Current script context: \"${beforeContext}[CURRENT]${afterContext}\". Provide a contextual suggestion.`;\r\n    }\r\n\r\n    return prompt + ' Keep response under 20 words and naturally flowing.';\r\n  }\r\n\r\n  private determineSuggestionType(context: ScriptContext): AiSuggestion['type'] {\r\n    if (context.userRequestedHelp) return 'continuation';\r\n    if (context.isDeviation) return 'rephrase';\r\n    if (context.pauseDuration > this.settings.pauseThreshold) return 'next_phrase';\r\n    return 'transition';\r\n  }\r\n\r\n  private calculateConfidence(context: ScriptContext, response: string): number {\r\n    // Simple confidence calculation based on context quality and response length\r\n    let confidence = 0.7; // Base confidence\r\n\r\n    // Higher confidence for direct help requests\r\n    if (context.userRequestedHelp) confidence += 0.2;\r\n    \r\n    // Lower confidence for very long pauses (might be intentional)\r\n    if (context.pauseDuration > 10) confidence -= 0.1;\r\n    \r\n    // Adjust based on response length (sweet spot is 10-20 words)\r\n    const wordCount = response.split(' ').length;\r\n    if (wordCount >= 10 && wordCount <= 20) confidence += 0.1;\r\n    else if (wordCount > 30) confidence -= 0.2;\r\n\r\n    return Math.max(0.1, Math.min(1.0, confidence));\r\n  }\r\n\r\n  private generateReasoning(context: ScriptContext): string {\r\n    if (context.userRequestedHelp) return 'User explicitly requested assistance';\r\n    if (context.isDeviation) return 'Detected deviation from script content';\r\n    if (context.pauseDuration > this.settings.pauseThreshold) return `Extended pause detected (${context.pauseDuration}s)`;\r\n    return 'Providing contextual assistance';\r\n  }\r\n\r\n  private calculateSessionStatistics(): void {\r\n    if (!this.currentSession || this.currentSession.suggestions.length === 0) return;\r\n\r\n    const suggestions = this.currentSession.suggestions;\r\n    \r\n    // Calculate average response time (mock data for now)\r\n    this.currentSession.averageResponseTime = 1.2; // seconds\r\n\r\n    // Count pauses and deviations\r\n    this.currentSession.totalPauses = suggestions.filter(s => s.type === 'next_phrase').length;\r\n    this.currentSession.totalDeviations = suggestions.filter(s => s.type === 'rephrase').length;\r\n\r\n    // Mock user acceptance rate (would be tracked via user interactions)\r\n    this.currentSession.userAcceptanceRate = 0.75;\r\n  }\r\n\r\n  private updateSessionMetrics(startTime: number): void {\r\n    if (!this.currentSession) return;\r\n\r\n    const responseTime = (Date.now() - startTime) / 1000;\r\n    const suggestions = this.currentSession.suggestions;\r\n    \r\n    // Update running average\r\n    this.currentSession.averageResponseTime = \r\n      (this.currentSession.averageResponseTime * (suggestions.length - 1) + responseTime) / suggestions.length;\r\n  }\r\n\r\n  // Settings management\r\n  updateSettings(newSettings: Partial<AiPromptingSettings>): void {\r\n    this.settings = { ...this.settings, ...newSettings };\r\n    console.log('[GeminiAI] Settings updated:', this.settings);\r\n  }\r\n\r\n  getSettings(): AiPromptingSettings {\r\n    return { ...this.settings };\r\n  }\r\n\r\n  // Listener management\r\n  addSuggestionListener(listener: (suggestion: AiSuggestion) => void): void {\r\n    this.suggestionListeners.push(listener);\r\n  }\r\n\r\n  removeSuggestionListener(listener: (suggestion: AiSuggestion) => void): void {\r\n    this.suggestionListeners = this.suggestionListeners.filter(l => l !== listener);\r\n  }\r\n\r\n  private notifySuggestionListeners(suggestion: AiSuggestion): void {\r\n    this.suggestionListeners.forEach(listener => {\r\n      try {\r\n        listener(suggestion);\r\n      } catch (error) {\r\n        console.error('[GeminiAI] Error in suggestion listener:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Utility methods\r\n  isSessionActive(): boolean {\r\n    return this.currentSession !== null;\r\n  }\r\n\r\n  getCurrentSessionId(): string | null {\r\n    return this.currentSession?.sessionId || null;\r\n  }\r\n\r\n  getSessionSuggestions(): AiSuggestion[] {\r\n    return this.currentSession?.suggestions || [];\r\n  }\r\n\r\n  // Detection helpers\r\n  detectScriptDeviation(expected: string, actual: string): boolean {\r\n    // Simple similarity check - in production, use more sophisticated NLP\r\n    const expectedWords = expected.toLowerCase().split(' ').slice(0, 10);\r\n    const actualWords = actual.toLowerCase().split(' ');\r\n    \r\n    const commonWords = expectedWords.filter(word => actualWords.includes(word));\r\n    const similarity = commonWords.length / expectedWords.length;\r\n    \r\n    return similarity < this.settings.deviationThreshold;\r\n  }\r\n\r\n  shouldTriggerSuggestion(pauseDuration: number, isDeviation: boolean, userRequested: boolean): boolean {\r\n    if (!this.settings.enabled) return false;\r\n    if (userRequested) return true;\r\n    if (isDeviation && this.settings.autoTrigger) return true;\r\n    if (pauseDuration >= this.settings.pauseThreshold && this.settings.autoTrigger) return true;\r\n    \r\n    return false;\r\n  }\r\n\r\n  // Get API key from environment\r\n  static getApiKey(): string {\r\n    return process.env.EXPO_PUBLIC_GEMINI_API_KEY || '';\r\n  }\r\n}\r\n\r\nexport default GeminiAiService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\humeEmotionService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"Platform"},"fix":{"range":[36,76],"text":""},"desc":"Remove unused variable 'Platform'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'emotion' is defined but never used.","line":46,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotion"},"fix":{"range":[1082,1106],"text":""},"desc":"Remove unused variable 'emotion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'indicator' is defined but never used.","line":47,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"indicator"},"fix":{"range":[1161,1193],"text":""},"desc":"Remove unused variable 'indicator'."}]},{"ruleId":"no-undef","severity":2,"message":"'__DEV__' is not defined.","line":64,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":68,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":18,"suggestions":[{"fix":{"range":[1858,1920],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":70,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":20,"suggestions":[{"fix":{"range":[1951,2011],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":85,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":85,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":85,"endColumn":16,"suggestions":[{"fix":{"range":[2296,2363],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":89,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":89,"endColumn":43,"fix":{"range":[2454,2466],"text":"{return null;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":97,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":16,"suggestions":[{"fix":{"range":[2639,2716],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":130,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":130,"endColumn":32,"fix":{"range":[3541,3548],"text":"{return;}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'base64Audio' is assigned a value but never used.","line":133,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"base64Audio"},"fix":{"range":[3606,3662],"text":""},"desc":"Remove unused variable 'base64Audio'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'base64Audio' is assigned a value but never used.","line":133,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":133,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":140,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":140,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":140,"endColumn":20,"suggestions":[{"fix":{"range":[3963,4030],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'maxAttempts' is assigned a value but never used.","line":144,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":144,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"maxAttempts"},"fix":{"range":[4090,4116],"text":""},"desc":"Remove unused variable 'maxAttempts'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'maxAttempts' is assigned a value but never used.","line":144,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4127,4130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4127,4130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4299,4302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4299,4302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5231,5234],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5231,5234],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":179,"column":57,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":179,"endColumn":64,"fix":{"range":[5301,5308],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":182,"column":57,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":182,"endColumn":64,"fix":{"range":[5437,5444],"text":"{return;}"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5705,5708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5705,5708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5719,5722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5719,5722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5981,5984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5981,5984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":243,"column":23,"nodeType":"MemberExpression","endLine":243,"endColumn":42},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":252,"column":76,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":252,"endColumn":83,"fix":{"range":[8352,8359],"text":"{return;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":273,"column":37,"nodeType":"MemberExpression","endLine":273,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'btoa' is not defined.","line":275,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":275,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'emotion' is defined but never used.","line":279,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":279,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotion"},"fix":{"range":[9235,9259],"text":""},"desc":"Remove unused variable 'emotion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'emotion' is defined but never used.","line":283,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":283,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"emotion"},"fix":{"range":[9364,9388],"text":""},"desc":"Remove unused variable 'emotion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'indicator' is defined but never used.","line":287,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":287,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"indicator"},"fix":{"range":[9529,9561],"text":""},"desc":"Remove unused variable 'indicator'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'indicator' is defined but never used.","line":291,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"indicator"},"fix":{"range":[9670,9702],"text":""},"desc":"Remove unused variable 'indicator'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":300,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":300,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":300,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":300,"endColumn":22,"suggestions":[{"fix":{"range":[10004,10069],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":310,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":310,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":310,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":310,"endColumn":22,"suggestions":[{"fix":{"range":[10301,10368],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":330,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":330,"endColumn":19}],"suppressedMessages":[],"errorCount":27,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":5,"fixableWarningCount":0,"source":"import { HumeClient } from 'hume';\r\nimport { Platform } from 'react-native';\r\n\r\nexport interface EmotionScore {\r\n  emotion: string;\r\n  score: number;\r\n}\r\n\r\nexport interface EmotionAnalysis {\r\n  dominantEmotion: string;\r\n  confidence: number;\r\n  emotions: EmotionScore[];\r\n  timestamp: number;\r\n  prosody?: {\r\n    pitch?: number;\r\n    speaking_rate?: number;\r\n    volume?: number;\r\n  };\r\n}\r\n\r\nexport interface EmotionIndicatorState {\r\n  emoji: string;\r\n  color: string;\r\n  confidence: number;\r\n  description: string;\r\n}\r\n\r\nexport interface EmotionSessionData {\r\n  sessionId: string;\r\n  startTime: number;\r\n  emotions: EmotionAnalysis[];\r\n  averageConfidence: number;\r\n  dominantEmotions: { [emotion: string]: number };\r\n  emotionalJourney: Array<{\r\n    timestamp: number;\r\n    emotion: string;\r\n    confidence: number;\r\n  }>;\r\n}\r\n\r\nclass HumeEmotionService {\r\n  private static instance: HumeEmotionService;\r\n  private client: HumeClient | null = null;\r\n  private isInitialized = false;\r\n  private currentSession: EmotionSessionData | null = null;\r\n  private emotionListeners: Array<(emotion: EmotionAnalysis) => void> = [];\r\n  private indicatorListeners: Array<(indicator: EmotionIndicatorState) => void> = [];\r\n  private audioChunkSize = 1024; // Small chunks for real-time processing\r\n  private processingQueue: ArrayBuffer[] = [];\r\n  private isProcessing = false;\r\n\r\n  static getInstance(): HumeEmotionService {\r\n    if (!HumeEmotionService.instance) {\r\n      HumeEmotionService.instance = new HumeEmotionService();\r\n    }\r\n    return HumeEmotionService.instance;\r\n  }\r\n\r\n  async initialize(apiKey: string): Promise<void> {\r\n    try {\r\n      this.client = new HumeClient({\r\n        apiKey,\r\n        // Use secure connection for production\r\n        baseUrl: __DEV__ ? undefined : 'https://api.hume.ai',\r\n      });\r\n\r\n      this.isInitialized = true;\r\n      console.log('[HumeEmotion] Service initialized successfully');\r\n    } catch (error) {\r\n      console.error('[HumeEmotion] Failed to initialize:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  startEmotionSession(sessionId: string): void {\r\n    this.currentSession = {\r\n      sessionId,\r\n      startTime: Date.now(),\r\n      emotions: [],\r\n      averageConfidence: 0,\r\n      dominantEmotions: {},\r\n      emotionalJourney: [],\r\n    };\r\n\r\n    console.log(`[HumeEmotion] Started emotion session: ${sessionId}`);\r\n  }\r\n\r\n  endEmotionSession(): EmotionSessionData | null {\r\n    if (!this.currentSession) return null;\r\n\r\n    // Calculate final statistics\r\n    this.calculateSessionStatistics();\r\n\r\n    const sessionData = { ...this.currentSession };\r\n    this.currentSession = null;\r\n\r\n    console.log(`[HumeEmotion] Ended emotion session: ${sessionData.sessionId}`);\r\n    return sessionData;\r\n  }\r\n\r\n  async processAudioChunk(audioData: ArrayBuffer): Promise<void> {\r\n    if (!this.isInitialized || !this.client || !this.currentSession) {\r\n      return;\r\n    }\r\n\r\n    // Add to processing queue\r\n    this.processingQueue.push(audioData);\r\n\r\n    // Process queue if not already processing\r\n    if (!this.isProcessing) {\r\n      this.processQueue();\r\n    }\r\n  }\r\n\r\n  private async processQueue(): Promise<void> {\r\n    this.isProcessing = true;\r\n\r\n    while (this.processingQueue.length > 0) {\r\n      const audioChunk = this.processingQueue.shift();\r\n      if (audioChunk) {\r\n        await this.analyzeAudioChunk(audioChunk);\r\n      }\r\n    }\r\n\r\n    this.isProcessing = false;\r\n  }\r\n\r\n  private async analyzeAudioChunk(audioData: ArrayBuffer): Promise<void> {\r\n    try {\r\n      if (!this.client) return;\r\n\r\n      // Convert ArrayBuffer to base64 for API\r\n      const base64Audio = this.arrayBufferToBase64(audioData);\r\n\r\n      // Call Hume API for emotion analysis (simplified for demo)\r\n      // In production, use streaming WebSocket API for real-time processing\r\n      const mockEmotionResponse = this.generateMockEmotionData();\r\n      this.processEmotionResults(mockEmotionResponse);\r\n    } catch (error) {\r\n      console.error('[HumeEmotion] Error analyzing audio chunk:', error);\r\n    }\r\n  }\r\n\r\n  private async pollForResults(jobId: string, maxAttempts: number = 10): Promise<any> {\r\n    // Simplified polling for demo - in production use WebSocket streaming\r\n    return this.generateMockEmotionData();\r\n  }\r\n\r\n  private generateMockEmotionData(): any {\r\n    // Generate realistic mock emotion data for development/demo\r\n    const emotions = [\r\n      'joy', 'excitement', 'confidence', 'determination', 'calmness',\r\n      'surprise', 'confusion', 'anxiety', 'sadness', 'neutral'\r\n    ];\r\n\r\n    const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];\r\n    const baseScore = Math.random() * 0.8 + 0.1; // 0.1 to 0.9\r\n\r\n    return [{\r\n      results: {\r\n        predictions: {\r\n          prosody: [{\r\n            emotions: emotions.map(emotion => ({\r\n              name: emotion,\r\n              score: emotion === randomEmotion ? baseScore : Math.random() * 0.3\r\n            })),\r\n            prosody: {\r\n              pitch: Math.random() * 200 + 100,\r\n              speaking_rate: Math.random() * 2 + 1,\r\n              volume: Math.random() * 0.8 + 0.2,\r\n            }\r\n          }]\r\n        }\r\n      }\r\n    }];\r\n  }\r\n\r\n  private processEmotionResults(results: any): void {\r\n    if (!results || !results[0] || !results[0].results) return;\r\n\r\n    const prosodyResults = results[0].results.predictions?.prosody;\r\n    if (!prosodyResults || prosodyResults.length === 0) return;\r\n\r\n    // Process the latest prosody prediction\r\n    const latestPrediction = prosodyResults[prosodyResults.length - 1];\r\n    const emotions = latestPrediction.emotions || [];\r\n\r\n    // Find dominant emotion\r\n    const dominantEmotion = emotions.reduce((prev: any, current: any) => \r\n      (current.score > prev.score) ? current : prev\r\n    );\r\n\r\n    const emotionAnalysis: EmotionAnalysis = {\r\n      dominantEmotion: dominantEmotion?.name || 'neutral',\r\n      confidence: dominantEmotion?.score || 0,\r\n      emotions: emotions.map((e: any) => ({\r\n        emotion: e.name,\r\n        score: e.score,\r\n      })),\r\n      timestamp: Date.now(),\r\n      prosody: {\r\n        pitch: latestPrediction.prosody?.pitch,\r\n        speaking_rate: latestPrediction.prosody?.speaking_rate,\r\n        volume: latestPrediction.prosody?.volume,\r\n      },\r\n    };\r\n\r\n    // Add to current session\r\n    if (this.currentSession) {\r\n      this.currentSession.emotions.push(emotionAnalysis);\r\n      this.currentSession.emotionalJourney.push({\r\n        timestamp: emotionAnalysis.timestamp,\r\n        emotion: emotionAnalysis.dominantEmotion,\r\n        confidence: emotionAnalysis.confidence,\r\n      });\r\n    }\r\n\r\n    // Notify listeners\r\n    this.notifyEmotionListeners(emotionAnalysis);\r\n    this.notifyIndicatorListeners(this.getEmotionIndicator(emotionAnalysis));\r\n  }\r\n\r\n  private getEmotionIndicator(analysis: EmotionAnalysis): EmotionIndicatorState {\r\n    const emotion = analysis.dominantEmotion.toLowerCase();\r\n    const confidence = analysis.confidence;\r\n\r\n    // Map emotions to visual indicators\r\n    const emotionMap: { [key: string]: { emoji: string; color: string; description: string } } = {\r\n      joy: { emoji: '', color: '#10B981', description: 'Joyful & Positive' },\r\n      excitement: { emoji: '', color: '#F59E0B', description: 'Excited & Energetic' },\r\n      confidence: { emoji: '', color: '#3B82F6', description: 'Confident & Strong' },\r\n      determination: { emoji: '', color: '#8B5CF6', description: 'Determined & Focused' },\r\n      calmness: { emoji: '', color: '#06B6D4', description: 'Calm & Composed' },\r\n      surprise: { emoji: '', color: '#F97316', description: 'Surprised' },\r\n      confusion: { emoji: '', color: '#6B7280', description: 'Confused' },\r\n      anxiety: { emoji: '', color: '#EF4444', description: 'Anxious' },\r\n      sadness: { emoji: '', color: '#6366F1', description: 'Sad' },\r\n      anger: { emoji: '', color: '#DC2626', description: 'Angry' },\r\n      fear: { emoji: '', color: '#7C2D12', description: 'Fearful' },\r\n      neutral: { emoji: '', color: '#9CA3AF', description: 'Neutral' },\r\n    };\r\n\r\n    const indicator = emotionMap[emotion] || emotionMap.neutral;\r\n\r\n    return {\r\n      ...indicator,\r\n      confidence,\r\n    };\r\n  }\r\n\r\n  private calculateSessionStatistics(): void {\r\n    if (!this.currentSession || this.currentSession.emotions.length === 0) return;\r\n\r\n    const emotions = this.currentSession.emotions;\r\n    \r\n    // Calculate average confidence\r\n    const totalConfidence = emotions.reduce((sum, e) => sum + e.confidence, 0);\r\n    this.currentSession.averageConfidence = totalConfidence / emotions.length;\r\n\r\n    // Calculate dominant emotions\r\n    const emotionCounts: { [emotion: string]: number } = {};\r\n    emotions.forEach(e => {\r\n      emotionCounts[e.dominantEmotion] = (emotionCounts[e.dominantEmotion] || 0) + 1;\r\n    });\r\n\r\n    this.currentSession.dominantEmotions = emotionCounts;\r\n  }\r\n\r\n  private arrayBufferToBase64(buffer: ArrayBuffer): string {\r\n    const bytes = new Uint8Array(buffer);\r\n    let binary = '';\r\n    for (let i = 0; i < bytes.byteLength; i++) {\r\n      binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return btoa(binary);\r\n  }\r\n\r\n  // Listener management\r\n  addEmotionListener(listener: (emotion: EmotionAnalysis) => void): void {\r\n    this.emotionListeners.push(listener);\r\n  }\r\n\r\n  removeEmotionListener(listener: (emotion: EmotionAnalysis) => void): void {\r\n    this.emotionListeners = this.emotionListeners.filter(l => l !== listener);\r\n  }\r\n\r\n  addIndicatorListener(listener: (indicator: EmotionIndicatorState) => void): void {\r\n    this.indicatorListeners.push(listener);\r\n  }\r\n\r\n  removeIndicatorListener(listener: (indicator: EmotionIndicatorState) => void): void {\r\n    this.indicatorListeners = this.indicatorListeners.filter(l => l !== listener);\r\n  }\r\n\r\n  private notifyEmotionListeners(emotion: EmotionAnalysis): void {\r\n    this.emotionListeners.forEach(listener => {\r\n      try {\r\n        listener(emotion);\r\n      } catch (error) {\r\n        console.error('[HumeEmotion] Error in emotion listener:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  private notifyIndicatorListeners(indicator: EmotionIndicatorState): void {\r\n    this.indicatorListeners.forEach(listener => {\r\n      try {\r\n        listener(indicator);\r\n      } catch (error) {\r\n        console.error('[HumeEmotion] Error in indicator listener:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Utility methods\r\n  isSessionActive(): boolean {\r\n    return this.currentSession !== null;\r\n  }\r\n\r\n  getCurrentSessionId(): string | null {\r\n    return this.currentSession?.sessionId || null;\r\n  }\r\n\r\n  getSessionEmotions(): EmotionAnalysis[] {\r\n    return this.currentSession?.emotions || [];\r\n  }\r\n\r\n  // Get API key from environment\r\n  static getApiKey(): string {\r\n    return process.env.EXPO_PUBLIC_HUME_API_KEY || '';\r\n  }\r\n}\r\n\r\nexport default HumeEmotionService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\karaokeService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":12,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[553,572],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndices' is defined but never used.","line":13,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndices"},"fix":{"range":[615,636],"text":""},"desc":"Remove unused variable 'wordIndices'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":14,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[677,694],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":34,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1330,1349],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndices' is defined but never used.","line":35,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndices"},"fix":{"range":[1386,1407],"text":""},"desc":"Remove unused variable 'wordIndices'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'wordIndex' is defined but never used.","line":36,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"wordIndex"},"fix":{"range":[1442,1459],"text":""},"desc":"Remove unused variable 'wordIndex'."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":101,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":101,"endColumn":43,"fix":{"range":[3345,3357],"text":"{return null;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":111,"column":26,"nodeType":"MemberExpression","endLine":111,"endColumn":54},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":112,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":112,"endColumn":33,"fix":{"range":[3763,3772],"text":"{continue;}"}},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":182,"column":5,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":182,"endColumn":37,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[5885,5886],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'for' condition.","line":193,"column":41,"nodeType":"ForStatement","messageId":"missingCurlyAfterCondition","endLine":193,"endColumn":58,"fix":{"range":[6216,6233],"text":"{matrix[0][i] = i;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":193,"column":41,"nodeType":"MemberExpression","endLine":193,"endColumn":53},{"ruleId":"curly","severity":2,"message":"Expected { after 'for' condition.","line":194,"column":41,"nodeType":"ForStatement","messageId":"missingCurlyAfterCondition","endLine":194,"endColumn":58,"fix":{"range":[6275,6292],"text":"{matrix[j][0] = j;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":194,"column":41,"nodeType":"MemberExpression","endLine":194,"endColumn":50},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":199,"column":9,"nodeType":"MemberExpression","endLine":199,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":199,"column":9,"nodeType":"MemberExpression","endLine":199,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":200,"column":11,"nodeType":"MemberExpression","endLine":200,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":201,"column":11,"nodeType":"MemberExpression","endLine":201,"endColumn":27},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":215,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":215,"endColumn":29,"fix":{"range":[6934,6943],"text":"{return 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":216,"column":45,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":216,"endColumn":54,"fix":{"range":[6989,6998],"text":"{return 0;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":219,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":219,"endColumn":35,"fix":{"range":[7104,7113],"text":"{return 0;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":233,"column":13,"nodeType":"MemberExpression","endLine":233,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":233,"column":29,"nodeType":"MemberExpression","endLine":233,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":233,"column":39,"nodeType":"MemberExpression","endLine":233,"endColumn":44},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":233,"column":46,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":233,"endColumn":55,"fix":{"range":[7552,7561],"text":"{continue;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":234,"column":9,"nodeType":"MemberExpression","endLine":234,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":234,"column":24,"nodeType":"MemberExpression","endLine":234,"endColumn":36},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":240,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":240,"endColumn":33,"fix":{"range":[7685,7694],"text":"{return 0;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":245,"column":12,"nodeType":"MemberExpression","endLine":245,"endColumn":24},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":245,"column":26,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":245,"endColumn":35,"fix":{"range":[7811,7820],"text":"{continue;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":246,"column":15,"nodeType":"MemberExpression","endLine":246,"endColumn":27},{"ruleId":"curly","severity":2,"message":"Expected { after 'while' condition.","line":246,"column":29,"nodeType":"WhileStatement","messageId":"missingCurlyAfterCondition","endLine":246,"endColumn":33,"fix":{"range":[7850,7854],"text":"{k++;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":247,"column":11,"nodeType":"MemberExpression","endLine":247,"endColumn":16},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":247,"column":21,"nodeType":"MemberExpression","endLine":247,"endColumn":26},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":247,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":247,"endColumn":45,"fix":{"range":[7883,7900],"text":"{transpositions++;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":265,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":265,"endColumn":43,"fix":{"range":[8426,8440],"text":"{return '0000';}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":271,"column":26,"nodeType":"MemberExpression","endLine":271,"endColumn":34},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":284,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":284,"endColumn":59,"fix":{"range":[9094,9122],"text":"{return { start: 0, end: 0 };}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":324,"column":34,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":324,"endColumn":41,"fix":{"range":[10561,10568],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":331,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":331,"endColumn":15},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":341,"column":61,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":341,"endColumn":68,"fix":{"range":[11180,11187],"text":"{return;}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'sIndex' is defined but never used.","line":370,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":370,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"sIndex"},"fix":{"range":[12048,12056],"text":""},"desc":"Remove unused variable 'sIndex'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sIndex' is defined but never used.","line":370,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":370,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'wIndex' is defined but never used.","line":374,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":374,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"wIndex"},"fix":{"range":[12222,12230],"text":""},"desc":"Remove unused variable 'wIndex'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'wIndex' is defined but never used.","line":374,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":374,"endColumn":36},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":442,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":442,"endColumn":38,"fix":{"range":[14146,14153],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":459,"column":65,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":459,"endColumn":72,"fix":{"range":[14750,14757],"text":"{return;}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'item' is assigned a value but never used.","line":467,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":467,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'item' is assigned a value but never used.","line":467,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":467,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":469,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":469,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":482,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":482,"endColumn":16}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":18,"fixableWarningCount":0,"source":"import { KaraokeState, WordMatch, ScriptAnalysis, KaraokeHighlightSettings } from '../types';\r\n\r\n/**\r\n * Advanced Karaoke Highlighting Service\r\n * Provides real-time word matching and highlighting for teleprompter scripts\r\n * with fuzzy matching, performance optimization, and smooth visual feedback\r\n */\r\nexport class KaraokeService {\r\n  private scriptAnalysis: ScriptAnalysis | null = null;\r\n  private state: KaraokeState = this.getInitialState();\r\n  private settings: KaraokeHighlightSettings = this.getDefaultSettings();\r\n  private onStateChange?: (state: KaraokeState) => void;\r\n  private onHighlightChange?: (wordIndices: number[]) => void;\r\n  private onScrollRequest?: (wordIndex: number) => void;\r\n\r\n  // Performance optimization: Pre-computed word similarity cache\r\n  private similarityCache = new Map<string, Map<string, number>>();\r\n  \r\n  // Real-time processing optimization\r\n  private lastProcessedTime = 0;\r\n  private processingQueue: Array<{ word: string; timestamp: number; confidence: number }> = [];\r\n  private isProcessing = false;\r\n\r\n  constructor() {\r\n    this.setupPerformanceOptimizations();\r\n  }\r\n\r\n  /**\r\n   * Initialize karaoke service with script content and settings\r\n   */\r\n  public initialize(\r\n    scriptContent: string, \r\n    settings: Partial<KaraokeHighlightSettings> = {},\r\n    onStateChange?: (state: KaraokeState) => void,\r\n    onHighlightChange?: (wordIndices: number[]) => void,\r\n    onScrollRequest?: (wordIndex: number) => void\r\n  ): void {\r\n    this.settings = { ...this.getDefaultSettings(), ...settings };\r\n    this.onStateChange = onStateChange;\r\n    this.onHighlightChange = onHighlightChange;\r\n    this.onScrollRequest = onScrollRequest;\r\n    \r\n    // Analyze script for word-level processing\r\n    this.scriptAnalysis = this.analyzeScript(scriptContent);\r\n    \r\n    // Reset state\r\n    this.state = {\r\n      ...this.getInitialState(),\r\n      scriptWords: this.scriptAnalysis.words.map(w => w.word),\r\n      totalSentences: this.scriptAnalysis.totalSentences,\r\n      sessionStartTime: Date.now(),\r\n    };\r\n\r\n    // Pre-compute similarity cache for common words\r\n    this.precomputeSimilarityCache();\r\n    \r\n    this.notifyStateChange();\r\n  }\r\n\r\n  /**\r\n   * Process incoming speech recognition word with ultra-low latency\r\n   */\r\n  public processSpokenWord(\r\n    word: string, \r\n    confidence: number, \r\n    timestamp: number = Date.now()\r\n  ): WordMatch | null {\r\n    if (!this.scriptAnalysis || !this.settings.enabled) {\r\n      return null;\r\n    }\r\n\r\n    // Add to processing queue for batch processing if needed\r\n    this.processingQueue.push({ word, timestamp, confidence });\r\n\r\n    // Immediate processing for low latency\r\n    const match = this.findBestMatch(word, confidence, timestamp);\r\n    \r\n    if (match && match.similarity >= this.settings.matchThreshold) {\r\n      this.updateStateWithMatch(match);\r\n      this.triggerHighlight(match);\r\n      this.updateScrollPosition(match);\r\n      return match;\r\n    }\r\n\r\n    // Process queue if not currently processing\r\n    if (!this.isProcessing) {\r\n      this.processQueueAsync();\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Ultra-fast fuzzy word matching with similarity scoring\r\n   */\r\n  private findBestMatch(\r\n    spokenWord: string, \r\n    confidence: number, \r\n    timestamp: number\r\n  ): WordMatch | null {\r\n    if (!this.scriptAnalysis) return null;\r\n\r\n    const normalizedSpoken = this.normalizeWord(spokenWord);\r\n    const searchWindow = this.getSearchWindow();\r\n    \r\n    let bestMatch: WordMatch | null = null;\r\n    let bestSimilarity = 0;\r\n\r\n    // Search within optimal window around current position\r\n    for (let i = searchWindow.start; i <= searchWindow.end; i++) {\r\n      const scriptWord = this.scriptAnalysis.words[i];\r\n      if (!scriptWord) continue;\r\n\r\n      const normalizedScript = this.normalizeWord(scriptWord.word);\r\n      \r\n      // Check exact match first (fastest)\r\n      if (normalizedSpoken === normalizedScript) {\r\n        bestMatch = {\r\n          wordIndex: i,\r\n          scriptWord: scriptWord.word,\r\n          spokenWord,\r\n          confidence,\r\n          timestamp,\r\n          matched: true,\r\n          isExact: true,\r\n          similarity: 1.0,\r\n        };\r\n        break;\r\n      }\r\n\r\n      // Fuzzy matching with cached similarity\r\n      const similarity = this.calculateSimilarity(normalizedSpoken, normalizedScript);\r\n      \r\n      if (similarity > bestSimilarity && similarity >= this.settings.matchThreshold) {\r\n        bestSimilarity = similarity;\r\n        bestMatch = {\r\n          wordIndex: i,\r\n          scriptWord: scriptWord.word,\r\n          spokenWord,\r\n          confidence,\r\n          timestamp,\r\n          isExact: false,\r\n          similarity,\r\n          matched: true,\r\n        };\r\n      }\r\n    }\r\n\r\n    return bestMatch;\r\n  }\r\n\r\n  /**\r\n   * High-performance word similarity calculation with caching\r\n   */\r\n  private calculateSimilarity(word1: string, word2: string): number {\r\n    // Check cache first\r\n    const cached = this.similarityCache.get(word1)?.get(word2);\r\n    if (cached !== undefined) {\r\n      return cached;\r\n    }\r\n\r\n    let similarity: number;\r\n\r\n    // Quick length-based filtering\r\n    const lengthDiff = Math.abs(word1.length - word2.length);\r\n    if (lengthDiff > Math.max(word1.length, word2.length) * 0.5) {\r\n      similarity = 0;\r\n    } else {\r\n      // Advanced similarity calculation combining multiple algorithms\r\n      const levenshtein = this.levenshteinSimilarity(word1, word2);\r\n      const jaro = this.jaroSimilarity(word1, word2);\r\n      const soundex = this.soundexSimilarity(word1, word2);\r\n      \r\n      // Weighted combination for optimal accuracy\r\n      similarity = (levenshtein * 0.4) + (jaro * 0.4) + (soundex * 0.2);\r\n    }\r\n\r\n    // Cache result\r\n    if (!this.similarityCache.has(word1)) {\r\n      this.similarityCache.set(word1, new Map());\r\n    }\r\n    this.similarityCache.get(word1)!.set(word2, similarity);\r\n\r\n    return similarity;\r\n  }\r\n\r\n  /**\r\n   * Levenshtein distance-based similarity (0-1 scale)\r\n   */\r\n  private levenshteinSimilarity(a: string, b: string): number {\r\n    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));\r\n\r\n    for (let i = 0; i <= a.length; i++) matrix[0][i] = i;\r\n    for (let j = 0; j <= b.length; j++) matrix[j][0] = j;\r\n\r\n    for (let j = 1; j <= b.length; j++) {\r\n      for (let i = 1; i <= a.length; i++) {\r\n        const substitution = matrix[j - 1][i - 1] + (a[i - 1] === b[j - 1] ? 0 : 1);\r\n        matrix[j][i] = Math.min(\r\n          matrix[j][i - 1] + 1, // insertion\r\n          matrix[j - 1][i] + 1, // deletion\r\n          substitution\r\n        );\r\n      }\r\n    }\r\n\r\n    const maxLength = Math.max(a.length, b.length);\r\n    return maxLength === 0 ? 1 : 1 - matrix[b.length][a.length] / maxLength;\r\n  }\r\n\r\n  /**\r\n   * Jaro similarity algorithm for phonetic matching\r\n   */\r\n  private jaroSimilarity(s1: string, s2: string): number {\r\n    if (s1 === s2) return 1;\r\n    if (s1.length === 0 || s2.length === 0) return 0;\r\n\r\n    const matchWindow = Math.floor(Math.max(s1.length, s2.length) / 2) - 1;\r\n    if (matchWindow < 0) return 0;\r\n\r\n    const s1Matches = new Array(s1.length).fill(false);\r\n    const s2Matches = new Array(s2.length).fill(false);\r\n\r\n    let matches = 0;\r\n    let transpositions = 0;\r\n\r\n    // Find matches\r\n    for (let i = 0; i < s1.length; i++) {\r\n      const start = Math.max(0, i - matchWindow);\r\n      const end = Math.min(i + matchWindow + 1, s2.length);\r\n\r\n      for (let j = start; j < end; j++) {\r\n        if (s2Matches[j] || s1[i] !== s2[j]) continue;\r\n        s1Matches[i] = s2Matches[j] = true;\r\n        matches++;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (matches === 0) return 0;\r\n\r\n    // Count transpositions\r\n    let k = 0;\r\n    for (let i = 0; i < s1.length; i++) {\r\n      if (!s1Matches[i]) continue;\r\n      while (!s2Matches[k]) k++;\r\n      if (s1[i] !== s2[k]) transpositions++;\r\n      k++;\r\n    }\r\n\r\n    return (matches / s1.length + matches / s2.length + (matches - transpositions / 2) / matches) / 3;\r\n  }\r\n\r\n  /**\r\n   * Soundex-based phonetic similarity\r\n   */\r\n  private soundexSimilarity(word1: string, word2: string): number {\r\n    const soundex1 = this.soundex(word1);\r\n    const soundex2 = this.soundex(word2);\r\n    return soundex1 === soundex2 ? 1 : 0;\r\n  }\r\n\r\n  private soundex(word: string): string {\r\n    const clean = word.toUpperCase().replace(/[^A-Z]/g, '');\r\n    if (clean.length === 0) return '0000';\r\n\r\n    let soundex = clean[0];\r\n    const codes = { B: '1', F: '1', P: '1', V: '1', C: '2', G: '2', J: '2', K: '2', Q: '2', S: '2', X: '2', Z: '2', D: '3', T: '3', L: '4', M: '5', N: '5', R: '6' };\r\n\r\n    for (let i = 1; i < clean.length && soundex.length < 4; i++) {\r\n      const code = codes[clean[i] as keyof typeof codes];\r\n      if (code && code !== soundex[soundex.length - 1]) {\r\n        soundex += code;\r\n      }\r\n    }\r\n\r\n    return soundex.padEnd(4, '0').substring(0, 4);\r\n  }\r\n\r\n  /**\r\n   * Get optimal search window around current position\r\n   */\r\n  private getSearchWindow(): { start: number; end: number } {\r\n    if (!this.scriptAnalysis) return { start: 0, end: 0 };\r\n\r\n    const currentPos = this.state.currentWordIndex;\r\n    const windowSize = Math.min(20, Math.floor(this.scriptAnalysis.totalWords * 0.1));\r\n    \r\n    const start = Math.max(0, currentPos - Math.floor(windowSize / 2));\r\n    const end = Math.min(this.scriptAnalysis.totalWords - 1, currentPos + Math.floor(windowSize / 2));\r\n\r\n    return { start, end };\r\n  }\r\n\r\n  /**\r\n   * Update state with successful match\r\n   */\r\n  private updateStateWithMatch(match: WordMatch): void {\r\n    this.state.currentWordIndex = match.wordIndex;\r\n    this.state.matchedWords.push(match);\r\n    \r\n    // Update accuracy calculation\r\n    const totalMatches = this.state.matchedWords.length;\r\n    const exactMatches = this.state.matchedWords.filter(m => m.isExact).length;\r\n    this.state.accuracy = totalMatches > 0 ? exactMatches / totalMatches : 0;\r\n\r\n    // Update words per minute\r\n    const elapsed = (Date.now() - this.state.sessionStartTime) / 60000; // minutes\r\n    this.state.wordsPerMinute = elapsed > 0 ? totalMatches / elapsed : 0;\r\n\r\n    // Update sentence tracking\r\n    if (this.scriptAnalysis) {\r\n      const currentSentence = this.scriptAnalysis.words[match.wordIndex]?.sentence || 0;\r\n      this.state.currentSentence = currentSentence;\r\n    }\r\n\r\n    this.notifyStateChange();\r\n  }\r\n\r\n  /**\r\n   * Trigger visual highlighting with smooth animation\r\n   */\r\n  private triggerHighlight(match: WordMatch): void {\r\n    if (!this.onHighlightChange) return;\r\n\r\n    // Add word to highlighted words\r\n    this.state.highlightedWords = [match.wordIndex];\r\n    this.onHighlightChange(this.state.highlightedWords);\r\n\r\n    // Schedule fade out\r\n    setTimeout(() => {\r\n      this.state.highlightedWords = this.state.highlightedWords.filter(i => i !== match.wordIndex);\r\n      this.onHighlightChange?.(this.state.highlightedWords);\r\n    }, this.settings.highlightDuration);\r\n  }\r\n\r\n  /**\r\n   * Update scroll position to keep highlighted word in view\r\n   */\r\n  private updateScrollPosition(match: WordMatch): void {\r\n    if (!this.settings.autoScroll || !this.onScrollRequest) return;\r\n    \r\n    this.onScrollRequest(match.wordIndex);\r\n  }\r\n\r\n  /**\r\n   * Analyze script content for word-level processing\r\n   */\r\n  private analyzeScript(content: string): ScriptAnalysis {\r\n    const paragraphs = content.split(/\\n\\s*\\n/).filter(p => p.trim().length > 0);\r\n    const analysis: ScriptAnalysis = {\r\n      scriptId: 'karaoke-script-' + Date.now(),\r\n      words: [],\r\n      sentences: [],\r\n      paragraphs: [],\r\n      totalWords: 0,\r\n      totalSentences: 0,\r\n      totalParagraphs: paragraphs.length,\r\n      averageWordsPerSentence: 0,\r\n      estimatedReadingTime: 0,\r\n    };\r\n\r\n    let wordIndex = 0;\r\n    let sentenceIndex = 0;\r\n\r\n    paragraphs.forEach((paragraph, pIndex) => {\r\n      const paragraphStart = wordIndex;\r\n      const sentences = paragraph.split(/[.!?]+/).filter(s => s.trim().length > 0);\r\n      \r\n      sentences.forEach((sentence, sIndex) => {\r\n        const sentenceStart = wordIndex;\r\n        const words = sentence.trim().split(/\\s+/).filter(w => w.length > 0);\r\n        \r\n        words.forEach((word, wIndex) => {\r\n          analysis.words.push({\r\n            word: this.cleanWord(word),\r\n            index: wordIndex,\r\n            position: { start: 0, end: 0 }, // Will be calculated when rendering\r\n            sentence: sentenceIndex,\r\n            paragraph: pIndex,\r\n          });\r\n          wordIndex++;\r\n        });\r\n\r\n        analysis.sentences.push({\r\n          text: sentence.trim(),\r\n          index: sentenceIndex,\r\n          startIndex: sentenceStart,\r\n          endIndex: wordIndex - 1,\r\n          wordRange: {\r\n            start: sentenceStart,\r\n            end: wordIndex - 1,\r\n          },\r\n          paragraph: pIndex,\r\n        });\r\n        sentenceIndex++;\r\n      });\r\n\r\n      analysis.paragraphs.push({\r\n        text: paragraph,\r\n        index: pIndex,\r\n        startIndex: paragraphStart,\r\n        endIndex: wordIndex - 1,\r\n        wordRange: {\r\n          start: paragraphStart,\r\n          end: wordIndex - 1,\r\n        },\r\n        sentenceRange: {\r\n          start: sentenceIndex - sentences.length,\r\n          end: sentenceIndex - 1,\r\n        },\r\n        wordCount: wordIndex - paragraphStart,\r\n      });\r\n    });\r\n\r\n    analysis.totalWords = wordIndex;\r\n    analysis.totalSentences = sentenceIndex;\r\n    analysis.averageWordsPerSentence = sentenceIndex > 0 ? wordIndex / sentenceIndex : 0;\r\n    analysis.estimatedReadingTime = wordIndex / 150; // Assuming 150 WPM reading speed\r\n\r\n    return analysis;\r\n  }\r\n\r\n  /**\r\n   * Clean word for comparison (remove punctuation, normalize case)\r\n   */\r\n  private cleanWord(word: string): string {\r\n    return word.replace(/[^\\w]/g, '').toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * Normalize word for matching\r\n   */\r\n  private normalizeWord(word: string): string {\r\n    return word.toLowerCase().replace(/[^\\w]/g, '');\r\n  }\r\n\r\n  /**\r\n   * Pre-compute similarity cache for common words\r\n   */\r\n  private precomputeSimilarityCache(): void {\r\n    if (!this.scriptAnalysis) return;\r\n\r\n    // Cache similarities for frequently used words\r\n    const commonWords = ['the', 'and', 'a', 'to', 'of', 'in', 'is', 'you', 'that', 'it'];\r\n    const scriptWords = [...new Set(this.scriptAnalysis.words.map(w => this.normalizeWord(w.word)))];\r\n\r\n    commonWords.forEach(common => {\r\n      scriptWords.forEach(script => {\r\n        this.calculateSimilarity(common, script);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Async queue processing for performance optimization\r\n   */\r\n  private async processQueueAsync(): Promise<void> {\r\n    if (this.isProcessing || this.processingQueue.length === 0) return;\r\n\r\n    this.isProcessing = true;\r\n\r\n    try {\r\n      while (this.processingQueue.length > 0) {\r\n        const batch = this.processingQueue.splice(0, 5); // Process in small batches\r\n        \r\n        for (const item of batch) {\r\n          // Additional processing if needed\r\n          await new Promise(resolve => setTimeout(resolve, 0)); // Yield control\r\n        }\r\n      }\r\n    } finally {\r\n      this.isProcessing = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setup performance optimizations\r\n   */\r\n  private setupPerformanceOptimizations(): void {\r\n    // Limit cache size to prevent memory issues\r\n    setInterval(() => {\r\n      if (this.similarityCache.size > 1000) {\r\n        const entries = Array.from(this.similarityCache.entries());\r\n        this.similarityCache.clear();\r\n        // Keep most recent 500 entries\r\n        entries.slice(-500).forEach(([key, value]) => {\r\n          this.similarityCache.set(key, value);\r\n        });\r\n      }\r\n    }, 30000);\r\n  }\r\n\r\n  /**\r\n   * Get current karaoke state\r\n   */\r\n  public getState(): KaraokeState {\r\n    return { ...this.state };\r\n  }\r\n\r\n  /**\r\n   * Get script analysis\r\n   */\r\n  public getScriptAnalysis(): ScriptAnalysis | null {\r\n    return this.scriptAnalysis;\r\n  }\r\n\r\n  /**\r\n   * Update settings\r\n   */\r\n  public updateSettings(settings: Partial<KaraokeHighlightSettings>): void {\r\n    this.settings = { ...this.settings, ...settings };\r\n  }\r\n\r\n  /**\r\n   * Reset karaoke state\r\n   */\r\n  public reset(): void {\r\n    this.state = {\r\n      ...this.getInitialState(),\r\n      scriptWords: this.state.scriptWords,\r\n      totalSentences: this.state.totalSentences,\r\n      sessionStartTime: Date.now(),\r\n    };\r\n    this.notifyStateChange();\r\n  }\r\n\r\n  /**\r\n   * Start karaoke session\r\n   */\r\n  public start(): void {\r\n    this.state.isActive = true;\r\n    this.state.sessionStartTime = Date.now();\r\n    this.notifyStateChange();\r\n  }\r\n\r\n  /**\r\n   * Stop karaoke session\r\n   */\r\n  public stop(): void {\r\n    this.state.isActive = false;\r\n    this.notifyStateChange();\r\n  }\r\n\r\n  private notifyStateChange(): void {\r\n    this.onStateChange?.(this.getState());\r\n  }\r\n\r\n  private getInitialState(): KaraokeState {\r\n    return {\r\n      currentWordIndex: 0,\r\n      highlightedWords: [],\r\n      matchedWords: [],\r\n      scriptWords: [],\r\n      isActive: false,\r\n      currentSentence: 0,\r\n      totalSentences: 0,\r\n      accuracy: 0,\r\n      wordsPerMinute: 0,\r\n      sessionStartTime: Date.now(),\r\n    };\r\n  }\r\n\r\n  private getDefaultSettings(): KaraokeHighlightSettings {\r\n    return {\r\n      enabled: true,\r\n      highlightColor: '#FFD700',\r\n      highlightBackgroundColor: 'rgba(255, 215, 0, 0.3)',\r\n      autoScroll: true,\r\n      scrollOffset: 100,\r\n      matchThreshold: 0.7,\r\n      highlightDuration: 1500,\r\n      animationDuration: 200,\r\n      fadeOutDelay: 500,\r\n    };\r\n  }\r\n}\r\n\r\nexport const karaokeService = new KaraokeService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\multiLanguageService.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":240,"column":19,"nodeType":"MemberExpression","endLine":240,"endColumn":36},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":249,"column":14,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":249,"endColumn":56},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":261,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":261,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":261,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":261,"endColumn":20,"suggestions":[{"fix":{"range":[6069,6120],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":366,"column":48,"nodeType":"MemberExpression","endLine":366,"endColumn":74},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":452,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":452,"endColumn":55,"fix":{"range":[12012,12035],"text":"{charSets.push('Latin');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":453,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":453,"endColumn":65,"fix":{"range":[12075,12101],"text":"{charSets.push('Cyrillic');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":454,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":454,"endColumn":63,"fix":{"range":[12141,12165],"text":"{charSets.push('Arabic');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":455,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":455,"endColumn":63,"fix":{"range":[12205,12229],"text":"{charSets.push('Hebrew');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":456,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":456,"endColumn":60,"fix":{"range":[12269,12290],"text":"{charSets.push('CJK');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":457,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":457,"endColumn":67,"fix":{"range":[12330,12358],"text":"{charSets.push('Devanagari');}"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":467,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":467,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12588,12591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12588,12591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":495,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":495,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":495,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":495,"endColumn":20,"suggestions":[{"fix":{"range":[13364,13428],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":503,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":503,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":503,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":503,"endColumn":20,"suggestions":[{"fix":{"range":[13624,13688],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":512,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":512,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":512,"endColumn":20,"suggestions":[{"fix":{"range":[13940,13997],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":524,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":524,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":524,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":524,"endColumn":20,"suggestions":[{"fix":{"range":[14298,14355],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":547,"column":7,"nodeType":"MemberExpression","endLine":547,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":547,"column":22,"nodeType":"MemberExpression","endLine":547,"endColumn":33}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":6,"fixableWarningCount":0,"source":"/**\r\n * Multi-Language Service for SpeakSync\r\n * Handles language detection, selection, and STT engine switching\r\n */\r\n\r\nimport { LanguageOption, ScriptLanguage, MultiLanguageSettings, ExtendedScript } from '../types';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Supported languages with Deepgram model mappings\r\nconst SUPPORTED_LANGUAGES: LanguageOption[] = [\r\n  {\r\n    code: 'en',\r\n    name: 'English',\r\n    nativeName: 'English',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'es',\r\n    name: 'Spanish',\r\n    nativeName: 'Espaol',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-es',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'fr',\r\n    name: 'French',\r\n    nativeName: 'Franais',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-fr',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'de',\r\n    name: 'German',\r\n    nativeName: 'Deutsch',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-de',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'it',\r\n    name: 'Italian',\r\n    nativeName: 'Italiano',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-it',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'pt',\r\n    name: 'Portuguese',\r\n    nativeName: 'Portugus',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-pt',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'ru',\r\n    name: 'Russian',\r\n    nativeName: '',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-ru',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'ja',\r\n    name: 'Japanese',\r\n    nativeName: '',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-ja',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'ko',\r\n    name: 'Korean',\r\n    nativeName: '',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-ko',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'zh',\r\n    name: 'Chinese (Mandarin)',\r\n    nativeName: '',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-zh',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'ar',\r\n    name: 'Arabic',\r\n    nativeName: '',\r\n    rtl: true,\r\n    flag: '',\r\n    deepgramModel: 'general-ar',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'he',\r\n    name: 'Hebrew',\r\n    nativeName: '',\r\n    rtl: true,\r\n    flag: '',\r\n    deepgramModel: 'general-he',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'hi',\r\n    name: 'Hindi',\r\n    nativeName: '',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-hi',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'tr',\r\n    name: 'Turkish',\r\n    nativeName: 'Trke',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-tr',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'nl',\r\n    name: 'Dutch',\r\n    nativeName: 'Nederlands',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-nl',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'sv',\r\n    name: 'Swedish',\r\n    nativeName: 'Svenska',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-sv',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'no',\r\n    name: 'Norwegian',\r\n    nativeName: 'Norsk',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-no',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'da',\r\n    name: 'Danish',\r\n    nativeName: 'Dansk',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-da',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'pl',\r\n    name: 'Polish',\r\n    nativeName: 'Polski',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-pl',\r\n    supported: true\r\n  },\r\n  {\r\n    code: 'cs',\r\n    name: 'Czech',\r\n    nativeName: 'etina',\r\n    rtl: false,\r\n    flag: '',\r\n    deepgramModel: 'general-cs',\r\n    supported: true\r\n  }\r\n];\r\n\r\nclass MultiLanguageService {\r\n  private static instance: MultiLanguageService;\r\n  private settings: MultiLanguageSettings;\r\n  private scriptLanguages: Map<string, ScriptLanguage> = new Map();\r\n  private languageDetectionCache: Map<string, LanguageOption> = new Map();\r\n\r\n  private constructor() {\r\n    this.settings = {\r\n      autoDetectLanguage: true,\r\n      defaultLanguage: SUPPORTED_LANGUAGES[0], // English\r\n      fallbackLanguage: SUPPORTED_LANGUAGES[0],\r\n      enableRTLSupport: true,\r\n      showLanguageFlags: true,\r\n      enableTranslationSuggestions: false\r\n    };\r\n    this.loadSettings();\r\n  }\r\n\r\n  static getInstance(): MultiLanguageService {\r\n    if (!MultiLanguageService.instance) {\r\n      MultiLanguageService.instance = new MultiLanguageService();\r\n    }\r\n    return MultiLanguageService.instance;\r\n  }\r\n\r\n  // Language Management\r\n  getSupportedLanguages(): LanguageOption[] {\r\n    return SUPPORTED_LANGUAGES.filter(lang => lang.supported);\r\n  }\r\n\r\n  getLanguageByCode(code: string): LanguageOption | null {\r\n    return SUPPORTED_LANGUAGES.find(lang => lang.code === code) || null;\r\n  }\r\n\r\n  getDefaultLanguage(): LanguageOption {\r\n    return this.settings.defaultLanguage;\r\n  }\r\n\r\n  getLanguagesByRegion(region: 'europe' | 'asia' | 'americas' | 'africa' | 'middle_east'): LanguageOption[] {\r\n    const regionMap: { [key: string]: string[] } = {\r\n      europe: ['en', 'es', 'fr', 'de', 'it', 'ru', 'nl', 'sv', 'no', 'da', 'pl', 'cs'],\r\n      asia: ['ja', 'ko', 'zh', 'hi', 'tr'],\r\n      americas: ['en', 'es', 'pt'],\r\n      africa: ['ar', 'en', 'fr'],\r\n      middle_east: ['ar', 'he', 'tr']\r\n    };\r\n\r\n    const codes = regionMap[region] || [];\r\n    return SUPPORTED_LANGUAGES.filter(lang => codes.includes(lang.code) && lang.supported);\r\n  }\r\n\r\n  // Language Detection\r\n  async detectLanguage(text: string): Promise<LanguageOption | null> {\r\n    const cacheKey = this.hashText(text);\r\n    \r\n    if (this.languageDetectionCache.has(cacheKey)) {\r\n      return this.languageDetectionCache.get(cacheKey)!;\r\n    }\r\n\r\n    try {\r\n      const detectedLanguage = await this.performLanguageDetection(text);\r\n      \r\n      if (detectedLanguage) {\r\n        this.languageDetectionCache.set(cacheKey, detectedLanguage);\r\n      }\r\n      \r\n      return detectedLanguage;\r\n    } catch (error) {\r\n      console.error('Language detection failed:', error);\r\n      return this.settings.defaultLanguage;\r\n    }\r\n  }\r\n\r\n  private async performLanguageDetection(text: string): Promise<LanguageOption | null> {\r\n    // Simple heuristic-based detection for common languages\r\n    // In production, you might want to use a proper language detection library\r\n    \r\n    const cleanText = text.toLowerCase().trim();\r\n    const words = cleanText.split(/\\s+/).slice(0, 50); // Analyze first 50 words\r\n    \r\n    // Character-based detection for non-Latin scripts\r\n    if (this.containsArabicScript(text)) {\r\n      return this.getLanguageByCode('ar');\r\n    }\r\n    \r\n    if (this.containsHebrewScript(text)) {\r\n      return this.getLanguageByCode('he');\r\n    }\r\n    \r\n    if (this.containsChineseScript(text)) {\r\n      return this.getLanguageByCode('zh');\r\n    }\r\n    \r\n    if (this.containsJapaneseScript(text)) {\r\n      return this.getLanguageByCode('ja');\r\n    }\r\n    \r\n    if (this.containsKoreanScript(text)) {\r\n      return this.getLanguageByCode('ko');\r\n    }\r\n    \r\n    if (this.containsHindiScript(text)) {\r\n      return this.getLanguageByCode('hi');\r\n    }\r\n    \r\n    if (this.containsRussianScript(text)) {\r\n      return this.getLanguageByCode('ru');\r\n    }\r\n    \r\n    // Word-based detection for Latin script languages\r\n    const languageScores = this.calculateLanguageScores(words);\r\n    const bestMatch = this.getBestLanguageMatch(languageScores);\r\n    \r\n    return bestMatch;\r\n  }\r\n\r\n  private containsArabicScript(text: string): boolean {\r\n    return /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/.test(text);\r\n  }\r\n\r\n  private containsHebrewScript(text: string): boolean {\r\n    return /[\\u0590-\\u05FF\\uFB1D-\\uFB4F]/.test(text);\r\n  }\r\n\r\n  private containsChineseScript(text: string): boolean {\r\n    return /[\\u4E00-\\u9FFF\\u3400-\\u4DBF]/.test(text);\r\n  }\r\n\r\n  private containsJapaneseScript(text: string): boolean {\r\n    return /[\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]/.test(text);\r\n  }\r\n\r\n  private containsKoreanScript(text: string): boolean {\r\n    return /[\\uAC00-\\uD7AF\\u1100-\\u11FF\\u3130-\\u318F]/.test(text);\r\n  }\r\n\r\n  private containsHindiScript(text: string): boolean {\r\n    return /[\\u0900-\\u097F]/.test(text);\r\n  }\r\n\r\n  private containsRussianScript(text: string): boolean {\r\n    return /[\\u0400-\\u04FF]/.test(text);\r\n  }\r\n\r\n  private calculateLanguageScores(words: string[]): Map<string, number> {\r\n    // Common words and patterns for different languages\r\n    const languagePatterns: { [key: string]: { words: string[], patterns: RegExp[] } } = {\r\n      en: {\r\n        words: ['the', 'and', 'to', 'of', 'a', 'in', 'is', 'it', 'you', 'that', 'he', 'was', 'for', 'on', 'are'],\r\n        patterns: [/ing$/, /tion$/, /ly$/]\r\n      },\r\n      es: {\r\n        words: ['el', 'la', 'de', 'que', 'y', 'a', 'en', 'un', 'es', 'se', 'no', 'te', 'lo', 'le', 'da'],\r\n        patterns: [/cin$/, /mente$/, /ando$/]\r\n      },\r\n      fr: {\r\n        words: ['le', 'de', 'et', '', 'un', 'il', 'tre', 'et', 'en', 'avoir', 'que', 'pour', 'dans', 'ce', 'son'],\r\n        patterns: [/tion$/, /ment$/, /eur$/]\r\n      },\r\n      de: {\r\n        words: ['der', 'die', 'und', 'in', 'den', 'von', 'zu', 'das', 'mit', 'sich', 'des', 'auf', 'fr', 'ist', 'im'],\r\n        patterns: [/ung$/, /keit$/, /lich$/]\r\n      },\r\n      it: {\r\n        words: ['il', 'di', 'che', 'e', 'la', 'un', 'a', 'per', 'non', 'in', 'una', 'sono', 'mi', 'ho', 'lo'],\r\n        patterns: [/zione$/, /mente$/, /are$/]\r\n      }\r\n    };\r\n\r\n    const scores = new Map<string, number>();\r\n\r\n    Object.keys(languagePatterns).forEach(langCode => {\r\n      let score = 0;\r\n      const { words: commonWords, patterns } = languagePatterns[langCode];\r\n\r\n      // Score based on common words\r\n      words.forEach(word => {\r\n        if (commonWords.includes(word)) {\r\n          score += 2;\r\n        }\r\n      });\r\n\r\n      // Score based on patterns\r\n      words.forEach(word => {\r\n        patterns.forEach(pattern => {\r\n          if (pattern.test(word)) {\r\n            score += 1;\r\n          }\r\n        });\r\n      });\r\n\r\n      scores.set(langCode, score);\r\n    });\r\n\r\n    return scores;\r\n  }\r\n\r\n  private getBestLanguageMatch(scores: Map<string, number>): LanguageOption | null {\r\n    let bestScore = 0;\r\n    let bestLanguage: string | null = null;\r\n\r\n    scores.forEach((score, langCode) => {\r\n      if (score > bestScore) {\r\n        bestScore = score;\r\n        bestLanguage = langCode;\r\n      }\r\n    });\r\n\r\n    if (bestLanguage && bestScore > 0) {\r\n      return this.getLanguageByCode(bestLanguage);\r\n    }\r\n\r\n    return this.settings.defaultLanguage;\r\n  }\r\n\r\n  // Script Language Management\r\n  async setScriptLanguage(scriptId: string, language: LanguageOption, userOverride: boolean = true): Promise<void> {\r\n    const scriptLanguage: ScriptLanguage = {\r\n      scriptId,\r\n      language,\r\n      userOverride\r\n    };\r\n\r\n    this.scriptLanguages.set(scriptId, scriptLanguage);\r\n    await this.saveScriptLanguages();\r\n  }\r\n\r\n  getScriptLanguage(scriptId: string): ScriptLanguage | null {\r\n    return this.scriptLanguages.get(scriptId) || null;\r\n  }\r\n\r\n  async autoDetectScriptLanguage(script: ExtendedScript): Promise<LanguageOption | null> {\r\n    if (!this.settings.autoDetectLanguage) {\r\n      return this.settings.defaultLanguage;\r\n    }\r\n\r\n    const detected = await this.detectLanguage(script.content);\r\n    \r\n    if (detected) {\r\n      await this.setScriptLanguage(script.id, detected, false);\r\n    }\r\n\r\n    return detected;\r\n  }\r\n\r\n  // Text Direction and RTL Support\r\n  getTextDirection(language: LanguageOption): 'ltr' | 'rtl' {\r\n    return language.rtl ? 'rtl' : 'ltr';\r\n  }\r\n\r\n  isRTLLanguage(languageCode: string): boolean {\r\n    const language = this.getLanguageByCode(languageCode);\r\n    return language?.rtl || false;\r\n  }\r\n\r\n  // Character Set Analysis\r\n  analyzeCharacterSet(text: string): string {\r\n    const charSets: string[] = [];\r\n\r\n    if (/[a-zA-Z]/.test(text)) charSets.push('Latin');\r\n    if (/[\\u0400-\\u04FF]/.test(text)) charSets.push('Cyrillic');\r\n    if (/[\\u0600-\\u06FF]/.test(text)) charSets.push('Arabic');\r\n    if (/[\\u0590-\\u05FF]/.test(text)) charSets.push('Hebrew');\r\n    if (/[\\u4E00-\\u9FFF]/.test(text)) charSets.push('CJK');\r\n    if (/[\\u0900-\\u097F]/.test(text)) charSets.push('Devanagari');\r\n\r\n    return charSets.join(', ') || 'Unknown';\r\n  }\r\n\r\n  // Deepgram Integration\r\n  getDeepgramModel(language: LanguageOption): string {\r\n    return language.deepgramModel;\r\n  }\r\n\r\n  getDeepgramConfig(language: LanguageOption): any {\r\n    return {\r\n      model: language.deepgramModel,\r\n      language: language.code,\r\n      punctuate: true,\r\n      diarize: false,\r\n      smart_format: true,\r\n      utterances: true\r\n    };\r\n  }\r\n\r\n  // Settings Management\r\n  async updateSettings(settings: Partial<MultiLanguageSettings>): Promise<void> {\r\n    this.settings = { ...this.settings, ...settings };\r\n    await this.saveSettings();\r\n  }\r\n\r\n  getSettings(): MultiLanguageSettings {\r\n    return { ...this.settings };\r\n  }\r\n\r\n  private async loadSettings(): Promise<void> {\r\n    try {\r\n      const savedSettings = await AsyncStorage.getItem('multiLanguageSettings');\r\n      if (savedSettings) {\r\n        this.settings = { ...this.settings, ...JSON.parse(savedSettings) };\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load multi-language settings:', error);\r\n    }\r\n  }\r\n\r\n  private async saveSettings(): Promise<void> {\r\n    try {\r\n      await AsyncStorage.setItem('multiLanguageSettings', JSON.stringify(this.settings));\r\n    } catch (error) {\r\n      console.error('Failed to save multi-language settings:', error);\r\n    }\r\n  }\r\n\r\n  private async saveScriptLanguages(): Promise<void> {\r\n    try {\r\n      const data = Array.from(this.scriptLanguages.entries());\r\n      await AsyncStorage.setItem('scriptLanguages', JSON.stringify(data));\r\n    } catch (error) {\r\n      console.error('Failed to save script languages:', error);\r\n    }\r\n  }\r\n\r\n  async loadScriptLanguages(): Promise<void> {\r\n    try {\r\n      const savedData = await AsyncStorage.getItem('scriptLanguages');\r\n      if (savedData) {\r\n        const data = JSON.parse(savedData);\r\n        this.scriptLanguages = new Map(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load script languages:', error);\r\n    }\r\n  }\r\n\r\n  // Utility Methods\r\n  private hashText(text: string): string {\r\n    // Simple hash function for caching\r\n    let hash = 0;\r\n    const subset = text.substring(0, 200); // Use first 200 chars for hash\r\n    for (let i = 0; i < subset.length; i++) {\r\n      const char = subset.charCodeAt(i);\r\n      hash = ((hash << 5) - hash) + char;\r\n      hash = hash & hash; // Convert to 32bit integer\r\n    }\r\n    return hash.toString();\r\n  }\r\n\r\n  // Statistics and Analytics\r\n  getLanguageUsageStats(): { [languageCode: string]: number } {\r\n    const stats: { [languageCode: string]: number } = {};\r\n    \r\n    this.scriptLanguages.forEach(scriptLang => {\r\n      const code = scriptLang.language.code;\r\n      stats[code] = (stats[code] || 0) + 1;\r\n    });\r\n\r\n    return stats;\r\n  }\r\n\r\n  getMostUsedLanguages(limit: number = 5): LanguageOption[] {\r\n    const stats = this.getLanguageUsageStats();\r\n    const sorted = Object.entries(stats)\r\n      .sort(([, a], [, b]) => b - a)\r\n      .slice(0, limit);\r\n\r\n    return sorted\r\n      .map(([code]) => this.getLanguageByCode(code))\r\n      .filter((lang): lang is LanguageOption => lang !== null);\r\n  }\r\n}\r\n\r\nexport default MultiLanguageService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\networkService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isOnline' is defined but never used.","line":6,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOnline"},"fix":{"range":[197,214],"text":""},"desc":"Remove unused variable 'isOnline'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isOnline' is defined but never used.","line":40,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOnline"},"fix":{"range":[1086,1103],"text":""},"desc":"Remove unused variable 'isOnline'."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":62,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":69,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":23}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import NetInfo from '@react-native-community/netinfo';\r\n\r\nexport class NetworkService {\r\n  private static instance: NetworkService;\r\n  private onlineStatus: boolean = true;\r\n  private listeners: ((isOnline: boolean) => void)[] = [];\r\n\r\n  static getInstance(): NetworkService {\r\n    if (!NetworkService.instance) {\r\n      NetworkService.instance = new NetworkService();\r\n    }\r\n    return NetworkService.instance;\r\n  }\r\n\r\n  constructor() {\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    // Monitor network state changes\r\n    NetInfo.addEventListener(state => {\r\n      const isOnline = state.isConnected && state.isInternetReachable;\r\n      if (isOnline !== this.onlineStatus) {\r\n        this.onlineStatus = isOnline ?? false;\r\n        this.notifyListeners();\r\n      }\r\n    });\r\n\r\n    // Get initial network state\r\n    NetInfo.fetch().then(state => {\r\n      this.onlineStatus = (state.isConnected && state.isInternetReachable) ?? false;\r\n      this.notifyListeners();\r\n    });\r\n  }\r\n\r\n  isOnline(): boolean {\r\n    return this.onlineStatus;\r\n  }\r\n\r\n  addListener(listener: (isOnline: boolean) => void): () => void {\r\n    this.listeners.push(listener);\r\n    \r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.listeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.listeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  private notifyListeners() {\r\n    this.listeners.forEach(listener => listener(this.onlineStatus));\r\n  }\r\n\r\n  async waitForConnection(timeout: number = 30000): Promise<boolean> {\r\n    if (this.isOnline()) {\r\n      return true;\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      const timeoutId = setTimeout(() => {\r\n        unsubscribe();\r\n        resolve(false);\r\n      }, timeout);\r\n\r\n      const unsubscribe = this.addListener((isOnline) => {\r\n        if (isOnline) {\r\n          clearTimeout(timeoutId);\r\n          unsubscribe();\r\n          resolve(true);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport const networkService = NetworkService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\pacingMeterService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":22,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[624,647],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isOptimal' is defined but never used.","line":23,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOptimal"},"fix":{"range":[685,704],"text":""},"desc":"Remove unused variable 'isOptimal'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentWPM' is defined but never used.","line":23,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentWPM"},"fix":{"range":[703,723],"text":""},"desc":"Remove unused variable 'currentWPM'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":35,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[983,1006],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isOptimal' is defined but never used.","line":36,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOptimal"},"fix":{"range":[1038,1057],"text":""},"desc":"Remove unused variable 'isOptimal'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentWPM' is defined but never used.","line":36,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentWPM"},"fix":{"range":[1056,1076],"text":""},"desc":"Remove unused variable 'currentWPM'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":44,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":16,"suggestions":[{"fix":{"range":[1320,1402],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":51,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":51,"endColumn":31,"fix":{"range":[1517,1524],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":58,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":16,"suggestions":[{"fix":{"range":[1684,1728],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":66,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":66,"endColumn":37,"fix":{"range":[1894,1906],"text":"{return null;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":16,"suggestions":[{"fix":{"range":[2047,2108],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'confidence' is assigned a value but never used.","line":84,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"confidence"},"fix":{"range":[2301,2332],"text":""},"desc":"Remove unused variable 'confidence'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'confidence' is assigned a value but never used.","line":84,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":84,"endColumn":15},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":86,"column":49,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":86,"endColumn":56,"fix":{"range":[2395,2402],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":113,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":16,"suggestions":[{"fix":{"range":[3201,3346],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":129,"column":24,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":129,"endColumn":33,"fix":{"range":[3803,3812],"text":"{return 0;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":139,"column":45,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":139,"endColumn":54,"fix":{"range":[4055,4064],"text":"{return 0;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":161,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":161,"endColumn":53,"fix":{"range":[4783,4801],"text":"{return 'too-slow';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":162,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":162,"endColumn":53,"fix":{"range":[4837,4855],"text":"{return 'too-fast';}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionDuration' is assigned a value but never used.","line":204,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":204,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionDuration"},"fix":{"range":[6228,6324],"text":""},"desc":"Remove unused variable 'sessionDuration'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sessionDuration' is assigned a value but never used.","line":204,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":204,"endColumn":26},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":264,"column":43,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":264,"endColumn":52,"fix":{"range":[8845,8854],"text":"{return 0;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":279,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":279,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":279,"endColumn":16,"suggestions":[{"fix":{"range":[9308,9353],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":302,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":302,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":302,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":302,"endColumn":16,"suggestions":[{"fix":{"range":[9740,9774],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":350,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":350,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":350,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":350,"endColumn":16,"suggestions":[{"fix":{"range":[10737,10783],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":8,"fixableWarningCount":0,"source":"import { \r\n  PacingMeterSettings, \r\n  PacingMeterState, \r\n  WPMDataPoint, \r\n  PaceAnalysisSegment,\r\n  SessionSummaryReport,\r\n  ScriptAnalysis \r\n} from '../types';\r\n\r\n/**\r\n * Pacing Meter Service\r\n * Real-time WPM analysis with target-based visual feedback\r\n * Generates session summary reports with pace analysis\r\n */\r\nexport class PacingMeterService {\r\n  private settings: PacingMeterSettings = this.getDefaultSettings();\r\n  private state: PacingMeterState = this.getInitialState();\r\n  private scriptAnalysis: ScriptAnalysis | null = null;\r\n  private isActive = false;\r\n  \r\n  // Event callbacks\r\n  private onStateUpdate?: (state: PacingMeterState) => void;\r\n  private onPaceChange?: (isOptimal: boolean, currentWPM: number) => void;\r\n  \r\n  constructor() {\r\n    this.reset();\r\n  }\r\n\r\n  /**\r\n   * Initialize pacing meter with script and settings\r\n   */\r\n  public initialize(\r\n    scriptAnalysis: ScriptAnalysis,\r\n    settings: Partial<PacingMeterSettings> = {},\r\n    onStateUpdate?: (state: PacingMeterState) => void,\r\n    onPaceChange?: (isOptimal: boolean, currentWPM: number) => void\r\n  ): void {\r\n    this.scriptAnalysis = scriptAnalysis;\r\n    this.settings = { ...this.getDefaultSettings(), ...settings };\r\n    this.onStateUpdate = onStateUpdate;\r\n    this.onPaceChange = onPaceChange;\r\n    \r\n    this.reset();\r\n    console.log('Pacing meter initialized with target WPM:', this.settings.targetWPM);\r\n  }\r\n\r\n  /**\r\n   * Start pacing analysis session\r\n   */\r\n  public startSession(): void {\r\n    if (this.isActive) return;\r\n    \r\n    this.isActive = true;\r\n    this.state.sessionStartTime = Date.now();\r\n    this.state.wpmHistory = [];\r\n    this.state.paceAnalysis = [];\r\n    \r\n    console.log('Pacing meter session started');\r\n    this.notifyStateUpdate();\r\n  }\r\n\r\n  /**\r\n   * End pacing analysis session\r\n   */\r\n  public endSession(): SessionSummaryReport | null {\r\n    if (!this.isActive) return null;\r\n    \r\n    this.isActive = false;\r\n    this.state.sessionEndTime = Date.now();\r\n    \r\n    const report = this.generateSessionReport();\r\n    console.log('Pacing meter session ended. Report generated.');\r\n    \r\n    return report;\r\n  }\r\n\r\n  /**\r\n   * Process word timing data for WPM calculation\r\n   */\r\n  public processWordTiming(\r\n    wordIndex: number,\r\n    word: string,\r\n    timestamp: number,\r\n    confidence: number = 1.0\r\n  ): void {\r\n    if (!this.isActive || !this.scriptAnalysis) return;\r\n\r\n    // Calculate current WPM based on recent words\r\n    const currentWPM = this.calculateCurrentWPM(timestamp);\r\n    \r\n    // Update state\r\n    this.state.currentWPM = currentWPM;\r\n    this.state.averageWPM = this.calculateAverageWPM();\r\n    this.state.isInOptimalRange = this.isWPMOptimal(currentWPM);\r\n    \r\n    // Add data point to history\r\n    const dataPoint: WPMDataPoint = {\r\n      timestamp,\r\n      wpm: currentWPM,\r\n      wordIndex,\r\n      isOptimal: this.state.isInOptimalRange,\r\n    };\r\n    \r\n    this.state.wpmHistory.push(dataPoint);\r\n    \r\n    // Update pace analysis segments\r\n    this.updatePaceAnalysis(wordIndex, currentWPM, timestamp);\r\n    \r\n    // Notify listeners\r\n    this.notifyStateUpdate();\r\n    this.onPaceChange?.(this.state.isInOptimalRange, currentWPM);\r\n    \r\n    console.log(`Pace: ${currentWPM.toFixed(0)} WPM (Target: ${this.settings.targetWPM}) - ${this.state.isInOptimalRange ? 'Optimal' : 'Off-pace'}`);\r\n  }\r\n\r\n  /**\r\n   * Calculate current WPM from recent word timings\r\n   */\r\n  private calculateCurrentWPM(currentTimestamp: number): number {\r\n    const recentDataPoints = this.state.wpmHistory.slice(-10); // Last 10 words\r\n    \r\n    if (recentDataPoints.length < 2) {\r\n      return 0;\r\n    }\r\n    \r\n    const firstPoint = recentDataPoints[0];\r\n    const duration = (currentTimestamp - firstPoint.timestamp) / 1000; // seconds\r\n    \r\n    if (duration <= 0) return 0;\r\n    \r\n    const wordsCount = recentDataPoints.length;\r\n    return (wordsCount / duration) * 60;\r\n  }\r\n\r\n  /**\r\n   * Calculate session average WPM\r\n   */\r\n  private calculateAverageWPM(): number {\r\n    if (this.state.wpmHistory.length === 0) return 0;\r\n    \r\n    const totalWPM = this.state.wpmHistory.reduce((sum, point) => sum + point.wpm, 0);\r\n    return totalWPM / this.state.wpmHistory.length;\r\n  }\r\n\r\n  /**\r\n   * Check if WPM is within optimal range\r\n   */\r\n  private isWPMOptimal(wpm: number): boolean {\r\n    const target = this.settings.targetWPM;\r\n    const tolerance = this.settings.toleranceRange;\r\n    return wpm >= (target - tolerance) && wpm <= (target + tolerance);\r\n  }\r\n\r\n  /**\r\n   * Get pace status (optimal, too-fast, too-slow)\r\n   */\r\n  private getPaceStatus(wpm: number): 'optimal' | 'too-fast' | 'too-slow' {\r\n    const target = this.settings.targetWPM;\r\n    const tolerance = this.settings.toleranceRange;\r\n    \r\n    if (wpm < target - tolerance) return 'too-slow';\r\n    if (wpm > target + tolerance) return 'too-fast';\r\n    return 'optimal';\r\n  }\r\n\r\n  /**\r\n   * Update pace analysis segments\r\n   */\r\n  private updatePaceAnalysis(wordIndex: number, currentWPM: number, timestamp: number): void {\r\n    const currentStatus = this.getPaceStatus(currentWPM);\r\n    const lastSegment = this.state.paceAnalysis[this.state.paceAnalysis.length - 1];\r\n    \r\n    if (!lastSegment || lastSegment.status !== currentStatus) {\r\n      // Start new segment\r\n      const newSegment: PaceAnalysisSegment = {\r\n        startWordIndex: wordIndex,\r\n        endWordIndex: wordIndex,\r\n        averageWPM: currentWPM,\r\n        status: currentStatus,\r\n        duration: 0,\r\n      };\r\n      \r\n      this.state.paceAnalysis.push(newSegment);\r\n    } else {\r\n      // Update existing segment\r\n      lastSegment.endWordIndex = wordIndex;\r\n      lastSegment.averageWPM = (lastSegment.averageWPM + currentWPM) / 2;\r\n      lastSegment.duration = timestamp - this.getSegmentStartTimestamp(lastSegment);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get timestamp for segment start\r\n   */\r\n  private getSegmentStartTimestamp(segment: PaceAnalysisSegment): number {\r\n    const startPoint = this.state.wpmHistory.find(point => point.wordIndex === segment.startWordIndex);\r\n    return startPoint?.timestamp || Date.now();\r\n  }\r\n\r\n  /**\r\n   * Generate comprehensive session report\r\n   */\r\n  private generateSessionReport(): SessionSummaryReport {\r\n    const sessionDuration = (this.state.sessionEndTime || Date.now()) - this.state.sessionStartTime;\r\n    const totalWords = this.state.wpmHistory.length;\r\n    const optimalDataPoints = this.state.wpmHistory.filter(point => point.isOptimal);\r\n    const optimalPercentage = totalWords > 0 ? (optimalDataPoints.length / totalWords) * 100 : 0;\r\n    \r\n    const recommendations = this.generateRecommendations();\r\n    \r\n    return {\r\n      sessionId: `session_${Date.now()}`,\r\n      scriptId: this.scriptAnalysis?.scriptId || 'unknown',\r\n      startTime: this.state.sessionStartTime,\r\n      endTime: this.state.sessionEndTime || Date.now(),\r\n      totalWords,\r\n      averageWPM: this.state.averageWPM,\r\n      targetWPM: this.settings.targetWPM,\r\n      optimalPercentage,\r\n      segments: [...this.state.paceAnalysis],\r\n      fillerWords: [], // Will be populated by filler word service\r\n      recommendations,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate performance recommendations\r\n   */\r\n  private generateRecommendations(): string[] {\r\n    const recommendations: string[] = [];\r\n    const avgWPM = this.state.averageWPM;\r\n    const targetWPM = this.settings.targetWPM;\r\n    const tolerance = this.settings.toleranceRange;\r\n    \r\n    if (avgWPM < targetWPM - tolerance) {\r\n      recommendations.push(`Try to speak faster. Your average pace (${avgWPM.toFixed(0)} WPM) is below the target (${targetWPM} WPM).`);\r\n      recommendations.push('Practice with a metronome or backing track to maintain consistent pacing.');\r\n    } else if (avgWPM > targetWPM + tolerance) {\r\n      recommendations.push(`Try to slow down. Your average pace (${avgWPM.toFixed(0)} WPM) is above the target (${targetWPM} WPM).`);\r\n      recommendations.push('Focus on clear enunciation and natural pauses between sentences.');\r\n    } else {\r\n      recommendations.push('Great job! Your pacing is within the optimal range.');\r\n    }\r\n    \r\n    // Analyze consistency\r\n    const wpmVariance = this.calculateWPMVariance();\r\n    if (wpmVariance > 30) {\r\n      recommendations.push('Work on maintaining more consistent pacing throughout your delivery.');\r\n    }\r\n    \r\n    // Analyze problem segments\r\n    const problematicSegments = this.state.paceAnalysis.filter(s => s.status !== 'optimal');\r\n    if (problematicSegments.length > 0) {\r\n      recommendations.push(`${problematicSegments.length} segments had pacing issues. Review the highlighted sections.`);\r\n    }\r\n    \r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Calculate WPM variance for consistency analysis\r\n   */\r\n  private calculateWPMVariance(): number {\r\n    if (this.state.wpmHistory.length < 2) return 0;\r\n    \r\n    const mean = this.state.averageWPM;\r\n    const squaredDifferences = this.state.wpmHistory.map(point => \r\n      Math.pow(point.wpm - mean, 2)\r\n    );\r\n    \r\n    return Math.sqrt(squaredDifferences.reduce((sum, sq) => sum + sq, 0) / squaredDifferences.length);\r\n  }\r\n\r\n  /**\r\n   * Update settings\r\n   */\r\n  public updateSettings(newSettings: Partial<PacingMeterSettings>): void {\r\n    this.settings = { ...this.settings, ...newSettings };\r\n    console.log('Pacing meter settings updated');\r\n  }\r\n\r\n  /**\r\n   * Get current state\r\n   */\r\n  public getState(): PacingMeterState {\r\n    return { ...this.state };\r\n  }\r\n\r\n  /**\r\n   * Get current settings\r\n   */\r\n  public getSettings(): PacingMeterSettings {\r\n    return { ...this.settings };\r\n  }\r\n\r\n  /**\r\n   * Reset state\r\n   */\r\n  public reset(): void {\r\n    this.state = this.getInitialState();\r\n    this.isActive = false;\r\n    console.log('Pacing meter reset');\r\n  }\r\n\r\n  /**\r\n   * Notify state update\r\n   */\r\n  private notifyStateUpdate(): void {\r\n    this.onStateUpdate?.(this.getState());\r\n  }\r\n\r\n  /**\r\n   * Default settings\r\n   */\r\n  private getDefaultSettings(): PacingMeterSettings {\r\n    return {\r\n      enabled: true,\r\n      targetWPM: 150,\r\n      toleranceRange: 20,\r\n      showVisualMeter: true,\r\n      showSessionSummary: true,\r\n      colorScheme: {\r\n        optimal: '#10B981',    // Green\r\n        acceptable: '#F59E0B', // Yellow\r\n        poor: '#EF4444',       // Red\r\n      },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initial state\r\n   */\r\n  private getInitialState(): PacingMeterState {\r\n    return {\r\n      currentWPM: 0,\r\n      targetWPM: this.settings.targetWPM,\r\n      isInOptimalRange: false,\r\n      sessionStartTime: Date.now(),\r\n      averageWPM: 0,\r\n      wpmHistory: [],\r\n      paceAnalysis: [],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Cleanup resources\r\n   */\r\n  public destroy(): void {\r\n    this.isActive = false;\r\n    console.log('Pacing meter service destroyed');\r\n  }\r\n}\r\n\r\nexport const pacingMeterService = new PacingMeterService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\performanceOptimizer.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'PerformanceObserver' is not defined.","line":4,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":53},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":16,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":18,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[642,645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[642,645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":36,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1441,1444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1441,1444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'RequestInit' is not defined.","line":46,"column":42,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":53},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":52,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":60,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":63,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":72,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":49},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":74,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'entries' is defined but never used.","line":83,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"entries"},"fix":{"range":[2742,2778],"text":""},"desc":"Remove unused variable 'entries'."}]},{"ruleId":"no-undef","severity":2,"message":"'IntersectionObserverEntry' is not defined.","line":83,"column":47,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":72},{"ruleId":"no-undef","severity":2,"message":"'IntersectionObserver' is not defined.","line":84,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":124,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[3807,3811],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3813,3816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3813,3816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'NodeJS' is not defined.","line":129,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":24},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":134,"column":25,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":134,"endColumn":39,"fix":{"range":[4074,4088],"text":"{func(...args);}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":139,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":139,"endColumn":42,"fix":{"range":[4181,4203],"text":"{clearTimeout(timeout);}"}},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":139,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":139,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":140,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":27},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":142,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":142,"endColumn":34,"fix":{"range":[4274,4288],"text":"{func(...args);}"}},{"ruleId":"no-unused-vars","severity":2,"message":"'args' is defined but never used.","line":147,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[4389,4393],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4395,4398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4395,4398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":157,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":157,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'Worker' is not defined.","line":164,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'Worker' is not defined.","line":166,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":166,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":179,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":179,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":191,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":191,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":195,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":195,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'AudioContext' is not defined.","line":204,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":205,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":205,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":205,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":205,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5973,5976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5973,5976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":226,"column":20,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":226,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6788,6791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6788,6791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":244,"column":9,"nodeType":"MemberExpression","endLine":244,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":262,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":262,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'window' is not defined.","line":263,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":263,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7522,7525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7522,7525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":269,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":269,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":269,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":269,"endColumn":16,"suggestions":[{"fix":{"range":[7640,7694],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'url' is defined but never used.","line":272,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":272,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"url"},"fix":{"range":[7731,7742],"text":""},"desc":"Remove unused variable 'url'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'url' is defined but never used.","line":272,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":272,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'url' is defined but never used.","line":277,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"url"},"fix":{"range":[7863,7874],"text":""},"desc":"Remove unused variable 'url'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'url' is defined but never used.","line":277,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":277,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":277,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":277,"endColumn":63},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":279,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'AudioBuffer' is not defined.","line":283,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":283,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'AudioBuffer' is not defined.","line":283,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":283,"endColumn":66},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":291,"column":20,"nodeType":"MemberExpression","endLine":291,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":292,"column":9,"nodeType":"MemberExpression","endLine":292,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":299,"column":54,"nodeType":"MemberExpression","endLine":299,"endColumn":68},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":305,"column":9,"nodeType":"MemberExpression","endLine":305,"endColumn":23}],"suppressedMessages":[],"errorCount":41,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":3,"fixableWarningCount":0,"source":"// Performance optimization utilities for SpeakSync\r\nexport class PerformanceOptimizer {\r\n  private static instance: PerformanceOptimizer;\r\n  private observers: Map<string, PerformanceObserver> = new Map();\r\n  private metrics: Map<string, number[]> = new Map();\r\n\r\n  static getInstance(): PerformanceOptimizer {\r\n    if (!PerformanceOptimizer.instance) {\r\n      PerformanceOptimizer.instance = new PerformanceOptimizer();\r\n    }\r\n    return PerformanceOptimizer.instance;\r\n  }\r\n\r\n  // Memory management\r\n  initMemoryMonitoring() {\r\n    if ('memory' in performance) {\r\n      const checkMemory = () => {\r\n        const memory = (performance as any).memory;\r\n        if (memory) {\r\n          const memoryUsage = {\r\n            used: memory.usedJSHeapSize / 1024 / 1024, // MB\r\n            total: memory.totalJSHeapSize / 1024 / 1024, // MB\r\n            limit: memory.jsHeapSizeLimit / 1024 / 1024, // MB\r\n          };\r\n          \r\n          // Trigger garbage collection if memory usage is high\r\n          if (memoryUsage.used / memoryUsage.limit > 0.8) {\r\n            this.optimizeMemory();\r\n          }\r\n          \r\n          this.recordMetric('memory', memoryUsage.used);\r\n        }\r\n      };\r\n\r\n      // Check memory every 30 seconds\r\n      setInterval(checkMemory, 30000);\r\n      checkMemory(); // Initial check\r\n    }\r\n  }\r\n\r\n  // Network request optimization\r\n  createOptimizedFetch() {\r\n    const requestCache = new Map<string, { data: any; timestamp: number }>();\r\n    const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\r\n\r\n    return async (url: string, options?: RequestInit) => {\r\n      const cacheKey = `${url}_${JSON.stringify(options)}`;\r\n      const cached = requestCache.get(cacheKey);\r\n      \r\n      // Return cached data if still valid\r\n      if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\r\n        return Promise.resolve(new Response(JSON.stringify(cached.data)));\r\n      }\r\n\r\n      // Batch similar requests\r\n      if (this.hasPendingRequest(url)) {\r\n        return this.waitForPendingRequest(url);\r\n      }\r\n\r\n      const startTime = performance.now();\r\n      \r\n      try {\r\n        const response = await fetch(url, options);\r\n        const data = await response.json();\r\n        \r\n        // Cache successful responses\r\n        if (response.ok) {\r\n          requestCache.set(cacheKey, { data, timestamp: Date.now() });\r\n        }\r\n        \r\n        // Record network timing\r\n        this.recordMetric('network', performance.now() - startTime);\r\n        \r\n        return new Response(JSON.stringify(data));\r\n      } catch (error) {\r\n        this.recordMetric('networkErrors', 1);\r\n        throw error;\r\n      }\r\n    };\r\n  }\r\n\r\n  // Image optimization and lazy loading\r\n  createLazyImageObserver(callback: (entries: IntersectionObserverEntry[]) => void) {\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        callback(entries);\r\n      },\r\n      {\r\n        rootMargin: '50px 0px', // Start loading 50px before image enters viewport\r\n        threshold: 0.1,\r\n      }\r\n    );\r\n\r\n    return observer;\r\n  }\r\n\r\n  // Virtual scrolling for large lists\r\n  calculateVirtualScrollItems(\r\n    containerHeight: number,\r\n    itemHeight: number,\r\n    scrollTop: number,\r\n    totalItems: number,\r\n    overscan: number = 5\r\n  ) {\r\n    const visibleStart = Math.floor(scrollTop / itemHeight);\r\n    const visibleEnd = Math.min(\r\n      visibleStart + Math.ceil(containerHeight / itemHeight),\r\n      totalItems - 1\r\n    );\r\n\r\n    const start = Math.max(0, visibleStart - overscan);\r\n    const end = Math.min(totalItems - 1, visibleEnd + overscan);\r\n\r\n    return {\r\n      start,\r\n      end,\r\n      visibleStart,\r\n      visibleEnd,\r\n      offsetY: start * itemHeight,\r\n    };\r\n  }\r\n\r\n  // Debounce function for performance-critical operations\r\n  debounce<T extends (...args: any[]) => void>(\r\n    func: T,\r\n    wait: number,\r\n    immediate?: boolean\r\n  ): T {\r\n    let timeout: NodeJS.Timeout | null = null;\r\n    \r\n    return ((...args: Parameters<T>) => {\r\n      const later = () => {\r\n        timeout = null;\r\n        if (!immediate) func(...args);\r\n      };\r\n      \r\n      const callNow = immediate && !timeout;\r\n      \r\n      if (timeout) clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      \r\n      if (callNow) func(...args);\r\n    }) as T;\r\n  }\r\n\r\n  // Throttle function for scroll and resize events\r\n  throttle<T extends (...args: any[]) => void>(\r\n    func: T,\r\n    limit: number\r\n  ): T {\r\n    let inThrottle: boolean;\r\n    \r\n    return ((...args: Parameters<T>) => {\r\n      if (!inThrottle) {\r\n        func(...args);\r\n        inThrottle = true;\r\n        setTimeout(() => inThrottle = false, limit);\r\n      }\r\n    }) as T;\r\n  }\r\n\r\n  // Web Worker management for heavy computations\r\n  createOptimizedWorker(workerScript: string) {\r\n    return new Promise<Worker>((resolve, reject) => {\r\n      try {\r\n        const worker = new Worker(workerScript);\r\n        \r\n        worker.onerror = (error) => {\r\n          reject(error);\r\n        };\r\n        \r\n        worker.onmessage = (event) => {\r\n          if (event.data.type === 'ready') {\r\n            resolve(worker);\r\n          }\r\n        };\r\n        \r\n        // Timeout for worker initialization\r\n        setTimeout(() => {\r\n          reject(new Error('Worker initialization timeout'));\r\n        }, 5000);\r\n        \r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Bundle size optimization - dynamic imports\r\n  async loadModule<T>(moduleLoader: () => Promise<T>): Promise<T> {\r\n    const startTime = performance.now();\r\n    \r\n    try {\r\n      const module = await moduleLoader();\r\n      this.recordMetric('moduleLoad', performance.now() - startTime);\r\n      return module;\r\n    } catch (error) {\r\n      this.recordMetric('moduleLoadErrors', 1);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Audio processing optimization\r\n  createOptimizedAudioContext(): AudioContext {\r\n    const AudioContextClass = window.AudioContext || (window as any).webkitAudioContext;\r\n    const audioContext = new AudioContextClass({\r\n      latencyHint: 'interactive',\r\n      sampleRate: 44100,\r\n    });\r\n\r\n    // Optimize for speech processing\r\n    if (audioContext.createScriptProcessor) {\r\n      const processor = audioContext.createScriptProcessor(4096, 1, 1);\r\n      processor.connect(audioContext.destination);\r\n    }\r\n\r\n    return audioContext;\r\n  }\r\n\r\n  // Performance monitoring\r\n  private recordMetric(name: string, value: number) {\r\n    if (!this.metrics.has(name)) {\r\n      this.metrics.set(name, []);\r\n    }\r\n    \r\n    const values = this.metrics.get(name)!;\r\n    values.push(value);\r\n    \r\n    // Keep only last 100 measurements\r\n    if (values.length > 100) {\r\n      values.shift();\r\n    }\r\n  }\r\n\r\n  getPerformanceReport() {\r\n    const report: Record<string, any> = {};\r\n    \r\n    this.metrics.forEach((values, name) => {\r\n      if (values.length > 0) {\r\n        const avg = values.reduce((a, b) => a + b, 0) / values.length;\r\n        const max = Math.max(...values);\r\n        const min = Math.min(...values);\r\n        \r\n        report[name] = {\r\n          average: Math.round(avg * 100) / 100,\r\n          max: Math.round(max * 100) / 100,\r\n          min: Math.round(min * 100) / 100,\r\n          samples: values.length,\r\n        };\r\n      }\r\n    });\r\n    \r\n    return report;\r\n  }\r\n\r\n  // Clean up resources\r\n  private optimizeMemory() {\r\n    // Clear old cached data\r\n    this.clearOldCaches();\r\n    \r\n    // Force garbage collection if available\r\n    if ('gc' in window) {\r\n      (window as any).gc();\r\n    }\r\n  }\r\n\r\n  private clearOldCaches() {\r\n    // This would be implemented to clear various caches\r\n    console.log('Clearing old caches to optimize memory');\r\n  }\r\n\r\n  private hasPendingRequest(url: string): boolean {\r\n    // Implementation to track pending requests\r\n    return false;\r\n  }\r\n\r\n  private waitForPendingRequest(url: string): Promise<Response> {\r\n    // Implementation to wait for pending requests\r\n    return Promise.resolve(new Response());\r\n  }\r\n\r\n  // Real-time speech processing optimization\r\n  optimizeSpeechProcessing(audioBuffer: AudioBuffer): AudioBuffer {\r\n    // Apply noise reduction and gain normalization\r\n    const channelData = audioBuffer.getChannelData(0);\r\n    const length = channelData.length;\r\n    \r\n    // Simple noise gate\r\n    const threshold = 0.01;\r\n    for (let i = 0; i < length; i++) {\r\n      if (Math.abs(channelData[i]) < threshold) {\r\n        channelData[i] = 0;\r\n      }\r\n    }\r\n    \r\n    // Normalize audio levels\r\n    let maxAmplitude = 0;\r\n    for (let i = 0; i < length; i++) {\r\n      maxAmplitude = Math.max(maxAmplitude, Math.abs(channelData[i]));\r\n    }\r\n    \r\n    if (maxAmplitude > 0) {\r\n      const normalizeGain = 0.8 / maxAmplitude;\r\n      for (let i = 0; i < length; i++) {\r\n        channelData[i] *= normalizeGain;\r\n      }\r\n    }\r\n    \r\n    return audioBuffer;\r\n  }\r\n\r\n  // Public cleanup method\r\n  cleanup() {\r\n    this.optimizeMemory();\r\n    this.clearOldCaches();\r\n    this.observers.clear();\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const performanceOptimizer = PerformanceOptimizer.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\revenueCatService.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":52,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":52,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":52,"endColumn":20,"suggestions":[{"fix":{"range":[1297,1354],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":62,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":20,"suggestions":[{"fix":{"range":[1566,1613],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":72,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":20,"suggestions":[{"fix":{"range":[1793,1836],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":81,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":20,"suggestions":[{"fix":{"range":[2013,2066],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2134,2137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2134,2137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":91,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":91,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":91,"endColumn":20,"suggestions":[{"fix":{"range":[2285,2334],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2408,2411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2408,2411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":101,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[2553,2609],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2867,2870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2867,2870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":121,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":121,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":121,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":121,"endColumn":20,"suggestions":[{"fix":{"range":[3137,3185],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3516,3519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3516,3519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":145,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":145,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":145,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":145,"endColumn":20,"suggestions":[{"fix":{"range":[3844,3896],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":156,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":156,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":156,"endColumn":20,"suggestions":[{"fix":{"range":[4215,4267],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":167,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":20,"suggestions":[{"fix":{"range":[4540,4593],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":186,"column":33,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":186,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":198,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":198,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":198,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":198,"endColumn":20,"suggestions":[{"fix":{"range":[5509,5570],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":209,"column":9,"nodeType":"MemberExpression","endLine":209,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":214,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":214,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":214,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":214,"endColumn":20,"suggestions":[{"fix":{"range":[6014,6066],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":221,"column":14,"nodeType":"MemberExpression","endLine":221,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":228,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":228,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":228,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":228,"endColumn":18,"suggestions":[{"fix":{"range":[6399,6438],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":235,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":235,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":236,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":236,"endColumn":23}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Purchases, { CustomerInfo, PurchasesPackage, LOG_LEVEL } from 'react-native-purchases';\r\nimport { Platform } from 'react-native';\r\n\r\nexport interface RevenueCatConfig {\r\n  apiKey: string;\r\n  userId?: string;\r\n  debugMode?: boolean;\r\n}\r\n\r\nexport interface ProductInfo {\r\n  identifier: string;\r\n  title: string;\r\n  description: string;\r\n  price: string;\r\n  currencyCode: string;\r\n}\r\n\r\nclass RevenueCatService {\r\n  private static instance: RevenueCatService;\r\n  private isInitialized = false;\r\n  private debugMode = false;\r\n\r\n  static getInstance(): RevenueCatService {\r\n    if (!RevenueCatService.instance) {\r\n      RevenueCatService.instance = new RevenueCatService();\r\n    }\r\n    return RevenueCatService.instance;\r\n  }\r\n\r\n  async initialize(config: RevenueCatConfig): Promise<void> {\r\n    try {\r\n      if (this.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      this.debugMode = config.debugMode || false;\r\n\r\n      // Configure RevenueCat\r\n      await Purchases.configure({\r\n        apiKey: config.apiKey,\r\n        appUserID: config.userId,\r\n      });\r\n\r\n      // Set debug mode\r\n      if (this.debugMode) {\r\n        Purchases.setLogLevel(LOG_LEVEL.DEBUG);\r\n      }\r\n\r\n      this.isInitialized = true;\r\n      this.log('RevenueCat initialized successfully');\r\n    } catch (error) {\r\n      console.error('Failed to initialize RevenueCat:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async setUserId(userId: string): Promise<void> {\r\n    try {\r\n      await Purchases.logIn(userId);\r\n      this.log(`User ID set to: ${userId}`);\r\n    } catch (error) {\r\n      console.error('Failed to set user ID:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async logOut(): Promise<void> {\r\n    try {\r\n      await Purchases.logOut();\r\n      this.log('User logged out');\r\n    } catch (error) {\r\n      console.error('Failed to log out:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getCustomerInfo(): Promise<CustomerInfo> {\r\n    try {\r\n      return await Purchases.getCustomerInfo();\r\n    } catch (error) {\r\n      console.error('Failed to get customer info:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getOfferings(): Promise<any[]> {\r\n    try {\r\n      const offerings = await Purchases.getOfferings();\r\n      return Object.values(offerings.all);\r\n    } catch (error) {\r\n      console.error('Failed to get offerings:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getCurrentOffering(): Promise<any | null> {\r\n    try {\r\n      const offerings = await Purchases.getOfferings();\r\n      return offerings.current;\r\n    } catch (error) {\r\n      console.error('Failed to get current offering:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getProducts(): Promise<ProductInfo[]> {\r\n    try {\r\n      const offering = await this.getCurrentOffering();\r\n      if (!offering) {\r\n        return [];\r\n      }\r\n\r\n      return offering.availablePackages.map((pkg: any) => ({\r\n        identifier: pkg.product.identifier,\r\n        title: pkg.product.title,\r\n        description: pkg.product.description,\r\n        price: pkg.product.priceString,\r\n        currencyCode: pkg.product.currencyCode,\r\n      }));\r\n    } catch (error) {\r\n      console.error('Failed to get products:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async purchaseProduct(productId: string): Promise<CustomerInfo> {\r\n    try {\r\n      const offering = await this.getCurrentOffering();\r\n      if (!offering) {\r\n        throw new Error('No current offering available');\r\n      }\r\n\r\n      const pkg = offering.availablePackages.find(\r\n        (p: any) => p.product.identifier === productId\r\n      );\r\n\r\n      if (!pkg) {\r\n        throw new Error(`Product ${productId} not found`);\r\n      }\r\n\r\n      const result = await Purchases.purchasePackage(pkg);\r\n      this.log(`Purchase successful for: ${productId}`);\r\n      return result.customerInfo;\r\n    } catch (error) {\r\n      console.error('Failed to purchase product:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async purchasePackage(pkg: PurchasesPackage): Promise<CustomerInfo> {\r\n    try {\r\n      const result = await Purchases.purchasePackage(pkg);\r\n      this.log(`Package purchase successful: ${pkg.product.identifier}`);\r\n      return result.customerInfo;\r\n    } catch (error) {\r\n      console.error('Failed to purchase package:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async restorePurchases(): Promise<CustomerInfo> {\r\n    try {\r\n      const customerInfo = await Purchases.restorePurchases();\r\n      this.log('Purchases restored successfully');\r\n      return customerInfo;\r\n    } catch (error) {\r\n      console.error('Failed to restore purchases:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async checkSubscriptionStatus(): Promise<{\r\n    isActive: boolean;\r\n    activeSubscriptions: string[];\r\n    expirationDate?: Date;\r\n  }> {\r\n    try {\r\n      const customerInfo = await this.getCustomerInfo();\r\n      const activeSubscriptions = Object.keys(customerInfo.activeSubscriptions);\r\n      \r\n      let expirationDate: Date | undefined;\r\n      if (activeSubscriptions.length > 0) {\r\n        // Get the latest expiration date\r\n        const expirationDates = Object.values(customerInfo.allExpirationDates)\r\n          .filter(date => date !== null)\r\n          .map(date => new Date(date!))\r\n          .sort((a, b) => b.getTime() - a.getTime());\r\n        \r\n        expirationDate = expirationDates[0];\r\n      }\r\n\r\n      return {\r\n        isActive: activeSubscriptions.length > 0,\r\n        activeSubscriptions,\r\n        expirationDate,\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to check subscription status:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getEntitlements(): Promise<Record<string, boolean>> {\r\n    try {\r\n      const customerInfo = await this.getCustomerInfo();\r\n      const entitlements: Record<string, boolean> = {};\r\n      \r\n      Object.entries(customerInfo.entitlements.active).forEach(([key, entitlement]) => {\r\n        entitlements[key] = entitlement.isActive;\r\n      });\r\n\r\n      return entitlements;\r\n    } catch (error) {\r\n      console.error('Failed to get entitlements:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  isEntitlementActive(entitlementId: string): Promise<boolean> {\r\n    return this.getEntitlements().then(entitlements => {\r\n      return entitlements[entitlementId] || false;\r\n    });\r\n  }\r\n\r\n  // Helper method for logging\r\n  private log(message: string): void {\r\n    if (this.debugMode) {\r\n      console.log(`[RevenueCat] ${message}`);\r\n    }\r\n  }\r\n\r\n  // Get platform-specific API key\r\n  static getPlatformApiKey(): string {\r\n    return Platform.select({\r\n      ios: process.env.EXPO_PUBLIC_REVENUECAT_IOS_API_KEY || 'your_ios_api_key_here',\r\n      android: process.env.EXPO_PUBLIC_REVENUECAT_ANDROID_API_KEY || 'your_android_api_key_here',\r\n      default: 'your_default_api_key_here',\r\n    });\r\n  }\r\n}\r\n\r\nexport default RevenueCatService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\speechRecognitionService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Speech' is defined but never used.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Speech"},"fix":{"range":[41,58],"text":""},"desc":"Remove unused variable 'Speech'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Speech' is defined but never used.","line":2,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[546,549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[546,549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":19,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[640,669],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":20,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"word"},"fix":{"range":[719,732],"text":""},"desc":"Remove unused variable 'word'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'confidence' is defined but never used.","line":20,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"confidence"},"fix":{"range":[731,751],"text":""},"desc":"Remove unused variable 'confidence'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":20,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":84,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[751,770],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'match' is defined but never used.","line":21,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"match"},"fix":{"range":[823,846],"text":""},"desc":"Remove unused variable 'match'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":73,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2284,2337],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":99,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":20,"suggestions":[{"fix":{"range":[3036,3092],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":142,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":142,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":142,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":142,"endColumn":20,"suggestions":[{"fix":{"range":[4702,4753],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":175,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":175,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":175,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":175,"endColumn":20,"suggestions":[{"fix":{"range":[5673,5724],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":205,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":205,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":20,"suggestions":[{"fix":{"range":[6731,6773],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":210,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":210,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":20,"suggestions":[{"fix":{"range":[6912,6954],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":213,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7037,7040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7037,7040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":250,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8382,8385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8382,8385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":251,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":251,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":22,"suggestions":[{"fix":{"range":[8401,8441],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":264,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":264,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":264,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":264,"endColumn":20,"suggestions":[{"fix":{"range":[8785,8836],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":283,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":283,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":283,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":283,"endColumn":18,"suggestions":[{"fix":{"range":[9443,9477],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":286,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":286,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":286,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":286,"endColumn":20,"suggestions":[{"fix":{"range":[9516,9559],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":335,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":20,"suggestions":[{"fix":{"range":[11185,11227],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":345,"column":46,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":345,"endColumn":53,"fix":{"range":[11464,11471],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":349,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":349,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'clearInterval' is not defined.","line":351,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":351,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":361,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":361,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":361,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":361,"endColumn":22,"suggestions":[{"fix":{"range":[11988,12035],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'clearInterval' is not defined.","line":362,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":362,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":385,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":385,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":385,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":385,"endColumn":20,"suggestions":[{"fix":{"range":[12638,12688],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":421,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":421,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":421,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":421,"endColumn":16,"suggestions":[{"fix":{"range":[13774,13812],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":424,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":424,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[13851,13880],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":460,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":460,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":460,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":460,"endColumn":20,"suggestions":[{"fix":{"range":[14920,14969],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'word' is defined but never used.","line":480,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":480,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"word"},"fix":{"range":[15420,15433],"text":""},"desc":"Remove unused variable 'word'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'confidence' is defined but never used.","line":480,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":480,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"confidence"},"fix":{"range":[15432,15452],"text":""},"desc":"Remove unused variable 'confidence'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":480,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":480,"endColumn":89,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[15452,15471],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'match' is defined but never used.","line":491,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":491,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"match"},"fix":{"range":[15752,15775],"text":""},"desc":"Remove unused variable 'match'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":507,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":507,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":507,"endColumn":22,"suggestions":[{"fix":{"range":[16263,16308],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":517,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":517,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":517,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":517,"endColumn":22,"suggestions":[{"fix":{"range":[16519,16567],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":522,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":522,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16634,16637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16634,16637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isFinal' is defined but never used.","line":522,"column":88,"nodeType":"Identifier","messageId":"unusedVar","endLine":522,"endColumn":104,"suggestions":[{"messageId":"removeVar","data":{"varName":"isFinal"},"fix":{"range":[16679,16697],"text":""},"desc":"Remove unused variable 'isFinal'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isFinal' is defined but never used.","line":522,"column":88,"nodeType":null,"messageId":"unusedVar","endLine":522,"endColumn":95},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":527,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":527,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16867,16870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16867,16870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":35,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { Audio } from 'expo-av';\r\nimport * as Speech from 'expo-speech';\r\nimport Constants from 'expo-constants';\r\nimport { Platform, PermissionsAndroid } from 'react-native';\r\nimport { createClient, LiveTranscriptionEvents } from '@deepgram/sdk';\r\nimport { PerformanceOptimizer } from './performanceOptimizer';\r\nimport type { \r\n  SpeechRecognitionState, \r\n  AudioPermissions, \r\n  TranscriptionResult, \r\n  SpeechConfig,\r\n  WordMatch \r\n} from '../types';\r\n\r\nclass SpeechRecognitionService {\r\n  private deepgram: any = null;\r\n  private connection: any = null;\r\n  private recording: Audio.Recording | null = null;\r\n  private listeners: Array<(state: SpeechRecognitionState) => void> = [];\r\n  private wordListeners: Array<(word: string, confidence: number, timestamp: number) => void> = [];\r\n  private karaokeListeners: Array<(match: WordMatch | null) => void> = [];\r\n  private performanceOptimizer = PerformanceOptimizer.getInstance();\r\n  private currentState: SpeechRecognitionState = {\r\n    isListening: false,\r\n    isRecording: false,\r\n    hasPermission: false,\r\n    isProcessing: false,\r\n    transcript: '',\r\n    currentTranscript: '',\r\n    finalTranscript: '',\r\n    confidence: 0,\r\n    error: null,\r\n    isEnabled: true,\r\n    language: 'en-US',\r\n    lastWordTimestamp: 0,\r\n    mode: 'deepgram',\r\n    isConnected: false,\r\n  };\r\n\r\n  private config: SpeechConfig = {\r\n    language: 'en-US',\r\n    model: 'nova-2',\r\n    smartFormat: true,\r\n    punctuate: true,\r\n    profanityFilter: false,\r\n    redact: [],\r\n    keywords: [],\r\n    detectLanguage: false,\r\n    enableUtteranceEndMarker: true,\r\n    enableWordTimestamps: true,\r\n    deepgramApiKey: Constants.expoConfig?.extra?.deepgramApiKey || '',\r\n  };\r\n\r\n  constructor() {\r\n    this.initializeAudio();\r\n    // Automatically set Deepgram API key from Expo Constants\r\n    const deepgramApiKey = Constants.expoConfig?.extra?.deepgramApiKey;\r\n    if (deepgramApiKey) {\r\n      this.setApiKey(deepgramApiKey);\r\n    }\r\n  }\r\n\r\n  private async initializeAudio() {\r\n    try {\r\n      await Audio.setAudioModeAsync({\r\n        allowsRecordingIOS: true,\r\n        playsInSilentModeIOS: true,\r\n        shouldDuckAndroid: true,\r\n        playThroughEarpieceAndroid: false,\r\n        staysActiveInBackground: false,\r\n      });\r\n    } catch (error) {\r\n      console.error('Audio initialization failed:', error);\r\n      this.updateState({ error: 'Failed to initialize audio system' });\r\n    }\r\n  }\r\n\r\n  public setConfig(newConfig: Partial<SpeechConfig>) {\r\n    this.config = { ...this.config, ...newConfig };\r\n  }\r\n\r\n  public setApiKey(apiKey: string) {\r\n    this.config.deepgramApiKey = apiKey;\r\n    if (apiKey) {\r\n      this.initializeDeepgram();\r\n    }\r\n  }\r\n\r\n  private initializeDeepgram() {\r\n    if (!this.config.deepgramApiKey) {\r\n      this.updateState({ mode: 'device', error: 'No Deepgram API key provided' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.deepgram = createClient(this.config.deepgramApiKey);\r\n      this.updateState({ mode: 'deepgram', error: null });\r\n    } catch (error) {\r\n      console.error('Deepgram initialization failed:', error);\r\n      this.updateState({ \r\n        mode: 'device', \r\n        error: 'Failed to initialize Deepgram. Falling back to device STT.' \r\n      });\r\n    }\r\n  }\r\n\r\n  public async requestPermissions(): Promise<AudioPermissions> {\r\n    try {\r\n      if (Platform.OS === 'android') {\r\n        const granted = await PermissionsAndroid.request(\r\n          PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,\r\n          {\r\n            title: 'Microphone Permission',\r\n            message: 'SpeakSync needs access to your microphone for speech recognition during teleprompter practice.',\r\n            buttonNeutral: 'Ask Me Later',\r\n            buttonNegative: 'Cancel',\r\n            buttonPositive: 'OK',\r\n          }\r\n        );\r\n\r\n        const permissions: AudioPermissions = {\r\n          granted: granted === PermissionsAndroid.RESULTS.GRANTED,\r\n          canAskAgain: granted !== PermissionsAndroid.RESULTS.NEVER_ASK_AGAIN,\r\n          status: granted === PermissionsAndroid.RESULTS.GRANTED ? 'granted' : 'denied',\r\n        };\r\n\r\n        this.updateState({ hasPermission: permissions.granted });\r\n        return permissions;\r\n      } else {\r\n        // iOS permissions are handled by expo-av automatically\r\n        const { status } = await Audio.requestPermissionsAsync();\r\n        const permissions: AudioPermissions = {\r\n          granted: status === 'granted',\r\n          canAskAgain: status !== 'denied',\r\n          status: status as 'granted' | 'denied' | 'undetermined',\r\n        };\r\n\r\n        this.updateState({ hasPermission: permissions.granted });\r\n        return permissions;\r\n      }\r\n    } catch (error) {\r\n      console.error('Permission request failed:', error);\r\n      const permissions: AudioPermissions = {\r\n        granted: false,\r\n        canAskAgain: true,\r\n        status: 'denied',\r\n      };\r\n      this.updateState({ hasPermission: false, error: 'Failed to request microphone permissions' });\r\n      return permissions;\r\n    }\r\n  }\r\n\r\n  public async startListening(): Promise<void> {\r\n    if (!this.currentState.hasPermission) {\r\n      const permissions = await this.requestPermissions();\r\n      if (!permissions.granted) {\r\n        throw new Error('Microphone permission not granted');\r\n      }\r\n    }\r\n\r\n    this.updateState({ \r\n      isListening: true, \r\n      error: null, \r\n      currentTranscript: '', \r\n      finalTranscript: '' \r\n    });\r\n\r\n    try {\r\n      if (this.currentState.mode === 'deepgram' && this.deepgram) {\r\n        await this.startDeepgramListening();\r\n      } else {\r\n        await this.startDeviceListening();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to start listening:', error);\r\n      this.updateState({ \r\n        isListening: false, \r\n        error: 'Failed to start speech recognition' \r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async startDeepgramListening(): Promise<void> {\r\n    try {\r\n      // Create Deepgram connection\r\n      this.connection = this.deepgram.listen.live({\r\n        language: this.config.language,\r\n        model: this.config.model,\r\n        smart_format: this.config.smartFormat,\r\n        punctuate: this.config.punctuate,\r\n        profanity_filter: this.config.profanityFilter,\r\n        redact: this.config.redact,\r\n        keywords: this.config.keywords,\r\n        detect_language: this.config.detectLanguage,\r\n        utterance_end_ms: this.config.enableUtteranceEndMarker ? 1000 : undefined,\r\n        encoding: 'linear16',\r\n        sample_rate: 16000,\r\n        channels: 1,\r\n      });\r\n\r\n      // Set up event listeners\r\n      this.connection.on(LiveTranscriptionEvents.Open, () => {\r\n        this.updateState({ isConnected: true });\r\n        console.log('Deepgram connection opened');\r\n      });\r\n\r\n      this.connection.on(LiveTranscriptionEvents.Close, () => {\r\n        this.updateState({ isConnected: false });\r\n        console.log('Deepgram connection closed');\r\n      });\r\n\r\n      this.connection.on(LiveTranscriptionEvents.Transcript, (data: any) => {\r\n        const transcript = data.channel?.alternatives?.[0]?.transcript || '';\r\n        const confidence = data.channel?.alternatives?.[0]?.confidence || 0;\r\n        const isFinal = data.is_final || false;\r\n        const words = data.channel?.alternatives?.[0]?.words || [];\r\n\r\n        if (transcript) {\r\n          if (isFinal) {\r\n            this.updateState({ \r\n              finalTranscript: this.currentState.finalTranscript + ' ' + transcript,\r\n              currentTranscript: '',\r\n              confidence: confidence \r\n            });\r\n\r\n            // Process words for karaoke highlighting\r\n            this.processWordsForKaraoke(words, transcript, confidence, isFinal);\r\n          } else {\r\n            this.updateState({ \r\n              currentTranscript: transcript,\r\n              confidence: confidence \r\n            });\r\n\r\n            // Process interim words for real-time highlighting\r\n            this.processWordsForKaraoke(words, transcript, confidence, isFinal);\r\n          }\r\n\r\n          // Notify listeners with transcription result\r\n          this.notifyTranscription({\r\n            transcript,\r\n            confidence,\r\n            isFinal,\r\n            timestamp: Date.now(),\r\n            words: words,\r\n          });\r\n        }\r\n      });\r\n\r\n      this.connection.on(LiveTranscriptionEvents.Error, (error: any) => {\r\n        console.error('Deepgram error:', error);\r\n        this.updateState({ \r\n          error: 'Deepgram transcription error. Switching to device STT.',\r\n          mode: 'device' \r\n        });\r\n        // Fallback to device STT\r\n        this.startDeviceListening();\r\n      });\r\n\r\n      // Start recording and streaming\r\n      await this.startRecording(true);\r\n\r\n    } catch (error) {\r\n      console.error('Deepgram listening failed:', error);\r\n      this.updateState({ \r\n        mode: 'device', \r\n        error: 'Deepgram failed. Using device STT.' \r\n      });\r\n      await this.startDeviceListening();\r\n    }\r\n  }\r\n\r\n  private async startDeviceListening(): Promise<void> {\r\n    try {\r\n      // Start recording for device STT\r\n      await this.startRecording(false);\r\n      \r\n      // For device STT, we'll process the recording in chunks\r\n      this.updateState({ mode: 'device' });\r\n      \r\n      // Note: Device STT implementation would depend on platform-specific modules\r\n      // This is a placeholder for the device STT implementation\r\n      console.log('Device STT started');\r\n      \r\n    } catch (error) {\r\n      console.error('Device STT failed:', error);\r\n      this.updateState({ \r\n        error: 'Device speech recognition failed',\r\n        isListening: false \r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async startRecording(streamToDeepgram: boolean = false): Promise<void> {\r\n    try {\r\n      // Optimized recording options with performance considerations\r\n      const recordingOptions: Audio.RecordingOptions = {\r\n        android: {\r\n          extension: '.m4a',\r\n          outputFormat: Audio.AndroidOutputFormat.MPEG_4,\r\n          audioEncoder: Audio.AndroidAudioEncoder.AAC,\r\n          sampleRate: 16000, // Optimized for speech recognition\r\n          numberOfChannels: 1,\r\n          bitRate: 64000, // Reduced bitrate for better performance\r\n        },\r\n        ios: {\r\n          extension: '.wav',\r\n          audioQuality: Audio.IOSAudioQuality.MEDIUM, // Balanced quality/performance\r\n          sampleRate: 16000,\r\n          numberOfChannels: 1,\r\n          bitRate: 64000,\r\n          linearPCMBitDepth: 16,\r\n          linearPCMIsBigEndian: false,\r\n          linearPCMIsFloat: false,\r\n        },\r\n        web: {\r\n          mimeType: 'audio/webm;codecs=opus',\r\n          bitsPerSecond: 64000, // Optimized for speech\r\n        },\r\n      };\r\n\r\n      this.recording = new Audio.Recording();\r\n      await this.recording.prepareToRecordAsync(recordingOptions);\r\n      \r\n      this.updateState({ isRecording: true });\r\n      await this.recording.startAsync();\r\n\r\n      if (streamToDeepgram && this.connection) {\r\n        // Stream audio data to Deepgram with performance optimization\r\n        this.streamAudioToDeepgram();\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Recording failed:', error);\r\n      this.updateState({ \r\n        isRecording: false, \r\n        error: 'Failed to start recording' \r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private streamAudioToDeepgram(): void {\r\n    if (!this.recording || !this.connection) return;\r\n\r\n    // This is a simplified version - in practice, you'd need to stream\r\n    // real-time audio chunks to Deepgram\r\n    const streamInterval = setInterval(async () => {\r\n      if (!this.currentState.isRecording || !this.connection) {\r\n        clearInterval(streamInterval);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Get audio data and send to Deepgram\r\n        // This would require platform-specific implementation\r\n        // for real-time audio streaming\r\n        \r\n      } catch (error) {\r\n        console.error('Audio streaming error:', error);\r\n        clearInterval(streamInterval);\r\n      }\r\n    }, 100); // Stream every 100ms\r\n  }\r\n\r\n  public async stopListening(): Promise<void> {\r\n    this.updateState({ isListening: false, isProcessing: true });\r\n\r\n    try {\r\n      // Stop recording\r\n      if (this.recording) {\r\n        await this.recording.stopAndUnloadAsync();\r\n        this.updateState({ isRecording: false });\r\n        this.recording = null;\r\n      }\r\n\r\n      // Close Deepgram connection\r\n      if (this.connection) {\r\n        this.connection.requestClose();\r\n        this.connection = null;\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Failed to stop listening:', error);\r\n      this.updateState({ error: 'Failed to stop speech recognition' });\r\n    } finally {\r\n      this.updateState({ isProcessing: false });\r\n    }\r\n  }\r\n\r\n  public async toggleListening(): Promise<void> {\r\n    if (this.currentState.isListening) {\r\n      await this.stopListening();\r\n    } else {\r\n      await this.startListening();\r\n    }\r\n  }\r\n\r\n  public clearTranscript(): void {\r\n    this.updateState({ \r\n      currentTranscript: '', \r\n      finalTranscript: '', \r\n      confidence: 0 \r\n    });\r\n  }\r\n\r\n  public getFullTranscript(): string {\r\n    const final = this.currentState.finalTranscript.trim();\r\n    const current = this.currentState.currentTranscript.trim();\r\n    return final + (current ? ' ' + current : '');\r\n  }\r\n\r\n  private updateState(updates: Partial<SpeechRecognitionState>): void {\r\n    this.currentState = { ...this.currentState, ...updates };\r\n    this.listeners.forEach(listener => listener(this.currentState));\r\n  }\r\n\r\n  private notifyTranscription(result: TranscriptionResult): void {\r\n    // This can be used for additional transcription event handling\r\n    console.log('Transcription:', result);\r\n  }\r\n\r\n  public subscribe(listener: (state: SpeechRecognitionState) => void): () => void {\r\n    this.listeners.push(listener);\r\n    \r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.listeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.listeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  public getState(): SpeechRecognitionState {\r\n    return { ...this.currentState };\r\n  }\r\n\r\n  public async checkPermissions(): Promise<AudioPermissions> {\r\n    try {\r\n      if (Platform.OS === 'android') {\r\n        const granted = await PermissionsAndroid.check(\r\n          PermissionsAndroid.PERMISSIONS.RECORD_AUDIO\r\n        );\r\n        return {\r\n          granted,\r\n          canAskAgain: true,\r\n          status: granted ? 'granted' : 'undetermined',\r\n        };\r\n      } else {\r\n        const { status } = await Audio.getPermissionsAsync();\r\n        return {\r\n          granted: status === 'granted',\r\n          canAskAgain: status !== 'denied',\r\n          status: status as 'granted' | 'denied' | 'undetermined',\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Permission check failed:', error);\r\n      return {\r\n        granted: false,\r\n        canAskAgain: true,\r\n        status: 'undetermined',\r\n      };\r\n    }\r\n  }\r\n\r\n  public switchMode(mode: 'deepgram' | 'device'): void {\r\n    if (this.currentState.isListening) {\r\n      this.stopListening().then(() => {\r\n        this.updateState({ mode });\r\n      });\r\n    } else {\r\n      this.updateState({ mode });\r\n    }\r\n  }\r\n\r\n  // Karaoke integration methods\r\n  public onWordRecognized(listener: (word: string, confidence: number, timestamp: number) => void): () => void {\r\n    this.wordListeners.push(listener);\r\n    \r\n    return () => {\r\n      const index = this.wordListeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.wordListeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  public onKaraokeMatch(listener: (match: WordMatch | null) => void): () => void {\r\n    this.karaokeListeners.push(listener);\r\n    \r\n    return () => {\r\n      const index = this.karaokeListeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.karaokeListeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  private notifyWordRecognized(word: string, confidence: number, timestamp: number): void {\r\n    this.wordListeners.forEach(listener => {\r\n      try {\r\n        listener(word, confidence, timestamp);\r\n      } catch (error) {\r\n        console.error('Word listener error:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  private notifyKaraokeMatch(match: WordMatch | null): void {\r\n    this.karaokeListeners.forEach(listener => {\r\n      try {\r\n        listener(match);\r\n      } catch (error) {\r\n        console.error('Karaoke listener error:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  private processWordsForKaraoke(words: any[], transcript: string, confidence: number, isFinal: boolean): void {\r\n    const timestamp = Date.now();\r\n    \r\n    if (words && words.length > 0) {\r\n      // Process individual words from Deepgram\r\n      words.forEach((wordData: any) => {\r\n        if (wordData.word) {\r\n          this.notifyWordRecognized(wordData.word, wordData.confidence || confidence, timestamp);\r\n        }\r\n      });\r\n    } else if (transcript.trim()) {\r\n      // Fallback: split transcript into words\r\n      const transcriptWords = transcript.trim().split(/\\s+/);\r\n      transcriptWords.forEach((word: string) => {\r\n        if (word) {\r\n          this.notifyWordRecognized(word, confidence, timestamp);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    this.stopListening();\r\n    this.listeners = [];\r\n    this.wordListeners = [];\r\n    this.karaokeListeners = [];\r\n  }\r\n}\r\n\r\nexport const speechRecognitionService = new SpeechRecognitionService();\r\nexport default speechRecognitionService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\subscriptionService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'BillingInfo' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"BillingInfo"},"fix":{"range":[282,298],"text":""},"desc":"Remove unused variable 'BillingInfo'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BillingInfo' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'Invoice' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Invoice"},"fix":{"range":[298,310],"text":""},"desc":"Remove unused variable 'Invoice'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Invoice' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'PaymentMethod' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"PaymentMethod"},"fix":{"range":[310,328],"text":""},"desc":"Remove unused variable 'PaymentMethod'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PaymentMethod' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":114,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":114,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":20,"suggestions":[{"fix":{"range":[3438,3490],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":160,"column":19,"nodeType":"MemberExpression","endLine":160,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":167,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":20,"suggestions":[{"fix":{"range":[5161,5214],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":180,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":180,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":20,"suggestions":[{"fix":{"range":[5579,5633],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":194,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":194,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":194,"endColumn":20,"suggestions":[{"fix":{"range":[6030,6087],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":210,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":210,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":20,"suggestions":[{"fix":{"range":[6544,6590],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":291,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":291,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":343,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":343,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":343,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":343,"endColumn":20,"suggestions":[{"fix":{"range":[11356,11409],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'subscription' is defined but never used.","line":354,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":354,"endColumn":87,"suggestions":[{"messageId":"removeVar","data":{"varName":"subscription"},"fix":{"range":[11696,11729],"text":""},"desc":"Remove unused variable 'subscription'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":382,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":382,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":382,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":382,"endColumn":22,"suggestions":[{"fix":{"range":[12665,12724],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":392,"column":19,"nodeType":"MemberExpression","endLine":392,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":392,"column":19,"nodeType":"MemberExpression","endLine":392,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":393,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":393,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":393,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":393,"endColumn":16,"suggestions":[{"fix":{"range":[13156,13240],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":413,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":413,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":413,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":413,"endColumn":20,"suggestions":[{"fix":{"range":[13973,14029],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":418,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":418,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"reason"},"fix":{"range":[14148,14164],"text":""},"desc":"Remove unused variable 'reason'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":418,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":418,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":426,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":426,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":426,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":426,"endColumn":20,"suggestions":[{"fix":{"range":[14410,14466],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":452,"column":22,"nodeType":"MemberExpression","endLine":452,"endColumn":47},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":470,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":470,"endColumn":53,"fix":{"range":[15661,15685],"text":"{list.push('Cloud sync');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":471,"column":37,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":471,"endColumn":69,"fix":{"range":[15723,15755],"text":"{list.push('Team collaboration');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":472,"column":37,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":472,"endColumn":69,"fix":{"range":[15793,15825],"text":"{list.push('Advanced analytics');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":473,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":473,"endColumn":65,"fix":{"range":[15861,15891],"text":"{list.push('Priority support');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":474,"column":34,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":474,"endColumn":63,"fix":{"range":[15926,15955],"text":"{list.push('Custom branding');}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":475,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":475,"endColumn":53,"fix":{"range":[15985,16009],"text":"{list.push('API access');}"}}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":6,"fixableWarningCount":0,"source":"import {\r\n  doc,\r\n  getDoc,\r\n  updateDoc,\r\n  onSnapshot,\r\n  serverTimestamp,\r\n  Unsubscribe,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport {\r\n  Subscription,\r\n  SubscriptionTier,\r\n  SubscriptionFeatures,\r\n  SubscriptionUsage,\r\n  FeatureGate,\r\n  FeatureName,\r\n  BillingInfo,\r\n  Invoice,\r\n  PaymentMethod,\r\n} from '../types';\r\n\r\nclass SubscriptionService {\r\n  private readonly FEATURE_LIMITS: Record<SubscriptionTier, SubscriptionFeatures> = {\r\n    free: {\r\n      maxScripts: 5,\r\n      maxTeams: 1,\r\n      maxTeamMembers: 3,\r\n      maxStorageGB: 0.1,\r\n      cloudSync: false,\r\n      teamCollaboration: false,\r\n      advancedAnalytics: false,\r\n      prioritySupport: false,\r\n      customBranding: false,\r\n      apiAccess: false,\r\n      exportOptions: ['txt'],\r\n      integrations: [],\r\n    },\r\n    personal: {\r\n      maxScripts: 50,\r\n      maxTeams: 3,\r\n      maxTeamMembers: 5,\r\n      maxStorageGB: 2,\r\n      cloudSync: true,\r\n      teamCollaboration: true,\r\n      advancedAnalytics: false,\r\n      prioritySupport: false,\r\n      customBranding: false,\r\n      apiAccess: false,\r\n      exportOptions: ['txt', 'pdf', 'docx'],\r\n      integrations: ['google-drive', 'dropbox'],\r\n    },\r\n    business: {\r\n      maxScripts: 500,\r\n      maxTeams: 10,\r\n      maxTeamMembers: 50,\r\n      maxStorageGB: 20,\r\n      cloudSync: true,\r\n      teamCollaboration: true,\r\n      advancedAnalytics: true,\r\n      prioritySupport: true,\r\n      customBranding: true,\r\n      apiAccess: true,\r\n      exportOptions: ['txt', 'pdf', 'docx', 'html', 'rtf'],\r\n      integrations: ['google-drive', 'dropbox', 'onedrive', 'sharepoint', 'slack'],\r\n    },\r\n    enterprise: {\r\n      maxScripts: -1, // Unlimited\r\n      maxTeams: -1, // Unlimited\r\n      maxTeamMembers: 500,\r\n      maxStorageGB: 100,\r\n      cloudSync: true,\r\n      teamCollaboration: true,\r\n      advancedAnalytics: true,\r\n      prioritySupport: true,\r\n      customBranding: true,\r\n      apiAccess: true,\r\n      exportOptions: ['txt', 'pdf', 'docx', 'html', 'rtf', 'xml', 'json'],\r\n      integrations: ['google-drive', 'dropbox', 'onedrive', 'sharepoint', 'slack', 'teams', 'zoom', 'custom'],\r\n    },\r\n  };\r\n\r\n  private readonly PRICING: Record<SubscriptionTier, { monthly: number; yearly: number }> = {\r\n    free: { monthly: 0, yearly: 0 },\r\n    personal: { monthly: 9.99, yearly: 99.99 },\r\n    business: { monthly: 29.99, yearly: 299.99 },\r\n    enterprise: { monthly: 99.99, yearly: 999.99 },\r\n  };\r\n\r\n  async getSubscription(userId: string): Promise<Subscription | null> {\r\n    try {\r\n      const subscriptionDoc = await getDoc(doc(db, 'subscriptions', userId));\r\n      \r\n      if (!subscriptionDoc.exists()) {\r\n        // Create a default free subscription\r\n        return this.createFreeSubscription(userId);\r\n      }\r\n\r\n      const data = subscriptionDoc.data();\r\n      return {\r\n        id: subscriptionDoc.id,\r\n        ...data,\r\n        currentPeriodStart: data.currentPeriodStart?.toDate() || new Date(),\r\n        currentPeriodEnd: data.currentPeriodEnd?.toDate() || new Date(),\r\n        trialStart: data.trialStart?.toDate(),\r\n        trialEnd: data.trialEnd?.toDate(),\r\n        createdAt: data.createdAt?.toDate() || new Date(),\r\n        updatedAt: data.updatedAt?.toDate() || new Date(),\r\n        usage: {\r\n          ...data.usage,\r\n          lastUpdated: data.usage?.lastUpdated?.toDate() || new Date(),\r\n        },\r\n      } as Subscription;\r\n    } catch (error) {\r\n      console.error('Error getting subscription:', error);\r\n      throw new Error('Failed to get subscription');\r\n    }\r\n  }\r\n\r\n  private async createFreeSubscription(userId: string): Promise<Subscription> {\r\n    const now = new Date();\r\n    const subscription: Subscription = {\r\n      id: userId,\r\n      userId,\r\n      tier: 'free',\r\n      status: 'active',\r\n      currentPeriodStart: now,\r\n      currentPeriodEnd: new Date(now.getFullYear() + 1, now.getMonth(), now.getDate()),\r\n      cancelAtPeriodEnd: false,\r\n      features: this.FEATURE_LIMITS.free,\r\n      usage: {\r\n        scriptsUsed: 0,\r\n        teamsUsed: 0,\r\n        storageUsedGB: 0,\r\n        teamMembersUsed: 0,\r\n        lastUpdated: now,\r\n      },\r\n      createdAt: now,\r\n      updatedAt: now,\r\n    };\r\n\r\n    await updateDoc(doc(db, 'subscriptions', userId), {\r\n      ...subscription,\r\n      currentPeriodStart: serverTimestamp(),\r\n      currentPeriodEnd: new Date(now.getFullYear() + 1, now.getMonth(), now.getDate()),\r\n      createdAt: serverTimestamp(),\r\n      updatedAt: serverTimestamp(),\r\n      'usage.lastUpdated': serverTimestamp(),\r\n    });\r\n\r\n    return subscription;\r\n  }\r\n\r\n  async updateSubscription(userId: string, tier: SubscriptionTier): Promise<void> {\r\n    try {\r\n      const subscriptionRef = doc(db, 'subscriptions', userId);\r\n      const now = new Date();\r\n      \r\n      await updateDoc(subscriptionRef, {\r\n        tier,\r\n        features: this.FEATURE_LIMITS[tier],\r\n        updatedAt: serverTimestamp(),\r\n        // Update current period based on billing cycle\r\n        currentPeriodStart: serverTimestamp(),\r\n        currentPeriodEnd: new Date(now.getFullYear(), now.getMonth() + 1, now.getDate()),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating subscription:', error);\r\n      throw new Error('Failed to update subscription');\r\n    }\r\n  }\r\n\r\n  async cancelSubscription(userId: string): Promise<void> {\r\n    try {\r\n      const subscriptionRef = doc(db, 'subscriptions', userId);\r\n      await updateDoc(subscriptionRef, {\r\n        cancelAtPeriodEnd: true,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error canceling subscription:', error);\r\n      throw new Error('Failed to cancel subscription');\r\n    }\r\n  }\r\n\r\n  async reactivateSubscription(userId: string): Promise<void> {\r\n    try {\r\n      const subscriptionRef = doc(db, 'subscriptions', userId);\r\n      await updateDoc(subscriptionRef, {\r\n        cancelAtPeriodEnd: false,\r\n        status: 'active',\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error reactivating subscription:', error);\r\n      throw new Error('Failed to reactivate subscription');\r\n    }\r\n  }\r\n\r\n  async updateUsage(userId: string, usage: Partial<SubscriptionUsage>): Promise<void> {\r\n    try {\r\n      const subscriptionRef = doc(db, 'subscriptions', userId);\r\n      await updateDoc(subscriptionRef, {\r\n        usage: {\r\n          ...usage,\r\n          lastUpdated: serverTimestamp(),\r\n        },\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating usage:', error);\r\n      throw new Error('Failed to update usage');\r\n    }\r\n  }\r\n\r\n  checkFeature(feature: FeatureName, subscription: Subscription | null): FeatureGate {\r\n    if (!subscription) {\r\n      return {\r\n        feature,\r\n        enabled: false,\r\n        tier: 'free',\r\n        reason: 'No subscription found',\r\n        upgradeUrl: this.getUpgradeUrl(feature),\r\n      };\r\n    }\r\n\r\n    const features = subscription.features;\r\n    let enabled = false;\r\n    let reason: string | undefined;\r\n\r\n    switch (feature) {\r\n      case 'unlimited_scripts':\r\n        enabled = features.maxScripts === -1;\r\n        reason = enabled ? undefined : `Limited to ${features.maxScripts} scripts`;\r\n        break;\r\n      case 'team_collaboration':\r\n        enabled = features.teamCollaboration;\r\n        reason = enabled ? undefined : 'Team collaboration not available';\r\n        break;\r\n      case 'advanced_analytics':\r\n        enabled = features.advancedAnalytics;\r\n        reason = enabled ? undefined : 'Advanced analytics not available';\r\n        break;\r\n      case 'priority_support':\r\n        enabled = features.prioritySupport;\r\n        reason = enabled ? undefined : 'Priority support not available';\r\n        break;\r\n      case 'custom_branding':\r\n        enabled = features.customBranding;\r\n        reason = enabled ? undefined : 'Custom branding not available';\r\n        break;\r\n      case 'api_access':\r\n        enabled = features.apiAccess;\r\n        reason = enabled ? undefined : 'API access not available';\r\n        break;\r\n      case 'bulk_export':\r\n        enabled = features.exportOptions.length > 1;\r\n        reason = enabled ? undefined : 'Limited export options';\r\n        break;\r\n      case 'integrations':\r\n        enabled = features.integrations.length > 0;\r\n        reason = enabled ? undefined : 'Integrations not available';\r\n        break;\r\n      case 'real_time_collaboration':\r\n        enabled = features.teamCollaboration && subscription.tier !== 'free';\r\n        reason = enabled ? undefined : 'Real-time collaboration not available';\r\n        break;\r\n      case 'version_history':\r\n        enabled = subscription.tier !== 'free';\r\n        reason = enabled ? undefined : 'Version history not available';\r\n        break;\r\n      default:\r\n        enabled = false;\r\n        reason = 'Unknown feature';\r\n    }\r\n\r\n    return {\r\n      feature,\r\n      enabled,\r\n      tier: subscription.tier,\r\n      reason,\r\n      upgradeUrl: enabled ? undefined : this.getUpgradeUrl(feature),\r\n    };\r\n  }\r\n\r\n  canUseFeature(feature: FeatureName, subscription: Subscription | null): boolean {\r\n    return this.checkFeature(feature, subscription).enabled;\r\n  }\r\n\r\n  getUpgradeUrl(feature: FeatureName): string {\r\n    // Return appropriate upgrade URL based on feature\r\n    const baseUrl = process.env.EXPO_PUBLIC_WEB_URL || 'https://speaksync.app';\r\n    return `${baseUrl}/pricing?feature=${feature}`;\r\n  }\r\n\r\n  async checkUsageLimits(userId: string): Promise<{\r\n    scriptsLimitReached: boolean;\r\n    teamsLimitReached: boolean;\r\n    storageLimitReached: boolean;\r\n    teamMembersLimitReached: boolean;\r\n    warnings: string[];\r\n  }> {\r\n    try {\r\n      const subscription = await this.getSubscription(userId);\r\n      if (!subscription) {\r\n        return {\r\n          scriptsLimitReached: true,\r\n          teamsLimitReached: true,\r\n          storageLimitReached: true,\r\n          teamMembersLimitReached: true,\r\n          warnings: ['No subscription found'],\r\n        };\r\n      }\r\n\r\n      const { features, usage } = subscription;\r\n      const warnings: string[] = [];\r\n\r\n      const scriptsLimitReached = features.maxScripts !== -1 && usage.scriptsUsed >= features.maxScripts;\r\n      const teamsLimitReached = features.maxTeams !== -1 && usage.teamsUsed >= features.maxTeams;\r\n      const storageLimitReached = usage.storageUsedGB >= features.maxStorageGB;\r\n      const teamMembersLimitReached = usage.teamMembersUsed >= features.maxTeamMembers;\r\n\r\n      // Add warnings when approaching limits\r\n      if (features.maxScripts !== -1 && usage.scriptsUsed >= features.maxScripts * 0.8) {\r\n        warnings.push(`Approaching script limit (${usage.scriptsUsed}/${features.maxScripts})`);\r\n      }\r\n      \r\n      if (features.maxTeams !== -1 && usage.teamsUsed >= features.maxTeams * 0.8) {\r\n        warnings.push(`Approaching team limit (${usage.teamsUsed}/${features.maxTeams})`);\r\n      }\r\n\r\n      if (usage.storageUsedGB >= features.maxStorageGB * 0.8) {\r\n        warnings.push(`Approaching storage limit (${usage.storageUsedGB.toFixed(2)}GB/${features.maxStorageGB}GB)`);\r\n      }\r\n\r\n      return {\r\n        scriptsLimitReached,\r\n        teamsLimitReached,\r\n        storageLimitReached,\r\n        teamMembersLimitReached,\r\n        warnings,\r\n      };\r\n    } catch (error) {\r\n      console.error('Error checking usage limits:', error);\r\n      return {\r\n        scriptsLimitReached: true,\r\n        teamsLimitReached: true,\r\n        storageLimitReached: true,\r\n        teamMembersLimitReached: true,\r\n        warnings: ['Error checking limits'],\r\n      };\r\n    }\r\n  }\r\n\r\n  subscribeToSubscription(userId: string, callback: (subscription: Subscription | null) => void): Unsubscribe {\r\n    return onSnapshot(\r\n      doc(db, 'subscriptions', userId),\r\n      (doc) => {\r\n        if (!doc.exists()) {\r\n          callback(null);\r\n          return;\r\n        }\r\n\r\n        const data = doc.data();\r\n        const subscription: Subscription = {\r\n          id: doc.id,\r\n          ...data,\r\n          currentPeriodStart: data.currentPeriodStart?.toDate() || new Date(),\r\n          currentPeriodEnd: data.currentPeriodEnd?.toDate() || new Date(),\r\n          trialStart: data.trialStart?.toDate(),\r\n          trialEnd: data.trialEnd?.toDate(),\r\n          createdAt: data.createdAt?.toDate() || new Date(),\r\n          updatedAt: data.updatedAt?.toDate() || new Date(),\r\n          usage: {\r\n            ...data.usage,\r\n            lastUpdated: data.usage?.lastUpdated?.toDate() || new Date(),\r\n          },\r\n        } as Subscription;\r\n\r\n        callback(subscription);\r\n      },\r\n      (error) => {\r\n        console.error('Error subscribing to subscription:', error);\r\n        callback(null);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Payment and billing methods (to be implemented with Stripe/RevenueCat)\r\n  async createPaymentSession(userId: string, tier: SubscriptionTier, billingInterval: 'monthly' | 'yearly'): Promise<string> {\r\n    // This would integrate with Stripe for web or RevenueCat for mobile\r\n    // For now, return a placeholder URL\r\n    const price = this.PRICING[tier][billingInterval];\r\n    console.log(`Creating payment session for ${tier} (${billingInterval}): $${price}`);\r\n    \r\n    // In a real implementation, this would create a Stripe Checkout session\r\n    // or handle RevenueCat subscription purchase\r\n    return `https://checkout.stripe.com/pay/placeholder?tier=${tier}&interval=${billingInterval}`;\r\n  }\r\n\r\n  async handlePaymentSuccess(userId: string, tier: SubscriptionTier, stripeSubscriptionId?: string): Promise<void> {\r\n    try {\r\n      await this.updateSubscription(userId, tier);\r\n      \r\n      if (stripeSubscriptionId) {\r\n        const subscriptionRef = doc(db, 'subscriptions', userId);\r\n        await updateDoc(subscriptionRef, {\r\n          stripeSubscriptionId,\r\n          status: 'active',\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error handling payment success:', error);\r\n      throw new Error('Failed to handle payment success');\r\n    }\r\n  }\r\n\r\n  async handlePaymentFailure(userId: string, reason: string): Promise<void> {\r\n    try {\r\n      const subscriptionRef = doc(db, 'subscriptions', userId);\r\n      await updateDoc(subscriptionRef, {\r\n        status: 'past_due',\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error handling payment failure:', error);\r\n    }\r\n  }\r\n\r\n  // Utility methods\r\n  getTierDisplayName(tier: SubscriptionTier): string {\r\n    switch (tier) {\r\n      case 'free': return 'Free';\r\n      case 'personal': return 'Personal';\r\n      case 'business': return 'Business';\r\n      case 'enterprise': return 'Enterprise';\r\n      default: return 'Unknown';\r\n    }\r\n  }\r\n\r\n  getTierColor(tier: SubscriptionTier): string {\r\n    switch (tier) {\r\n      case 'free': return '#6B7280';\r\n      case 'personal': return '#3B82F6';\r\n      case 'business': return '#10B981';\r\n      case 'enterprise': return '#8B5CF6';\r\n      default: return '#6B7280';\r\n    }\r\n  }\r\n\r\n  getFeaturesList(tier: SubscriptionTier): string[] {\r\n    const features = this.FEATURE_LIMITS[tier];\r\n    const list: string[] = [];\r\n\r\n    if (features.maxScripts === -1) {\r\n      list.push('Unlimited scripts');\r\n    } else {\r\n      list.push(`${features.maxScripts} scripts`);\r\n    }\r\n\r\n    if (features.maxTeams === -1) {\r\n      list.push('Unlimited teams');\r\n    } else {\r\n      list.push(`${features.maxTeams} teams`);\r\n    }\r\n\r\n    list.push(`${features.maxTeamMembers} team members`);\r\n    list.push(`${features.maxStorageGB}GB storage`);\r\n\r\n    if (features.cloudSync) list.push('Cloud sync');\r\n    if (features.teamCollaboration) list.push('Team collaboration');\r\n    if (features.advancedAnalytics) list.push('Advanced analytics');\r\n    if (features.prioritySupport) list.push('Priority support');\r\n    if (features.customBranding) list.push('Custom branding');\r\n    if (features.apiAccess) list.push('API access');\r\n\r\n    return list;\r\n  }\r\n}\r\n\r\nexport const subscriptionService = new SubscriptionService();\r\nexport default subscriptionService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\syncService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'writeBatch' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"writeBatch"},"fix":{"range":[170,185],"text":""},"desc":"Remove unused variable 'writeBatch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'writeBatch' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[572,575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[572,575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[614,617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[614,617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[660,663],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[660,663],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":57,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":57,"endColumn":28,"fix":{"range":[1485,1492],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"fix":{"range":[2184,2243],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":84,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":84,"endColumn":36,"fix":{"range":[2447,2454],"text":"{return;}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":11,"nodeType":"MemberExpression","endLine":105,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":110,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":20,"suggestions":[{"fix":{"range":[3536,3597],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":117,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":117,"endColumn":36,"fix":{"range":[3793,3800],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":125,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":125,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":20,"suggestions":[{"fix":{"range":[4094,4157],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":163,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":163,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":163,"endColumn":20,"suggestions":[{"fix":{"range":[5234,5270],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":172,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":172,"endColumn":28,"fix":{"range":[5467,5474],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":209,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":209,"endColumn":28,"fix":{"range":[6680,6687],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":235,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":235,"endColumn":28,"fix":{"range":[7414,7421],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":267,"column":18,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":267,"endColumn":28,"fix":{"range":[8516,8526],"text":"{return [];}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":276,"column":21,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":276,"endColumn":31,"fix":{"range":[8740,8750],"text":"{return [];}"}},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":321,"column":7,"nodeType":"MemberExpression","endLine":321,"endColumn":21}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":8,"fixableWarningCount":0,"source":"import { \r\n  collection, \r\n  doc, \r\n  getDocs, \r\n  getDoc, \r\n  setDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  query, \r\n  where, \r\n  orderBy, \r\n  serverTimestamp,\r\n  onSnapshot,\r\n  writeBatch\r\n} from 'firebase/firestore';\r\nimport { User } from 'firebase/auth';\r\nimport { db } from './firebase';\r\nimport { Script, SyncError } from '../types';\r\nimport { networkService } from './networkService';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nexport interface CloudScript extends Omit<Script, 'createdAt' | 'updatedAt' | 'lastSyncedAt'> {\r\n  createdAt: any; // Firestore Timestamp\r\n  updatedAt: any; // Firestore Timestamp\r\n  lastSyncedAt?: any; // Firestore Timestamp\r\n}\r\n\r\nexport class SyncService {\r\n  private static instance: SyncService;\r\n  private user: User | null = null;\r\n  private syncInProgress: boolean = false;\r\n  private unsubscribeListener: (() => void) | null = null;\r\n\r\n  static getInstance(): SyncService {\r\n    if (!SyncService.instance) {\r\n      SyncService.instance = new SyncService();\r\n    }\r\n    return SyncService.instance;\r\n  }\r\n\r\n  setUser(user: User | null) {\r\n    this.user = user;\r\n    \r\n    // Unsubscribe from previous user's data\r\n    if (this.unsubscribeListener) {\r\n      this.unsubscribeListener();\r\n      this.unsubscribeListener = null;\r\n    }\r\n\r\n    // Subscribe to new user's data if authenticated\r\n    if (user) {\r\n      this.subscribeToUserScripts();\r\n    }\r\n  }\r\n\r\n  private subscribeToUserScripts() {\r\n    if (!this.user) return;\r\n\r\n    const scriptsRef = collection(db, 'scripts');\r\n    const q = query(\r\n      scriptsRef,\r\n      where('userId', '==', this.user.uid),\r\n      where('isDeleted', '!=', true),\r\n      orderBy('updatedAt', 'desc')\r\n    );\r\n\r\n    this.unsubscribeListener = onSnapshot(q, (snapshot) => {\r\n      // Handle real-time updates from Firestore\r\n      snapshot.docChanges().forEach((change) => {\r\n        if (change.type === 'added' || change.type === 'modified') {\r\n          this.handleRemoteScriptChange(change.doc.data() as CloudScript);\r\n        } else if (change.type === 'removed') {\r\n          this.handleRemoteScriptDeletion(change.doc.id);\r\n        }\r\n      });\r\n    }, (error) => {\r\n      console.error('Error listening to script changes:', error);\r\n    });\r\n  }\r\n\r\n  private async handleRemoteScriptChange(cloudScript: CloudScript) {\r\n    try {\r\n      const localScriptsStr = await AsyncStorage.getItem('script-storage');\r\n      if (!localScriptsStr) return;\r\n\r\n      const localData = JSON.parse(localScriptsStr);\r\n      const localScripts: Script[] = localData.state?.scripts || [];\r\n      \r\n      const localScript = localScripts.find(s => s.id === cloudScript.id);\r\n      \r\n      if (!localScript) {\r\n        // New script from remote - add to local\r\n        const newScript: Script = this.convertCloudToLocalScript(cloudScript);\r\n        localScripts.push(newScript);\r\n        await this.saveLocalScripts(localScripts);\r\n      } else if (cloudScript.version > localScript.version) {\r\n        // Remote is newer - check for conflicts\r\n        if (localScript.syncStatus === 'pending') {\r\n          // Conflict detected\r\n          localScript.syncStatus = 'conflict';\r\n        } else {\r\n          // Update local with remote data\r\n          const updatedScript = this.convertCloudToLocalScript(cloudScript);\r\n          const index = localScripts.findIndex(s => s.id === cloudScript.id);\r\n          localScripts[index] = updatedScript;\r\n        }\r\n        await this.saveLocalScripts(localScripts);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error handling remote script change:', error);\r\n    }\r\n  }\r\n\r\n  private async handleRemoteScriptDeletion(scriptId: string) {\r\n    try {\r\n      const localScriptsStr = await AsyncStorage.getItem('script-storage');\r\n      if (!localScriptsStr) return;\r\n\r\n      const localData = JSON.parse(localScriptsStr);\r\n      const localScripts: Script[] = localData.state?.scripts || [];\r\n      \r\n      const filteredScripts = localScripts.filter(s => s.id !== scriptId);\r\n      await this.saveLocalScripts(filteredScripts);\r\n    } catch (error) {\r\n      console.error('Error handling remote script deletion:', error);\r\n    }\r\n  }\r\n\r\n  async syncScripts(): Promise<SyncError[]> {\r\n    if (!this.user || this.syncInProgress || !networkService.isOnline()) {\r\n      return [];\r\n    }\r\n\r\n    this.syncInProgress = true;\r\n    const errors: SyncError[] = [];\r\n\r\n    try {\r\n      // Get local scripts\r\n      const localScripts = await this.getLocalScripts();\r\n      \r\n      // Get remote scripts\r\n      const remoteScripts = await this.getRemoteScripts();\r\n      \r\n      // Sync each local script\r\n      for (const localScript of localScripts) {\r\n        try {\r\n          await this.syncLocalScript(localScript, remoteScripts);\r\n        } catch (error) {\r\n          errors.push({\r\n            id: Date.now().toString(),\r\n            operation: localScript.syncStatus === 'pending' ? 'update' : 'create',\r\n            scriptId: localScript.id,\r\n            error: error instanceof Error ? error.message : 'Unknown error',\r\n            timestamp: new Date()\r\n          });\r\n        }\r\n      }\r\n\r\n      // Mark successful sync\r\n      await this.updateLastSyncTime();\r\n      \r\n    } catch (error) {\r\n      console.error('Sync error:', error);\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n\r\n    return errors;\r\n  }\r\n\r\n  private async syncLocalScript(localScript: Script, remoteScripts: CloudScript[]) {\r\n    if (!this.user) return;\r\n\r\n    const remoteScript = remoteScripts.find(s => s.id === localScript.id);\r\n\r\n    if (localScript.isDeleted) {\r\n      // Delete from remote\r\n      if (remoteScript) {\r\n        await deleteDoc(doc(db, 'scripts', localScript.id));\r\n      }\r\n      // Remove from local storage\r\n      await this.removeLocalScript(localScript.id);\r\n      return;\r\n    }\r\n\r\n    if (!remoteScript) {\r\n      // Create new script in remote\r\n      await this.createRemoteScript(localScript);\r\n    } else if (localScript.version > remoteScript.version) {\r\n      // Update remote script\r\n      await this.updateRemoteScript(localScript);\r\n    } else if (remoteScript.version > localScript.version) {\r\n      // Remote is newer - potential conflict\r\n      if (localScript.syncStatus === 'pending') {\r\n        localScript.syncStatus = 'conflict';\r\n        await this.updateLocalScript(localScript);\r\n      }\r\n    }\r\n\r\n    // Mark as synced if no conflicts\r\n    if (localScript.syncStatus !== 'conflict') {\r\n      localScript.syncStatus = 'synced';\r\n      localScript.lastSyncedAt = new Date();\r\n      await this.updateLocalScript(localScript);\r\n    }\r\n  }\r\n\r\n  private async createRemoteScript(script: Script) {\r\n    if (!this.user) return;\r\n\r\n    const cloudScript: CloudScript = {\r\n      ...script,\r\n      userId: this.user.uid,\r\n      createdAt: serverTimestamp(),\r\n      updatedAt: serverTimestamp(),\r\n      lastSyncedAt: serverTimestamp()\r\n    };\r\n\r\n    await setDoc(doc(db, 'scripts', script.id), cloudScript);\r\n  }\r\n\r\n  private async updateRemoteScript(script: Script) {\r\n    const updateData = {\r\n      title: script.title,\r\n      content: script.content,\r\n      updatedAt: serverTimestamp(),\r\n      lastSyncedAt: serverTimestamp(),\r\n      version: script.version\r\n    };\r\n\r\n    await updateDoc(doc(db, 'scripts', script.id), updateData);\r\n  }\r\n\r\n  async resolveConflict(scriptId: string, resolution: 'local' | 'remote'): Promise<void> {\r\n    if (!this.user) return;\r\n\r\n    const localScripts = await this.getLocalScripts();\r\n    const localScript = localScripts.find(s => s.id === scriptId);\r\n    \r\n    if (!localScript || localScript.syncStatus !== 'conflict') {\r\n      return;\r\n    }\r\n\r\n    if (resolution === 'local') {\r\n      // Use local version, update remote\r\n      localScript.version += 1;\r\n      await this.updateRemoteScript(localScript);\r\n      localScript.syncStatus = 'synced';\r\n      localScript.lastSyncedAt = new Date();\r\n      await this.updateLocalScript(localScript);\r\n    } else {\r\n      // Use remote version, update local\r\n      const remoteScript = await this.getRemoteScript(scriptId);\r\n      if (remoteScript) {\r\n        const updatedScript = this.convertCloudToLocalScript(remoteScript);\r\n        updatedScript.syncStatus = 'synced';\r\n        updatedScript.lastSyncedAt = new Date();\r\n        await this.updateLocalScript(updatedScript);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Helper methods\r\n  private async getLocalScripts(): Promise<Script[]> {\r\n    try {\r\n      const data = await AsyncStorage.getItem('script-storage');\r\n      if (!data) return [];\r\n      const parsed = JSON.parse(data);\r\n      return parsed.state?.scripts || [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private async getRemoteScripts(): Promise<CloudScript[]> {\r\n    if (!this.user) return [];\r\n\r\n    const scriptsRef = collection(db, 'scripts');\r\n    const q = query(\r\n      scriptsRef,\r\n      where('userId', '==', this.user.uid),\r\n      where('isDeleted', '!=', true)\r\n    );\r\n\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as CloudScript));\r\n  }\r\n\r\n  private async getRemoteScript(scriptId: string): Promise<CloudScript | null> {\r\n    const docRef = doc(db, 'scripts', scriptId);\r\n    const snapshot = await getDoc(docRef);\r\n    \r\n    if (snapshot.exists()) {\r\n      return { id: snapshot.id, ...snapshot.data() } as CloudScript;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private convertCloudToLocalScript(cloudScript: CloudScript): Script {\r\n    return {\r\n      ...cloudScript,\r\n      createdAt: cloudScript.createdAt?.toDate?.() || new Date(),\r\n      updatedAt: cloudScript.updatedAt?.toDate?.() || new Date(),\r\n      lastSyncedAt: cloudScript.lastSyncedAt?.toDate?.() || new Date(),\r\n      syncStatus: 'synced'\r\n    };\r\n  }\r\n\r\n  private async saveLocalScripts(scripts: Script[]) {\r\n    const data = {\r\n      state: { scripts },\r\n      version: 0\r\n    };\r\n    await AsyncStorage.setItem('script-storage', JSON.stringify(data));\r\n  }\r\n\r\n  private async updateLocalScript(script: Script) {\r\n    const scripts = await this.getLocalScripts();\r\n    const index = scripts.findIndex(s => s.id === script.id);\r\n    if (index > -1) {\r\n      scripts[index] = script;\r\n      await this.saveLocalScripts(scripts);\r\n    }\r\n  }\r\n\r\n  private async removeLocalScript(scriptId: string) {\r\n    const scripts = await this.getLocalScripts();\r\n    const filtered = scripts.filter(s => s.id !== scriptId);\r\n    await this.saveLocalScripts(filtered);\r\n  }\r\n\r\n  private async updateLastSyncTime() {\r\n    await AsyncStorage.setItem('lastSyncTime', new Date().toISOString());\r\n  }\r\n}\r\n\r\nexport const syncService = SyncService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\teamService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'arrayUnion' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"arrayUnion"},"fix":{"range":[188,203],"text":""},"desc":"Remove unused variable 'arrayUnion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'arrayUnion' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":13},{"ruleId":"no-unused-vars","severity":2,"message":"'arrayRemove' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"arrayRemove"},"fix":{"range":[203,219],"text":""},"desc":"Remove unused variable 'arrayRemove'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'arrayRemove' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":112,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":112,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":20,"suggestions":[{"fix":{"range":[2926,2971],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":125,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":125,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":20,"suggestions":[{"fix":{"range":[3307,3352],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":154,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":20,"suggestions":[{"fix":{"range":[4209,4254],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":178,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":178,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":178,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":178,"endColumn":20,"suggestions":[{"fix":{"range":[4912,4956],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":218,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":218,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":218,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":218,"endColumn":20,"suggestions":[{"fix":{"range":[6093,6143],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":286,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":286,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":286,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":286,"endColumn":20,"suggestions":[{"fix":{"range":[7945,7992],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":361,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":361,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":361,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":361,"endColumn":20,"suggestions":[{"fix":{"range":[10483,10535],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":373,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":373,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":373,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":373,"endColumn":20,"suggestions":[{"fix":{"range":[10904,10956],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":406,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":406,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":406,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":406,"endColumn":20,"suggestions":[{"fix":{"range":[11941,11993],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":448,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":448,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":448,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":448,"endColumn":20,"suggestions":[{"fix":{"range":[13158,13205],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":472,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":472,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":472,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":472,"endColumn":20,"suggestions":[{"fix":{"range":[13863,13915],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":485,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":485,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":485,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":485,"endColumn":20,"suggestions":[{"fix":{"range":[14304,14353],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":543,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":543,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":543,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":543,"endColumn":20,"suggestions":[{"fix":{"range":[15978,16025],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":556,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":556,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":556,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":556,"endColumn":20,"suggestions":[{"fix":{"range":[16389,16436],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":584,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":584,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":584,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":584,"endColumn":20,"suggestions":[{"fix":{"range":[17259,17306],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":611,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":611,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":611,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":611,"endColumn":20,"suggestions":[{"fix":{"range":[18011,18059],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":635,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":635,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":635,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":635,"endColumn":20,"suggestions":[{"fix":{"range":[18733,18786],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":641,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":641,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[18939,18956],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":665,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":665,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":665,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":665,"endColumn":22,"suggestions":[{"fix":{"range":[19606,19665],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'members' is defined but never used.","line":671,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":671,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"members"},"fix":{"range":[19768,19789],"text":""},"desc":"Remove unused variable 'members'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":690,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":690,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":690,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":690,"endColumn":22,"suggestions":[{"fix":{"range":[20370,20429],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'invitations' is defined but never used.","line":696,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":696,"endColumn":89,"suggestions":[{"messageId":"removeVar","data":{"varName":"invitations"},"fix":{"range":[20537,20566],"text":""},"desc":"Remove unused variable 'invitations'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":717,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":717,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":717,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":717,"endColumn":22,"suggestions":[{"fix":{"range":[21233,21296],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":734,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":734,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[21669,21685],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":734,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":734,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":756,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":756,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":756,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":756,"endColumn":20,"suggestions":[{"fix":{"range":[22356,22408],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":30,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  serverTimestamp,\r\n  writeBatch,\r\n  increment,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  Unsubscribe,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport {\r\n  Team,\r\n  TeamMember,\r\n  TeamInvitation,\r\n  TeamActivity,\r\n  ScriptFolder,\r\n  TeamRole,\r\n  TeamSettings,\r\n  TeamStats,\r\n  TeamActivityAction,\r\n  SubscriptionTier,\r\n} from '../types';\r\n\r\nclass TeamService {\r\n  // Team CRUD Operations\r\n  async createTeam(teamData: {\r\n    name: string;\r\n    description?: string;\r\n    ownerId: string;\r\n    subscriptionTier: SubscriptionTier;\r\n    settings?: Partial<TeamSettings>;\r\n  }): Promise<string> {\r\n    try {\r\n      const defaultSettings: TeamSettings = {\r\n        allowMemberInvites: true,\r\n        defaultMemberRole: 'viewer',\r\n        requireApprovalForJoining: false,\r\n        allowPublicScripts: false,\r\n        maxMembers: this.getMaxMembersForTier(teamData.subscriptionTier),\r\n        enableActivityLog: true,\r\n        enableRealTimeCollaboration: teamData.subscriptionTier !== 'free',\r\n      };\r\n\r\n      const defaultStats: TeamStats = {\r\n        memberCount: 1,\r\n        scriptCount: 0,\r\n        folderCount: 0,\r\n        totalStorageUsed: 0,\r\n        lastActivityAt: new Date(),\r\n        activeMembers: 1,\r\n      };\r\n\r\n      const team: Omit<Team, 'id'> = {\r\n        name: teamData.name,\r\n        description: teamData.description,\r\n        ownerId: teamData.ownerId,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        settings: { ...defaultSettings, ...teamData.settings },\r\n        stats: defaultStats,\r\n        subscriptionTier: teamData.subscriptionTier,\r\n      };\r\n\r\n      // Use batch write to create team and add owner as member\r\n      const batch = writeBatch(db);\r\n      \r\n      const teamRef = doc(collection(db, 'teams'));\r\n      batch.set(teamRef, {\r\n        ...team,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        'stats.lastActivityAt': serverTimestamp(),\r\n      });\r\n\r\n      const memberRef = doc(collection(db, 'teams', teamRef.id, 'members'));\r\n      batch.set(memberRef, {\r\n        id: memberRef.id,\r\n        teamId: teamRef.id,\r\n        userId: teamData.ownerId,\r\n        email: '', // Will be populated from user data\r\n        role: 'owner' as TeamRole,\r\n        joinedAt: serverTimestamp(),\r\n        lastActiveAt: serverTimestamp(),\r\n        invitedBy: teamData.ownerId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      // Log team creation activity\r\n      await this.logActivity({\r\n        teamId: teamRef.id,\r\n        userId: teamData.ownerId,\r\n        userDisplayName: 'Team Owner',\r\n        action: 'created',\r\n        targetType: 'team',\r\n        targetId: teamRef.id,\r\n        targetName: teamData.name,\r\n      });\r\n\r\n      return teamRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating team:', error);\r\n      throw new Error('Failed to create team');\r\n    }\r\n  }\r\n\r\n  async updateTeam(teamId: string, updates: Partial<Team>): Promise<void> {\r\n    try {\r\n      const teamRef = doc(db, 'teams', teamId);\r\n      await updateDoc(teamRef, {\r\n        ...updates,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating team:', error);\r\n      throw new Error('Failed to update team');\r\n    }\r\n  }\r\n\r\n  async deleteTeam(teamId: string): Promise<void> {\r\n    try {\r\n      const batch = writeBatch(db);\r\n      \r\n      // Delete team document\r\n      const teamRef = doc(db, 'teams', teamId);\r\n      batch.delete(teamRef);\r\n\r\n      // Delete all members\r\n      const membersSnapshot = await getDocs(collection(db, 'teams', teamId, 'members'));\r\n      membersSnapshot.docs.forEach((memberDoc) => {\r\n        batch.delete(memberDoc.ref);\r\n      });\r\n\r\n      // Delete all invitations\r\n      const invitationsSnapshot = await getDocs(\r\n        query(collection(db, 'teamInvitations'), where('teamId', '==', teamId))\r\n      );\r\n      invitationsSnapshot.docs.forEach((invitationDoc) => {\r\n        batch.delete(invitationDoc.ref);\r\n      });\r\n\r\n      await batch.commit();\r\n    } catch (error) {\r\n      console.error('Error deleting team:', error);\r\n      throw new Error('Failed to delete team');\r\n    }\r\n  }\r\n\r\n  async getTeam(teamId: string): Promise<Team | null> {\r\n    try {\r\n      const teamDoc = await getDoc(doc(db, 'teams', teamId));\r\n      if (!teamDoc.exists()) {\r\n        return null;\r\n      }\r\n\r\n      const data = teamDoc.data();\r\n      return {\r\n        id: teamDoc.id,\r\n        ...data,\r\n        createdAt: data.createdAt?.toDate() || new Date(),\r\n        updatedAt: data.updatedAt?.toDate() || new Date(),\r\n        stats: {\r\n          ...data.stats,\r\n          lastActivityAt: data.stats?.lastActivityAt?.toDate() || new Date(),\r\n        },\r\n      } as Team;\r\n    } catch (error) {\r\n      console.error('Error getting team:', error);\r\n      throw new Error('Failed to get team');\r\n    }\r\n  }\r\n\r\n  async getUserTeams(userId: string): Promise<Team[]> {\r\n    try {\r\n      // Get all teams where user is a member\r\n      const teamsWithMembership = await getDocs(\r\n        query(\r\n          collection(db, 'teams'),\r\n          orderBy('updatedAt', 'desc')\r\n        )\r\n      );\r\n\r\n      const teams: Team[] = [];\r\n      \r\n      for (const teamDoc of teamsWithMembership.docs) {\r\n        // Check if user is a member of this team\r\n        const memberDoc = await getDoc(\r\n          doc(db, 'teams', teamDoc.id, 'members', userId)\r\n        );\r\n        \r\n        if (memberDoc.exists()) {\r\n          const data = teamDoc.data();\r\n          teams.push({\r\n            id: teamDoc.id,\r\n            ...data,\r\n            createdAt: data.createdAt?.toDate() || new Date(),\r\n            updatedAt: data.updatedAt?.toDate() || new Date(),\r\n            stats: {\r\n              ...data.stats,\r\n              lastActivityAt: data.stats?.lastActivityAt?.toDate() || new Date(),\r\n            },\r\n          } as Team);\r\n        }\r\n      }\r\n\r\n      return teams;\r\n    } catch (error) {\r\n      console.error('Error getting user teams:', error);\r\n      throw new Error('Failed to get user teams');\r\n    }\r\n  }\r\n\r\n  // Member Management\r\n  async inviteMember(\r\n    teamId: string,\r\n    email: string,\r\n    role: TeamRole,\r\n    invitedBy: string,\r\n    invitedByName: string,\r\n    message?: string\r\n  ): Promise<string> {\r\n    try {\r\n      // Check if invitation already exists\r\n      const existingInvitation = await getDocs(\r\n        query(\r\n          collection(db, 'teamInvitations'),\r\n          where('teamId', '==', teamId),\r\n          where('email', '==', email),\r\n          where('status', '==', 'pending')\r\n        )\r\n      );\r\n\r\n      if (!existingInvitation.empty) {\r\n        throw new Error('Invitation already sent to this email');\r\n      }\r\n\r\n      // Get team info\r\n      const team = await this.getTeam(teamId);\r\n      if (!team) {\r\n        throw new Error('Team not found');\r\n      }\r\n\r\n      const invitation: Omit<TeamInvitation, 'id'> = {\r\n        teamId,\r\n        teamName: team.name,\r\n        email,\r\n        role,\r\n        invitedBy,\r\n        invitedByName,\r\n        createdAt: new Date(),\r\n        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days\r\n        status: 'pending',\r\n        message,\r\n      };\r\n\r\n      const invitationRef = await addDoc(collection(db, 'teamInvitations'), {\r\n        ...invitation,\r\n        createdAt: serverTimestamp(),\r\n        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\r\n      });\r\n\r\n      // Log invitation activity\r\n      await this.logActivity({\r\n        teamId,\r\n        userId: invitedBy,\r\n        userDisplayName: invitedByName,\r\n        action: 'invited',\r\n        targetType: 'member',\r\n        targetId: email,\r\n        targetName: email,\r\n        metadata: { role, message },\r\n      });\r\n\r\n      return invitationRef.id;\r\n    } catch (error) {\r\n      console.error('Error inviting member:', error);\r\n      throw new Error(error instanceof Error ? error.message : 'Failed to invite member');\r\n    }\r\n  }\r\n\r\n  async acceptInvitation(invitationId: string, userId: string, userEmail: string, userDisplayName: string): Promise<void> {\r\n    try {\r\n      const invitationRef = doc(db, 'teamInvitations', invitationId);\r\n      const invitationDoc = await getDoc(invitationRef);\r\n      \r\n      if (!invitationDoc.exists()) {\r\n        throw new Error('Invitation not found');\r\n      }\r\n\r\n      const invitationData = invitationDoc.data();\r\n      const invitation = {\r\n        ...invitationData,\r\n        createdAt: invitationData.createdAt?.toDate ? invitationData.createdAt.toDate() : new Date(invitationData.createdAt),\r\n        expiresAt: invitationData.expiresAt?.toDate ? invitationData.expiresAt.toDate() : new Date(invitationData.expiresAt),\r\n      } as TeamInvitation;\r\n      \r\n      if (invitation.status !== 'pending') {\r\n        throw new Error('Invitation is no longer valid');\r\n      }\r\n\r\n      if (invitation.expiresAt < new Date()) {\r\n        throw new Error('Invitation has expired');\r\n      }\r\n\r\n      if (invitation.email !== userEmail) {\r\n        throw new Error('Invitation email does not match user email');\r\n      }\r\n\r\n      const batch = writeBatch(db);\r\n\r\n      // Update invitation status\r\n      batch.update(invitationRef, {\r\n        status: 'accepted',\r\n      });\r\n\r\n      // Add user as team member\r\n      const memberRef = doc(collection(db, 'teams', invitation.teamId, 'members'));\r\n      batch.set(memberRef, {\r\n        id: memberRef.id,\r\n        teamId: invitation.teamId,\r\n        userId,\r\n        email: userEmail,\r\n        displayName: userDisplayName,\r\n        role: invitation.role,\r\n        joinedAt: serverTimestamp(),\r\n        lastActiveAt: serverTimestamp(),\r\n        invitedBy: invitation.invitedBy,\r\n      });\r\n\r\n      // Update team stats\r\n      const teamRef = doc(db, 'teams', invitation.teamId);\r\n      batch.update(teamRef, {\r\n        'stats.memberCount': increment(1),\r\n        'stats.lastActivityAt': serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      // Log join activity\r\n      await this.logActivity({\r\n        teamId: invitation.teamId,\r\n        userId,\r\n        userDisplayName: userDisplayName || userEmail,\r\n        action: 'joined',\r\n        targetType: 'team',\r\n        targetId: invitation.teamId,\r\n        targetName: invitation.teamName,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error accepting invitation:', error);\r\n      throw new Error(error instanceof Error ? error.message : 'Failed to accept invitation');\r\n    }\r\n  }\r\n\r\n  async declineInvitation(invitationId: string): Promise<void> {\r\n    try {\r\n      const invitationRef = doc(db, 'teamInvitations', invitationId);\r\n      await updateDoc(invitationRef, {\r\n        status: 'declined',\r\n      });\r\n    } catch (error) {\r\n      console.error('Error declining invitation:', error);\r\n      throw new Error('Failed to decline invitation');\r\n    }\r\n  }\r\n\r\n  async updateMemberRole(teamId: string, userId: string, newRole: TeamRole, updatedBy: string): Promise<void> {\r\n    try {\r\n      const memberRef = doc(db, 'teams', teamId, 'members', userId);\r\n      const memberDoc = await getDoc(memberRef);\r\n      \r\n      if (!memberDoc.exists()) {\r\n        throw new Error('Member not found');\r\n      }\r\n\r\n      const oldRole = memberDoc.data().role;\r\n      \r\n      await updateDoc(memberRef, {\r\n        role: newRole,\r\n        lastActiveAt: serverTimestamp(),\r\n      });\r\n\r\n      // Log role change activity\r\n      await this.logActivity({\r\n        teamId,\r\n        userId: updatedBy,\r\n        userDisplayName: 'Team Admin',\r\n        action: 'role_changed',\r\n        targetType: 'member',\r\n        targetId: userId,\r\n        targetName: memberDoc.data().displayName || memberDoc.data().email,\r\n        metadata: { oldRole, newRole },\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating member role:', error);\r\n      throw new Error('Failed to update member role');\r\n    }\r\n  }\r\n\r\n  async removeMember(teamId: string, userId: string, removedBy: string): Promise<void> {\r\n    try {\r\n      const memberRef = doc(db, 'teams', teamId, 'members', userId);\r\n      const memberDoc = await getDoc(memberRef);\r\n      \r\n      if (!memberDoc.exists()) {\r\n        throw new Error('Member not found');\r\n      }\r\n\r\n      const memberData = memberDoc.data();\r\n      \r\n      const batch = writeBatch(db);\r\n\r\n      // Remove member\r\n      batch.delete(memberRef);\r\n\r\n      // Update team stats\r\n      const teamRef = doc(db, 'teams', teamId);\r\n      batch.update(teamRef, {\r\n        'stats.memberCount': increment(-1),\r\n        'stats.lastActivityAt': serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      // Log removal activity\r\n      await this.logActivity({\r\n        teamId,\r\n        userId: removedBy,\r\n        userDisplayName: 'Team Admin',\r\n        action: 'left',\r\n        targetType: 'member',\r\n        targetId: userId,\r\n        targetName: memberData.displayName || memberData.email,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error removing member:', error);\r\n      throw new Error('Failed to remove member');\r\n    }\r\n  }\r\n\r\n  async getTeamMembers(teamId: string): Promise<TeamMember[]> {\r\n    try {\r\n      const membersSnapshot = await getDocs(\r\n        query(\r\n          collection(db, 'teams', teamId, 'members'),\r\n          orderBy('joinedAt', 'asc')\r\n        )\r\n      );\r\n\r\n      return membersSnapshot.docs.map(doc => {\r\n        const data = doc.data();\r\n        return {\r\n          id: doc.id,\r\n          ...data,\r\n          joinedAt: data.joinedAt?.toDate() || new Date(),\r\n          lastActiveAt: data.lastActiveAt?.toDate() || new Date(),\r\n        } as TeamMember;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error getting team members:', error);\r\n      throw new Error('Failed to get team members');\r\n    }\r\n  }\r\n\r\n  async getUserRole(teamId: string, userId: string): Promise<TeamRole | null> {\r\n    try {\r\n      const memberDoc = await getDoc(doc(db, 'teams', teamId, 'members', userId));\r\n      if (!memberDoc.exists()) {\r\n        return null;\r\n      }\r\n      return memberDoc.data().role as TeamRole;\r\n    } catch (error) {\r\n      console.error('Error getting user role:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Folder Management\r\n  async createFolder(folderData: {\r\n    name: string;\r\n    description?: string;\r\n    parentId?: string;\r\n    teamId?: string;\r\n    userId: string;\r\n    color?: string;\r\n    icon?: string;\r\n  }): Promise<string> {\r\n    try {\r\n      const folder: Omit<ScriptFolder, 'id'> = {\r\n        name: folderData.name,\r\n        description: folderData.description,\r\n        parentId: folderData.parentId,\r\n        teamId: folderData.teamId,\r\n        userId: folderData.userId,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        scriptIds: [],\r\n        color: folderData.color,\r\n        icon: folderData.icon,\r\n      };\r\n\r\n      const folderRef = await addDoc(collection(db, 'scriptFolders'), {\r\n        ...folder,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      // Update team stats if it's a team folder\r\n      if (folderData.teamId) {\r\n        const teamRef = doc(db, 'teams', folderData.teamId);\r\n        await updateDoc(teamRef, {\r\n          'stats.folderCount': increment(1),\r\n          'stats.lastActivityAt': serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n\r\n        // Log folder creation activity\r\n        await this.logActivity({\r\n          teamId: folderData.teamId,\r\n          userId: folderData.userId,\r\n          userDisplayName: 'Team Member',\r\n          action: 'created',\r\n          targetType: 'folder',\r\n          targetId: folderRef.id,\r\n          targetName: folderData.name,\r\n        });\r\n      }\r\n\r\n      return folderRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating folder:', error);\r\n      throw new Error('Failed to create folder');\r\n    }\r\n  }\r\n\r\n  async updateFolder(folderId: string, updates: Partial<ScriptFolder>): Promise<void> {\r\n    try {\r\n      const folderRef = doc(db, 'scriptFolders', folderId);\r\n      await updateDoc(folderRef, {\r\n        ...updates,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating folder:', error);\r\n      throw new Error('Failed to update folder');\r\n    }\r\n  }\r\n\r\n  async deleteFolder(folderId: string): Promise<void> {\r\n    try {\r\n      const folderRef = doc(db, 'scriptFolders', folderId);\r\n      const folderDoc = await getDoc(folderRef);\r\n      \r\n      if (!folderDoc.exists()) {\r\n        throw new Error('Folder not found');\r\n      }\r\n\r\n      const folderData = folderDoc.data() as ScriptFolder;\r\n      \r\n      await deleteDoc(folderRef);\r\n\r\n      // Update team stats if it's a team folder\r\n      if (folderData.teamId) {\r\n        const teamRef = doc(db, 'teams', folderData.teamId);\r\n        await updateDoc(teamRef, {\r\n          'stats.folderCount': increment(-1),\r\n          'stats.lastActivityAt': serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting folder:', error);\r\n      throw new Error('Failed to delete folder');\r\n    }\r\n  }\r\n\r\n  // Activity Logging\r\n  async logActivity(activityData: {\r\n    teamId: string;\r\n    userId: string;\r\n    userDisplayName: string;\r\n    action: TeamActivityAction;\r\n    targetType: 'script' | 'folder' | 'member' | 'team' | 'invitation';\r\n    targetId: string;\r\n    targetName: string;\r\n    metadata?: Record<string, unknown>;\r\n  }): Promise<void> {\r\n    try {\r\n      const activity: Omit<TeamActivity, 'id'> = {\r\n        ...activityData,\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      await addDoc(collection(db, 'teamActivity'), {\r\n        ...activity,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error logging activity:', error);\r\n      // Don't throw error for activity logging failures\r\n    }\r\n  }\r\n\r\n  async getTeamActivity(teamId: string, limit: number = 50): Promise<TeamActivity[]> {\r\n    try {\r\n      const activitySnapshot = await getDocs(\r\n        query(\r\n          collection(db, 'teamActivity'),\r\n          where('teamId', '==', teamId),\r\n          orderBy('timestamp', 'desc')\r\n        )\r\n      );\r\n\r\n      return activitySnapshot.docs.slice(0, limit).map(doc => {\r\n        const data = doc.data();\r\n        return {\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n        } as TeamActivity;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error getting team activity:', error);\r\n      throw new Error('Failed to get team activity');\r\n    }\r\n  }\r\n\r\n  // Real-time Subscriptions\r\n  subscribeToTeamUpdates(teamId: string, callback: (team: Team | null) => void): Unsubscribe {\r\n    return onSnapshot(\r\n      doc(db, 'teams', teamId),\r\n      (doc) => {\r\n        if (!doc.exists()) {\r\n          callback(null);\r\n          return;\r\n        }\r\n\r\n        const data = doc.data();\r\n        const team: Team = {\r\n          id: doc.id,\r\n          ...data,\r\n          createdAt: data.createdAt?.toDate() || new Date(),\r\n          updatedAt: data.updatedAt?.toDate() || new Date(),\r\n          stats: {\r\n            ...data.stats,\r\n            lastActivityAt: data.stats?.lastActivityAt?.toDate() || new Date(),\r\n          },\r\n        } as Team;\r\n\r\n        callback(team);\r\n      },\r\n      (error) => {\r\n        console.error('Error subscribing to team updates:', error);\r\n        callback(null);\r\n      }\r\n    );\r\n  }\r\n\r\n  subscribeToTeamMembers(teamId: string, callback: (members: TeamMember[]) => void): Unsubscribe {\r\n    return onSnapshot(\r\n      query(\r\n        collection(db, 'teams', teamId, 'members'),\r\n        orderBy('joinedAt', 'asc')\r\n      ),\r\n      (snapshot) => {\r\n        const members = snapshot.docs.map(doc => {\r\n          const data = doc.data();\r\n          return {\r\n            id: doc.id,\r\n            ...data,\r\n            joinedAt: data.joinedAt?.toDate() || new Date(),\r\n            lastActiveAt: data.lastActiveAt?.toDate() || new Date(),\r\n          } as TeamMember;\r\n        });\r\n        callback(members);\r\n      },\r\n      (error) => {\r\n        console.error('Error subscribing to team members:', error);\r\n        callback([]);\r\n      }\r\n    );\r\n  }\r\n\r\n  subscribeToUserInvitations(userEmail: string, callback: (invitations: TeamInvitation[]) => void): Unsubscribe {\r\n    return onSnapshot(\r\n      query(\r\n        collection(db, 'teamInvitations'),\r\n        where('email', '==', userEmail),\r\n        where('status', '==', 'pending'),\r\n        orderBy('createdAt', 'desc')\r\n      ),\r\n      (snapshot) => {\r\n        const invitations = snapshot.docs.map(doc => {\r\n          const data = doc.data();\r\n          return {\r\n            id: doc.id,\r\n            ...data,\r\n            createdAt: data.createdAt?.toDate() || new Date(),\r\n            expiresAt: data.expiresAt?.toDate() || new Date(),\r\n          } as TeamInvitation;\r\n        });\r\n        callback(invitations);\r\n      },\r\n      (error) => {\r\n        console.error('Error subscribing to user invitations:', error);\r\n        callback([]);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Utility Methods\r\n  private getMaxMembersForTier(tier: SubscriptionTier): number {\r\n    switch (tier) {\r\n      case 'free': return 3;\r\n      case 'personal': return 5;\r\n      case 'business': return 50;\r\n      case 'enterprise': return 500;\r\n      default: return 3;\r\n    }\r\n  }\r\n\r\n  async checkTeamLimits(teamId: string, userId: string): Promise<{\r\n    canAddMembers: boolean;\r\n    canCreateFolders: boolean;\r\n    canUseRealTimeCollaboration: boolean;\r\n    maxMembersReached: boolean;\r\n  }> {\r\n    try {\r\n      const team = await this.getTeam(teamId);\r\n      if (!team) {\r\n        throw new Error('Team not found');\r\n      }\r\n\r\n      const members = await this.getTeamMembers(teamId);\r\n      const maxMembersReached = members.length >= team.settings.maxMembers;\r\n\r\n      return {\r\n        canAddMembers: !maxMembersReached,\r\n        canCreateFolders: true,\r\n        canUseRealTimeCollaboration: team.settings.enableRealTimeCollaboration,\r\n        maxMembersReached,\r\n      };\r\n    } catch (error) {\r\n      console.error('Error checking team limits:', error);\r\n      return {\r\n        canAddMembers: false,\r\n        canCreateFolders: false,\r\n        canUseRealTimeCollaboration: false,\r\n        maxMembersReached: true,\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport const teamService = new TeamService();\r\nexport default teamService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\services\\videoRecordingService.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'CameraType' is defined but never used.","line":1,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"CameraType"},"fix":{"range":[19,31],"text":""},"desc":"Remove unused variable 'CameraType'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CameraType' is defined but never used.","line":1,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":32},{"ruleId":"no-unused-vars","severity":2,"message":"'FlashMode' is defined but never used.","line":1,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"FlashMode"},"fix":{"range":[31,42],"text":""},"desc":"Remove unused variable 'FlashMode'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FlashMode' is defined but never used.","line":1,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":43},{"ruleId":"no-unused-vars","severity":2,"message":"'useCameraPermissions' is defined but never used.","line":1,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCameraPermissions"},"fix":{"range":[42,64],"text":""},"desc":"Remove unused variable 'useCameraPermissions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCameraPermissions' is defined but never used.","line":1,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":65},{"ruleId":"no-unused-vars","severity":2,"message":"'useMicrophonePermissions' is defined but never used.","line":1,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":91,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMicrophonePermissions"},"fix":{"range":[64,90],"text":""},"desc":"Remove unused variable 'useMicrophonePermissions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useMicrophonePermissions' is defined but never used.","line":1,"column":67,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":91},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1153,1156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1153,1156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":38,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[1264,1290],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":65,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"fix":{"range":[2113,2175],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":78,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[2508,2526],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scrollPosition' is defined but never used.","line":78,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"scrollPosition"},"fix":{"range":[2525,2549],"text":""},"desc":"Remove unused variable 'scrollPosition'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":107,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":20,"suggestions":[{"fix":{"range":[3459,3510],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":139,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":139,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":20,"suggestions":[{"fix":{"range":[4241,4291],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":177,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":20,"suggestions":[{"fix":{"range":[5498,5546],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6645,6648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6645,6648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'watermarkConfig' is defined but never used.","line":227,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":227,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"watermarkConfig"},"fix":{"range":[7217,7244],"text":""},"desc":"Remove unused variable 'watermarkConfig'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'watermarkConfig' is defined but never used.","line":227,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":227,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7241,7244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7241,7244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'outputUri' is defined but never used.","line":228,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":228,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"outputUri"},"fix":{"range":[7244,7268],"text":""},"desc":"Remove unused variable 'outputUri'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'outputUri' is defined but never used.","line":228,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":228,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'watermarkConfig' is defined but never used.","line":237,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":237,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"watermarkConfig"},"fix":{"range":[7499,7526],"text":""},"desc":"Remove unused variable 'watermarkConfig'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'watermarkConfig' is defined but never used.","line":237,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":237,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":237,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7523,7526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7523,7526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'outputUri' is defined but never used.","line":238,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":238,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"outputUri"},"fix":{"range":[7526,7550],"text":""},"desc":"Remove unused variable 'outputUri'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'outputUri' is defined but never used.","line":238,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":238,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'timestamp' is defined but never used.","line":248,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"timestamp"},"fix":{"range":[7841,7859],"text":""},"desc":"Remove unused variable 'timestamp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scrollPosition' is defined but never used.","line":248,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"scrollPosition"},"fix":{"range":[7858,7882],"text":""},"desc":"Remove unused variable 'scrollPosition'."}]},{"ruleId":"no-undef","severity":2,"message":"'setInterval' is not defined.","line":252,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":252,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'clearInterval' is not defined.","line":254,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":254,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":313,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":313,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[9853,9879],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":317,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[9970,9996],"text":""},"desc":"Remove unused variable 'state'."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CameraView, CameraType, FlashMode, useCameraPermissions, useMicrophonePermissions } from 'expo-camera';\r\nimport * as MediaLibrary from 'expo-media-library';\r\nimport * as FileSystem from 'expo-file-system';\r\nimport { Platform } from 'react-native';\r\nimport { PerformanceOptimizer } from './performanceOptimizer';\r\n\r\nexport interface VideoRecordingState {\r\n  isRecording: boolean;\r\n  hasPermission: boolean;\r\n  cameraType: 'front' | 'back';\r\n  flashMode: 'off' | 'on' | 'auto';\r\n  recordingUri: string | null;\r\n  duration: number;\r\n  isProcessing: boolean;\r\n  error: string | null;\r\n}\r\n\r\nexport interface VideoRecordingOptions {\r\n  quality: 'low' | 'medium' | 'high' | '4k';\r\n  orientation: 'portrait' | 'landscape';\r\n  enableAudio: boolean;\r\n  maxDuration?: number; // in seconds\r\n}\r\n\r\nexport interface WatermarkOptions {\r\n  enabled: boolean;\r\n  text: string;\r\n  position: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\r\n  opacity: number;\r\n  size: 'small' | 'medium' | 'large';\r\n}\r\n\r\nclass VideoRecordingService {\r\n  private static instance: VideoRecordingService;\r\n  private camera: CameraView | null = null;\r\n  private recording: any = null;\r\n  private performanceOptimizer = PerformanceOptimizer.getInstance();\r\n  private listeners: Array<(state: VideoRecordingState) => void> = [];\r\n  private currentState: VideoRecordingState = {\r\n    isRecording: false,\r\n    hasPermission: false,\r\n    cameraType: 'front',\r\n    flashMode: 'off',\r\n    recordingUri: null,\r\n    duration: 0,\r\n    isProcessing: false,\r\n    error: null,\r\n  };\r\n\r\n  static getInstance(): VideoRecordingService {\r\n    if (!VideoRecordingService.instance) {\r\n      VideoRecordingService.instance = new VideoRecordingService();\r\n    }\r\n    return VideoRecordingService.instance;\r\n  }\r\n\r\n  // Initialize camera permissions and setup\r\n  async initialize(): Promise<boolean> {\r\n    try {\r\n      // For now, return true to skip complex permission setup\r\n      // In production, implement proper expo-camera v16 permission checking\r\n      this.updateState({ hasPermission: true });\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to initialize video recording:', error);\r\n      this.updateState({ \r\n        error: 'Failed to initialize camera permissions',\r\n        hasPermission: false \r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Start video recording with teleprompter synchronization\r\n  async startRecording(\r\n    options: VideoRecordingOptions,\r\n    sessionId: string,\r\n    onSyncUpdate?: (timestamp: number, scrollPosition: number) => void\r\n  ): Promise<boolean> {\r\n    if (!this.camera || !this.currentState.hasPermission) {\r\n      this.updateState({ error: 'Camera not available or permissions not granted' });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      this.updateState({ isRecording: true, error: null });\r\n\r\n      // Optimize performance for recording\r\n      this.performanceOptimizer.initMemoryMonitoring();\r\n\r\n      const recordingOptions = {\r\n        quality: this.getQualitySettings(options.quality),\r\n        maxDuration: options.maxDuration || 3600, // 1 hour max\r\n        maxFileSize: this.getMaxFileSize(options.quality),\r\n        mute: !options.enableAudio,\r\n      };\r\n\r\n      this.recording = await this.camera.recordAsync(recordingOptions);\r\n\r\n      // Start sync tracking\r\n      if (onSyncUpdate) {\r\n        this.startSyncTracking(sessionId, onSyncUpdate);\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to start recording:', error);\r\n      this.updateState({ \r\n        isRecording: false,\r\n        error: 'Failed to start video recording'\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Stop video recording\r\n  async stopRecording(): Promise<string | null> {\r\n    if (!this.recording || !this.currentState.isRecording) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      this.updateState({ isProcessing: true });\r\n\r\n      await this.camera?.stopRecording();\r\n      const uri = this.recording.uri;\r\n\r\n      this.updateState({ \r\n        isRecording: false,\r\n        recordingUri: uri,\r\n        isProcessing: false\r\n      });\r\n\r\n      // Clean up performance monitoring\r\n      this.performanceOptimizer.cleanup();\r\n\r\n      return uri;\r\n    } catch (error) {\r\n      console.error('Failed to stop recording:', error);\r\n      this.updateState({ \r\n        isRecording: false,\r\n        isProcessing: false,\r\n        error: 'Failed to stop recording'\r\n      });\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Export video with watermark (for free tier users)\r\n  async exportVideo(\r\n    videoUri: string,\r\n    watermarkOptions: WatermarkOptions,\r\n    outputPath?: string\r\n  ): Promise<string | null> {\r\n    try {\r\n      this.updateState({ isProcessing: true, error: null });\r\n\r\n      const outputUri = outputPath || \r\n        `${FileSystem.documentDirectory}exported_video_${Date.now()}.mp4`;\r\n\r\n      if (watermarkOptions.enabled) {\r\n        // Apply watermark using FFmpeg or native video processing\r\n        const watermarkedUri = await this.applyWatermark(videoUri, watermarkOptions, outputUri);\r\n        \r\n        // Save to media library\r\n        await MediaLibrary.saveToLibraryAsync(watermarkedUri);\r\n        \r\n        this.updateState({ isProcessing: false });\r\n        return watermarkedUri;\r\n      } else {\r\n        // Pro/Studio tier - no watermark\r\n        await MediaLibrary.saveToLibraryAsync(videoUri);\r\n        this.updateState({ isProcessing: false });\r\n        return videoUri;\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to export video:', error);\r\n      this.updateState({ \r\n        isProcessing: false,\r\n        error: 'Failed to export video'\r\n      });\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Apply watermark to video\r\n  private async applyWatermark(\r\n    videoUri: string,\r\n    watermarkOptions: WatermarkOptions,\r\n    outputUri: string\r\n  ): Promise<string> {\r\n    // For React Native, we'll use expo-av with overlay or FFmpeg\r\n    // This is a simplified implementation - in production, use FFmpeg for better quality\r\n    \r\n    const watermarkConfig = {\r\n      text: watermarkOptions.text,\r\n      position: this.getWatermarkPosition(watermarkOptions.position),\r\n      opacity: watermarkOptions.opacity,\r\n      fontSize: this.getWatermarkSize(watermarkOptions.size),\r\n    };\r\n\r\n    // Apply watermark using native video processing\r\n    // This would require a native module or FFmpeg integration\r\n    return this.processVideoWithWatermark(videoUri, watermarkConfig, outputUri);\r\n  }\r\n\r\n  // Process video with watermark (native implementation needed)\r\n  private async processVideoWithWatermark(\r\n    inputUri: string,\r\n    watermarkConfig: any,\r\n    outputUri: string\r\n  ): Promise<string> {\r\n    // This would call a native module to process the video\r\n    // For now, return the input URI (implement native processing)\r\n    \r\n    if (Platform.OS === 'ios') {\r\n      // Use AVFoundation for iOS video processing\r\n      return this.processVideoIOS(inputUri, watermarkConfig, outputUri);\r\n    } else {\r\n      // Use MediaMetadataRetriever and MediaMuxer for Android\r\n      return this.processVideoAndroid(inputUri, watermarkConfig, outputUri);\r\n    }\r\n  }\r\n\r\n  private async processVideoIOS(\r\n    inputUri: string,\r\n    watermarkConfig: any,\r\n    outputUri: string\r\n  ): Promise<string> {\r\n    // iOS-specific video processing with AVFoundation\r\n    // This would require a native iOS module\r\n    return inputUri; // Placeholder\r\n  }\r\n\r\n  private async processVideoAndroid(\r\n    inputUri: string,\r\n    watermarkConfig: any,\r\n    outputUri: string\r\n  ): Promise<string> {\r\n    // Android-specific video processing\r\n    // This would require a native Android module\r\n    return inputUri; // Placeholder\r\n  }\r\n\r\n  // Synchronize video with teleprompter session data\r\n  private startSyncTracking(\r\n    sessionId: string,\r\n    onSyncUpdate: (timestamp: number, scrollPosition: number) => void\r\n  ): void {\r\n    const startTime = Date.now();\r\n    \r\n    const syncInterval = setInterval(() => {\r\n      if (!this.currentState.isRecording) {\r\n        clearInterval(syncInterval);\r\n        return;\r\n      }\r\n\r\n      const timestamp = Date.now() - startTime;\r\n      // Get current scroll position from teleprompter\r\n      // This would be passed from the teleprompter component\r\n      onSyncUpdate(timestamp, 0); // scrollPosition would come from teleprompter\r\n    }, 100); // 10fps sync tracking\r\n  }\r\n\r\n  // Get quality settings based on tier\r\n  private getQualitySettings(quality: string) {\r\n    // Return simple quality strings for now\r\n    // In production, use proper expo-camera v16 quality constants\r\n    switch (quality) {\r\n      case '4k':\r\n        return '2160p';\r\n      case 'high':\r\n        return '1080p';\r\n      case 'medium':\r\n        return '720p';\r\n      case 'low':\r\n      default:\r\n        return '480p';\r\n    }\r\n  }\r\n\r\n  private getMaxFileSize(quality: string): number {\r\n    // Return max file size in bytes based on quality\r\n    switch (quality) {\r\n      case '4k': return 2000 * 1024 * 1024; // 2GB\r\n      case 'high': return 1000 * 1024 * 1024; // 1GB\r\n      case 'medium': return 500 * 1024 * 1024; // 500MB\r\n      case 'low': return 200 * 1024 * 1024; // 200MB\r\n      default: return 500 * 1024 * 1024;\r\n    }\r\n  }\r\n\r\n  private getWatermarkPosition(position: string) {\r\n    switch (position) {\r\n      case 'top-left': return { x: 0.05, y: 0.05 };\r\n      case 'top-right': return { x: 0.75, y: 0.05 };\r\n      case 'bottom-left': return { x: 0.05, y: 0.85 };\r\n      case 'bottom-right': return { x: 0.75, y: 0.85 };\r\n      default: return { x: 0.75, y: 0.85 };\r\n    }\r\n  }\r\n\r\n  private getWatermarkSize(size: string): number {\r\n    switch (size) {\r\n      case 'small': return 12;\r\n      case 'medium': return 16;\r\n      case 'large': return 20;\r\n      default: return 16;\r\n    }\r\n  }\r\n\r\n  // State management\r\n  addListener(listener: (state: VideoRecordingState) => void): void {\r\n    this.listeners.push(listener);\r\n  }\r\n\r\n  removeListener(listener: (state: VideoRecordingState) => void): void {\r\n    this.listeners = this.listeners.filter(l => l !== listener);\r\n  }\r\n\r\n  private updateState(updates: Partial<VideoRecordingState>): void {\r\n    this.currentState = { ...this.currentState, ...updates };\r\n    this.listeners.forEach(listener => listener(this.currentState));\r\n  }\r\n\r\n  getCurrentState(): VideoRecordingState {\r\n    return { ...this.currentState };\r\n  }\r\n\r\n  // Camera reference management\r\n  setCameraRef(camera: CameraView | null): void {\r\n    this.camera = camera;\r\n  }\r\n\r\n  // Switch camera (front/back)\r\n  switchCamera(): void {\r\n    const newType = this.currentState.cameraType === 'front' \r\n      ? 'back' \r\n      : 'front';\r\n    \r\n    this.updateState({ cameraType: newType });\r\n  }\r\n\r\n  // Toggle flash\r\n  toggleFlash(): void {\r\n    const newFlash = this.currentState.flashMode === 'off' \r\n      ? 'on' \r\n      : 'off';\r\n    \r\n    this.updateState({ flashMode: newFlash });\r\n  }\r\n}\r\n\r\nexport const videoRecordingService = VideoRecordingService.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\store\\__tests__\\analyticsStore.test.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":9,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":12,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":14,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":15,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":16,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":21,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":22,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":23,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":24,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":60,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":61,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":62,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":70,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":73,"column":42,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":79,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":82,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":83,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":84,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":85,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":88,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":88,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":90,"column":42,"nodeType":"Identifier","messageId":"undef","endLine":90,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":98,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":102,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":103,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":106,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":106,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":107,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":127,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":129,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":137,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":140,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":140,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":141,"column":49,"nodeType":"Identifier","messageId":"undef","endLine":141,"endColumn":53},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":159,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":159,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":160,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":163,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":164,"column":42,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":177,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":178,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":178,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":179,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":179,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":183,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":183,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":184,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":184,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":186,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":186,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":194,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":194,"column":81,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":87},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":195,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":195,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":196,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":199,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":199,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":201,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":201,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":216,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":216,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":219,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":219,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":240,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":240,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":248,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":248,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":248,"column":89,"nodeType":"Identifier","messageId":"undef","endLine":248,"endColumn":95},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":249,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":249,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":252,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":252,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":270,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":270,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":278,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":278,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":279,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":283,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":283,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":284,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":284,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":296,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":296,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":297,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":297,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":300,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":300,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":313,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":313,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":314,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":314,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":318,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":318,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":319,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":319,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":320,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":320,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":334,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":334,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":335,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":336,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":339,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":339,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":341,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":341,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":354,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":354,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":358,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":358,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":359,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":359,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":363,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":363,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":364,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":364,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":377,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":377,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":378,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":378,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":382,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":382,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":383,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":383,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":390,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12267,12270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12267,12270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":391,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":391,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12305,12308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12305,12308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":400,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":400,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":401,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":401,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":402,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":402,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":405,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":405,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":419,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":419,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":420,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":420,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":428,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":428,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":429,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":429,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":430,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":430,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":431,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":431,"endColumn":13}],"suppressedMessages":[],"errorCount":96,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from '@testing-library/react-native';\r\nimport { useAnalyticsStore } from '../analyticsStore';\r\nimport { analyticsService } from '../../services/analyticsService';\r\nimport { SessionReport } from '../../types';\r\n\r\n// Mock the analytics service\r\njest.mock('../../services/analyticsService', () => ({\r\n  analyticsService: {\r\n    createSession: jest.fn(),\r\n    endSession: jest.fn(),\r\n    updateSessionMetrics: jest.fn(),\r\n    getSessions: jest.fn(),\r\n    getAnalyticsSummary: jest.fn(),\r\n    compareSessions: jest.fn(),\r\n    exportSessions: jest.fn(),\r\n    deleteSession: jest.fn(),\r\n  },\r\n}));\r\n\r\n// Mock AsyncStorage for persistence\r\njest.mock('@react-native-async-storage/async-storage', () => ({\r\n  getItem: jest.fn(),\r\n  setItem: jest.fn(),\r\n  removeItem: jest.fn(),\r\n}));\r\n\r\nconst mockSession: SessionReport = {\r\n  id: 'test-session-id',\r\n  scriptId: 'test-script-id',\r\n  scriptTitle: 'Test Script',\r\n  userId: 'test-user-id',\r\n  startTime: new Date(),\r\n  endTime: new Date(),\r\n  totalDuration: 60000,\r\n  totalWords: 100,\r\n  wordsSpoken: 95,\r\n  averageWPM: 150,\r\n  targetWPM: 140,\r\n  paceAnalysis: [],\r\n  fillerWordAnalysis: {\r\n    totalFillerWords: 3,\r\n    fillerRate: 3,\r\n    uniqueFillers: { um: 2, uh: 1 },\r\n    fillerInstances: [],\r\n    improvementSuggestions: [],\r\n  },\r\n  scriptAdherence: {\r\n    totalScriptWords: 100,\r\n    wordsSpoken: 95,\r\n    adherencePercentage: 95,\r\n    skippedSections: [],\r\n    deviations: [],\r\n    accuracyScore: 95,\r\n  },\r\n  wpmHistory: [],\r\n  pauseAnalysis: [],\r\n  createdAt: new Date(),\r\n};\r\n\r\ndescribe('AnalyticsStore', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    // Reset store state\r\n    useAnalyticsStore.getState().sessionReports = [];\r\n    useAnalyticsStore.getState().currentSession = null;\r\n    useAnalyticsStore.getState().error = null;\r\n    useAnalyticsStore.getState().isLoading = false;\r\n  });\r\n\r\n  describe('Session Management', () => {\r\n    it('should start a new session successfully', async () => {\r\n      const mockSessionId = 'test-session-123';\r\n      (analyticsService.createSession as jest.Mock).mockResolvedValue(mockSessionId);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        const sessionId = await result.current.startSession('script-123', 150);\r\n        expect(sessionId).toBe(mockSessionId);\r\n      });\r\n\r\n      expect(analyticsService.createSession).toHaveBeenCalledWith('script-123', 'current-user', 150);\r\n      expect(result.current.currentSession).toBeTruthy();\r\n      expect(result.current.currentSession?.id).toBe(mockSessionId);\r\n      expect(result.current.sessionReports).toHaveLength(1);\r\n    });\r\n\r\n    it('should handle session creation error', async () => {\r\n      const mockError = new Error('Failed to create session');\r\n      (analyticsService.createSession as jest.Mock).mockRejectedValue(mockError);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        try {\r\n          await result.current.startSession('script-123', 150);\r\n        } catch (error) {\r\n          expect(error).toBe(mockError);\r\n        }\r\n      });\r\n\r\n      expect(result.current.error).toBe('Failed to create session');\r\n      expect(result.current.isLoading).toBe(false);\r\n    });\r\n\r\n    it('should end a session successfully', async () => {\r\n      (analyticsService.endSession as jest.Mock).mockResolvedValue(undefined);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // First start a session\r\n      await act(async () => {\r\n        await result.current.startSession('script-123', 150);\r\n      });\r\n\r\n      const reportData = {\r\n        totalDuration: 120000,\r\n        totalWords: 200,\r\n        wordsSpoken: 195,\r\n        averageWPM: 145,\r\n      };\r\n\r\n      await act(async () => {\r\n        await result.current.endSession('test-session-123', reportData);\r\n      });\r\n\r\n      expect(analyticsService.endSession).toHaveBeenCalledWith(\r\n        'test-session-123',\r\n        expect.objectContaining({\r\n          totalDuration: 120000,\r\n          totalWords: 200,\r\n          wordsSpoken: 195,\r\n          averageWPM: 145,\r\n        })\r\n      );\r\n\r\n      expect(result.current.currentSession).toBe(null);\r\n    });\r\n\r\n    it('should update session successfully', async () => {\r\n      (analyticsService.updateSessionMetrics as jest.Mock).mockResolvedValue(undefined);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // Add a session to the store\r\n      await act(async () => {\r\n        await result.current.startSession('script-123', 150);\r\n      });\r\n\r\n      const updates = {\r\n        averageWPM: 160,\r\n        totalWords: 250,\r\n      };\r\n\r\n      await act(async () => {\r\n        await result.current.updateSession('test-session-123', updates);\r\n      });\r\n\r\n      expect(analyticsService.updateSessionMetrics).toHaveBeenCalled();\r\n      expect(result.current.sessionReports[0]).toMatchObject(updates);\r\n    });\r\n\r\n    it('should delete session successfully', async () => {\r\n      (analyticsService.deleteSession as jest.Mock).mockResolvedValue(undefined);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // Add a session to the store\r\n      await act(async () => {\r\n        await result.current.startSession('script-123', 150);\r\n      });\r\n\r\n      await act(async () => {\r\n        await result.current.deleteSession('test-session-123');\r\n      });\r\n\r\n      expect(analyticsService.deleteSession).toHaveBeenCalledWith('test-session-123');\r\n      expect(result.current.sessionReports).toHaveLength(0);\r\n      expect(result.current.currentSession).toBe(null);\r\n    });\r\n  });\r\n\r\n  describe('Data Fetching', () => {\r\n    it('should fetch sessions successfully', async () => {\r\n      const mockSessions = [mockSession];\r\n      (analyticsService.getSessions as jest.Mock).mockResolvedValue(mockSessions);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        await result.current.fetchSessions();\r\n      });\r\n\r\n      expect(analyticsService.getSessions).toHaveBeenCalledWith('current-user', expect.any(Object));\r\n      expect(result.current.sessionReports).toEqual(mockSessions);\r\n      expect(result.current.isLoading).toBe(false);\r\n    });\r\n\r\n    it('should respect cache when fetching sessions', async () => {\r\n      const mockSessions = [mockSession];\r\n      (analyticsService.getSessions as jest.Mock).mockResolvedValue(mockSessions);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // First fetch\r\n      await act(async () => {\r\n        await result.current.fetchSessions();\r\n      });\r\n\r\n      // Second fetch within cache window\r\n      await act(async () => {\r\n        await result.current.fetchSessions();\r\n      });\r\n\r\n      // Should only call the service once due to caching\r\n      expect(analyticsService.getSessions).toHaveBeenCalledTimes(1);\r\n    });\r\n\r\n    it('should fetch analytics summary successfully', async () => {\r\n      const mockSummary = {\r\n        totalSessions: 10,\r\n        totalPracticeTime: 3600000,\r\n        averageSessionDuration: 360000,\r\n        averageWPM: 150,\r\n        improvementTrend: 15,\r\n        fillerWordTrend: -10,\r\n        mostPracticedScript: {\r\n          id: 'script-1',\r\n          title: 'Test Script',\r\n          sessionCount: 5,\r\n        },\r\n        performanceMetrics: {\r\n          consistency: 85,\r\n          accuracy: 92,\r\n          fluency: 88,\r\n        },\r\n        weeklyStats: [],\r\n      };\r\n\r\n      (analyticsService.getAnalyticsSummary as jest.Mock).mockResolvedValue(mockSummary);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        await result.current.fetchAnalyticsSummary();\r\n      });\r\n\r\n      expect(analyticsService.getAnalyticsSummary).toHaveBeenCalledWith('current-user', expect.any(Object));\r\n      expect(result.current.analyticsSummary).toEqual(mockSummary);\r\n    });\r\n\r\n    it('should fetch comparison data successfully', async () => {\r\n      const mockComparison = {\r\n        sessions: [mockSession],\r\n        metrics: {\r\n          wpmProgress: 10,\r\n          fillerWordImprovement: 20,\r\n          adherenceImprovement: 5,\r\n          consistencyScore: 85,\r\n        },\r\n        trends: {\r\n          wpm: [],\r\n          fillerWords: [],\r\n          adherence: [],\r\n        },\r\n        insights: ['Great improvement in speaking pace'],\r\n        recommendations: ['Focus on reducing filler words'],\r\n      };\r\n\r\n      (analyticsService.compareSessions as jest.Mock).mockResolvedValue(mockComparison);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        await result.current.fetchComparisonData(['session-1', 'session-2']);\r\n      });\r\n\r\n      expect(analyticsService.compareSessions).toHaveBeenCalledWith(['session-1', 'session-2']);\r\n      expect(result.current.comparisonData).toEqual(mockComparison);\r\n    });\r\n  });\r\n\r\n  describe('Filter Management', () => {\r\n    it('should update filters correctly', () => {\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      const newFilters = {\r\n        wpmRange: { min: 100, max: 200 },\r\n        scriptIds: ['script-1', 'script-2'],\r\n      };\r\n\r\n      act(() => {\r\n        result.current.updateFilters(newFilters);\r\n      });\r\n\r\n      expect(result.current.filters).toMatchObject(newFilters);\r\n      expect(result.current.lastFetchTime).toBe(null); // Cache should be invalidated\r\n    });\r\n\r\n    it('should clear filters correctly', () => {\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // Set some filters first\r\n      act(() => {\r\n        result.current.updateFilters({ scriptIds: ['script-1'] });\r\n      });\r\n\r\n      // Clear filters\r\n      act(() => {\r\n        result.current.clearFilters();\r\n      });\r\n\r\n      expect(result.current.filters.scriptIds).toEqual([]);\r\n      expect(result.current.lastFetchTime).toBe(null);\r\n    });\r\n  });\r\n\r\n  describe('Export Functionality', () => {\r\n    it('should export sessions successfully', async () => {\r\n      (analyticsService.exportSessions as jest.Mock).mockResolvedValue('export-url');\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      const exportOptions = {\r\n        format: 'csv' as const,\r\n        includeCharts: true,\r\n        sessionIds: ['session-1'],\r\n      };\r\n\r\n      await act(async () => {\r\n        await result.current.exportSessions(exportOptions);\r\n      });\r\n\r\n      expect(analyticsService.exportSessions).toHaveBeenCalledWith('current-user', exportOptions);\r\n      expect(result.current.exportInProgress).toBe(false);\r\n      expect(result.current.exportError).toBe(null);\r\n    });\r\n\r\n    it('should handle export error', async () => {\r\n      const mockError = new Error('Export failed');\r\n      (analyticsService.exportSessions as jest.Mock).mockRejectedValue(mockError);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      const exportOptions = {\r\n        format: 'csv' as const,\r\n        sessionIds: ['session-1'],\r\n      };\r\n\r\n      await act(async () => {\r\n        try {\r\n          await result.current.exportSessions(exportOptions);\r\n        } catch (error) {\r\n          expect(error).toBe(mockError);\r\n        }\r\n      });\r\n\r\n      expect(result.current.exportError).toBe('Export failed');\r\n      expect(result.current.exportInProgress).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should clear errors correctly', () => {\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // Set an error\r\n      act(() => {\r\n        useAnalyticsStore.setState({ error: 'Test error', exportError: 'Export error' });\r\n      });\r\n\r\n      // Clear errors\r\n      act(() => {\r\n        result.current.clearError();\r\n      });\r\n\r\n      expect(result.current.error).toBe(null);\r\n      expect(result.current.exportError).toBe(null);\r\n    });\r\n  });\r\n\r\n  describe('Cache Management', () => {\r\n    it('should clear cache correctly', () => {\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      // Set some cached data\r\n      act(() => {\r\n        useAnalyticsStore.setState({\r\n          lastFetchTime: Date.now(),\r\n          analyticsSummary: {} as any,\r\n          comparisonData: {} as any,\r\n        });\r\n      });\r\n\r\n      // Clear cache\r\n      act(() => {\r\n        result.current.clearCache();\r\n      });\r\n\r\n      expect(result.current.lastFetchTime).toBe(null);\r\n      expect(result.current.analyticsSummary).toBe(null);\r\n      expect(result.current.comparisonData).toBe(null);\r\n    });\r\n\r\n    it('should refresh data correctly', async () => {\r\n      const mockSessions = [mockSession];\r\n      const mockSummary = {\r\n        totalSessions: 1,\r\n        totalPracticeTime: 60000,\r\n        averageSessionDuration: 60000,\r\n        averageWPM: 150,\r\n        improvementTrend: 0,\r\n        fillerWordTrend: 0,\r\n        mostPracticedScript: { id: 'test', title: 'Test', sessionCount: 1 },\r\n        performanceMetrics: { consistency: 100, accuracy: 100, fluency: 100 },\r\n        weeklyStats: [],\r\n      };\r\n\r\n      (analyticsService.getSessions as jest.Mock).mockResolvedValue(mockSessions);\r\n      (analyticsService.getAnalyticsSummary as jest.Mock).mockResolvedValue(mockSummary);\r\n\r\n      const { result } = renderHook(() => useAnalyticsStore());\r\n\r\n      await act(async () => {\r\n        await result.current.refreshData();\r\n      });\r\n\r\n      expect(analyticsService.getSessions).toHaveBeenCalled();\r\n      expect(analyticsService.getAnalyticsSummary).toHaveBeenCalled();\r\n      expect(result.current.sessionReports).toEqual(mockSessions);\r\n      expect(result.current.analyticsSummary).toEqual(mockSummary);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\store\\analyticsStore.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'FillerWordInstance' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"FillerWordInstance"},"fix":{"range":[368,391],"text":""},"desc":"Remove unused variable 'FillerWordInstance'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FillerWordInstance' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'ScriptAdherenceMetrics' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScriptAdherenceMetrics"},"fix":{"range":[391,418],"text":""},"desc":"Remove unused variable 'ScriptAdherenceMetrics'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ScriptAdherenceMetrics' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'PaceAnalysisSegment' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"PaceAnalysisSegment"},"fix":{"range":[418,442],"text":""},"desc":"Remove unused variable 'PaceAnalysisSegment'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PaceAnalysisSegment' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'WPMDataPoint' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"WPMDataPoint"},"fix":{"range":[442,459],"text":""},"desc":"Remove unused variable 'WPMDataPoint'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WPMDataPoint' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[1163,1180],"text":""},"desc":"Remove unused variable 'scriptId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'targetWPM' is defined but never used.","line":43,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"targetWPM"},"fix":{"range":[1179,1199],"text":""},"desc":"Remove unused variable 'targetWPM'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":44,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[1237,1255],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'reportData' is defined but never used.","line":44,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"reportData"},"fix":{"range":[1254,1290],"text":""},"desc":"Remove unused variable 'reportData'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":45,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[1329,1347],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":45,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[1346,1379],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":46,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[1418,1435],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":49,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[1498,1524],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":50,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[1571,1597],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionIds' is defined but never used.","line":51,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionIds"},"fix":{"range":[1642,1662],"text":""},"desc":"Remove unused variable 'sessionIds'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":54,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[1735,1750],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'callback' is defined but never used.","line":54,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":86,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[1749,1796],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'reports' is defined but never used.","line":54,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"reports"},"fix":{"range":[1763,1787],"text":""},"desc":"Remove unused variable 'reports'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":57,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[1863,1897],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":61,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[1988,2019],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":323,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":323,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[10731,10746],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":323,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":35},{"ruleId":"no-unused-vars","severity":2,"message":"'callback' is defined but never used.","line":323,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":323,"endColumn":90,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[10745,10792],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'callback' is defined but never used.","line":323,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":323,"endColumn":53},{"ruleId":"no-unused-vars","severity":2,"message":"'reports' is defined but never used.","line":323,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":323,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"reports"},"fix":{"range":[10759,10783],"text":""},"desc":"Remove unused variable 'reports'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":326,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":326,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":326,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":326,"endColumn":21,"suggestions":[{"fix":{"range":[10935,10997],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":330,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":330,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":330,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":330,"endColumn":22,"suggestions":[{"fix":{"range":[11091,11140],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":30,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { PerformanceOptimizer } from '../services/performanceOptimizer';\r\nimport { \r\n  SessionReport, \r\n  AnalyticsFilters, \r\n  AnalyticsSummary, \r\n  ComparisonAnalytics,\r\n  AnalyticsExportOptions,\r\n  FillerWordInstance,\r\n  ScriptAdherenceMetrics,\r\n  PaceAnalysisSegment,\r\n  WPMDataPoint\r\n} from '../types';\r\nimport { analyticsService } from '../services/analyticsService';\r\n\r\nexport interface AnalyticsState {\r\n  // Session reports\r\n  sessionReports: SessionReport[];\r\n  currentSession: SessionReport | null;\r\n  \r\n  // Analytics data\r\n  analyticsSummary: AnalyticsSummary | null;\r\n  comparisonData: ComparisonAnalytics | null;\r\n  \r\n  // UI state\r\n  filters: AnalyticsFilters;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  \r\n  // Cache management\r\n  lastFetchTime: number | null;\r\n  cacheExpiry: number; // 5 minutes\r\n  \r\n  // Export state\r\n  exportInProgress: boolean;\r\n  exportError: string | null;\r\n}\r\n\r\nexport interface AnalyticsActions {\r\n  // Session management\r\n  startSession: (scriptId: string, targetWPM?: number) => Promise<string>;\r\n  endSession: (sessionId: string, reportData: Partial<SessionReport>) => Promise<void>;\r\n  updateSession: (sessionId: string, updates: Partial<SessionReport>) => Promise<void>;\r\n  deleteSession: (sessionId: string) => Promise<void>;\r\n  \r\n  // Data fetching\r\n  fetchSessions: (filters?: AnalyticsFilters) => Promise<void>;\r\n  fetchAnalyticsSummary: (filters?: AnalyticsFilters) => Promise<void>;\r\n  fetchComparisonData: (sessionIds: string[]) => Promise<void>;\r\n  \r\n  // Real-time updates\r\n  subscribeToSessions: (userId: string, callback?: (reports: SessionReport[]) => void) => () => void;\r\n  \r\n  // Filtering and search\r\n  updateFilters: (filters: Partial<AnalyticsFilters>) => void;\r\n  clearFilters: () => void;\r\n  \r\n  // Export functionality\r\n  exportSessions: (options: AnalyticsExportOptions) => Promise<void>;\r\n  \r\n  // Cache management\r\n  clearCache: () => void;\r\n  refreshData: () => Promise<void>;\r\n  \r\n  // Error handling\r\n  clearError: () => void;\r\n}\r\n\r\nexport type AnalyticsStore = AnalyticsState & AnalyticsActions;\r\n\r\nconst getDefaultFilters = (): AnalyticsFilters => ({\r\n  dateRange: {\r\n    start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // Last 30 days\r\n    end: new Date(),\r\n  },\r\n  wpmRange: {\r\n    min: 0,\r\n    max: 300,\r\n  },\r\n  scriptIds: [],\r\n  tags: [],\r\n  minDuration: 0,\r\n  maxDuration: undefined,\r\n});\r\n\r\n// Performance optimizer instance\r\nconst performanceOptimizer = PerformanceOptimizer.getInstance();\r\n\r\nexport const useAnalyticsStore = create<AnalyticsStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Initial state\r\n      sessionReports: [],\r\n      currentSession: null,\r\n      analyticsSummary: null,\r\n      comparisonData: null,\r\n      filters: getDefaultFilters(),\r\n      isLoading: false,\r\n      error: null,\r\n      lastFetchTime: null,\r\n      cacheExpiry: 5 * 60 * 1000, // 5 minutes\r\n      exportInProgress: false,\r\n      exportError: null,\r\n\r\n      // Session management\r\n      startSession: async (scriptId: string, targetWPM: number = 150) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n          const sessionId = await analyticsService.createSession(scriptId, 'current-user', targetWPM);\r\n          \r\n          const newSession: SessionReport = {\r\n            id: sessionId,\r\n            scriptId,\r\n            scriptTitle: '', // Will be populated when script data is available\r\n            userId: 'current-user',\r\n            startTime: new Date(),\r\n            endTime: new Date(), // Will be updated when session ends\r\n            totalDuration: 0,\r\n            targetWPM,\r\n            totalWords: 0,\r\n            wordsSpoken: 0,\r\n            averageWPM: 0,\r\n            paceAnalysis: [],\r\n            fillerWordAnalysis: {\r\n              totalFillerWords: 0,\r\n              fillerRate: 0,\r\n              uniqueFillers: {},\r\n              fillerInstances: [],\r\n              improvementSuggestions: [],\r\n            },\r\n            scriptAdherence: {\r\n              totalScriptWords: 0,\r\n              wordsSpoken: 0,\r\n              adherencePercentage: 0,\r\n              skippedSections: [],\r\n              deviations: [],\r\n              accuracyScore: 0,\r\n            },\r\n            wpmHistory: [],\r\n            pauseAnalysis: [],\r\n            createdAt: new Date(),\r\n          };\r\n          \r\n          set((state) => ({\r\n            currentSession: newSession,\r\n            sessionReports: [newSession, ...state.sessionReports],\r\n            isLoading: false,\r\n          }));\r\n          \r\n          return sessionId;\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to start session',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      endSession: async (sessionId: string, reportData: Partial<SessionReport>) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n          // Transform reportData to match the endSession interface\r\n          const metrics = {\r\n            totalDuration: reportData.totalDuration || 0,\r\n            totalWords: reportData.totalWords || 0,\r\n            wordsSpoken: reportData.wordsSpoken || 0,\r\n            averageWPM: reportData.averageWPM || 0,\r\n            paceAnalysis: reportData.paceAnalysis || [],\r\n            fillerWordAnalysis: reportData.fillerWordAnalysis || {\r\n              totalFillerWords: 0,\r\n              fillerRate: 0,\r\n              uniqueFillers: {},\r\n              fillerInstances: [],\r\n              improvementSuggestions: [],\r\n            },\r\n            scriptAdherence: reportData.scriptAdherence || {\r\n              totalScriptWords: 0,\r\n              wordsSpoken: 0,\r\n              adherencePercentage: 0,\r\n              skippedSections: [],\r\n              deviations: [],\r\n              accuracyScore: 0,\r\n            },\r\n            wpmHistory: reportData.wpmHistory || [],\r\n            pauseAnalysis: reportData.pauseAnalysis || [],\r\n          };\r\n          \r\n          await analyticsService.endSession(sessionId, metrics);\r\n          \r\n          set((state) => ({\r\n            sessionReports: state.sessionReports.map(session =>\r\n              session.id === sessionId \r\n                ? { ...session, ...reportData, endTime: new Date() }\r\n                : session\r\n            ),\r\n            currentSession: state.currentSession?.id === sessionId ? null : state.currentSession,\r\n            isLoading: false,\r\n          }));\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to end session',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      updateSession: async (sessionId: string, updates: Partial<SessionReport>) => {\r\n        try {\r\n          // For now, use updateSessionMetrics with real-time data\r\n          // This is a temporary solution until updateSession is implemented\r\n          await analyticsService.updateSessionMetrics(sessionId, {\r\n            currentWPM: updates.averageWPM,\r\n            currentTime: Date.now(),\r\n          });\r\n          \r\n          set((state) => ({\r\n            sessionReports: state.sessionReports.map(session =>\r\n              session.id === sessionId \r\n                ? { ...session, ...updates }\r\n                : session\r\n            ),\r\n            currentSession: state.currentSession?.id === sessionId \r\n              ? { ...state.currentSession, ...updates }\r\n              : state.currentSession,\r\n          }));\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to update session'\r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      deleteSession: async (sessionId: string) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n          await analyticsService.deleteSession(sessionId);\r\n          \r\n          set((state) => ({\r\n            sessionReports: state.sessionReports.filter(session => session.id !== sessionId),\r\n            currentSession: state.currentSession?.id === sessionId ? null : state.currentSession,\r\n            isLoading: false,\r\n          }));\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to delete session',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      fetchSessions: performanceOptimizer.debounce(async (filters?: AnalyticsFilters) => {\r\n        const currentFilters = filters || get().filters;\r\n        const { lastFetchTime, cacheExpiry } = get();\r\n        \r\n        // Check cache validity\r\n        if (lastFetchTime && Date.now() - lastFetchTime < cacheExpiry) {\r\n          return;\r\n        }\r\n        \r\n        set({ isLoading: true, error: null });\r\n        try {\r\n          const sessions = await analyticsService.getSessions('current-user', currentFilters);\r\n          \r\n          set({\r\n            sessionReports: sessions,\r\n            lastFetchTime: Date.now(),\r\n            isLoading: false,\r\n          });\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to fetch sessions',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      }, 300),\r\n\r\n      fetchAnalyticsSummary: async (filters?: AnalyticsFilters) => {\r\n        const currentFilters = filters || get().filters;\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const summary = await analyticsService.getAnalyticsSummary('current-user', currentFilters);\r\n          \r\n          set({\r\n            analyticsSummary: summary,\r\n            isLoading: false,\r\n          });\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to fetch analytics summary',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      fetchComparisonData: async (sessionIds: string[]) => {\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const comparison = await analyticsService.compareSessions(sessionIds);\r\n          \r\n          set({\r\n            comparisonData: comparison,\r\n            isLoading: false,\r\n          });\r\n        } catch (error) {\r\n          set({ \r\n            error: error instanceof Error ? error.message : 'Failed to fetch comparison data',\r\n            isLoading: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      subscribeToSessions: (userId: string, callback?: (reports: SessionReport[]) => void) => {\r\n        // For now, return a stub unsubscribe function\r\n        // This would need to be implemented in the analytics service\r\n        console.warn('subscribeToSessions not fully implemented yet');\r\n        \r\n        // Return a dummy unsubscribe function\r\n        return () => {\r\n          console.log('Unsubscribed from session updates');\r\n        };\r\n      },\r\n\r\n      updateFilters: (filters: Partial<AnalyticsFilters>) => {\r\n        set((state) => ({\r\n          filters: { ...state.filters, ...filters },\r\n          lastFetchTime: null, // Invalidate cache\r\n        }));\r\n      },\r\n\r\n      clearFilters: () => {\r\n        set({\r\n          filters: getDefaultFilters(),\r\n          lastFetchTime: null,\r\n        });\r\n      },\r\n\r\n      exportSessions: async (options: AnalyticsExportOptions) => {\r\n        set({ exportInProgress: true, exportError: null });\r\n        \r\n        try {\r\n          await analyticsService.exportSessions('current-user', options);\r\n          set({ exportInProgress: false });\r\n        } catch (error) {\r\n          set({ \r\n            exportError: error instanceof Error ? error.message : 'Failed to export sessions',\r\n            exportInProgress: false \r\n          });\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      clearCache: () => {\r\n        set({\r\n          lastFetchTime: null,\r\n          analyticsSummary: null,\r\n          comparisonData: null,\r\n        });\r\n      },\r\n\r\n      refreshData: async () => {\r\n        const { filters } = get();\r\n        set({ lastFetchTime: null });\r\n        \r\n        await Promise.all([\r\n          get().fetchSessions(filters),\r\n          get().fetchAnalyticsSummary(filters),\r\n        ]);\r\n      },\r\n\r\n      clearError: () => {\r\n        set({ error: null, exportError: null });\r\n      },\r\n    }),\r\n    {\r\n      name: 'analytics-store',\r\n      storage: createJSONStorage(() => AsyncStorage),\r\n      partialize: (state) => ({\r\n        sessionReports: state.sessionReports,\r\n        filters: state.filters,\r\n        lastFetchTime: state.lastFetchTime,\r\n      }),\r\n    }\r\n  )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\store\\scriptStore.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'AuthState' is defined but never used.","line":4,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"AuthState"},"fix":{"range":[200,211],"text":""},"desc":"Remove unused variable 'AuthState'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AuthState' is defined but never used.","line":4,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":40},{"ruleId":"no-unused-vars","severity":2,"message":"'SyncState' is defined but never used.","line":4,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"SyncState"},"fix":{"range":[211,222],"text":""},"desc":"Remove unused variable 'SyncState'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SyncState' is defined but never used.","line":4,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51},{"ruleId":"no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":4,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[222,228],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":4,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":56,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":26,"suggestions":[{"fix":{"range":[1763,1814],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":71,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":71,"endColumn":36,"fix":{"range":[2288,2295],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":99,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":26,"suggestions":[{"fix":{"range":[3161,3215],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":113,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":113,"endColumn":37,"fix":{"range":[3622,3629],"text":"{return;}"}},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":141,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":141,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":141,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":141,"endColumn":26,"suggestions":[{"fix":{"range":[4593,4649],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":152,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":152,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":152,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":152,"endColumn":22,"suggestions":[{"fix":{"range":[4983,5034],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":172,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":172,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[5584,5589],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":172,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":172,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":177,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5808,5811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5808,5811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":200,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":200,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[6499,6504],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":200,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6723,6726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6723,6726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":271,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":271,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":271,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":271,"endColumn":24,"suggestions":[{"fix":{"range":[8594,8631],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":304,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":304,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":304,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":304,"endColumn":24,"suggestions":[{"fix":{"range":[9648,9700],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":362,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11351,11354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11351,11354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Script, ScriptStore, AuthState, SyncState, User } from '../types';\r\nimport { authService } from '../services/authService';\r\nimport { syncService } from '../services/syncService';\r\nimport { networkService } from '../services/networkService';\r\n\r\nexport const useScriptStore = create<ScriptStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // State\r\n      scripts: [],\r\n      currentScript: null,\r\n      authState: {\r\n        user: null,\r\n        isLoading: false,\r\n        error: null\r\n      },\r\n      syncState: {\r\n        isOnline: true,\r\n        isSyncing: false,\r\n        lastSyncAt: null,\r\n        pendingOperations: 0,\r\n        syncErrors: []\r\n      },\r\n      \r\n      // Script operations with optimistic updates\r\n      addScript: async (scriptData) => {\r\n        const newScript: Script = {\r\n          ...scriptData,\r\n          id: Date.now().toString(),\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          userId: get().authState.user?.uid,\r\n          syncStatus: 'pending',\r\n          version: 1,\r\n          lastSyncedAt: undefined,\r\n          isDeleted: false\r\n        };\r\n        \r\n        // Optimistic update\r\n        set((state) => ({\r\n          scripts: [newScript, ...state.scripts],\r\n          syncState: {\r\n            ...state.syncState,\r\n            pendingOperations: state.syncState.pendingOperations + 1\r\n          }\r\n        }));\r\n\r\n        // Sync to cloud if online\r\n        if (get().syncState.isOnline && get().authState.user) {\r\n          try {\r\n            await get().syncScripts();\r\n          } catch (error) {\r\n            console.error('Failed to sync new script:', error);\r\n            // Mark as error but keep local copy\r\n            set((state) => ({\r\n              scripts: state.scripts.map(s => \r\n                s.id === newScript.id \r\n                  ? { ...s, syncStatus: 'error' as const }\r\n                  : s\r\n              )\r\n            }));\r\n          }\r\n        }\r\n      },\r\n      \r\n      updateScript: async (id, updates) => {\r\n        const currentScript = get().scripts.find(s => s.id === id);\r\n        if (!currentScript) return;\r\n\r\n        const updatedScript = {\r\n          ...currentScript,\r\n          ...updates,\r\n          updatedAt: new Date(),\r\n          syncStatus: 'pending' as const,\r\n          version: currentScript.version + 1\r\n        };\r\n\r\n        // Optimistic update\r\n        set((state) => ({\r\n          scripts: state.scripts.map((script) =>\r\n            script.id === id ? updatedScript : script\r\n          ),\r\n          currentScript:\r\n            state.currentScript?.id === id ? updatedScript : state.currentScript,\r\n          syncState: {\r\n            ...state.syncState,\r\n            pendingOperations: state.syncState.pendingOperations + 1\r\n          }\r\n        }));\r\n\r\n        // Sync to cloud if online\r\n        if (get().syncState.isOnline && get().authState.user) {\r\n          try {\r\n            await get().syncScripts();\r\n          } catch (error) {\r\n            console.error('Failed to sync script update:', error);\r\n            set((state) => ({\r\n              scripts: state.scripts.map(s => \r\n                s.id === id \r\n                  ? { ...s, syncStatus: 'error' as const }\r\n                  : s\r\n              )\r\n            }));\r\n          }\r\n        }\r\n      },\r\n      \r\n      deleteScript: async (id) => {\r\n        const scriptToDelete = get().scripts.find(s => s.id === id);\r\n        if (!scriptToDelete) return;\r\n\r\n        // Optimistic update - mark as deleted\r\n        const deletedScript = {\r\n          ...scriptToDelete,\r\n          isDeleted: true,\r\n          syncStatus: 'pending' as const,\r\n          updatedAt: new Date()\r\n        };\r\n\r\n        set((state) => ({\r\n          scripts: state.scripts.map(s => s.id === id ? deletedScript : s),\r\n          currentScript: state.currentScript?.id === id ? null : state.currentScript,\r\n          syncState: {\r\n            ...state.syncState,\r\n            pendingOperations: state.syncState.pendingOperations + 1\r\n          }\r\n        }));\r\n\r\n        // Sync deletion to cloud if online\r\n        if (get().syncState.isOnline && get().authState.user) {\r\n          try {\r\n            await get().syncScripts();\r\n            // Remove from local storage after successful sync\r\n            set((state) => ({\r\n              scripts: state.scripts.filter(s => s.id !== id)\r\n            }));\r\n          } catch (error) {\r\n            console.error('Failed to sync script deletion:', error);\r\n            set((state) => ({\r\n              scripts: state.scripts.map(s => \r\n                s.id === id \r\n                  ? { ...s, syncStatus: 'error' as const }\r\n                  : s\r\n              )\r\n            }));\r\n          }\r\n        } else {\r\n          // If offline, keep marked as deleted for later sync\r\n          console.log('Offline: Script marked for deletion');\r\n        }\r\n      },\r\n      \r\n      setCurrentScript: (script) => {\r\n        set({ currentScript: script });\r\n      },\r\n      \r\n      getScriptById: (id) => {\r\n        return get().scripts.find((script) => script.id === id && !script.isDeleted);\r\n      },\r\n      \r\n      // Authentication\r\n      signIn: async (email, password) => {\r\n        set((state) => ({\r\n          authState: { ...state.authState, isLoading: true, error: null }\r\n        }));\r\n\r\n        try {\r\n          const user = await authService.signIn(email, password);\r\n          set((state) => ({\r\n            authState: { user, isLoading: false, error: null }\r\n          }));\r\n          \r\n          // Initialize sync service with user\r\n          syncService.setUser({ uid: user.uid, email: user.email } as any);\r\n          \r\n          // Trigger initial sync\r\n          await get().syncScripts();\r\n        } catch (error) {\r\n          set((state) => ({\r\n            authState: {\r\n              ...state.authState,\r\n              isLoading: false,\r\n              error: error instanceof Error ? error.message : 'Sign in failed'\r\n            }\r\n          }));\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      signUp: async (email, password, displayName) => {\r\n        set((state) => ({\r\n          authState: { ...state.authState, isLoading: true, error: null }\r\n        }));\r\n\r\n        try {\r\n          const user = await authService.signUp(email, password, displayName);\r\n          set((state) => ({\r\n            authState: { user, isLoading: false, error: null }\r\n          }));\r\n          \r\n          // Initialize sync service with user\r\n          syncService.setUser({ uid: user.uid, email: user.email } as any);\r\n        } catch (error) {\r\n          set((state) => ({\r\n            authState: {\r\n              ...state.authState,\r\n              isLoading: false,\r\n              error: error instanceof Error ? error.message : 'Sign up failed'\r\n            }\r\n          }));\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      signOut: async () => {\r\n        try {\r\n          await authService.signOut();\r\n          \r\n          // Clear user data and reset sync service\r\n          syncService.setUser(null);\r\n          \r\n          set({\r\n            authState: { user: null, isLoading: false, error: null },\r\n            scripts: [],\r\n            currentScript: null,\r\n            syncState: {\r\n              isOnline: true,\r\n              isSyncing: false,\r\n              lastSyncAt: null,\r\n              pendingOperations: 0,\r\n              syncErrors: []\r\n            }\r\n          });\r\n        } catch (error) {\r\n          set((state) => ({\r\n            authState: {\r\n              ...state.authState,\r\n              error: error instanceof Error ? error.message : 'Sign out failed'\r\n            }\r\n          }));\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      // Sync operations\r\n      syncScripts: async () => {\r\n        if (get().syncState.isSyncing || !get().authState.user) {\r\n          return;\r\n        }\r\n\r\n        set((state) => ({\r\n          syncState: { ...state.syncState, isSyncing: true }\r\n        }));\r\n\r\n        try {\r\n          const errors = await syncService.syncScripts();\r\n          \r\n          set((state) => ({\r\n            syncState: {\r\n              ...state.syncState,\r\n              isSyncing: false,\r\n              lastSyncAt: new Date(),\r\n              syncErrors: errors,\r\n              pendingOperations: Math.max(0, state.syncState.pendingOperations - 1)\r\n            }\r\n          }));\r\n        } catch (error) {\r\n          console.error('Sync failed:', error);\r\n          set((state) => ({\r\n            syncState: {\r\n              ...state.syncState,\r\n              isSyncing: false,\r\n              syncErrors: [\r\n                ...state.syncState.syncErrors,\r\n                {\r\n                  id: Date.now().toString(),\r\n                  operation: 'update',\r\n                  scriptId: 'unknown',\r\n                  error: error instanceof Error ? error.message : 'Sync failed',\r\n                  timestamp: new Date()\r\n                }\r\n              ]\r\n            }\r\n          }));\r\n        }\r\n      },\r\n      \r\n      resolveConflict: async (scriptId, resolution) => {\r\n        try {\r\n          await syncService.resolveConflict(scriptId, resolution);\r\n          \r\n          // Update local script status\r\n          set((state) => ({\r\n            scripts: state.scripts.map(s => \r\n              s.id === scriptId \r\n                ? { ...s, syncStatus: 'synced' as const }\r\n                : s\r\n            )\r\n          }));\r\n        } catch (error) {\r\n          console.error('Failed to resolve conflict:', error);\r\n        }\r\n      },\r\n      \r\n      retryFailedOperations: async () => {\r\n        const failedScripts = get().scripts.filter(s => s.syncStatus === 'error');\r\n        \r\n        for (const script of failedScripts) {\r\n          // Reset status and retry sync\r\n          set((state) => ({\r\n            scripts: state.scripts.map(s => \r\n              s.id === script.id \r\n                ? { ...s, syncStatus: 'pending' as const }\r\n                : s\r\n            )\r\n          }));\r\n        }\r\n        \r\n        await get().syncScripts();\r\n      },\r\n      \r\n      // Network state\r\n      setOnlineStatus: (isOnline) => {\r\n        set((state) => ({\r\n          syncState: { ...state.syncState, isOnline }\r\n        }));\r\n        \r\n        // Attempt sync when coming back online\r\n        if (isOnline && get().authState.user && get().syncState.pendingOperations > 0) {\r\n          get().syncScripts();\r\n        }\r\n      }\r\n    }),\r\n    {\r\n      name: 'script-storage',\r\n      storage: createJSONStorage(() => AsyncStorage),\r\n      partialize: (state) => ({\r\n        scripts: state.scripts.filter(s => !s.isDeleted), // Only persist non-deleted scripts\r\n      }),\r\n    }\r\n  )\r\n);\r\n\r\n// Initialize network and auth listeners\r\nconst store = useScriptStore.getState();\r\n\r\n// Listen for network changes\r\nnetworkService.addListener((isOnline) => {\r\n  store.setOnlineStatus(isOnline);\r\n});\r\n\r\n// Listen for auth changes\r\nauthService.addAuthStateListener((user) => {\r\n  useScriptStore.setState((state) => ({\r\n    authState: { ...state.authState, user }\r\n  }));\r\n  \r\n  // Set user in sync service\r\n  syncService.setUser(user ? { uid: user.uid, email: user.email } as any : null);\r\n  \r\n  // Sync when user signs in\r\n  if (user) {\r\n    store.syncScripts();\r\n  }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\store\\subscriptionStore.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Purchases' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Purchases"},"fix":{"range":[179,194],"text":""},"desc":"Remove unused variable 'Purchases'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Purchases' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"Platform"},"fix":{"range":[221,261],"text":""},"desc":"Remove unused variable 'Platform'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'subscription' is defined but never used.","line":35,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"subscription"},"fix":{"range":[1012,1038],"text":""},"desc":"Remove unused variable 'subscription'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":36,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier"},"fix":{"range":[1074,1096],"text":""},"desc":"Remove unused variable 'tier'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":39,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier"},"fix":{"range":[1232,1254],"text":""},"desc":"Remove unused variable 'tier'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'productId' is defined but never used.","line":42,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"productId"},"fix":{"range":[1393,1410],"text":""},"desc":"Remove unused variable 'productId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":133,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":133,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":133,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":159,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":159,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":159,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":159,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":205,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":205,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":205,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'__DEV__' is not defined.","line":224,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":224,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":230,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":230,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":230,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":230,"endColumn":24,"suggestions":[{"fix":{"range":[7200,7257],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":266,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":266,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":266,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":266,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":305,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":305,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":305,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":305,"endColumn":23}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport Purchases from 'react-native-purchases';\r\nimport { Platform } from 'react-native';\r\nimport RevenueCatService from '../services/revenueCatService';\r\n\r\nexport type SubscriptionTier = 'free' | 'pro' | 'studio';\r\n\r\nexport interface SubscriptionFeatures {\r\n  maxRecordingDuration: number; // in seconds\r\n  videoQuality: string[];\r\n  watermarkFree: boolean;\r\n  externalDisplay: boolean;\r\n  bluetoothRemote: boolean;\r\n  advancedAnalytics: boolean;\r\n  cloudStorage: number; // in GB\r\n  exportFormats: string[];\r\n}\r\n\r\nexport interface Subscription {\r\n  tier: SubscriptionTier;\r\n  isActive: boolean;\r\n  expiresAt: Date | null;\r\n  features: SubscriptionFeatures;\r\n}\r\n\r\ninterface SubscriptionState {\r\n  subscription: Subscription | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\ninterface SubscriptionActions {\r\n  setSubscription: (subscription: Subscription) => void;\r\n  upgradeSubscription: (tier: SubscriptionTier) => Promise<boolean>;\r\n  cancelSubscription: () => Promise<boolean>;\r\n  checkSubscriptionStatus: () => Promise<void>;\r\n  getFeatures: (tier: SubscriptionTier) => SubscriptionFeatures;\r\n  initializeRevenueCat: () => Promise<void>;\r\n  restorePurchases: () => Promise<boolean>;\r\n  purchaseProduct: (productId: string) => Promise<boolean>;\r\n}\r\n\r\nexport type SubscriptionStore = SubscriptionState & SubscriptionActions;\r\n\r\nconst getSubscriptionFeatures = (tier: SubscriptionTier): SubscriptionFeatures => {\r\n  switch (tier) {\r\n    case 'free':\r\n      return {\r\n        maxRecordingDuration: 600, // 10 minutes\r\n        videoQuality: ['low', 'medium'],\r\n        watermarkFree: false,\r\n        externalDisplay: false,\r\n        bluetoothRemote: false,\r\n        advancedAnalytics: false,\r\n        cloudStorage: 1, // 1GB\r\n        exportFormats: ['mp4'],\r\n      };\r\n    case 'pro':\r\n      return {\r\n        maxRecordingDuration: 3600, // 1 hour\r\n        videoQuality: ['low', 'medium', 'high'],\r\n        watermarkFree: true,\r\n        externalDisplay: true,\r\n        bluetoothRemote: true,\r\n        advancedAnalytics: true,\r\n        cloudStorage: 10, // 10GB\r\n        exportFormats: ['mp4', 'mov', 'avi'],\r\n      };\r\n    case 'studio':\r\n      return {\r\n        maxRecordingDuration: 7200, // 2 hours\r\n        videoQuality: ['low', 'medium', 'high', '4k'],\r\n        watermarkFree: true,\r\n        externalDisplay: true,\r\n        bluetoothRemote: true,\r\n        advancedAnalytics: true,\r\n        cloudStorage: 100, // 100GB\r\n        exportFormats: ['mp4', 'mov', 'avi', 'mkv', 'webm'],\r\n      };\r\n    default:\r\n      return getSubscriptionFeatures('free');\r\n  }\r\n};\r\n\r\nexport const useSubscriptionStore = create<SubscriptionStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Initial state\r\n      subscription: {\r\n        tier: 'free',\r\n        isActive: true,\r\n        expiresAt: null,\r\n        features: getSubscriptionFeatures('free'),\r\n      },\r\n      isLoading: false,\r\n      error: null,\r\n\r\n      // Actions\r\n      setSubscription: (subscription: Subscription) => {\r\n        set({ subscription });\r\n      },\r\n\r\n      upgradeSubscription: async (tier: SubscriptionTier) => {\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const revenueCatService = RevenueCatService.getInstance();\r\n          const productId = tier === 'pro' ? 'speaksync_pro_monthly' : 'speaksync_studio_monthly';\r\n          \r\n          const customerInfo = await revenueCatService.purchaseProduct(productId);\r\n          \r\n          if (customerInfo.activeSubscriptions.includes(productId)) {\r\n            const status = await revenueCatService.checkSubscriptionStatus();\r\n            \r\n            const newSubscription: Subscription = {\r\n              tier,\r\n              isActive: true,\r\n              expiresAt: status.expirationDate || new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n              features: getSubscriptionFeatures(tier),\r\n            };\r\n\r\n            set({ \r\n              subscription: newSubscription,\r\n              isLoading: false \r\n            });\r\n\r\n            return true;\r\n          }\r\n          \r\n          return false;\r\n        } catch (error) {\r\n          set({ \r\n            error: 'Failed to upgrade subscription',\r\n            isLoading: false \r\n          });\r\n          return false;\r\n        }\r\n      },\r\n\r\n      cancelSubscription: async () => {\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const freeSubscription: Subscription = {\r\n            tier: 'free',\r\n            isActive: true,\r\n            expiresAt: null,\r\n            features: getSubscriptionFeatures('free'),\r\n          };\r\n\r\n          set({ \r\n            subscription: freeSubscription,\r\n            isLoading: false \r\n          });\r\n\r\n          return true;\r\n        } catch (error) {\r\n          set({ \r\n            error: 'Failed to cancel subscription',\r\n            isLoading: false \r\n          });\r\n          return false;\r\n        }\r\n      },\r\n\r\n      checkSubscriptionStatus: async () => {\r\n        set({ isLoading: true });\r\n        \r\n        try {\r\n          const revenueCatService = RevenueCatService.getInstance();\r\n          const status = await revenueCatService.checkSubscriptionStatus();\r\n          \r\n          if (status.isActive) {\r\n            // Determine tier based on active subscription\r\n            let tier: SubscriptionTier = 'free';\r\n            if (status.activeSubscriptions.includes('speaksync_studio_monthly')) {\r\n              tier = 'studio';\r\n            } else if (status.activeSubscriptions.includes('speaksync_pro_monthly')) {\r\n              tier = 'pro';\r\n            }\r\n\r\n            const subscription: Subscription = {\r\n              tier,\r\n              isActive: true,\r\n              expiresAt: status.expirationDate || null,\r\n              features: getSubscriptionFeatures(tier),\r\n            };\r\n\r\n            set({ subscription });\r\n          } else {\r\n            // No active subscriptions, set to free\r\n            const freeSubscription: Subscription = {\r\n              tier: 'free',\r\n              isActive: true,\r\n              expiresAt: null,\r\n              features: getSubscriptionFeatures('free'),\r\n            };\r\n\r\n            set({ subscription: freeSubscription });\r\n          }\r\n\r\n          set({ isLoading: false });\r\n        } catch (error) {\r\n          set({ \r\n            error: 'Failed to check subscription status',\r\n            isLoading: false \r\n          });\r\n        }\r\n      },\r\n\r\n      getFeatures: (tier: SubscriptionTier) => {\r\n        return getSubscriptionFeatures(tier);\r\n      },\r\n\r\n      initializeRevenueCat: async () => {\r\n        try {\r\n          const revenueCatService = RevenueCatService.getInstance();\r\n          const apiKey = RevenueCatService.getPlatformApiKey();\r\n          \r\n          await revenueCatService.initialize({\r\n            apiKey,\r\n            debugMode: __DEV__,\r\n          });\r\n          \r\n          // Check current subscription status after initialization\r\n          await get().checkSubscriptionStatus();\r\n        } catch (error) {\r\n          console.error('Failed to initialize RevenueCat:', error);\r\n          set({ error: 'Failed to initialize purchases' });\r\n        }\r\n      },\r\n\r\n      restorePurchases: async () => {\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const revenueCatService = RevenueCatService.getInstance();\r\n          await revenueCatService.restorePurchases();\r\n          \r\n          // Update subscription based on restored purchases\r\n          const status = await revenueCatService.checkSubscriptionStatus();\r\n          \r\n          if (status.isActive) {\r\n            let tier: SubscriptionTier = 'free';\r\n            if (status.activeSubscriptions.includes('speaksync_studio_monthly')) {\r\n              tier = 'studio';\r\n            } else if (status.activeSubscriptions.includes('speaksync_pro_monthly')) {\r\n              tier = 'pro';\r\n            }\r\n\r\n            const subscription: Subscription = {\r\n              tier,\r\n              isActive: true,\r\n              expiresAt: status.expirationDate || null,\r\n              features: getSubscriptionFeatures(tier),\r\n            };\r\n\r\n            set({ subscription, isLoading: false });\r\n            return true;\r\n          }\r\n          \r\n          set({ isLoading: false });\r\n          return false;\r\n        } catch (error) {\r\n          set({ \r\n            error: 'Failed to restore purchases',\r\n            isLoading: false \r\n          });\r\n          return false;\r\n        }\r\n      },\r\n\r\n      purchaseProduct: async (productId: string) => {\r\n        set({ isLoading: true, error: null });\r\n        \r\n        try {\r\n          const revenueCatService = RevenueCatService.getInstance();\r\n          const customerInfo = await revenueCatService.purchaseProduct(productId);\r\n          \r\n          if (customerInfo.activeSubscriptions.includes(productId)) {\r\n            // Determine tier\r\n            let tier: SubscriptionTier = 'free';\r\n            if (productId === 'speaksync_studio_monthly') {\r\n              tier = 'studio';\r\n            } else if (productId === 'speaksync_pro_monthly') {\r\n              tier = 'pro';\r\n            }\r\n            \r\n            const status = await revenueCatService.checkSubscriptionStatus();\r\n\r\n            const subscription: Subscription = {\r\n              tier,\r\n              isActive: true,\r\n              expiresAt: status.expirationDate || null,\r\n              features: getSubscriptionFeatures(tier),\r\n            };\r\n\r\n            set({ subscription, isLoading: false });\r\n            return true;\r\n          }\r\n          \r\n          return false;\r\n        } catch (error) {\r\n          set({ \r\n            error: 'Failed to purchase product',\r\n            isLoading: false \r\n          });\r\n          return false;\r\n        }\r\n      },\r\n    }),\r\n    {\r\n      name: 'subscription-storage',\r\n      storage: createJSONStorage(() => AsyncStorage),\r\n      partialize: (state) => ({\r\n        subscription: state.subscription,\r\n      }),\r\n    }\r\n  )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\maito\\SpeakSyncMobile\\src\\types\\index.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'script' is defined but never used.","line":52,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":96,"suggestions":[{"messageId":"removeVar","data":{"varName":"script"},"fix":{"range":[1066,1147],"text":""},"desc":"Remove unused variable 'script'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":53,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1185,1196],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":53,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[1195,1248],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":54,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1286,1296],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'script' is defined but never used.","line":55,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"script"},"fix":{"range":[1338,1359],"text":""},"desc":"Remove unused variable 'script'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":56,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1389,1399],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":59,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[1461,1475],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":59,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"password"},"fix":{"range":[1474,1492],"text":""},"desc":"Remove unused variable 'password'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":60,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[1524,1538],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'password' is defined but never used.","line":60,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"password"},"fix":{"range":[1537,1555],"text":""},"desc":"Remove unused variable 'password'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'displayName' is defined but never used.","line":60,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayName"},"fix":{"range":[1555,1577],"text":""},"desc":"Remove unused variable 'displayName'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":65,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[1714,1731],"text":""},"desc":"Remove unused variable 'scriptId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'resolution' is defined but never used.","line":65,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"resolution"},"fix":{"range":[1730,1762],"text":""},"desc":"Remove unused variable 'resolution'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isOnline' is defined but never used.","line":69,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOnline"},"fix":{"range":[1874,1891],"text":""},"desc":"Remove unused variable 'isOnline'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":542,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":542,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[12608,12625],"text":""},"desc":"Remove unused variable 'scriptId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'targetWPM' is defined but never used.","line":542,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":542,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"targetWPM"},"fix":{"range":[12624,12643],"text":""},"desc":"Remove unused variable 'targetWPM'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":543,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":543,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[12691,12709],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":543,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":543,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[12708,12741],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":544,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":544,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[12777,12795],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'metrics' is defined but never used.","line":544,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":544,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[12794,12827],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":545,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":545,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[12866,12883],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":548,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":548,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[12951,12977],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":549,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":549,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[13028,13045],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":550,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":550,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[13097,13123],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionIds' is defined but never used.","line":551,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":551,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionIds"},"fix":{"range":[13176,13196],"text":""},"desc":"Remove unused variable 'sessionIds'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":554,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":554,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[13279,13310],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionId' is defined but never used.","line":555,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":555,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionId"},"fix":{"range":[13352,13370],"text":""},"desc":"Remove unused variable 'sessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'format' is defined but never used.","line":555,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":555,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"format"},"fix":{"range":[13369,13393],"text":""},"desc":"Remove unused variable 'format'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'filters' is defined but never used.","line":558,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":558,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[13462,13496],"text":""},"desc":"Remove unused variable 'filters'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'query' is defined but never used.","line":560,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":560,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[13556,13569],"text":""},"desc":"Remove unused variable 'query'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":817,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":817,"endColumn":76,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[19242,19302],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":818,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":818,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[19338,19353],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":818,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":818,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[19352,19376],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":819,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":819,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[19412,19426],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'team' is defined but never used.","line":820,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":820,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"team"},"fix":{"range":[19466,19483],"text":""},"desc":"Remove unused variable 'team'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":823,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":823,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[19540,19555],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is defined but never used.","line":823,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":823,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[19554,19569],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'role' is defined but never used.","line":823,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":823,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"role"},"fix":{"range":[19569,19585],"text":""},"desc":"Remove unused variable 'role'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'message' is defined but never used.","line":823,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":823,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[19585,19603],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'invitationId' is defined but never used.","line":824,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":824,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"invitationId"},"fix":{"range":[19645,19665],"text":""},"desc":"Remove unused variable 'invitationId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'invitationId' is defined but never used.","line":825,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":825,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"invitationId"},"fix":{"range":[19708,19728],"text":""},"desc":"Remove unused variable 'invitationId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":826,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":826,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[19770,19785],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":826,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":826,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[19784,19800],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'role' is defined but never used.","line":826,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":826,"endColumn":68,"suggestions":[{"messageId":"removeVar","data":{"varName":"role"},"fix":{"range":[19800,19816],"text":""},"desc":"Remove unused variable 'role'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":827,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":827,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[19854,19869],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":827,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":827,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[19868,19884],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'folder' is defined but never used.","line":830,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":830,"endColumn":78,"suggestions":[{"messageId":"removeVar","data":{"varName":"folder"},"fix":{"range":[19950,20010],"text":""},"desc":"Remove unused variable 'folder'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'folderId' is defined but never used.","line":831,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":831,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"folderId"},"fix":{"range":[20048,20065],"text":""},"desc":"Remove unused variable 'folderId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updates' is defined but never used.","line":831,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":831,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[20064,20096],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'folderId' is defined but never used.","line":832,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":832,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"folderId"},"fix":{"range":[20134,20150],"text":""},"desc":"Remove unused variable 'folderId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'scriptId' is defined but never used.","line":833,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":833,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"scriptId"},"fix":{"range":[20194,20211],"text":""},"desc":"Remove unused variable 'scriptId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'folderId' is defined but never used.","line":833,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":833,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"folderId"},"fix":{"range":[20210,20235],"text":""},"desc":"Remove unused variable 'folderId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'activity' is defined but never used.","line":836,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":836,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"activity"},"fix":{"range":[20300,20348],"text":""},"desc":"Remove unused variable 'activity'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teamId' is defined but never used.","line":837,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":837,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"teamId"},"fix":{"range":[20396,20410],"text":""},"desc":"Remove unused variable 'teamId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier' is defined but never used.","line":849,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":849,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier"},"fix":{"range":[20715,20737],"text":""},"desc":"Remove unused variable 'tier'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'paymentMethodId' is defined but never used.","line":854,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":854,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"paymentMethodId"},"fix":{"range":[20900,20923],"text":""},"desc":"Remove unused variable 'paymentMethodId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'paymentMethodId' is defined but never used.","line":855,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":855,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"paymentMethodId"},"fix":{"range":[20968,20991],"text":""},"desc":"Remove unused variable 'paymentMethodId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'paymentMethodId' is defined but never used.","line":856,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":856,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"paymentMethodId"},"fix":{"range":[21040,21063],"text":""},"desc":"Remove unused variable 'paymentMethodId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'feature' is defined but never used.","line":859,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":859,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"feature"},"fix":{"range":[21126,21146],"text":""},"desc":"Remove unused variable 'feature'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'feature' is defined but never used.","line":860,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":860,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"feature"},"fix":{"range":[21183,21203],"text":""},"desc":"Remove unused variable 'feature'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'feature' is defined but never used.","line":861,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":861,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"feature"},"fix":{"range":[21236,21256],"text":""},"desc":"Remove unused variable 'feature'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":922,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":922,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23346,23349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23346,23349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1023,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1023,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26076,26079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26076,26079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":61,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface Script {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  userId?: string;\r\n  syncStatus: 'synced' | 'pending' | 'conflict' | 'error';\r\n  lastSyncedAt?: Date;\r\n  isDeleted?: boolean;\r\n  version: number;\r\n  language?: LanguageOption; // Language option with full details\r\n}\r\n\r\nexport interface User {\r\n  uid: string;\r\n  email: string;\r\n  displayName?: string;\r\n  createdAt: Date;\r\n}\r\n\r\nexport interface AuthState {\r\n  user: User | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\nexport interface SyncState {\r\n  isOnline: boolean;\r\n  isSyncing: boolean;\r\n  lastSyncAt: Date | null;\r\n  pendingOperations: number;\r\n  syncErrors: SyncError[];\r\n}\r\n\r\nexport interface SyncError {\r\n  id: string;\r\n  operation: 'create' | 'update' | 'delete';\r\n  scriptId: string;\r\n  error: string;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface ScriptStore {\r\n  // State\r\n  scripts: Script[];\r\n  currentScript: Script | null;\r\n  authState: AuthState;\r\n  syncState: SyncState;\r\n  \r\n  // Script operations\r\n  addScript: (script: Omit<Script, 'id' | 'createdAt' | 'updatedAt' | 'syncStatus' | 'version'>) => Promise<void>;\r\n  updateScript: (id: string, updates: Partial<Pick<Script, 'title' | 'content'>>) => Promise<void>;\r\n  deleteScript: (id: string) => Promise<void>;\r\n  setCurrentScript: (script: Script | null) => void;\r\n  getScriptById: (id: string) => Script | undefined;\r\n  \r\n  // Authentication\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signUp: (email: string, password: string, displayName?: string) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n  \r\n  // Sync operations\r\n  syncScripts: () => Promise<void>;\r\n  resolveConflict: (scriptId: string, resolution: 'local' | 'remote') => Promise<void>;\r\n  retryFailedOperations: () => Promise<void>;\r\n  \r\n  // Network state\r\n  setOnlineStatus: (isOnline: boolean) => void;\r\n}\r\n\r\nexport type RootStackParamList = {\r\n  Home: undefined;\r\n  ScriptEditor: { scriptId?: string };\r\n  Teleprompter: { scriptId: string };\r\n  Analytics: undefined;\r\n  SessionDetail: { sessionId: string };\r\n  Auth: undefined;\r\n  SignIn: undefined;\r\n  SignUp: undefined;\r\n  Profile: undefined;\r\n  Subscription: undefined;\r\n};\r\n\r\nexport interface TeleprompterSettings {\r\n  speed: number;\r\n  fontSize: number;\r\n  fontFamily: string;\r\n  textColor: string;\r\n  backgroundColor: string;\r\n  isScrolling: boolean;\r\n  isMirrored: boolean;\r\n  lineHeight: number;\r\n  textAlign: 'left' | 'center' | 'right';\r\n  padding: number;\r\n}\r\n\r\nexport interface TeleprompterState {\r\n  currentPosition: number;\r\n  totalHeight: number;\r\n  currentParagraph: number;\r\n  totalParagraphs: number;\r\n}\r\n\r\n// Pacing Meter Types\r\nexport interface PacingMeterSettings {\r\n  enabled: boolean;\r\n  targetWPM: number;\r\n  toleranceRange: number; // +/- WPM for green zone\r\n  showVisualMeter: boolean;\r\n  showSessionSummary: boolean;\r\n  colorScheme: {\r\n    optimal: string;    // Green zone\r\n    acceptable: string; // Yellow zone\r\n    poor: string;       // Red zone\r\n  };\r\n}\r\n\r\nexport interface PacingMeterState {\r\n  currentWPM: number;\r\n  targetWPM: number;\r\n  isInOptimalRange: boolean;\r\n  sessionStartTime: number;\r\n  sessionEndTime?: number;\r\n  averageWPM: number;\r\n  wpmHistory: WPMDataPoint[];\r\n  paceAnalysis: PaceAnalysisSegment[];\r\n}\r\n\r\nexport interface WPMDataPoint {\r\n  timestamp: number;\r\n  wpm: number;\r\n  wordIndex: number;\r\n  isOptimal: boolean;\r\n}\r\n\r\nexport interface PaceAnalysisSegment {\r\n  startWordIndex: number;\r\n  endWordIndex: number;\r\n  averageWPM: number;\r\n  status: 'optimal' | 'too-fast' | 'too-slow';\r\n  duration: number;\r\n}\r\n\r\nexport interface SessionSummaryReport {\r\n  sessionId: string;\r\n  scriptId: string;\r\n  startTime: number;\r\n  endTime: number;\r\n  totalWords: number;\r\n  averageWPM: number;\r\n  targetWPM: number;\r\n  optimalPercentage: number;\r\n  segments: PaceAnalysisSegment[];\r\n  fillerWords: FillerWordDetection[];\r\n  recommendations: string[];\r\n}\r\n\r\n// Filler Word Detection Types\r\nexport interface FillerWordSettings {\r\n  enabled: boolean;\r\n  fillerWords: string[];\r\n  visualCueType: 'icon' | 'highlight' | 'underline' | 'shake';\r\n  iconType: 'warning' | 'alert' | 'circle' | 'dot';\r\n  cueColor: string;\r\n  showInRealTime: boolean;\r\n  trackInSession: boolean;\r\n  sensitivity: 'low' | 'medium' | 'high';\r\n}\r\n\r\nexport interface FillerWordDetection {\r\n  word: string;\r\n  timestamp: number;\r\n  wordIndex: number;\r\n  confidence: number;\r\n  detectionMethod: 'stt' | 'rule-based';\r\n  position: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n}\r\n\r\nexport interface FillerWordState {\r\n  detectedFillers: FillerWordDetection[];\r\n  totalFillerCount: number;\r\n  fillerRate: number; // Fillers per minute\r\n  sessionStartTime: number;\r\n  commonFillers: {\r\n    [word: string]: number;\r\n  };\r\n}\r\n\r\n// Script Analysis Types\r\nexport interface ScriptAnalysis {\r\n  scriptId: string;\r\n  totalWords: number;\r\n  totalSentences: number;\r\n  totalParagraphs: number;\r\n  words: ScriptWord[];\r\n  sentences: ScriptSentence[];\r\n  paragraphs: ScriptParagraph[];\r\n  averageWordsPerSentence: number;\r\n  estimatedReadingTime: number; // in minutes\r\n}\r\n\r\nexport interface ScriptWord {\r\n  word: string;\r\n  index: number;\r\n  position: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n  sentence: number;\r\n  paragraph: number;\r\n}\r\n\r\nexport interface ScriptSentence {\r\n  text: string;\r\n  index: number;\r\n  wordRange: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n  paragraph: number;\r\n  startIndex: number;\r\n  endIndex: number;\r\n}\r\n\r\nexport interface ScriptParagraph {\r\n  text: string;\r\n  index: number;\r\n  wordRange: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n  sentenceRange: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n  startIndex: number;\r\n  endIndex: number;\r\n  wordCount: number;\r\n}\r\n\r\n// Karaoke Types (legacy compatibility)\r\nexport interface KaraokeState {\r\n  currentWordIndex: number;\r\n  highlightedWords: number[];\r\n  matchedWords: WordMatch[];\r\n  scriptWords: string[];\r\n  isActive: boolean;\r\n  currentSentence: number;\r\n  totalSentences: number;\r\n  accuracy: number;\r\n  wordsPerMinute: number;\r\n  sessionStartTime: number;\r\n}\r\n\r\nexport interface KaraokeHighlightSettings {\r\n  enabled: boolean;\r\n  highlightColor: string;\r\n  highlightBackgroundColor: string;\r\n  autoScroll: boolean;\r\n  scrollOffset: number;\r\n  matchThreshold: number;\r\n  highlightDuration: number;\r\n  animationDuration: number;\r\n  fadeOutDelay: number;\r\n}\r\n\r\nexport interface WordMatch {\r\n  wordIndex: number;\r\n  confidence: number;\r\n  timestamp: number;\r\n  matched: boolean;\r\n  similarity: number;\r\n  scriptWord: string;\r\n  spokenWord: string;\r\n  isExact: boolean;\r\n}\r\n\r\n// Adaptive Scroll Types (legacy compatibility)\r\nexport interface AdaptiveScrollSettings {\r\n  enabled: boolean;\r\n  baseScrollSpeed: number;\r\n  responsiveness: number;\r\n  smoothingFactor: number;\r\n  pauseThreshold: number;\r\n  accelerationLimit: number;\r\n  decelerationLimit: number;\r\n  lookAheadWords: number;\r\n  bufferZone: number;\r\n}\r\n\r\nexport interface SpeechPaceMetrics {\r\n  currentWPM: number;\r\n  averageWPM: number;\r\n  instantaneousWPM: number;\r\n  timeSinceLastWord: number;\r\n  speechDuration: number;\r\n  totalWordsSpoken: number;\r\n  isPaused: boolean;\r\n  isAccelerating: boolean;\r\n  paceTrend: 'stable' | 'accelerating' | 'decelerating';\r\n  confidenceLevel: number;\r\n}\r\n\r\nexport interface ScrollState {\r\n  currentPosition: number;\r\n  targetPosition: number;\r\n  velocity: number;\r\n  acceleration: number;\r\n  adaptiveSpeed: number;\r\n  isUserControlled: boolean;\r\n  lastUpdateTime: number;\r\n  smoothingBuffer: number[];\r\n}\r\n\r\n// Speech Recognition Types\r\nexport interface SpeechRecognitionState {\r\n  isListening: boolean;\r\n  transcript: string;\r\n  currentTranscript: string;\r\n  finalTranscript: string;\r\n  confidence: number;\r\n  error: string | null;\r\n  isEnabled: boolean;\r\n  language: string;\r\n  isProcessing: boolean;\r\n  isRecording: boolean;\r\n  lastWordTimestamp: number;\r\n  hasPermission: boolean;\r\n  isConnected: boolean;\r\n  mode: 'deepgram' | 'device';\r\n}\r\n\r\nexport interface AudioPermissions {\r\n  granted: boolean;\r\n  canAskAgain: boolean;\r\n  status: 'granted' | 'denied' | 'undetermined';\r\n}\r\n\r\nexport interface TranscriptionResult {\r\n  transcript: string;\r\n  confidence: number;\r\n  isFinal: boolean;\r\n  timestamp: number;\r\n  words?: Array<{\r\n    word: string;\r\n    confidence: number;\r\n    startTime: number;\r\n    endTime: number;\r\n  }>;\r\n}\r\n\r\nexport interface SpeechConfig {\r\n  language: string;\r\n  model: string;\r\n  punctuate: boolean;\r\n  profanityFilter: boolean;\r\n  keywords: string[];\r\n  enableWordTimestamps: boolean;\r\n  smartFormat: boolean;\r\n  deepgramApiKey: string;\r\n  redact: string[];\r\n  detectLanguage: boolean;\r\n  enableUtteranceEndMarker: boolean;\r\n}\r\n\r\n// Word Timing Types\r\nexport interface WordTiming {\r\n  wordIndex: number;\r\n  word: string;\r\n  timestamp: number;\r\n  confidence: number;\r\n  estimatedPosition?: number;\r\n  cumulativeWPM: number;\r\n  instantWPM: number;\r\n}\r\n\r\n// Analytics Types\r\nexport interface SessionReport {\r\n  id: string;\r\n  scriptId: string;\r\n  scriptTitle: string;\r\n  userId: string;\r\n  startTime: Date;\r\n  endTime: Date;\r\n  totalDuration: number; // milliseconds\r\n  totalWords: number;\r\n  wordsSpoken: number;\r\n  averageWPM: number;\r\n  targetWPM: number;\r\n  paceAnalysis: PaceAnalysisSegment[];\r\n  fillerWordAnalysis: FillerWordAnalysis;\r\n  scriptAdherence: ScriptAdherenceMetrics;\r\n  wpmHistory: WPMDataPoint[];\r\n  pauseAnalysis: PauseAnalysis[];\r\n  createdAt: Date;\r\n  tags?: string[];\r\n  notes?: string;\r\n}\r\n\r\nexport interface ScriptAdherenceMetrics {\r\n  totalScriptWords: number;\r\n  wordsSpoken: number;\r\n  adherencePercentage: number;\r\n  skippedSections: SkippedSection[];\r\n  deviations: ScriptDeviation[];\r\n  accuracyScore: number;\r\n}\r\n\r\nexport interface SkippedSection {\r\n  startWordIndex: number;\r\n  endWordIndex: number;\r\n  text: string;\r\n  duration: number;\r\n}\r\n\r\nexport interface ScriptDeviation {\r\n  scriptWordIndex: number;\r\n  expectedWord: string;\r\n  spokenWord: string;\r\n  confidence: number;\r\n  timestamp: number;\r\n  type: 'substitution' | 'insertion' | 'deletion' | 'improvisation';\r\n}\r\n\r\nexport interface FillerWordAnalysis {\r\n  totalFillerWords: number;\r\n  fillerRate: number; // fillers per minute\r\n  uniqueFillers: { [word: string]: number };\r\n  fillerInstances: FillerWordInstance[];\r\n  improvementSuggestions: string[];\r\n}\r\n\r\nexport interface FillerWordInstance {\r\n  word: string;\r\n  timestamp: number;\r\n  wordIndex: number;\r\n  context: string;\r\n  confidence: number;\r\n}\r\n\r\nexport interface PauseAnalysis {\r\n  startTime: number;\r\n  endTime: number;\r\n  duration: number;\r\n  type: 'natural' | 'hesitation' | 'technical';\r\n  context: string;\r\n  wordIndex: number;\r\n}\r\n\r\nexport interface AnalyticsFilters {\r\n  dateRange?: {\r\n    start: Date;\r\n    end: Date;\r\n  };\r\n  scriptIds?: string[];\r\n  tags?: string[];\r\n  minDuration?: number;\r\n  maxDuration?: number;\r\n  wpmRange?: {\r\n    min?: number;\r\n    max?: number;\r\n  };\r\n}\r\n\r\nexport interface AnalyticsSummary {\r\n  totalSessions: number;\r\n  totalPracticeTime: number; // milliseconds\r\n  averageSessionDuration: number;\r\n  averageWPM: number;\r\n  improvementTrend: number; // percentage change\r\n  fillerWordTrend: number;\r\n  mostPracticedScript: {\r\n    id: string;\r\n    title: string;\r\n    sessionCount: number;\r\n  };\r\n  performanceMetrics: {\r\n    consistency: number; // 0-100\r\n    accuracy: number; // 0-100\r\n    fluency: number; // 0-100\r\n  };\r\n  weeklyStats: WeeklyAnalytics[];\r\n}\r\n\r\nexport interface WeeklyAnalytics {\r\n  week: string; // ISO week\r\n  sessionCount: number;\r\n  totalDuration: number;\r\n  averageWPM: number;\r\n  fillerWordRate: number;\r\n  adherenceScore: number;\r\n}\r\n\r\nexport interface AnalyticsExportOptions {\r\n  format: 'csv' | 'pdf' | 'json' | 'excel';\r\n  includeCharts?: boolean;\r\n  includeRawData?: boolean;\r\n  includeSummary?: boolean;\r\n  dateRange?: {\r\n    start: Date;\r\n    end: Date;\r\n  };\r\n  sessionIds?: string[];\r\n}\r\n\r\nexport interface ComparisonAnalytics {\r\n  sessions: SessionReport[];\r\n  metrics: {\r\n    wpmProgress: number;\r\n    fillerWordImprovement: number;\r\n    adherenceImprovement: number;\r\n    consistencyScore: number;\r\n  };\r\n  trends: {\r\n    wpm: TrendData[];\r\n    fillerWords: TrendData[];\r\n    adherence: TrendData[];\r\n  };\r\n  insights: string[];\r\n  recommendations: string[];\r\n}\r\n\r\nexport interface TrendData {\r\n  date: Date;\r\n  value: number;\r\n  sessionId: string;\r\n}\r\n\r\nexport interface AnalyticsStore {\r\n  // State\r\n  sessions: SessionReport[];\r\n  currentSession: SessionReport | null;\r\n  summary: AnalyticsSummary | null;\r\n  filters: AnalyticsFilters;\r\n  loading: boolean;\r\n  \r\n  // Session operations\r\n  createSession: (scriptId: string, targetWPM: number) => Promise<SessionReport>;\r\n  updateSession: (sessionId: string, updates: Partial<SessionReport>) => Promise<void>;\r\n  endSession: (sessionId: string, metrics: Partial<SessionReport>) => Promise<void>;\r\n  deleteSession: (sessionId: string) => Promise<void>;\r\n  \r\n  // Analytics operations\r\n  getSessions: (filters?: AnalyticsFilters) => Promise<SessionReport[]>;\r\n  getSessionById: (sessionId: string) => Promise<SessionReport | null>;\r\n  getSummary: (filters?: AnalyticsFilters) => Promise<AnalyticsSummary>;\r\n  compareSessions: (sessionIds: string[]) => Promise<ComparisonAnalytics>;\r\n  \r\n  // Export operations\r\n  exportSessions: (options: AnalyticsExportOptions) => Promise<string>;\r\n  generateReport: (sessionId: string, format: 'pdf' | 'html') => Promise<string>;\r\n  \r\n  // Filtering and search\r\n  setFilters: (filters: Partial<AnalyticsFilters>) => void;\r\n  clearFilters: () => void;\r\n  searchSessions: (query: string) => Promise<SessionReport[]>;\r\n}\r\n\r\n// Team Management Types\r\nexport type TeamRole = 'owner' | 'admin' | 'editor' | 'viewer';\r\n\r\nexport interface Team {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  ownerId: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  settings: TeamSettings;\r\n  stats: TeamStats;\r\n  subscriptionTier: SubscriptionTier;\r\n}\r\n\r\nexport interface TeamMember {\r\n  id: string;\r\n  teamId: string;\r\n  userId: string;\r\n  email: string;\r\n  displayName?: string;\r\n  role: TeamRole;\r\n  joinedAt: Date;\r\n  lastActiveAt: Date;\r\n  invitedBy: string;\r\n}\r\n\r\nexport interface TeamInvitation {\r\n  id: string;\r\n  teamId: string;\r\n  teamName: string;\r\n  email: string;\r\n  role: TeamRole;\r\n  invitedBy: string;\r\n  invitedByName: string;\r\n  createdAt: Date;\r\n  expiresAt: Date;\r\n  status: 'pending' | 'accepted' | 'declined' | 'expired';\r\n  message?: string;\r\n}\r\n\r\nexport interface TeamSettings {\r\n  allowMemberInvites: boolean;\r\n  defaultMemberRole: TeamRole;\r\n  requireApprovalForJoining: boolean;\r\n  allowPublicScripts: boolean;\r\n  maxMembers: number;\r\n  enableActivityLog: boolean;\r\n  enableRealTimeCollaboration: boolean;\r\n}\r\n\r\nexport interface TeamStats {\r\n  memberCount: number;\r\n  scriptCount: number;\r\n  folderCount: number;\r\n  totalStorageUsed: number; // in bytes\r\n  lastActivityAt: Date;\r\n  activeMembers: number; // members active in last 30 days\r\n}\r\n\r\nexport interface TeamActivity {\r\n  id: string;\r\n  teamId: string;\r\n  userId: string;\r\n  userDisplayName: string;\r\n  action: TeamActivityAction;\r\n  targetType: 'script' | 'folder' | 'member' | 'team' | 'invitation';\r\n  targetId: string;\r\n  targetName: string;\r\n  metadata?: Record<string, unknown>;\r\n  timestamp: Date;\r\n}\r\n\r\nexport type TeamActivityAction = \r\n  | 'created'\r\n  | 'updated' \r\n  | 'deleted'\r\n  | 'shared'\r\n  | 'moved'\r\n  | 'invited'\r\n  | 'joined'\r\n  | 'left'\r\n  | 'role_changed'\r\n  | 'permissions_changed';\r\n\r\nexport interface ScriptFolder {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  parentId?: string;\r\n  teamId?: string;\r\n  userId: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  scriptIds: string[];\r\n  permissions?: FolderPermissions;\r\n  color?: string;\r\n  icon?: string;\r\n}\r\n\r\nexport interface FolderPermissions {\r\n  canRead: TeamRole[];\r\n  canWrite: TeamRole[];\r\n  canDelete: TeamRole[];\r\n  canShare: TeamRole[];\r\n}\r\n\r\n// Subscription Management Types\r\nexport type SubscriptionTier = 'free' | 'personal' | 'business' | 'enterprise';\r\n\r\nexport type SubscriptionStatus = \r\n  | 'active'\r\n  | 'canceled' \r\n  | 'past_due'\r\n  | 'unpaid'\r\n  | 'incomplete'\r\n  | 'incomplete_expired'\r\n  | 'trialing'\r\n  | 'paused';\r\n\r\nexport interface Subscription {\r\n  id: string;\r\n  userId: string;\r\n  tier: SubscriptionTier;\r\n  status: SubscriptionStatus;\r\n  currentPeriodStart: Date;\r\n  currentPeriodEnd: Date;\r\n  cancelAtPeriodEnd: boolean;\r\n  trialStart?: Date;\r\n  trialEnd?: Date;\r\n  stripeCustomerId?: string;\r\n  stripeSubscriptionId?: string;\r\n  revenueCatUserId?: string;\r\n  features: SubscriptionFeatures;\r\n  usage: SubscriptionUsage;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface SubscriptionFeatures {\r\n  maxScripts: number;\r\n  maxTeams: number;\r\n  maxTeamMembers: number;\r\n  maxStorageGB: number;\r\n  cloudSync: boolean;\r\n  teamCollaboration: boolean;\r\n  advancedAnalytics: boolean;\r\n  prioritySupport: boolean;\r\n  customBranding: boolean;\r\n  apiAccess: boolean;\r\n  exportOptions: string[];\r\n  integrations: string[];\r\n}\r\n\r\nexport interface SubscriptionUsage {\r\n  scriptsUsed: number;\r\n  teamsUsed: number;\r\n  storageUsedGB: number;\r\n  teamMembersUsed: number;\r\n  lastUpdated: Date;\r\n}\r\n\r\nexport interface PaymentMethod {\r\n  id: string;\r\n  type: 'card' | 'paypal' | 'bank_account';\r\n  last4?: string;\r\n  brand?: string;\r\n  expiryMonth?: number;\r\n  expiryYear?: number;\r\n  isDefault: boolean;\r\n  stripePaymentMethodId?: string;\r\n}\r\n\r\nexport interface BillingInfo {\r\n  customerId: string;\r\n  email: string;\r\n  name?: string;\r\n  address?: {\r\n    line1: string;\r\n    line2?: string;\r\n    city: string;\r\n    state: string;\r\n    postal_code: string;\r\n    country: string;\r\n  };\r\n  taxId?: string;\r\n  paymentMethods: PaymentMethod[];\r\n  defaultPaymentMethodId?: string;\r\n}\r\n\r\nexport interface Invoice {\r\n  id: string;\r\n  subscriptionId: string;\r\n  amount: number;\r\n  currency: string;\r\n  status: 'draft' | 'open' | 'paid' | 'uncollectible' | 'void';\r\n  createdAt: Date;\r\n  dueDate: Date;\r\n  paidAt?: Date;\r\n  hostedInvoiceUrl?: string;\r\n  invoicePdf?: string;\r\n  stripeInvoiceId?: string;\r\n}\r\n\r\n// Feature Gate Types\r\nexport interface FeatureGate {\r\n  feature: string;\r\n  enabled: boolean;\r\n  tier: SubscriptionTier;\r\n  reason?: string;\r\n  upgradeUrl?: string;\r\n}\r\n\r\nexport type FeatureName = \r\n  | 'unlimited_scripts'\r\n  | 'team_collaboration'\r\n  | 'advanced_analytics'\r\n  | 'priority_support'\r\n  | 'custom_branding'\r\n  | 'api_access'\r\n  | 'bulk_export'\r\n  | 'integrations'\r\n  | 'real_time_collaboration'\r\n  | 'version_history';\r\n\r\n// Enhanced Script type with team support\r\nexport interface ScriptWithTeam extends Script {\r\n  teamId?: string;\r\n  folderId?: string;\r\n  permissions?: ScriptPermissions;\r\n  sharedWith?: string[];\r\n  isPublic?: boolean;\r\n  teamName?: string;\r\n  folderName?: string;\r\n}\r\n\r\nexport interface ScriptPermissions {\r\n  canRead: TeamRole[];\r\n  canWrite: TeamRole[];\r\n  canDelete: TeamRole[];\r\n  canShare: TeamRole[];\r\n}\r\n\r\n// Store Extensions for Team Support\r\nexport interface TeamStore {\r\n  // Team state\r\n  currentTeam: Team | null;\r\n  teams: Team[];\r\n  teamMembers: TeamMember[];\r\n  teamInvitations: TeamInvitation[];\r\n  teamActivity: TeamActivity[];\r\n  scriptFolders: ScriptFolder[];\r\n  \r\n  // Team operations\r\n  createTeam: (team: Omit<Team, 'id' | 'createdAt' | 'updatedAt' | 'stats'>) => Promise<void>;\r\n  updateTeam: (teamId: string, updates: Partial<Team>) => Promise<void>;\r\n  deleteTeam: (teamId: string) => Promise<void>;\r\n  setCurrentTeam: (team: Team | null) => void;\r\n  \r\n  // Member management\r\n  inviteMember: (teamId: string, email: string, role: TeamRole, message?: string) => Promise<void>;\r\n  acceptInvitation: (invitationId: string) => Promise<void>;\r\n  declineInvitation: (invitationId: string) => Promise<void>;\r\n  updateMemberRole: (teamId: string, userId: string, role: TeamRole) => Promise<void>;\r\n  removeMember: (teamId: string, userId: string) => Promise<void>;\r\n  \r\n  // Folder management\r\n  createFolder: (folder: Omit<ScriptFolder, 'id' | 'createdAt' | 'updatedAt'>) => Promise<void>;\r\n  updateFolder: (folderId: string, updates: Partial<ScriptFolder>) => Promise<void>;\r\n  deleteFolder: (folderId: string) => Promise<void>;\r\n  moveScriptToFolder: (scriptId: string, folderId: string | null) => Promise<void>;\r\n  \r\n  // Activity and sync\r\n  logActivity: (activity: Omit<TeamActivity, 'id' | 'timestamp'>) => Promise<void>;\r\n  subscribeToTeamUpdates: (teamId: string) => () => void;\r\n}\r\n\r\nexport interface SubscriptionStore {\r\n  // Subscription state\r\n  subscription: Subscription | null;\r\n  billingInfo: BillingInfo | null;\r\n  invoices: Invoice[];\r\n  isLoading: boolean;\r\n  \r\n  // Subscription operations\r\n  getSubscription: () => Promise<void>;\r\n  updateSubscription: (tier: SubscriptionTier) => Promise<void>;\r\n  cancelSubscription: () => Promise<void>;\r\n  reactivateSubscription: () => Promise<void>;\r\n  \r\n  // Payment operations\r\n  addPaymentMethod: (paymentMethodId: string) => Promise<void>;\r\n  removePaymentMethod: (paymentMethodId: string) => Promise<void>;\r\n  setDefaultPaymentMethod: (paymentMethodId: string) => Promise<void>;\r\n  \r\n  // Feature gating\r\n  checkFeature: (feature: FeatureName) => FeatureGate;\r\n  canUseFeature: (feature: FeatureName) => boolean;\r\n  getUpgradeUrl: (feature: FeatureName) => string | null;\r\n  \r\n  // Usage tracking\r\n  updateUsage: () => Promise<void>;\r\n  checkUsageLimits: () => Promise<void>;\r\n}\r\n\r\n// Multi-language Support Types\r\nexport interface LanguageOption {\r\n  code: string; // ISO 639-1 language code (e.g., 'en', 'es', 'fr')\r\n  name: string; // Display name (e.g., 'English', 'Espaol', 'Franais')\r\n  nativeName: string; // Native name (e.g., 'English', 'Espaol', 'Franais')\r\n  rtl: boolean; // Right-to-left text direction\r\n  flag: string; // Unicode flag emoji or country code\r\n  deepgramModel: string; // Deepgram model identifier\r\n  supported: boolean; // Whether this language is currently supported\r\n}\r\n\r\nexport interface ScriptLanguage {\r\n  scriptId: string;\r\n  language: LanguageOption;\r\n  detectedLanguage?: LanguageOption; // Auto-detected language\r\n  confidence?: number; // Detection confidence (0-1)\r\n  userOverride: boolean; // Whether user manually selected language\r\n}\r\n\r\nexport interface MultiLanguageSettings {\r\n  autoDetectLanguage: boolean;\r\n  defaultLanguage: LanguageOption;\r\n  fallbackLanguage: LanguageOption;\r\n  enableRTLSupport: boolean;\r\n  showLanguageFlags: boolean;\r\n  enableTranslationSuggestions: boolean;\r\n}\r\n\r\n// Gamification Types\r\nexport interface UserStreak {\r\n  currentStreak: number;\r\n  longestStreak: number;\r\n  lastPracticeDate: Date;\r\n  streakType: 'daily' | 'weekly';\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface Achievement {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: string; // Emoji or icon name\r\n  category: 'sessions' | 'performance' | 'consistency' | 'milestones' | 'language';\r\n  requirement: AchievementRequirement;\r\n  unlockedAt?: Date;\r\n  isSecret: boolean; // Hidden until unlocked\r\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\r\n  points: number; // XP points awarded\r\n}\r\n\r\nexport interface AchievementRequirement {\r\n  type: 'sessions_count' | 'wpm_target' | 'filler_reduction' | 'streak_days' | 'languages_used' | 'total_time' | 'consistency_score';\r\n  target: number;\r\n  timeframe?: 'all_time' | 'monthly' | 'weekly' | 'daily';\r\n  conditions?: { [key: string]: any }; // Additional conditions\r\n}\r\n\r\nexport interface UserProgress {\r\n  level: number;\r\n  totalXP: number;\r\n  xpToNextLevel: number;\r\n  totalSessions: number;\r\n  totalTimeMinutes: number;\r\n  achievements: Achievement[];\r\n  streaks: UserStreak[];\r\n  stats: ProgressStats;\r\n}\r\n\r\nexport interface ProgressStats {\r\n  averageWPM: number;\r\n  bestWPM: number;\r\n  fillerWordRate: number; // Filler words per minute\r\n  consistencyScore: number; // 0-100 consistency rating\r\n  languagesUsed: string[]; // Language codes\r\n  improvementTrends: ProgressTrend[];\r\n}\r\n\r\nexport interface ProgressTrend {\r\n  metric: 'wpm' | 'filler_rate' | 'consistency' | 'session_length';\r\n  timeframe: 'week' | 'month' | 'quarter' | 'year';\r\n  data: ProgressDataPoint[];\r\n  trend: 'improving' | 'stable' | 'declining';\r\n  changePercent: number;\r\n}\r\n\r\nexport interface ProgressDataPoint {\r\n  timestamp: number;\r\n  value: number;\r\n  sessionCount: number;\r\n  note?: string;\r\n}\r\n\r\nexport interface SocialShare {\r\n  platform: 'twitter' | 'linkedin' | 'facebook' | 'instagram' | 'clipboard';\r\n  achievementId: string;\r\n  customMessage?: string;\r\n  includeStats: boolean;\r\n  imageUrl?: string;\r\n}\r\n\r\n// Feedback System Types\r\nexport interface FeedbackSubmission {\r\n  id: string;\r\n  type: 'bug_report' | 'feature_request' | 'general_feedback' | 'improvement_suggestion';\r\n  category: 'ui_ux' | 'performance' | 'features' | 'content' | 'technical' | 'other';\r\n  title: string;\r\n  description: string;\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n  attachments?: FeedbackAttachment[];\r\n  diagnostics?: DiagnosticInfo;\r\n  userContact?: UserContactInfo;\r\n  status: 'submitted' | 'reviewing' | 'in_progress' | 'resolved' | 'closed';\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  userId?: string;\r\n  isAnonymous: boolean;\r\n}\r\n\r\nexport interface FeedbackAttachment {\r\n  id: string;\r\n  type: 'screenshot' | 'video' | 'log_file' | 'other';\r\n  filename: string;\r\n  size: number;\r\n  url?: string;\r\n  localPath?: string;\r\n  description?: string;\r\n}\r\n\r\nexport interface DiagnosticInfo {\r\n  appVersion: string;\r\n  buildNumber: string;\r\n  platform: 'ios' | 'android' | 'web';\r\n  osVersion: string;\r\n  deviceModel: string;\r\n  deviceId: string; // Anonymized device identifier\r\n  memoryUsage: number;\r\n  diskSpace: number;\r\n  networkStatus: 'online' | 'offline' | 'poor';\r\n  lastError?: ErrorInfo;\r\n  recentActions: UserAction[];\r\n  performance: PerformanceInfo;\r\n}\r\n\r\nexport interface ErrorInfo {\r\n  message: string;\r\n  stack?: string;\r\n  timestamp: number;\r\n  context: string; // Which screen/feature\r\n  userAction: string; // What user was trying to do\r\n}\r\n\r\nexport interface UserAction {\r\n  action: string;\r\n  screen: string;\r\n  timestamp: number;\r\n  data?: { [key: string]: any };\r\n}\r\n\r\nexport interface PerformanceInfo {\r\n  averageFPS: number;\r\n  memoryLeaks: boolean;\r\n  crashCount: number;\r\n  slowOperations: string[];\r\n  renderTimes: number[];\r\n}\r\n\r\nexport interface UserContactInfo {\r\n  email?: string;\r\n  preferredContactMethod: 'email' | 'in_app' | 'none';\r\n  allowFollowUp: boolean;\r\n  timezone: string;\r\n}\r\n\r\nexport interface FeedbackSettings {\r\n  enableAutoSubmission: boolean;\r\n  includeDiagnostics: boolean;\r\n  allowScreenshots: boolean;\r\n  shareUsageData: boolean;\r\n  contactPreferences: UserContactInfo;\r\n  categories: FeedbackCategory[];\r\n}\r\n\r\nexport interface FeedbackCategory {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  isDefault: boolean;\r\n  requiresAttachment: boolean;\r\n  suggestedActions: string[];\r\n}\r\n\r\n// Extended Script interface with language support\r\nexport interface ExtendedScript extends Script {\r\n  language: LanguageOption;\r\n  detectedLanguage?: LanguageOption;\r\n  languageConfidence?: number;\r\n  isMultilingual: boolean;\r\n  textDirection: 'ltr' | 'rtl' | 'auto';\r\n  characterSet: string; // Unicode character set info\r\n}\r\n\r\n// Enhanced Analytics with Gamification\r\nexport interface EnhancedAnalytics {\r\n  sessions: SessionSummaryReport[];\r\n  progress: UserProgress;\r\n  achievements: Achievement[];\r\n  trends: ProgressTrend[];\r\n  languageUsage: LanguageUsageStats[];\r\n  gamificationData: GamificationData;\r\n}\r\n\r\nexport interface LanguageUsageStats {\r\n  language: LanguageOption;\r\n  sessionCount: number;\r\n  totalTime: number;\r\n  averageWPM: number;\r\n  accuracyRate: number;\r\n  lastUsed: Date;\r\n}\r\n\r\nexport interface GamificationData {\r\n  currentLevel: number;\r\n  totalXP: number;\r\n  weeklyXP: number;\r\n  monthlyXP: number;\r\n  recentAchievements: Achievement[];\r\n  activeStreaks: UserStreak[];\r\n  leaderboardPosition?: number;\r\n  weeklyGoals: WeeklyGoal[];\r\n}\r\n\r\nexport interface WeeklyGoal {\r\n  id: string;\r\n  type: 'sessions' | 'time' | 'improvement' | 'languages';\r\n  target: number;\r\n  current: number;\r\n  description: string;\r\n  xpReward: number;\r\n  isCompleted: boolean;\r\n  weekStart: Date;\r\n}\r\n","usedDeprecatedRules":[]}]
